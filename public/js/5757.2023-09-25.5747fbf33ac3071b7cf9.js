(self.webpackChunk=self.webpackChunk||[]).push([[5757],{55757:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var s=a(80455);const n={components:{VueNumeric:a.n(s)()},props:["lineList","btnTrans"],data:function(){return{text:{listFix:"ยอดจำหน่ายบุหรี่ ยาเส้น-สโมสร กทม.",total:"ยอดรวม",notInformation:"ไม่มีข้อมูล"},totalAdjust:"",totaVatAmountCalculate:"",totalAmountAdjustGLTable:"",loadingTable:!1,checkAll:!1,disableCheckAll:!1}},computed:{totalAmount:function(){return this.lineList.reduce((function(t,e){return Number(t)+Number(e.total_amount)}),0)},totalVatAmount:function(){return this.totalAdjustAmount(),this.lineList.reduce((function(t,e){return Number(t)+Number(e.vat_amount)}),0)}},mounted:function(){},watch:{lineList:function(t,e){this.checkAll=t.every((function(t){return!!t.use_tax_adjustments&&"Y"==t.use_tax_adjustments.post_flag})),this.disableCheckAll=t.every((function(t){return!!t.use_tax_adjustments}))}},methods:{setAll:function(){this.$emit("updateCheckAll",this.checkAll)},checkPost:function(){var t=this.lineList.every((function(t){return t.checked}));this.checkAll=t},totalAdjustAmount:function(t,e){t?(this.lineList.forEach((function(a){t.consignment_header_id==a.consignment_header_id&&(a.tax_adjust_amount=e)})),this.totalAdjust=this.lineList.reduce((function(t,e){return e.use_tax_adjustments?Number(t)+Number(e.use_tax_adjustments.tax_adjust_amount):Number(t)+Number(e.tax_adjust_amount)}),0),this.totaVatAmountCalculate=this.lineList.reduce((function(t,e){return Number(t)+Number(e.vat_amount)}),0),this.totalAmountAdjustGLTable=Number(this.totaVatAmountCalculate)-Number(this.totalAdjust),this.$parent.totalAmountAdjustGL=this.totalAmountAdjustGLTable):(this.totalAdjust=this.lineList.reduce((function(t,e){return e.use_tax_adjustments?Number(t)+Number(e.use_tax_adjustments.tax_adjust_amount):Number(t)+Number(e.tax_adjust_amount)}),0),this.totaVatAmountCalculate=this.lineList.reduce((function(t,e){return Number(t)+Number(e.vat_amount)}),0),this.totalAmountAdjustGLTable=Number(this.totaVatAmountCalculate)-Number(this.totalAdjust),this.$parent.totalAmountAdjustGL=this.totalAmountAdjustGLTable)},getStore:function(){var t=this,e=this,a=this.lineList.filter((function(t){return 1==t.checked}));if(0==a.length)return swal({title:"คำเตือน !",text:"กรุณาเลือกรายการที่ต้องการจะ Post",type:"warning",showConfirmButton:!0}),void(this.loadingTable=!1);this.loadingTable=!0,axios.post("ajax/tax-adjustments-bkk/store",{lineList:a}).then((function(a){if("ERROR"==a.data.status)return swal({title:"error !",text:"ไม่สามารถบันทึกข้อมูลได้ เนื่องจาก "+a.data.err_msg,type:"error",showConfirmButton:!0}),void(t.loadingTable=!1);"success"==a.data.result&&(swal({title:"success !",text:"บันทึก สำเร็จ!",type:"success",showConfirmButton:!0}),t.loadingTable=!1,e.$parent.getSearchData(e.form_search))}))}}};const i=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ibox-content"},[0!=t.lineList.length?a("div",{staticClass:"text-right",staticStyle:{"padding-top":"15px","padding-bottom":"15px"}},[a("button",{class:t.btnTrans.save.class,attrs:{type:"submit"},on:{click:function(e){return t.getStore()}}},[a("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.btnTrans.save.text)+"\n        ")])]):t._e(),t._v(" "),a("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticClass:"table table-bordered text-center"},[a("thead",[a("tr",[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("th",{staticClass:"text-center"},[a("div",[t._v("Post")]),t._v(" "),a("div",[a("el-checkbox",{attrs:{disabled:t.disableCheckAll},on:{change:function(e){return t.setAll()}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1)])])]),t._v(" "),0==t.lineList.length?a("tbody",[a("tr",[a("td",{staticClass:"text-center",staticStyle:{"font-size":"18px","vertical-align":"middle"},attrs:{colspan:"7"}},[t._v(" "+t._s(t.text.notInformation))])])]):a("tbody",[t._l(t.lineList,(function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(e.consignment_no)+"\n                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(e.consignment_date_th)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-left",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(t.text.listFix)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(e.total_amount_decimal_point)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(e.vat_amount_decimal_point)+"\n                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[e.use_tax_adjustments?a("div",[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:!0},model:{value:e.use_tax_adjustments.tax_adjust_amount,callback:function(a){t.$set(e.use_tax_adjustments,"tax_adjust_amount",a)},expression:"data.use_tax_adjustments.tax_adjust_amount"}})],1):a("div",[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1},on:{change:function(a){return t.totalAdjustAmount(e,e.tax_adjust_amount)}},model:{value:e.tax_adjust_amount,callback:function(a){t.$set(e,"tax_adjust_amount",a)},expression:"data.tax_adjust_amount"}})],1)]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{attrs:{disabled:!!e.use_tax_adjustments&&"Y"==e.use_tax_adjustments.post_flag},on:{change:function(e){return t.checkPost()}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"data.checked"}})],1)])})),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("\n                    "+t._s(t.text.total)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(t.totalAmount.toLocaleString(void 0,{minimumFractionDigits:2}))+"\n                ")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(t.totalVatAmount.toLocaleString(void 0,{minimumFractionDigits:2}))+"\n                ")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"}},[t._v("\n                    "+t._s(this.totalAdjust.toLocaleString(void 0,{minimumFractionDigits:2}))+"\n                ")]),t._v(" "),a("td")])],2)])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[a("div",[t._v("เลขที่")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[a("div",[t._v("วันที่")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[a("div",[t._v("รายการ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-right"},[a("div",[t._v("มูลค่าสินค้า")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-right"},[a("div",[t._v("จำนวนเงินภาษี")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-right"},[a("div",[t._v("ภาษีที่ Adjust")])])}],!1,null,null,null).exports}}]);