(self.webpackChunk=self.webpackChunk||[]).push([[5771],{25771:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});var s=a(23570),i=a.n(s);a(30381);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const c={props:["lookupMachineGroup","assetList","lookupCode","printMachineGroup","btnTrans"],data:function(){return{lines:[],loading:!1,isTextNotFound:!0}},mounted:function(){},methods:{addLine:function(){this.isTextNotFound=!1,this.lines.push({id:i()(),machine_group:this.lookupCode?this.lookupCode:"",machine_id:"",checked:!0})},save:function(){var t=this,e=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.lines);return this.loading=!0,axios.post("/pm/ajax/print-machine-group/store",{params:e}).then((function(e){t.loading=!1,"success"==e.data&&(swal({title:"Success",text:"บันทึกสำเร็จ",timer:3e3,type:"success",showCancelButton:!1,showConfirmButton:!0}),setTimeout((function(){window.location.href="/pm/settings/print-machine-group"}),3e3)),"duplicate"==e.data&&swal({title:"คำเตือน !",text:"ไม่สามารถบันทึกได้ เนื่องจากมีข้อมูลซ้ำ",type:"warning",showConfirmButton:!0})}))},removeRow:function(t){this.lines.splice(t,1),0==this.lines.length?this.isTextNotFound=!0:this.isTextNotFound=!1}}};const r=(0,a(51900).Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"col-lg-12"},[a("div",{staticClass:"ibox"},[t._m(0),t._v(" "),a("div",{staticClass:"ibox-content"},[0!=t.lookupCode.length?a("div",{staticClass:"text-right"},[a("button",{class:t.btnTrans.save.class,attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.save()}}},[a("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.btnTrans.save.text)+" \n                ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addLine(e)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" เพิ่มรายการ \n                ")])]):t._e(),a("br"),t._v(" "),a("table",{staticClass:"table table table-bordered"},[t._m(1),t._v(" "),0!=t.printMachineGroup.length?a("tbody",[t._l(t.printMachineGroup,(function(e,s){return a("tr",{key:"showdata"+s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[t._v("\n                            "+t._s(s+1)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[t._v("\n                            "+t._s("กลุ่มที่ "+e.machine_group+" : "+e.assetGroup.asset_group)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-left",staticStyle:{"vertical-align":"middle"}},[t._v("\n                            "+t._s(e.machine_name)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{attrs:{checked:"Y"==e.enable_flag,disabled:""},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"data.checked"}})],1),t._v(" "),a("td"),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("a",{class:t.btnTrans.edit.class,attrs:{type:"button",href:"/pm/settings/print-machine-group/"+e.id+"/edit"}},[a("i",{class:t.btnTrans.edit.icon,attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.btnTrans.edit.text)+"\n                            ")])])])})),t._v(" "),t._l(t.lines,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[t._v("\n                            "+t._s(e.index)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือก กลุ่มเครื่องจักร",clearable:"",filterable:""},model:{value:e.machine_group,callback:function(a){t.$set(e,"machine_group",a)},expression:"data.machine_group"}},t._l(t.lookupMachineGroup,(function(t,e){return a("el-option",{key:e,attrs:{label:"กลุ่มที่ "+t.lookup_code+" : "+t.asset_group.asset_group,value:t.lookup_code}})})),1)],1),t._v(" "),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือก ชื่อเครื่องจักร",clearable:"",filterable:""},model:{value:e.machine_id,callback:function(a){t.$set(e,"machine_id",a)},expression:"data.machine_id"}},t._l(t.assetList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.asset_number+" : "+t.asset_description,value:t.asset_id}})})),1)],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"data.checked"}})],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(s)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}})])}))],2):a("tbody",[a("tr",{staticClass:"text-center"},[t.isTextNotFound?a("td",{attrs:{colspan:"5"}},[t._v("ไม่มีข้อมูล")]):t._e()]),t._v(" "),t._l(t.lines,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[t._v("\n                            "+t._s(e.index)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือก กลุ่มเครื่องจักร",clearable:"",filterable:""},model:{value:e.machine_group,callback:function(a){t.$set(e,"machine_group",a)},expression:"data.machine_group"}},t._l(t.lookupMachineGroup,(function(t,e){return a("el-option",{key:e,attrs:{label:"กลุ่มที่ "+t.lookup_code+" : "+t.asset_group.asset_group,value:t.lookup_code}})})),1)],1),t._v(" "),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือก ชื่อเครื่องจักร",clearable:"",filterable:""},model:{value:e.machine_id,callback:function(a){t.$set(e,"machine_id",a)},expression:"data.machine_id"}},t._l(t.assetList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.asset_number+" : "+t.asset_description,value:t.asset_id}})})),1)],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"data.checked"}})],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(s)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}})])}))],2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ibox-title"},[a("h5",[t._v("กำหนดกลุ่มเครื่องจักรกับเครื่องจักร")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center"},[a("div",[t._v("ลำดับที่")])]),t._v(" "),a("th",{staticClass:"text-center"},[a("div",[t._v("กลุ่มเครื่องจักร")])]),t._v(" "),a("th",{staticClass:"text-center"},[a("div",[t._v("ชื่อเครื่องจักร")])]),t._v(" "),a("th",{staticClass:"text-center"},[a("div",[t._v("สถานะการใช้งาน")])]),t._v(" "),a("th",{staticClass:"text-center"}),t._v(" "),a("th",{staticClass:"text-center"})])])}],!1,null,null,null).exports}}]);