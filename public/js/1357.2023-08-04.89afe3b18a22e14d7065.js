(self.webpackChunk=self.webpackChunk||[]).push([[1357],{38722:(t,e,c)=>{"use strict";c.d(e,{Z:()=>o});var a=c(23645),n=c.n(a)()((function(t){return t[1]}));n.push([t.id,".flex{display:flex}.title{font-size:18px;font-weight:700}",""]);const o=n},61357:(t,e,c)=>{"use strict";c.r(e),c.d(e,{default:()=>_});var a=c(87757),n=c.n(a);function o(t,e,c,a,n,o,s){try{var d=t[o](s),l=d.value}catch(t){return void c(t)}d.done?e(l):Promise.resolve(l).then(a,n)}function s(t){return function(){var e=this,c=arguments;return new Promise((function(a,n){var s=t.apply(e,c);function d(t){o(s,a,n,d,l,"next",t)}function l(t){o(s,a,n,d,l,"throw",t)}d(void 0)}))}}const d={props:["acc_code","sub_acc_code"],data:function(){return{loading:!1,form:{account_code_disp:"",acc_desc:"",sub_acc_desc:""},tableData:[],tableDataAddAccount:[],ccGroups:[],accountType:[],selection_add_dept:[],status:{add_account_type_dept:!1}}},created:function(){this.getDropdownAccountType()},mounted:function(){this.getMasterData()},methods:{addAccountTypeDept:function(){this.status.add_account_type_dept=!0},convertBoolean:function(t){return"Y"==t||"N"!=t&&void 0},checkboxOnChange:function(t,e,c){e[c]=t?"Y":"N",this.updateDept(e)},getMasterData:function(){this.findDept(),this.getAddAccoutDept()},updateDept:function(t){var e=this,c={account_code_disp:this.form.account_code_disp,dept_code:t.dept_code,account_type:t.account_type,transfer_account_flag:t.transfer_account_flag,enabled_flag:t.enabled_flag};axios.post("/ct/ajax/account_dept_v/update-dept",c).then((function(t){e.getMasterData()})).catch((function(t){}))},findDept:function(){var t=this;axios.get("/ct/ajax/account_dept_v/find-dept?acc_code=".concat(this.acc_code,"&sub_acc_code=").concat(this.sub_acc_code)).then((function(e){console.log(e.data.data[0].account_code_disp),t.form.account_code_disp=e.data.data[0].account_code_disp,t.form.acc_desc=e.data.data[0].acc_desc,t.form.sub_acc_desc=e.data.data[0].sub_acc_desc,t.tableData=e.data.data})).catch((function(t){console.log(t)}))},getAddAccoutDept:function(){var t=this;axios.get("/ct/ajax/account_dept_v/find-add-account?acc_code=".concat(this.acc_code,"&sub_acc_code=").concat(this.sub_acc_code)).then((function(e){console.log("test",e.data),t.tableDataAddAccount=e.data.data}))},handleSelectionChange:function(t){var e=this;return s(n().mark((function c(){var a;return n().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.multipleSelection=t,console.log(t),a=[],t.forEach((function(t){a.push(t.dept_code)})),c.next=6,a;case 6:e.selection_add_dept=c.sent;case 7:case"end":return c.stop()}}),c)})))()},addDeptCode:function(){var t=this;return s(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.selection_add_dept;case 3:t.form.selection_add_dept=e.sent,axios.post("/ct/ajax/account_dept_v/pkg_deptcode",t.form).then((function(e){console.log(e.data),t.findDept(),t.getAddAccoutDept(),t.loading=!1,t.status.add_account_type_dept=!1})).catch((function(t){})).then((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},update:function(t){var e=this;axios.post("/ct/ajax/set_account_type_dept/update",{acc_code:this.accCode,depte_code:t.department_code,acc_group:t.acc_group,is_active:t.is_active}).then((function(t){e.$message({showClose:!0,message:"บันทึกสำเร็จ",type:"success"})})).catch((function(t){this.$message({showClose:!0,message:"ไม่สามารถบันทึกได้",type:"error"})}))},getDropdownAccountType:function(){var t=this;axios.get("/ct/ajax/account_type").then((function(e){t.accountType=e.data})).catch((function(t){console.log(t.response.data)}))},getCcGroups:function(){var t=this;axios.get("/ct/ajax/cc_group").then((function(e){t.ccGroups=e.data})).catch((function(t){console.log("error: ",t)}))}}};var l=c(93379),u=c.n(l),i=c(38722),r={insert:"head",singleton:!1};u()(i.Z,r);i.Z.locals;const _=(0,c(51900).Z)(d,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"container"},[t.status.add_account_type_dept?c("div",[c("div",[c("el-table",{ref:"multipleTable",staticStyle:{width:"100%","font-size":"13px"},attrs:{border:"",data:t.tableDataAddAccount,height:"500"},on:{"selection-change":t.handleSelectionChange}},[c("el-table-column",{attrs:{type:"selection",width:"180",align:"center"}}),t._v(" "),c("el-table-column",{attrs:{label:"รหัสหน่วยงาน","header-align":"center",prop:"dept_code"}}),t._v(" "),c("el-table-column",{attrs:{label:"หน่วยงาน","header-align":"center",prop:"dept_desc"}})],1),t._v(" "),c("div",{staticClass:"tw-flex tw-justify-end tw-mt-5"},[c("button",{staticClass:"btn btn-danger ml-2 btn-lg tw-w-24",on:{click:function(e){t.status.add_account_type_dept=!1}}},[t._v("\n                    ยกเลิก\n                ")]),t._v(" "),c("button",{staticClass:"btn btn-success btn-lg ml-2 tw-w-28 tw-ml-2",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return t.addDeptCode()}}},[t._v("\n                    บันทึก\n                ")])])],1)]):c("div",[c("div",{staticClass:"row"},[c("div",{staticClass:"tw-flex tw-justify-between tw-items-center tw-mb-5 tw-w-full"},[c("div",[t.tableData.length>0?c("div",{staticClass:"title flex "},[c("div",[t._v("\n                            "+t._s("รหัสบัญชี "+t.form.account_code_disp)+"\n                        ")]),t._v(" "),c("div",{staticClass:"ml-2"},[t._v("\n                            "+t._s(t.form.acc_desc)+" "+t._s(t.form.sub_acc_desc)+"\n                        ")])]):t._e()]),t._v(" "),c("div",{staticClass:"tw-flex"},[c("a",{staticClass:"btn btn-danger ml-2 btn-lg tw-w-24",attrs:{href:"/ct/set_account_type"}},[t._v("\n                        ย้อนกลับ\n                    ")]),t._v(" "),c("button",{staticClass:"btn btn-success btn-lg ml-2 tw-w-28 tw-ml-2",attrs:{type:"button"},on:{click:function(e){return t.addAccountTypeDept()}}},[t._v("\n                        เพิ่มหน่วยงาน\n                    ")])])])]),t._v(" "),c("div",{staticClass:"row justify-content-center"},[c("div",{staticClass:"col-12"},[[c("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[c("el-table-column",{attrs:{prop:"dept_code",label:"รหัสหน่วยงาน",width:"180"}}),t._v(" "),c("el-table-column",{attrs:{prop:"dept_desc",label:"ชื่อหน่วยงาน"}}),t._v(" "),c("el-table-column",{attrs:{prop:"account_type",align:"center",label:"ประเภทบัญชี"},scopedSlots:t._u([{key:"default",fn:function(e){return[c("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"หน่วยนับ"},on:{change:function(c){return t.updateDept(e.row)}},model:{value:e.row.account_type,callback:function(c){t.$set(e.row,"account_type",c)},expression:"scope.row.account_type"}},t._l(t.accountType,(function(t,e){return c("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,3662924815)}),t._v(" "),c("el-table-column",{attrs:{align:"center",label:"บัญชีรับโอน",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[c("el-checkbox",{attrs:{"v-model":t.tableData[e.$index].transfer_account_flag,checked:t.convertBoolean(t.tableData[e.$index].transfer_account_flag)},on:{change:function(c){return t.checkboxOnChange(c,e.row,"transfer_account_flag")}}})]}}],null,!1,1145543766)}),t._v(" "),c("el-table-column",{attrs:{prop:"enabled_flag",align:"center",label:"สถานะการใช้งาน",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[c("el-checkbox",{attrs:{"v-model":t.tableData[e.$index].enabled_flag,checked:t.convertBoolean(t.tableData[e.$index].enabled_flag)},on:{change:function(c){return t.checkboxOnChange(c,e.row,"enabled_flag")}}})]}}],null,!1,802171212)})],1)]],2)])])])}),[],!1,null,null,null).exports}}]);