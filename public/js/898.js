(self.webpackChunk=self.webpackChunk||[]).push([[898],{14953:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(23645),s=n.n(a)()((function(e){return e[1]}));s.push([e.id,".image-box[data-v-0dd2dd0b]{max-width:300px}",""]);const i=s},30898:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(87757),s=n.n(a),i=n(7398),l=n.n(i);n(2223);function o(e,t,n,a,s,i,l){try{var o=e[i](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,s)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function l(e){o(i,a,s,l,c,"next",e)}function c(e){o(i,a,s,l,c,"throw",e)}l(void 0)}))}}const r={components:{Loading:l()},props:{item:{},auth:{},url_ajax:null,btn_trans:{type:Object},machine_relations:{},request_ingredients:{}},data:function(){return{machine:null,ingredients:null,isLoading:!0,fullPage:!0,el:{machine:null,ingredients:null},validate:{machine:null,ingredients:null}}},mounted:function(){console.log(this),this.isLoading=!1},methods:{changeMachineSet:function(e){var t=this;return c(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(e),t.machine=e;case 2:case"end":return n.stop()}}),n)})))()},popoverHide:function(e){setTimeout((function(){console.log($("#"+e).parents(".el-select").popover("hide"))}),500)},changeIngredients:function(e){var t=this;return c(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.ingredients=e;case 1:case"end":return n.stop()}}),n)})))()},resetEl:function(){var e=this;return c(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.el={machine:null,ingredients:null};case 1:case"end":return t.stop()}}),t)})))()},handleSave:function(e){var t=this;return c(s().mark((function n(){var a,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),null==t.el.ingredients?(t.validate.ingredients="กรุณาเลือกข้อมูลตราบุหรี่",setTimeout((function(){$("#select-box2").parents(".el-select").popover("show")}),200)):($("#select-box2").parents(".el-select").popover("hide"),t.validate.ingredients=""),null==t.el.machine?(t.validate.machine="กรุณาเลือกข้อมูลหมายเลขเครื่อง",setTimeout((function(){$("#select-box1").parents(".el-select").popover("show")}),200)):($("#select-box1").parents(".el-select").popover("hide"),t.validate.machine=""),null!=t.el.machine&&null!=t.el.ingredients){n.next=5;break}return n.abrupt("return",!1);case 5:return a=t.url_ajax.raw_material_store,i={machine_set:t.el.machine,item_no:t.el.ingredients,record_type:"req",organization_id:t.item.organization_id,organization_code:t.item.organization_code,item_cat_code:t.item.item_cat_code,last_updated_by_id:t.auth.fnd_user_id,last_updated_by:t.auth.user_id,created_by:t.auth.user_id,created_by_id:t.auth.fnd_user_id},t.isLoading=!0,n.next=10,axios.post(a,i).then((function(e){swal("แจ้งเตือน","ทำรายการสำเร็จ","success"),setTimeout((function(){window.location.href="/pm/raw_material_list"}),1e3),t.resetEl()})).catch((function(e){swal("แจ้งเตือน","กรุณาตรวจสอบข้อมูลใหม่อีกครั้ง","error")}));case 10:t.isLoading=!1;case 11:case"end":return n.stop()}}),n)})))()}}};n(78493);const u=(0,n(51900).Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"ibox"},[n("div",{staticClass:"ibox-title"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-sm-12 col-lg-12 align-middle"},[n("h4",{staticClass:"tw-text-lg tw-py-1"},[e._v("\n            ร้องขอวัตถุดิบเพิ่ม : "+e._s(e.item.name)+"\n          ")])])])]),e._v(" "),n("div",{staticClass:"ibox-content"},[n("form",{on:{submit:e.handleSave}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-sm-12"},[n("div",{staticClass:"form-group row tw-items-center"},[n("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"}),e._v(" "),n("div",{staticClass:"col-lg-9"},[n("img",{staticClass:"image-box",attrs:{src:e.item.img?e.item.img:"/images/no-image.png",alt:""}})])])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-sm-12"},[n("div",{staticClass:"form-group row"},[e._m(0),e._v(" "),n("div",{staticClass:"col-lg-9"},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"",id:"select-box1",required:"true","data-toggle":"popover","data-placement":"bottom","data-content":e.validate.machine,placeholder:"หมายเลขเครื่อง"},on:{change:e.changeMachineSet,focus:function(t){return e.popoverHide("select-box1")}},model:{value:e.el.machine,callback:function(t){e.$set(e.el,"machine",t)},expression:"el.machine"}},e._l(e.machine_relations,(function(e,t){return n("el-option",{key:t,attrs:{label:e.machine_set,value:e.machine_set}})})),1)],1)])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-sm-12"},[n("div",{staticClass:"form-group row"},[e._m(1),e._v(" "),n("div",{staticClass:"col-lg-9"},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"",id:"select-box2",placeholder:"ตราบุหรี่","data-toggle":"popover","data-placement":"bottom","data-content":e.validate.ingredients},on:{change:e.changeIngredients,focus:function(t){return e.popoverHide("select-box2")}},model:{value:e.el.ingredients,callback:function(t){e.$set(e.el,"ingredients",t)},expression:"el.ingredients"}},e._l(e.request_ingredients,(function(e,t){return n("el-option",{key:t,attrs:{label:e.item_desc,value:e.item_no}})})),1)],1)])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-sm-12"},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"}),e._v(" "),n("div",{staticClass:"col-lg-9"},[n("button",{class:e.btn_trans.save.class,attrs:{type:"submit"}},[n("i",{class:e.btn_trans.save.icon}),e._v("\n                  "+e._s(e.btn_trans.save.text)+"\n                ")]),e._v(" "),n("button",{class:e.btn_trans.cancel.class,attrs:{type:"button"},on:{click:e.resetEl}},[n("i",{class:e.btn_trans.cancel.icon}),e._v("\n                  "+e._s(e.btn_trans.cancel.text)+"\n                ")])])])])])])])]),e._v(" "),n("loading",{attrs:{active:e.isLoading,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"},[e._v("หมายเลขเครื่อง "),n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(":")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"},[e._v("ตราบุหรี่ "),n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(":")])}],!1,null,"0dd2dd0b",null).exports},78493:(e,t,n)=>{var a=n(14953);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(45346).Z)("1216113d",a,!0,{})}}]);