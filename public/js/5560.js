(self.webpackChunk=self.webpackChunk||[]).push([[5560],{77757:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>r});var a=s(23645),i=s.n(a)()((function(t){return t[1]}));i.push([t.id,".modal-body{padding:15px!important}.modal-dialog{height:80%!important;padding-top:10%}",""]);const r=i},24628:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>r});var a=s(23645),i=s.n(a)()((function(t){return t[1]}));i.push([t.id,"#tableMainPDP0014{width:100%;border-collapse:separate;border-spacing:0}#tableMainPDP0014 tbody>tr>td:first-child{background:#fff;position:sticky;left:0;width:-webkit-min-content;width:-moz-min-content;width:min-content;padding:2px 5px 5px;overflow-x:auto}#tableMainPDP0014 thead{position:sticky;top:0;z-index:1;background:#fff}#tableMainPDP0014 tr.first{top:0;background:#fff}#tableMainPDP0014 tr.second,#tableMainPDP0014 tr.third{top:0;position:-webkit-sticky;background:#fff}.sticky-col{position:sticky;left:0;background:#fff;z-index:2}",""]);const r=i},65560:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>u});var a=s(87757),i=s.n(a),r=s(30381),l=s.n(r),n=s(80455);function o(t,e,s,a,i,r,l){try{var n=t[r](l),o=n.value}catch(t){return void s(t)}n.done?e(o):Promise.resolve(o).then(a,i)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var r=t.apply(e,s);function l(t){o(r,a,i,l,n,"next",t)}function n(t){o(r,a,i,l,n,"throw",t)}l(void 0)}))}}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const _={components:{VueNumeric:s.n(n)()},props:["user-profile","trans-date","token","trans-btn","types","statuses","headers","formLine","h-years","sales-fiscals-years"],mounted:function(){},data:function(){var t;return{years:[],year:"",salesFiscal:"",salesFiscalNumber:"",salesFiscalVersion:"",salesFiscals:[],salesFiscalsVersion:[],dialogTableVisible:!1,showTable:!1,showLine:!1,lines:[],dLines:[],trlines:[],medicinal_leaves:[],species:[],header:[],salesFiscalsNo:[],salesFiscalYearRevision:"",salesFiscalYearRevisionArr:[],salesFiscalYearNo:"",salesFiscalYearNoArr:[],fiscalYearVision:"",fiscalYearVisionArr:[],uHeaders:[],items:[],typeSelected:"",statusSelect:"INACTIVE",speciesSelected:"",formLines:[],nameUserDefaultLogin:this.userProfile.user_name,form:(t={year:"",lld_year:"",planning_year:"",sales_fiscal_year_no:"",sales_fiscal_year_revision:"",fiscal_year_vision:"",date_updated:"",status:"INACTIVE",date_create:""},d(t,"date_updated",""),d(t,"textarea",""),t),form_update:{tran_status:"",lines:[],tran_approval_date:""},loading:{form:!1,tempSearch:!1,create:!1,save:!1},search:{year:"",salesFiscalYearNo:"",salesFiscalYearRevision:""},isDisabled:{species:!0,type:!0,status:!0,tranApprovalDate:!0,textarea:!0,printAction:!0,retrieveLeaves:!0}}},methods:{getYears:function(){var t=this;axios.get("/pd/ajax/pdp0014/get-years").then((function(e){200==e.status&&(t.years=e.data.years)})).catch((function(t){}))},getTempSalesFiscalYearNo:function(t){var e=this;this.loading.tempSearch=!0,this.salesFiscalYearNoArr=[],this.salesFiscalYearNo="",this.year=t||this.year,axios.get("/pd/ajax/pdp0014/get-temp-sales-fiscal-year-no?year="+this.year).then((function(t){200==t.status&&(e.salesFiscalYearNoArr=t.data.salesFiscalYearNo),e.loading.tempSearch=!1})).catch((function(t){e.loading.tempSearch=!1}))},getTempSalesFiscalYearRevision:function(t,e){var s=this;this.loading.tempSearch=!0,this.salesFiscalYearRevisionArr=[],this.salesFiscalYearRevision="";var a={year:t||this.year,salesFiscalYearNo:e||this.salesFiscalYearNo};axios.get("/pd/ajax/pdp0014/get-temp-sales-fiscal-year-revision",{params:a}).then((function(t){200==t.status&&(s.salesFiscalYearRevisionArr=t.data.salesFiscalYearRevision),s.loading.tempSearch=!1})).catch((function(t){s.loading.tempSearch=!1}))},getTempFiscalYearVision:function(t,e,s){var a=this;this.loading.tempSearch=!0,this.fiscalYearVisionArr=[],this.fiscalYearVision="";var i={year:t||this.year,salesFiscalYearNo:e||this.salesFiscalYearNo,salesFiscalYearRevision:s||this.salesFiscalYearRevision};axios.get("/pd/ajax/pdp0014/get-temp-fiscal-year-vision",{params:i}).then((function(t){200==t.status&&(a.fiscalYearVisionArr=t.data.fiscalYearVision),a.loading.tempSearch=!1})).catch((function(t){a.loading.tempSearch=!1}))},searchHeaders:function(){var t=this;this.uHeaders=[],this.loading.tempSearch=!0;var e={year:this.year,salesFiscalYearNo:this.salesFiscalYearNo,salesFiscalYearRevision:this.salesFiscalYearRevision,fiscalYearVision:this.fiscalYearVision};axios.get("/pd/ajax/pdp0014/search-headers",{params:e}).then((function(e){200==e.status&&(t.uHeaders=e.data.headers),t.loading.tempSearch=!1})).catch((function(e){t.loading.tempSearch=!1}))},getSalesFiscals:function(t){var e=this;this.showTable=!0,this.dialogTableVisible=!0,"get-no"==t&&(this.search.salesFiscalYearRevision="",this.search.salesFiscalYearNo="",this.salesFiscalsNo=[],this.salesFiscalsVersion=[]),"get-version"==t&&(this.search.salesFiscalYearRevision="",this.salesFiscalsVersion=[]),axios.get("/pd/ajax/pdp0014/get-sales-fiscals?action="+t+"&year="+this.search.year+"&no="+this.search.salesFiscalYearNo+"&change_no="+this.search.salesFiscalYearRevision).then((function(s){200==s.status&&("get-no"==t&&(e.salesFiscalsNo=s.data.salesFiscalsNo),"get-version"==t&&(e.salesFiscalsVersion=s.data.salesFiscalsVersion))})).catch((function(t){}))},searchSalesFiscal:function(t){var e=this;axios.get("/pd/ajax/pdp0014/get-sales-fiscals?action="+t+"&year="+this.search.year+"&no="+this.search.salesFiscalYearNo+"&change_no="+this.search.salesFiscalYearRevision).then((function(t){200==t.status&&(e.salesFiscals=t.data.salesFiscals)})).catch((function(t){}))},selectSalesFiscal:function(t){this.dialogTableVisible=!1,this.showTable=!1,this.search.year=this.salesFiscals[t].sales_fiscal_year_th,this.getSalesFiscals("get-no"),this.search.salesFiscalYearNo=this.salesFiscals[t].sales_fiscal_year_no,this.getSalesFiscals("get-version"),this.search.salesFiscalYearRevision=this.salesFiscals[t].sales_fiscal_year_revision},insertHeader:function(){this.form.period_year=this.header.sales_fiscal_year_th,this.form.lld_year=this.header.lld_year,this.form.planning_year=this.header.sales_fiscal_year_th,this.form.sales_fiscal_year_no=this.header.sales_fiscal_year_no,this.form.sales_fiscal_year_revision=this.header.sales_fiscal_year_revision,this.form.fiscal_year_vision=this.header.fiscal_year_vision,this.form.date_updated=this.header.last_update_date,this.isDisabled.type=!1,this.isDisabled.status=!1,this.isDisabled.textarea=!1},getItems:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.header.web_h_id&&this.typeSelected&&this.speciesSelected&&(this.isDisabled.printAction=!1),axios.get("/pd/ajax/pdp0014/search-species",{params:{tobacco_type_code:this.typeSelected}}).then((function(s){if(0!=s.data.species.length){if(t.isDisabled.species=!1,t.species=s.data.species,"1004"==t.typeSelected)return t.speciesSelected="all",t.getLines(t.header.web_h_id,"all",t.typeSelected);t.typeSelected&&t.speciesSelected&&("tobacco_type"==e&&(t.speciesSelected=null),t.getLines(t.header.web_h_id,t.speciesSelected,t.typeSelected))}else t.isDisabled.species=!0,t.species=[]})).catch((function(t){}))},createLine:function(){var t=this;return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.form=!0,e.next=3,t.insertHeader();case 3:return t.form.sales_fiscal_year_no=t.search.salesFiscalYearNo,t.form.sales_fiscal_year_revision=t.search.salesFiscalYearRevision,t.form.year=t.search.year,e.next=8,axios.post("/pd/ajax/pdp0014/create-line",t.form).then((function(e){if("E"==e.data.result)return t.form.year="",t.search.year="",t.form.sales_fiscal_year_no="",t.search.salesFiscalYearNo="",t.form.sales_fiscal_year_revision="",t.search.salesFiscalYearRevision="",t.userProfile.user_name="",swal({title:"\nเกิดข้อผิดพลาด",text:e.data.resultMsg,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"});t.afterCallHeader(e),t.afterCallLines(e),t.loading.form=!1})).catch((function(e){t.loading.form=!1})).finally((function(e){t.loading.form=!1}));case 8:case"end":return e.stop()}}),e)})))()},checkStatus:function(t){this.form_update.tran_status=t,"APPROVED"==t&&(this.isDisabled.tranApprovalDate=!1),"INACTIVE"!=t&&""!==t||(this.isDisabled.tranApprovalDate=!0,this.header.tran_approval_date="",this.form_update.tran_approval_date="",this.form.tran_approval_date="",this.header.date="",this.$children[11].date="")},inputData:function(t,e){this.form_update.lines.push(t)},save:function(){var t=this;if("APPROVED"==this.statusSelect&&null==this.$children[11].date)return swal({title:"\n เกิดข้อผิดพลาด ",text:"กรุณาเลือก วันที่อนุมัติ",type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"});this.loading.save=!0;var e={form_update:this.form_update,textarea:this.form.textarea};axios.post("/pd/ajax/pdp0014/update-line/"+this.header.web_h_id,{params:e}).then((function(e){if("E"==e.data.result)return t.loading.save=!1,swal({title:"\nเกิดข้อผิดพลาด",text:e.data.resultMsg,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"});t.alertSucces("สำเร็จ"),t.selectHeader(t.header.web_h_id),t.loading.save=!1})).catch((function(e){return t.loading.save=!1,swal({title:"\nเกิดข้อผิดพลาด",text:e,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"},(function(t){resolve(t)}))})).finally((function(e){t.loading.save=!1}))},selectHeader:function(t){var e=this;axios.get("/pd/ajax/pdp0014/select-header/"+t).then((function(t){var s=t.data.header;e.form.lld_year=s.lld_year,e.year=s.fiscal_year_th,e.header=s,e.form.tran_approval_date=s.tran_approval_date,e.form.date_create=s.creation_date,e.form.date_updated=s.last_update_date,e.statusSelect=s.tran_status,e.salesFiscalYearNo=s.sales_fiscal_year_no,e.salesFiscalYearRevision=s.sales_fiscal_year_revision,e.fiscalYearVision=s.fiscal_year_vision,e.form.textarea=s.attribute1,e.userProfile.user_name=s.name_user,e.typeSelected="",e.speciesSelected="",e.species=[],e.lines=[],e.trlines=[],e.dLines=[],e.formLines=[],e.isDisabled.species=!0,e.isDisabled.retrieveLeaves=!1,e.showLine=!1,e.getTempSalesFiscalYearNo(s.fiscal_year_th),e.getTempSalesFiscalYearRevision(s.fiscal_year_th,s.sales_fiscal_year_no),e.getTempFiscalYearVision(s.fiscal_year_th,s.sales_fiscal_year_no,s.sales_fiscal_year_revision),e.checkStatus(s.tran_status)})).then((function(){e.insertHeader()})).catch((function(t){}))},getLines:function(t,e,s){var a=this;this.lines=[],this.trlines=[],this.medicinal_leaves=[],this.dLines=[],this.formLines=[],axios.get("/pd/ajax/pdp0014/get-lines/"+t+"?ingredien_species_type="+e+"&ingredien_tobacco_type="+s).then((function(t){"S"==t.data.status&&(a.afterCallLines(t),a.showLine=!0),"E"==t.data.status&&(a.showLine=!0)})).catch((function(t){return a.lines=[],a.trlines=[],a.medicinal_leaves=[],a.dLines=[],a.formLines=[],a.showLine=!1,swal({title:"\n None Found Data ",text:t,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"})}))},afterCallHeader:function(t){this.header=t.data.header,this.header_web_h_id=t.data.header.web_h_id,this.form.date_create=t.data.header.creation_date,this.form.date_updated=t.data.header.last_update_date,this.year=t.data.header.year,this.form.period_year=t.data.header.sales_fiscal_year_th,this.form.planning_year=t.data.header.sales_fiscal_year_th,this.form.lld_year=t.data.header.lld_year,this.form.sales_fiscal_year_revision=t.data.header.sales_fiscal_year_revision,this.userProfile.user_name=this.nameUserDefaultLogin},afterCallLines:function(t){this.lines=t.data.lines,this.trlines=t.data.header_table,this.medicinal_leaves=t.data.medicinalLeaves,this.dLines=t.data.dLines,this.formLines=t.data.mapLines},beforeCallLines:function(){this.lines=[],this.trlines=[],this.medicinal_leaves=[],this.dLines=[],this.formLines=[]},alertSucces:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(e){swal({title:"\nสำเร็จ",text:t,type:"success",dangerMode:!1,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"},(function(t){e(t)}))}))},sumLines:function(t){return Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).reduce((function(t,e){return t+parseFloat(e.sum_ingredien_percent_item)}),0)},sumKgLines:function(t){var e=Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})),s=Object.values(this.lines);return e.reduce((function(t,e){var a=s.find((function(t){return t.item_code==e.item_code}));return t+e.sum_ingredien_percent_item*a.year_quantity}),0)},sumLinesCasing:function(t,e){var s=this,a=[],i=0;return a[t]=[],Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).forEach((function(r,l){a[t][i]=void 0!==s.formLines[r.item_code+r.medicinal_leaves+e]?s.formLines[r.item_code+r.medicinal_leaves+e].ingredien_percent_item:0,i++})),a[t].reduce((function(t,e){return t+parseFloat(e)}),0)},sumKgLinesCasing:function(t,e){var s=this,a=[],i=0;return a[t]=[],Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).forEach((function(r,l){a[t][i]=void 0!==s.formLines[r.item_code+r.medicinal_leaves+e]?s.formLines[r.item_code+r.medicinal_leaves+e].qty_use_year*(.01*s.formLines[r.item_code+r.medicinal_leaves+e].ingredien_percent_item):0,i++})),a[t].reduce((function(t,e){return t+parseFloat(e)}),0)},updateApprove:function(t){this.form_update.tran_approval_date=this.convertDate(this.$emit("dateWasSelected",t).$children[11].date)},convertDate:function(t){var e=function(t){return t<10?"0"+t:t},s=new Date(t);return[e(s.getDate()),e(s.getMonth()+1),s.getFullYear()].join("/")},calculateKM:function(t,e,s,a,i){return t.year_quantity*(i[t.item_code+s+a]?.01*i[t.item_code+s+a].ingredien_percent_item:0)},formatDate:function(t){return l()(t).add(543,"years").format("DD-MM-YYYY")},sumMonth:function(t){var e=[],s=0,a=Object.values(this.lines);return"quantity"==t?a.forEach((function(t,a){e[s]=t.quantity,s++})):"qty_lld"==t?a.forEach((function(t,a){e[s]=t.qty_lld,s++})):"year_quantity"==t?a.forEach((function(t,a){e[s]=t.year_quantity,s++})):"month_quantity"==t&&a.forEach((function(t,a){e[s]=t.month_quantity,s++})),e.reduce((function(t,e){return t+parseFloat(e)}),0)},printAction:function(){var t=this.year,e=this.salesFiscalYearNo,s=this.salesFiscalYearRevision,a=this.fiscalYearVision,i=this.typeSelected,r=this.speciesSelected,l=this.header.web_h_id;location.href="/ir/reports/get-param?salesFiscalYearTH="+t+"&salesFiscalYearNo="+e+"&salesFiscalYearRevision="+s+"&fiscalYearVision="+a+"&ingredienTobaccoType="+i+"&ingredienSpeciesType="+r+"&id="+l+"&program_code=PDR0007&function_name=PDR0007&output=pdf"},retrieveLeaves:function(){var t=this;return c(i().mark((function e(){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t,swal({title:"คุณแน่ใจไหม ?",text:"การดึงข้อมูลใหม่ อาจทำให้ข้อมูลที่เคยบันทึกอยู่สูญหาย คุณยืนยันที่จะดำเนินการต่อหรือไม่",type:"warning",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=c(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&axios.get("/pd/ajax/pdp0014/retrieve-leaves/"+s.header.web_h_id).then((function(t){"C"==t.data.result&&(swal({title:"\nสำเร็จ",text:t.data.resultMsg,type:"success",dangerMode:!1,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"}),s.selectHeader(s.header.web_h_id))})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()}},computed:{totalLines:function(){return Object.keys(this.lines).length-1}}};s(96901),s(76799);const u=(0,s(51900).Z)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"ibox"},[s("div",{staticClass:"ibox-title"},[s("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),s("div",{staticClass:"col-lg-9"},[s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-w-m btn-success",attrs:{"data-toggle":"modal","data-target":"#ModalCreate"},on:{click:t.getYears}},[s("i",{staticClass:"fa fa-plus"}),t._v(" สร้าง\n                        ")]),t._v(" "),t._m(1),t._v(" "),s("button",{staticClass:"btn btn-w-m btn-primary",attrs:{type:"submit",th:""},on:{click:t.save}},[s("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),t._v(" บันทึก\n                        ")]),t._v(" "),s("button",{staticClass:"btn btn-w-m btn-primary",attrs:{type:"submit",disabled:this.isDisabled.retrieveLeaves},on:{click:t.retrieveLeaves}},[t._v("\n                            ดึงข้อมูล % ใบยาจากสูตร\n                        ")]),t._v(" "),s("button",{staticClass:"btn btn-w-m btn-info",attrs:{disabled:this.isDisabled.printAction},on:{click:t.printAction}},[s("i",{staticClass:"fa fa-print"}),t._v(" พิมพ์\n                        ")])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"ModalCreate",tabindex:"-1",role:"dialog","aria-labelledby":"ModalCreateLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12"},[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"row col-12 ml-2"},[s("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-3 mt-2"},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ(ฝ่ายขาย):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ปีงบประมาณ(ฝ่ายขาย)",size:"small","popper-append-to-body":!1},on:{change:function(e){return t.getSalesFiscals("get-no")}},model:{value:t.search.year,callback:function(e){t.$set(t.search,"year",e)},expression:"search.year"}},t._l(t.salesFiscalsYears,(function(t){return s("el-option",{key:t.sales_fiscal_year_th,attrs:{label:t.sales_fiscal_year_th,value:t.sales_fiscal_year_th}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group mb-0 col-4 mt-2"},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่(ฝ่ายขาย):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ครั้งที่(ฝ่ายขาย)",size:"small","popper-append-to-body":!1},on:{change:function(e){return t.getSalesFiscals("get-version")}},model:{value:t.search.salesFiscalYearNo,callback:function(e){t.$set(t.search,"salesFiscalYearNo",e)},expression:"search.salesFiscalYearNo"}},t._l(t.salesFiscalsNo,(function(t){return s("el-option",{key:t.sales_fiscal_year_no,attrs:{label:t.sales_fiscal_year_no,value:t.sales_fiscal_year_no}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group mb-0 col-3 mt-2"},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปรับครั้งที่(ชนป.):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ปรับครั้งที่(ชนป.)",size:"small","popper-append-to-body":!1},model:{value:t.search.salesFiscalYearRevision,callback:function(e){t.$set(t.search,"salesFiscalYearRevision",e)},expression:"search.salesFiscalYearRevision"}},t._l(t.salesFiscalsVersion,(function(t){return s("el-option",{key:t.sales_fiscal_year_revision,attrs:{label:t.sales_fiscal_year_revision,value:t.sales_fiscal_year_revision}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[s("div",{staticClass:"input-group",staticStyle:{"padding-top":"25px"}},[s("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"button"},on:{click:function(e){return t.searchSalesFiscal("search")}}},[s("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                                                        ")])])])])])])]),t._v(" "),t.salesFiscals.length>0&t.showTable?s("div",{staticClass:"table-responsive"},[s("div",{staticStyle:{height:"250px",overflow:"scroll"}},[s("table",{staticClass:"table"},[t._m(3),t._v(" "),s("tbody",t._l(t.salesFiscals,(function(e,a){return s("tr",{key:a},[s("td",[t._v(" "+t._s(e.sales_fiscal_year_th)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.sales_fiscal_year_no)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.approve_date)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.sales_fiscal_year_revision)+" ")]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(e){return t.selectSalesFiscal(a)}}},[t._v("\n                                                                เลือก\n                                                        ")])])])})),0)])])]):t._e(),t._v(" "),s("div",{staticClass:"form-group row mt-4"},[s("div",{staticClass:"col-lg-12 text-center"},[s("button",{staticClass:"btn btn-primary col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createLine}},[s("i",{staticClass:"fa fa-check"}),t._v("สร้าง\n                                            ")]),t._v(" "),t._m(4)])])])])])]),t._v(" "),s("div",{staticClass:"modal inmodal fade",staticStyle:{display:"none"},attrs:{id:"ModalSearch",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-xl"},[s("div",{staticClass:"modal-content"},[t._m(5),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.tempSearch,expression:"loading.tempSearch"}],staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ(ฝ่ายขาย):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปีงบประมาณ(ฝ่ายขาย)","popper-append-to-body":!1},on:{change:function(e){return t.getTempSalesFiscalYearNo(t.year)}},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.hYears,(function(t){return s("el-option",{key:t.fiscal_year_th,attrs:{label:t.fiscal_year_th,value:t.fiscal_year_th}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปรับครั้งที่(ฝ่ายขาย):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปรับครั้งที่(ฝ่ายขาย)","popper-append-to-body":!1},on:{change:function(e){return t.getTempSalesFiscalYearRevision(t.year,t.salesFiscalYearNo)}},model:{value:t.salesFiscalYearNo,callback:function(e){t.salesFiscalYearNo=e},expression:"salesFiscalYearNo"}},t._l(t.salesFiscalYearNoArr,(function(t){return s("el-option",{key:t.sales_fiscal_year_no,attrs:{label:t.sales_fiscal_year_no,value:t.sales_fiscal_year_no}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปรับครั้งที่(ชนป.):")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปรับครั้งที่(ชนป.)","popper-append-to-body":!1},on:{change:function(e){return t.getTempFiscalYearVision(t.year,t.salesFiscalYearNo,t.salesFiscalYearRevision)}},model:{value:t.salesFiscalYearRevision,callback:function(e){t.salesFiscalYearRevision=e},expression:"salesFiscalYearRevision"}},t._l(t.salesFiscalYearRevisionArr,(function(t){return s("el-option",{key:t.sales_fiscal_year_revision,attrs:{label:t.sales_fiscal_year_revision,value:t.sales_fiscal_year_revision}})})),1)],1)]),t._v(" "),s("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[s("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่ตามประมาณการวัตถุดิบ:")]),t._v(" "),s("div",{staticClass:"input-group"},[s("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ครั้งที่ตามประประมาณการวัตถุดิบ","popper-append-to-body":!1},model:{value:t.fiscalYearVision,callback:function(e){t.fiscalYearVision=e},expression:"fiscalYearVision"}},t._l(t.fiscalYearVisionArr,(function(t){return s("el-option",{key:t.fiscal_year_vision,attrs:{label:t.fiscal_year_vision,value:t.fiscal_year_vision}})})),1)],1)])]),t._v(" "),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"button"},on:{click:t.searchHeaders}},[s("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                                    ")])]),t._v(" "),s("div",[s("table",{staticClass:"table mt-2"},[t._m(6),t._v(" "),s("tbody",t._l(t.uHeaders,(function(e,a){return s("tr",{key:a,staticStyle:{cursor:"pointer"},attrs:{"data-dismiss":"modal"},on:{click:function(s){return t.selectHeader(e.web_h_id)}}},[s("td",{staticStyle:{"vertical-align":"middle","text-align":"center",background:"none"}},[t._v("\n                                                    "+t._s(e.fiscal_year_th)+"\n                                                ")]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.sales_fiscal_year_no)+"\n                                                ")]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.sales_fiscal_year_revision)+"\n                                                ")]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.fiscal_year_vision)+"\n                                                ")]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.tran_approval_date?t.formatDate(e.tran_approval_date):"")+"\n                                                ")]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.tran_status)+"\n                                                ")])])})),0)])])])])])])])]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.form,expression:"loading.form"}],staticClass:"ibox-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 row"},[s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ปีงบประมาณ\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.period_year,expression:"form.period_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:""},domProps:{value:t.form.period_year},on:{input:function(e){e.target.composing||t.$set(t.form,"period_year",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.fiscal_year_vision,expression:"form.fiscal_year_vision"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.fiscal_year_vision},on:{input:function(e){e.target.composing||t.$set(t.form,"fiscal_year_vision",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่สร้าง\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("span",{staticClass:"remark"},[t._v(" "+t._s(t.form.date_create)+" ")])]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่แก้ไขล่าสุด\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("span",{staticClass:"remark"},[t._v(t._s(t.form.date_updated))])])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 row"},[s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(7),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.lld_year,expression:"form.lld_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:""},domProps:{value:t.form.lld_year},on:{input:function(e){e.target.composing||t.$set(t.form,"lld_year",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประมาณยอดจำหน่ายปี\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.planning_year,expression:"form.planning_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.planning_year},on:{input:function(e){e.target.composing||t.$set(t.form,"planning_year",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sales_fiscal_year_no,expression:"form.sales_fiscal_year_no"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.sales_fiscal_year_no},on:{input:function(e){e.target.composing||t.$set(t.form,"sales_fiscal_year_no",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ปรับครั้งที่ \n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-3 col-form-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sales_fiscal_year_revision,expression:"form.sales_fiscal_year_revision"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.sales_fiscal_year_revision},on:{input:function(e){e.target.composing||t.$set(t.form,"sales_fiscal_year_revision",e.target.value)}}})])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 row"},[s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(8),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("el-select",{staticClass:"form-group",attrs:{size:"small",clearable:"",placeholder:"เลือก","popper-append-to-body":!1,disabled:this.isDisabled.type},on:{change:function(e){return t.getItems("tobacco_type")}},model:{value:t.typeSelected,callback:function(e){t.typeSelected=e},expression:"typeSelected"}},t._l(t.types,(function(t){return s("el-option",{key:t.ingredien_tobacco_type,attrs:{label:t.ingredien_tobacco_desc,value:t.ingredien_tobacco_type}})})),1)],1)]),t._v(" "),s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ผู้บันทึก\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("input",{staticClass:"form-control col-12",staticStyle:{width:"100%"},attrs:{disabled:"",type:"text"},domProps:{value:t.userProfile.user_name}})])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 row"},[s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(9),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("el-select",{staticClass:"form-group",attrs:{clearable:"",size:"small",placeholder:"เลือก","popper-append-to-body":!1,disabled:!("1004"!=t.typeSelected&&!this.isDisabled.species)},on:{change:function(e){return t.getItems("tobacco_group")}},model:{value:t.speciesSelected,callback:function(e){t.speciesSelected=e},expression:"speciesSelected"}},t._l(t.species,(function(t,e){return s("el-option",{key:e,attrs:{label:t.tobacco_type_desc,value:t.tobacco_type_meaning}})})),1)],1)]),t._v(" "),s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่อนุมัติ\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","border-radius":"3px"},attrs:{name:"input_date",id:"input_date",disabled:this.isDisabled.tranApprovalDate,format:t.transDate["js-format"]},on:{dateWasSelected:t.updateApprove},model:{value:t.header.tran_approval_date,callback:function(e){t.$set(t.header,"tran_approval_date",e)},expression:"header.tran_approval_date"}})],1)])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 row"},[s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            สถานะ\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("el-select",{staticClass:"form-group",attrs:{clearable:"",size:"small",placeholder:"เลือก","popper-append-to-body":!1,disabled:this.isDisabled.status},on:{change:function(e){return t.checkStatus(t.statusSelect)}},model:{value:t.statusSelect,callback:function(e){t.statusSelect=e},expression:"statusSelect"}},t._l(t.statuses,(function(t,e){return s("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)]),t._v(" "),s("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[s("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            หมายเหตุ\n                        ")]),t._v(" "),s("div",{staticClass:"col-lg-9 col-form-label"},[s("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",disabled:this.isDisabled.textarea,maxlength:"150"},model:{value:t.form.textarea,callback:function(e){t.$set(t.form,"textarea",e)},expression:"form.textarea"}}),t._v(" "),s("span",{staticStyle:{color:"red"}},[t._v("\n                                *ช่องหมายเหตุ ไม่สามารถกรอกได้เกิน 150 ตัวอักษร\n                            ")])],1)])])])])]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.save,expression:"loading.save"}],staticClass:"ibox-title p-4"},[t.showLine&0==t.lines.length?s("div",{attrs:{align:"center"}},[s("h4",[t._v(" Data Not Found. ")])]):t._e(),t._v(" "),s("div",{staticClass:"row align-items-center"},[t.showLine?s("div",{staticStyle:{width:"1920px",overflow:"scroll",height:"700px"}},[t.showLine&"1004"!=t.typeSelected?s("table",{staticClass:"table",attrs:{width:"100%",id:"tableMainPDP0014"}},t._l(t.trlines,(function(e,a){return s("div",{key:a},[0==a?s("thead",[s("tr",{staticClass:"first"},[t._m(10,!0),t._v(" "),t._m(11,!0),t._v(" "),t._m(12,!0),t._v(" "),t._m(13,!0),t._v(" "),t._m(14,!0),t._v(" "),s("th",{staticClass:"w-20 text-center",attrs:{colspan:2*e.merge_tr}},[s("div",{staticClass:"tw-bg-red-300 p-2"},[t._v(" ใบยา ")])])]),t._v(" "),s("tr",{staticClass:"second"},t._l(e.medicinal_leaves,(function(e,a){return s("th",{key:a,staticClass:"text-center w-300",attrs:{colspan:"2"}},[s("div",{staticClass:"p-2 tw-bg-green-200"},[t._v(t._s(e))])])})),0),t._v(" "),s("tr",{staticClass:"third"},t._l(e.medicinal_leaves_tr,(function(e,a){return s("th",{key:a,staticClass:"text-center"},[s("div",{staticClass:"tw-bg-gray-400 p-2"},[t._v(t._s(a%2==0?"%":"กก."))])])})),0)]):t._e(),t._v(" "),t._l(t.lines,(function(e,a){return s("tbody",{key:a},[s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"vertical-align":"middle"}},[t._v(" \n                                    "+t._s(e.item_desc)+" \n                                ")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.quantity}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:4,minus:!1,disabled:"",value:e.qty_lld}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.year_quantity}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.month_quantity}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(a,i){return s("td",{key:i,staticClass:"w-50"},[i%2==0?s("span",[t.formLines[e.item_code+a+t.speciesSelected]?s("div",[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:i%2!=0,value:e.month_quantity},on:{change:function(s){return t.inputData(t.formLines[e.item_code+a+t.speciesSelected],t.formLines[e.item_code+a+t.speciesSelected].ingredien_percent_item)}},model:{value:t.formLines[e.item_code+a+t.speciesSelected].ingredien_percent_item,callback:function(s){t.$set(t.formLines[e.item_code+a+t.speciesSelected],"ingredien_percent_item",s)},expression:"formLines[uLine.item_code+mlTr+speciesSelected].ingredien_percent_item"}})],1):s("div",[s("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})])]):t._e(),t._v(" "),i%2!=0?s("span",[t.formLines[e.item_code+a+t.speciesSelected]?s("div",[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.calculateKM(e,e.item_code,a,t.speciesSelected,t.formLines)}})],1):s("div",[s("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})])]):t._e()])}))],2),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ 6 เดือน ")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_sales_qty_use_six_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.header.total_lld_qty_use_six_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_year_use_six_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_month_use_six_month}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)/2}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)/2}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ทั้งปี")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_sales_qty_use_year}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.header.total_lld_qty_use_year}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_year_use_year}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_month_use_year}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ต่อเดือน")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_sales_qty_use_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.header.total_lld_qty_use_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_year_use_month}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.header.total_qty_month_use_month}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)/12}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)/12}})],1):t._e()])}))],2):t._e()])}))],2)})),0):t._e(),t._v(" "),t.showLine&"1004"==t.typeSelected?s("table",{staticClass:"table",attrs:{width:"100%",id:"tableMainPDP0014"}},t._l(t.trlines,(function(e,a){return s("div",{key:a},[0==a?s("thead",[s("tr",{staticClass:"first"},[t._m(15,!0),t._v(" "),t._m(16,!0),t._v(" "),t._m(17,!0),t._v(" "),t._m(18,!0),t._v(" "),t._m(19,!0),t._v(" "),s("th",{staticClass:"w-20 text-center",attrs:{colspan:2*e.merge_tr}},[s("div",{staticClass:"tw-bg-red-300 p-2"},[t._v("ใบยา")])])]),t._v(" "),s("tr",{staticClass:"second"},t._l(e.medicinal_leaves,(function(e,a){return s("th",{key:a,staticClass:"w-300 text-center",attrs:{colspan:"2"}},[s("div",{staticClass:"p-2 tw-bg-green-200"},[t._v(" "+t._s(e)+" ")])])})),0),t._v(" "),s("tr",{staticClass:"third"},t._l(e.medicinal_leaves_tr,(function(e,a){return s("th",{key:a,staticClass:"text-center"},[s("div",{staticClass:"tw-bg-gray-400 p-2"},[t._v(" "+t._s(a%2==0?"ต่อ 100 กก":"กก.")+" ")])])})),0)]):t._e(),t._v(" "),t._l(t.lines,(function(e,a){return s("tbody",{key:a},[s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"vertical-align":"middle"}},[t._v(" \n                                    "+t._s(e.item_desc)+" \n                                ")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.quantity}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.qty_lld}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.year_quantity}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.month_quantity}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(a,i){return s("td",{key:i,staticClass:"w-50"},[i%2==0?s("span",[t.formLines[e.item_code+a+"all"]?s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.formLines[e.item_code+a+"all"].sum_ingredien_percent_item}}):t._e(),t._v(" "),t.formLines[e.item_code+a+"all"]?t._e():s("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})],1):t._e(),t._v(" "),i%2!=0?s("span",[t.formLines[e.item_code+a+"all"]?s("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:2,minus:!1,disabled:"",value:e.year_quantity*(t.formLines[e.item_code+a+"all"]?t.formLines[e.item_code+a+"all"].sum_ingredien_percent_item:0)}}):t._e(),t._v(" "),t.formLines[e.item_code+a+"all"]?t._e():s("input",{staticClass:"form-control text-center",attrs:{disabled:"",type:"text"}})],1):t._e()])}))],2),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ 6 เดือน ")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("quantity")/2}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("qty_lld")/2}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("year_quantity")/2}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("month_quantity")/2}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLines(e)/2}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLines(e)/2}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ทั้งปี")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("quantity")}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("qty_lld")}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("year_quantity")}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("month_quantity")}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLines(e)}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLines(e)}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==a?s("tr",[s("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ต่อเดือน")]),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("quantity")/12}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("qty_lld")/12}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("year_quantity")/12}})],1),t._v(" "),s("td",{staticClass:"w-150 text-right"},[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumMonth("month_quantity")/12}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,a){return s("td",{key:a,staticClass:"w-50"},[a%2==0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumLines(e)/12}})],1):t._e(),t._v(" "),a%2!=0?s("span",[s("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:2,minus:!1,disabled:"",value:t.sumKgLines(e)/12}})],1):t._e()])}))],2):t._e()])}))],2)})),0):t._e()]):t._e()])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-lg-3"},[s("h5",[t._v("ประมาณการใช้วัตถุดิบในคงคลัง :")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"submit","data-toggle":"modal","data-target":"#ModalSearch"}},[s("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                        ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title",attrs:{id:"ModalCreateLabel"}},[t._v("\n                                    สร้างประมาณการใช้วัตถุดิบตามประมาณยอดจำหน่าย")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticStyle:{width:"20%"}},[t._v("ปีงบประมาณ")]),t._v(" "),s("th",{staticStyle:{width:"20%"}},[t._v("ครั้งที่ปีงบประมาณการจำหน่าย")]),t._v(" "),s("th",{staticStyle:{width:"20%"}},[t._v("วันที่อนุมัติ")]),t._v(" "),s("th",{staticStyle:{width:"20%"}},[t._v("ปรับครั้งที่")]),t._v(" "),s("th",{staticStyle:{width:"20%"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-danger col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"}},[s("i",{staticClass:"fa fa-times"}),t._v("ยกเลิก\n                                            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),s("h4",{staticClass:"modal-title"},[t._v("ประมาณการยอดจำหน่ายประจำปี")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปีงบประมาณ "),s("br"),t._v(" (ฝ่ายขาย)\n                                                ")]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปรับครั้งที่ "),s("br"),t._v(" (ฝ่ายขาย)\n                                                ")]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปรับครั้งที่ "),s("br"),t._v(" (ชนป.)\n                                                ")]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปรับครั้งที่ตามประมาณ "),s("br"),t._v(" การใช้วัตถุดิบ\n                                                ")]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    วันที่อนุมัติ\n                                                ")]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    สถานะ\n                                                ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            อ้างอิงค่า LLD ปี "),s("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประเภท "),s("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            กลุ่ม "),s("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center sticky-col",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" ตราบุหรี่ ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-200 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ประมาณการจำหน่ายประจำปี (ล้านมวน) ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ค่า LLD (ก.ก./พันมวน) ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" จำนวนที่ใช้ต่อปี (ก.ก.) ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" จำนวนที่ใช้ต่อเดือน (ก.ก.) ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center sticky-col",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ตราบุหรี่")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-200 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ประมาณการจำหน่ายประจำปี (ล้านมวน)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ค่า LLD (ก.ก./พันมวน)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("จำนวนที่ใช้ต่อปี (ก.ก.)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[s("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("จำนวนที่ใช้ต่อเดือน (ก.ก.)")])])}],!1,null,null,null).exports},96901:(t,e,s)=>{var a=s(77757);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,s(45346).Z)("f1c3f7a0",a,!0,{})},76799:(t,e,s)=>{var a=s(24628);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,s(45346).Z)("7aa8d052",a,!0,{})}}]);