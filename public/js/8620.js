(self.webpackChunk=self.webpackChunk||[]).push([[8620],{3162:(t,s,a)=>{"use strict";a.d(s,{e:()=>l});var e=axios.create({baseURL:"/",headers:{"Content-Type":"application/json"}});e.interceptors.request.use((function(t){return t}));var l=e},77757:(t,s,a)=>{"use strict";a.d(s,{Z:()=>i});var e=a(23645),l=a.n(e)()((function(t){return t[1]}));l.push([t.id,".modal-body{padding:15px!important}.modal-dialog{height:80%!important;padding-top:10%}",""]);const i=l},48620:(t,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});a(3162);const e={props:["user-profile","trans-date","token","trans-btn","types","statuses"],mounted:function(){},data:function(){return{years:[],year:"",salesFiscal:"",salesFiscalNumber:"",salesFiscalVersion:"",salesFiscals:[],dialogTableVisible:!1,dialogFormVisible:!1,yearNumber:"",showTable:!1,header:"",lines:[],form:{header_id:"",period_year:"",period_year_no:"",date_create:"",date_updated:"",lld_year:"",planning_year:"",planning_no:"",planning_updated:"",planning_version:"",sales_fiscal_version:"",sales_fiscal_no:"",lines:[],type:"",status:"inactive"},items:[],typeSelected:"",statusSelect:"inactive"}},methods:{getYears:function(){var t=this;axios.get("/pd/ajax/pdp0014/get-years").then((function(s){200==s.status&&(console.log(s),t.years=s.data.years)})).catch((function(t){console.log(t)}))},checkNumberFromYear:function(){var t=this;this.year?axios.get("/pd/ajax/pdp0014/check-number-from-year/"+this.year).then((function(s){200==s.status&&(t.yearNumber=s.data.yearNumber)})).catch((function(t){console.log(t)})):this.yearNumber=""},getSalesFiscals:function(){var t=this;this.showTable=!0,this.dialogTableVisible=!0,axios.get("/pd/ajax/pdp0014/get-sales-fiscals").then((function(s){200==s.status&&(t.salesFiscals=s.data.salesFiscals)})).catch((function(t){console.log(t)}))},selectSalesFiscal:function(t){console.log(t),this.dialogTableVisible=!1,this.showTable=!1,this.salesFiscal=this.salesFiscals[t].sales_fiscal_year_th,this.salesFiscalNumber=this.salesFiscals[t].sales_fiscal_year_no,this.salesFiscalVersion=this.salesFiscals[t].sales_fiscal_year_revision},insertHeader:function(){this.form.period_year=this.year,this.form.period_year_no=this.yearNumber,this.form.lld_year=2563,this.form.planning_year=this.salesFiscal,this.form.planning_no=this.salesFiscalNumber,this.form.planning_version=this.salesFiscalVersion},getLines:function(){},getItems:function(){var t=this;this.form.type=this.typeSelected,this.form.status=this.statusSelect;var s={params:this.form};axios.get("/pd/ajax/pdp0014/get-items",s).then((function(s){200==s.status&&(t.items=s.data.items)})).catch((function(t){console.log(t)}))},fitterLines:function(t){}}};var l=a(93379),i=a.n(l),o=a(77757),r={insert:"head",singleton:!1};i()(o.Z,r);o.Z.locals;const n=(0,a(51900).Z)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-title"},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-w-m btn-success",attrs:{"data-toggle":"modal","data-target":"#ModalCreate"},on:{click:t.getYears}},[a("i",{staticClass:"fa fa-plus"}),t._v(" สร้าง\n                        ")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"ModalCreate",tabindex:"-1",role:"dialog","aria-labelledby":"ModalCreateLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-form-label",attrs:{for:"select1"}},[t._v("\n                                                ปีงบประมาณ\n                                            ")]),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("el-select",{attrs:{clearable:"",placeholder:"Select","popper-append-to-body":!1},on:{change:t.checkNumberFromYear},model:{value:t.year,callback:function(s){t.year=s},expression:"year"}},t._l(t.years,(function(t){return a("el-option",{key:t.sales_fiscal_year_th,attrs:{label:t.sales_fiscal_year_th,value:t.sales_fiscal_year_th}})})),1)],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label",attrs:{for:"input1"}},[t._v("\n                                                ครั้งที่\n                                            ")]),t._v(" "),a("div",{staticClass:"col-lg-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.yearNumber,expression:"yearNumber"}],staticClass:"form-control text-center",attrs:{disabled:"",type:"text",id:"input1"},domProps:{value:t.yearNumber},on:{input:function(s){s.target.composing||(t.yearNumber=s.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-form-label",attrs:{for:"select1"}},[t._v("\n                                                ประมาณยอดจำหน่ายปี\n                                            ")]),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Please input"},model:{value:t.salesFiscal,callback:function(s){t.salesFiscal=s},expression:"salesFiscal"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getSalesFiscals},slot:"append"})],1)],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label",attrs:{for:"input1"}},[t._v("\n                                                ครั้งที่\n                                            ")]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("input",{staticClass:"form-control text-center",attrs:{disabled:"",type:"text",id:"input1"},domProps:{value:t.salesFiscalNumber}})]),t._v(" "),a("label",{staticClass:"col-form-label",attrs:{for:"input1"}},[t._v("\n                                                ปรับครั้งที่\n                                            ")]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("input",{staticClass:"form-control text-center",attrs:{disabled:"",type:"text",id:"input1"},domProps:{value:t.salesFiscalVersion}})])])])]),t._v(" "),t.salesFiscals.length>0&t.showTable?a("div",{staticClass:"table-responsive"},[a("div",{staticStyle:{height:"250px",overflow:"scroll"}},[a("table",{staticClass:"table"},[t._m(5),t._v(" "),a("tbody",t._l(t.salesFiscals,(function(s,e){return a("tr",{key:e},[a("td",[t._v(" "+t._s(s.sales_fiscal_year_th)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(s.sales_fiscal_year_no)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(s.approve_date)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(s.sales_fiscal_year_revision)+" ")]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(s){return t.selectSalesFiscal(e)}}},[t._v("เลือก")])])])})),0)])])]):t._e(),t._v(" "),a("div",{staticClass:"form-group row mt-4"},[a("div",{staticClass:"col-lg-12 text-center"},[a("button",{staticClass:"btn btn-primary col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.insertHeader}},[a("i",{staticClass:"fa fa-check"}),t._v("ตกลง\n                                        ")]),t._v(" "),t._m(6)])])])])])]),t._v(" "),t._m(7)])]),t._v(" "),a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ปีงบประมาณ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.period_year,expression:"form.period_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:""},domProps:{value:t.form.period_year},on:{input:function(s){s.target.composing||t.$set(t.form,"period_year",s.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.period_year_no,expression:"form.period_year_no"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.period_year_no},on:{input:function(s){s.target.composing||t.$set(t.form,"period_year_no",s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่สร้าง\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("span",{staticClass:"remark"},[t._v(" "+t._s(t.form.date_create)+" ")])]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่แก้ไขล่าสุด\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("span",{staticClass:"remark"},[t._v(t._s(t.form.date_updated))])])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            อ้างอิงค่า LLD ปี\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.lld_year,expression:"form.lld_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:""},domProps:{value:t.form.lld_year},on:{input:function(s){s.target.composing||t.$set(t.form,"lld_year",s.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประมาณยอดจำหน่ายปี\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.planning_year,expression:"form.planning_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.planning_year},on:{input:function(s){s.target.composing||t.$set(t.form,"planning_year",s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.planning_no,expression:"form.planning_no"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.planning_no},on:{input:function(s){s.target.composing||t.$set(t.form,"planning_no",s.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ปรับครั้งที่ \n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.planning_version,expression:"form.planning_version"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.planning_version},on:{input:function(s){s.target.composing||t.$set(t.form,"planning_version",s.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประเภท\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{size:"small",clearable:"",placeholder:"Select","popper-append-to-body":!1},on:{change:t.getItems},model:{value:t.typeSelected,callback:function(s){t.typeSelected=s},expression:"typeSelected"}},t._l(t.types,(function(t){return a("el-option",{key:t.ingredien_tobacco_type,attrs:{label:t.ingredien_tobacco_desc,value:t.ingredien_tobacco_type}})})),1)],1)]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ผู้บันทึก\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.salesFiscalNumber}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่อนุมัติ \n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.salesFiscalNumber}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            สถานะ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{clearable:"",size:"small",placeholder:"Select","popper-append-to-body":!1},on:{change:function(s){return t.fitterLines("status")}},model:{value:t.statusSelect,callback:function(s){t.statusSelect=s},expression:"statusSelect"}},t._l(t.statuses,(function(t,s){return a("el-option",{key:s,attrs:{label:t,value:s}})})),1)],1)])])])])])])}),[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-lg-4"},[a("h5",[t._v("ประมาณการใช้วัตถุดิบในคงคลัง :")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"submit","data-toggle":"modal","data-target":"#ModalSearch"}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                        ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn btn-w-m btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),t._v(" บันทึก\n                        ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn btn-w-m btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-print"}),t._v(" พิมพ์\n                        ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title",attrs:{id:"ModalCreateLabel"}},[t._v("\n                                    สรา้งประมาณการใช้วัตถุดิบตามประมาณยอดจำหน่าย")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v("ปีงบประมาณ")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("ครั้งที่ปีงบประมาณการจำหน่าย")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("วันที่อนุมัติ")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("ปรับครั้งที่")]),t._v(" "),a("th",{staticStyle:{width:"20%"}})])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn btn-danger col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"fa fa-times"}),t._v("ยกเลิก\n                                        ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal fade",attrs:{id:"ModalSearch",tabindex:"-1",role:"dialog","aria-labelledby":"ModalSearchLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog search-modal modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title",attrs:{id:"ModalSearchLabel"}},[t._v("ค้นหา")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-6 col-form-label",attrs:{for:"input2"}},[t._v("\n                                            ค้นหาประมาณการใช้วัตถุดิบตามประมาณยอดจำหน่ายปี:\n                                        ")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"input2"}})]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("button",{staticClass:"btn btn-default col-lg-12 p-2",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-search"}),t._v(" ค้นหา\n                                            ")])])])])])])])])}],!1,null,null,null).exports},51900:(t,s,a)=>{"use strict";function e(t,s,a,e,l,i,o,r){var n,c="function"==typeof t?t.options:t;if(s&&(c.render=s,c.staticRenderFns=a,c._compiled=!0),e&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(n=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),l&&l.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=n):l&&(n=r?function(){l.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:l),n)if(c.functional){c._injectStyles=n;var d=c.render;c.render=function(t,s){return n.call(s),d(t,s)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,n):[n]}return{exports:t,options:c}}a.d(s,{Z:()=>e})}}]);