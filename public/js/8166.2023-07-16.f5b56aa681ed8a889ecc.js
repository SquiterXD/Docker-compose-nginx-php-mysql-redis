(self.webpackChunk=self.webpackChunk||[]).push([[8166],{88166:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o});const c={data:function(){return{period_year:"all",tableData:[],ccGroups:[],accountType:[],checked:1,value:"",loading:!1,option:{fiscal_year:[]},loadingInput:{}}},mounted:function(){this.getAccountDeptV(),this.getDropdownAccountType(),this.getPeriodYears()},methods:{updateAccountType:function(t){var e=this;axios.post("/ct/ajax/account_dept_v",t).then((function(t){e.$message({showClose:!0,message:"อัพเดตสำเร็จ",type:"success"})})).catch((function(t){console.log(t.response.data),e.$message({showClose:!0,message:"อัพเดตไม่สำเร็จ",type:"error"})}))},selectPeriodYear:function(){var t=this.period_year;if("all"==t)this.getAccountDeptV();else{var e="?period_year=".concat(t);this.getAccountDeptV(e)}},getPeriodYears:function(t){var e=this;this.loadingInput.fiscal_year=!0,axios.get("/ct/ajax/year-view",{params:{text:t}}).then((function(t){e.option.fiscal_year=t.data})),this.loadingInput.fiscal_year=!1},getDropdownAccountType:function(){var t=this;axios.get("/ct/ajax/account_type").then((function(e){t.accountType=e.data})).catch((function(t){console.log(t.response.data)}))},getAccountDeptV:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loading=!0,axios.get("/ct/ajax/account_dept_v".concat(e)).then((function(e){t.tableData=e.data.data})).catch((function(t){console.log(t.response.data)})).then((function(){t.loading=!1}))},getListSetAccountType:function(){var t=this;axios.get("/ct/ajax/set_account_type").then((function(e){t.tableData=e.data})).catch((function(t){console.log("error: ",t)}))},getCcGroups:function(){var t=this;axios.get("/ct/ajax/cc_group").then((function(e){t.ccGroups=e.data})).catch((function(t){console.log("error: ",t)}))},convertBoolean:function(t){return"Y"==t||"N"!=t&&void 0},checkboxOnChange:function(t,e){e.transfer_account_flag=t?"Y":"N",this.updateAccountType(e)},update:function(t){var e=this;axios.post("/ct/ajax/set_account_type/update",{acc_code:t.acc_code,acc_group:t.acc_group,is_transfer:t.is_transfer}).then((function(t){e.$message({showClose:!0,message:"บันทึกสำเร็จ",type:"success"})})).catch((function(t){this.$message({showClose:!0,message:"ไม่สามารถบันทึกได้",type:"error"})}))}}};const o=(0,a(51900).Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[a("div",{staticClass:" row"},[a("div",{staticClass:"col-md-4 flex-wrap form-group"},[a("label",{staticClass:"col-form-label"},[t._v("ปีงบประมาณ")]),t._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"ปีงบประมาณ"},on:{change:function(e){return t.selectPeriodYear()}},model:{value:t.period_year,callback:function(e){t.period_year=e},expression:"period_year"}},[a("el-option",{attrs:{label:"ทั้งหมด",value:"all"}}),t._v(" "),t._l(t.option.fiscal_year,(function(t,e){return a("el-option",{key:e,attrs:{label:t.year_thai,value:t.period_year}})}))],2)],1)]),t._v(" "),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"acc_code",label:"รหัสบัญชี",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sub_acc_code",label:"รหัสบัญชีย่อย",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"ชื่อบัญชี",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                                "+t._s(e.row.acc_desc+" "+(e.row.sub_acc_desc||""))+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"account_type_desc",label:"ประเภทบัญชี",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{filterable:"",placeholder:"Select"},on:{change:function(a){return t.updateAccountType(e.row)}},model:{value:t.tableData[e.$index].account_type,callback:function(a){t.$set(t.tableData[e.$index],"account_type",a)},expression:"tableData[scope.$index].account_type"}},t._l(t.accountType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"transfer_account_flag",label:"บัญชีรับโอน",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{"v-model":t.tableData[e.$index].transfer_account_flag,checked:t.convertBoolean(t.tableData[e.$index].transfer_account_flag)},on:{change:function(a){return t.checkboxOnChange(a,e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"กำหนดหน่วยงาน",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"/ct/set_account_type_dept/"+e.row.acc_code+"?sub_acc_code="+e.row.sub_acc_code}},[a("el-button",{attrs:{type:"primary"}},[t._v("หน่วยงาน\n                                ")])],1)]}}])})],1)]],2)])])}),[],!1,null,null,null).exports}}]);