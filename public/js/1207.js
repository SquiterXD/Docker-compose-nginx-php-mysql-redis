(self.webpackChunk=self.webpackChunk||[]).push([[1207],{29040:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".vld-overlay,.vld-shown{overflow:hidden}.vld-overlay{bottom:0;left:0;position:absolute;right:0;top:0;align-items:center;display:none;justify-content:center;z-index:9999}.vld-overlay.is-active{display:flex}.vld-overlay.is-full-page{z-index:9999;position:fixed}.vld-overlay .vld-background{bottom:0;left:0;position:absolute;right:0;top:0;background:#fff;opacity:.5}.vld-overlay .vld-icon,.vld-parent{position:relative}",""]);const s=i},1328:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".v--modal-overlay[data-v-b5ba0d1e]{z-index:2000;padding-top:3rem;padding-bottom:3rem}",""]);const s=i},50662:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".v--modal-overlay[data-v-7054ba6f]{z-index:2000;padding-top:3rem;padding-bottom:3rem}",""]);const s=i},19371:(e,t,a)=>{"use strict";var n=a(93379),i=a.n(n),s=a(29040),r={insert:"head",singleton:!1};i()(s.Z,r),s.Z.locals},41207:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var n=a(87757),i=a.n(n),s=a(7398),r=a.n(s),o=(a(19371),a(30381)),l=a.n(o),c=a(80455),u=a.n(c);function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m(e,t,a,n,i,s,r){try{var o=e[s](r),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function r(e){m(s,n,i,r,o,"next",e)}function o(e){m(s,n,i,r,o,"throw",e)}r(void 0)}))}}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f={components:{Loading:r(),VueNumeric:u()},props:["planHeader","planLines","weeklys","uomCodes","machines","availableMachines","machinePowers","machineTimes","dailyRemainingItems"],watch:{planHeader:function(e){this.planHeaderData=e,this.weekDates=this.getWeekDates(this.weeklys,this.planHeaderData.week_number)},dailyRemainingItems:function(e){this.remainingItems=e},planLines:function(e){this.machineItems=this.mapMachineItems(this.weeklys,this.machines,this.planHeaderData,this.dailyRemainingItems,e)}},data:function(){return{planHeaderData:this.planHeader,remainingItems:this.dailyRemainingItems?this.dailyRemainingItems:[],machineItems:this.mapMachineItems(this.weeklys,this.machines,this.planHeader,this.dailyRemainingItems,this.planLines),weekDates:this.getWeekDates(this.weeklys,this.planHeader.week_number),isLoading:!1}},mounted:function(){},computed:{},methods:{mapMachineItems:function(e,t,a,n,i){var s=this;return t.filter((function(e){return i.find((function(t){return e.machine_name==t.machine_name}))})).map((function(t){return v(v({},t),{},{mon:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Mon"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Mon")},tue:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Tue"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Tue")},wed:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Wed"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Wed")},thu:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Thu"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Thu")},fri:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Fri"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Fri")},sat:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Sat"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Sat")},sun:{plan_time:s.getMachinePlanTimeByDay(e,i,a.week_number,t.machine_name,"Sun"),items:s.getMachineItemsByDay(e,n,i,a.week_number,t.machine_name,"Sun")}})}))},getWeekDates:function(e,t){var a=e.find((function(e){return e.weekly_value==t}));return a?a.dates:[]},isDayEnabled:function(e,t){return!!e.find((function(e){return t==e.day}))},getDateByDay:function(e,t){var a=e.find((function(e){return t==e.day}));return a?this.formatDateTh(a.date):"-"},getUomCodeDescription:function(e,t){var a=e.find((function(e){return e.uom_code==t}));return a?a.unit_of_measure:""},getMachinePlanTimeByDay:function(e,t,a,n,i){var s=this.machineTimes.length>0?this.machineTimes[0].lookup_code:"",r=this.getWeekDates(e,a).find((function(e){return i==e.day})),o=r?r.date:null;o&&(s=t.find((function(e){return e.machine_name==n&&l()(e.plan_date).format("YYYY-MM-DD")==l()(o).format("YYYY-MM-DD")})).plan_time);return s},getMachinePlanTimeDesc:function(e,t){var a=null;if(t){var n=e.find((function(e){return e.lookup_code==t}));a=n?n.description:null}return a},getMachineItemsByDay:function(e,t,a,n,i,s){var r=this,o=[],c=this.getWeekDates(e,n).find((function(e){return s==e.day})),u=c?c.date:null;u&&(o=a.filter((function(e){return e.machine_name==i&&l()(e.plan_date).format("YYYY-MM-DD")==l()(u).format("YYYY-MM-DD")})).map((function(e){var a=r.getItemInfo(t,e.request_number);return v(v({},e),{},{uom:a?a.uom:null,product_colors:e.attribute12,qty:e.qty?e.qty:0,remark:e.remark?e.remark:""})})).sort((function(e,t){return l()(e.created_at)-l()(t.created_at)})));return o},onMachinePlanTimeChanged:function(e,t){var a=this;t.plan_time=e;var n=t.items.map((function(t){return v(v({},t),{},{qty:0,remark:"",plan_time:e})}));t.items=n,n.map((function(e){a.onSaveDailyPlanLine(e)}))},onMachineNameChanged:function(e,t){var a=this;return _(i().mark((function n(){var s,r,o,l,c,u,d,p,m,h;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=t.machine_name,r=a.availableMachines.find((function(t){return e==t.machine_name})),t.machine_name=e,r){n.next=8;break}swal("เกิดข้อผิดพลาด","ไม่สามารถใช้ เครื่องจักร ซ้ำกันได้ ( ชื่อเครื่อง : ".concat(e,")"),"error"),a.$nextTick((function(){t.machine_name=null==s?"":""==s?null:s})),n.next=38;break;case 8:if(!(o=a.machines.find((function(t){return e==t.machine_name})))){n.next=38;break}return l=t.mon.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.mon.items=l,n.next=14,Promise.all(l.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return c=t.tue.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.tue.items=c,n.next=18,Promise.all(c.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:return u=t.wed.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.wed.items=u,n.next=22,Promise.all(u.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return d=t.thu.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.thu.items=d,n.next=26,Promise.all(d.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 26:return p=t.fri.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.fri.items=p,n.next=30,Promise.all(p.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 30:return m=t.sat.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.sat.items=m,n.next=34,Promise.all(m.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 34:return h=t.sun.items.map((function(e){return v(v({},e),{},{qty:0,remark:"",machine_name:o.machine_name,machine_group:o.machine_group})})),t.sun.items=h,n.next=38,Promise.all(h.map(function(){var e=_(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onSaveDailyPlanLine(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 38:case"end":return n.stop()}}),n)})))()},onMachineItemChanged:function(e,t,a,n){var i=this.getItemInfo(this.remainingItems,e);if(i){var s=a.inventory_item_id,r=a.request_number;a.inventory_item_id=i.inventory_item_id,a.request_number=e,this.validateMachineItem(t,a,n)?(a.inv_item_number=i.segment1,a.inv_item_desc=i.description,a.colors=i.colors,a.product_colors=i.product_colors,a.brand=i.brand,a.product=i.product,a.source_plan_line_id=i.plan_line_id,a.uom=i.uom,this.onSaveDailyPlanLine(a)):(swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึก ใช้ job ซ้ำกันได้ ในเครื่องเดียวกัน ( job number : ".concat(a.request_number,")"),"error"),this.$nextTick((function(){a.inventory_item_id=null==s?"":""==s?null:s,a.request_number=r})))}},validateMachineItem:function(e,t,a){for(var n=!0,i=[],s=e[a].items.map((function(e){return e.request_number})).sort(),r=0;r<s.length;r++)s[r]&&s[r+1]===s[r]&&i.push(s[r]);return i.length>0&&(n=!1),n},onMachineItemQtyChanged:function(e,t,a){this.validateMachineItemQty(e,t,a)?this.onSaveDailyPlanLine(t):t.qty=0},validateMachineItemQty:function(e,t,a){var n=!0,i=e.machine_name,s=e[a].plan_time,r=this.machinePowers.find((function(e){return e.product_time==s&&e.machine_name==i})),o=e[a].items.reduce((function(e,t){return e+(t.qty?parseFloat(t.qty):0)}),0);return parseFloat(r.power)<o&&(n=!1,swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึก จำนวนผลิต ได้เกิน Machine Cap ใน 1 วัน (จำนวนผลิตรวม : ".concat(o,", Machine Cap : ").concat(r.power," )"),"error")),n},onMachineItemRemarkChanged:function(e,t,a){this.onSaveDailyPlanLine(t)},getItemInfo:function(e,t){var a=null;return t&&(a=e.find((function(e){return e.request_number==t}))),a},getItemFullDesc:function(e,t){var a=null;if(t){var n=e.find((function(e){return e.request_number==t}));a=n?n.full_item_desc:null}return a},formatDateTh:function(e){return e?l()(e).add(543,"years").format("DD/MM/YYYY"):""},onSaveDailyPlanLine:function(e){var t=this;return _(i().mark((function a(){var n,s;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={plan_header:JSON.stringify(t.planHeaderData),plan_line:JSON.stringify(e)},t.isLoading=!0,a.next=4,axios.post("/ajax/pm/plans/daily/store-line",n).then((function(t){var a=t.data.data,n=a.message;return a.status,"error"==a.status&&(swal("เกิดข้อผิดพลาด","".concat(n),"error"),e.qty=0),a})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(e.message),"error")}));case 4:return s=a.sent,t.isLoading=!1,a.abrupt("return",s);case 7:case"end":return a.stop()}}),a)})))()},onAddNewLine:function(e,t,a){var n=this;return _(i().mark((function s(){var r,o,l;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=v({},a.find((function(e,t){return t==a.length-1}))),o=v(v({},r),{},{qty:0,remark:"",daily_plan_line_id:null,inventory_item_id:null,inv_item_number:null,inv_item_desc:null,colors:null,product_colors:null,brand:null,product:null,request_number:null,source_plan_line_id:null}),l={plan_header:JSON.stringify(n.planHeaderData),plan_line:JSON.stringify(o)},n.isLoading=!0,i.next=6,axios.post("/ajax/pm/plans/daily/add-new-line",l).then((function(i){var s=i.data.data,r=s.message,o=(s.plan_header&&JSON.parse(s.plan_header),s.plan_line?JSON.parse(s.plan_line):null);return a=[].concat(d(a),[o]),n.machineItems[e][t].items=a,s.status,"error"==s.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถเพิ่มข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(r),"error"),s})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถเพิ่มข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(e.message),"error")}));case 6:n.isLoading=!1;case 7:case"end":return i.stop()}}),s)})))()},onDeleteMachineLine:function(e){var t=this;return _(i().mark((function a(){var n;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={plan_header:JSON.stringify(t.planHeaderData),machine_name:e},t.isLoading=!0,a.next=4,axios.post("/ajax/pm/plans/daily/delete-machine-line",n).then((function(e){var a=e.data.data,n=a.message;if("success"==a.status){var i=a.plan_lines?JSON.parse(a.plan_lines):[];t.machineItems=t.mapMachineItems(t.weeklys,t.machines,t.planHeaderData,t.remainingItems,i)}return"error"==a.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถลบข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(n),"error"),a})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถลบข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(e.message),"error")}));case 4:t.isLoading=fals;case 5:case"end":return a.stop()}}),a)})))()},onDeleteLine:function(e,t){var a=this;return _(i().mark((function n(){var s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length<=1)){n.next=14;break}return t.inventory_item_id=null,t.inv_item_number=null,t.inv_item_desc=null,t.colors=null,t.product_colors=null,t.brand=null,t.product=null,t.request_number=null,t.source_plan_line_id=null,n.next=12,a.onSaveDailyPlanLine(t);case 12:n.next=19;break;case 14:return s={plan_header:JSON.stringify(a.planHeaderData),plan_line:JSON.stringify(t)},a.isLoading=!0,n.next=18,axios.post("/ajax/pm/plans/daily/delete-line",s).then((function(a){var n=a.data.data,i=n.message;if("success"==n.status){var s=e.findIndex((function(e){return e.daily_plan_line_id==t.daily_plan_line_id}));e.splice(s,1)}return"error"==n.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถลบข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(i),"error"),n})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถลบข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน | ".concat(e.message),"error")}));case 18:a.isLoading=!1;case 19:case"end":return n.stop()}}),n)})))()}}};var b=a(51900);const w=(0,b.Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"720px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0",staticStyle:{"min-width":"4300px"}},[a("thead",[e._m(0),e._v(" "),a("tr",[e._m(1),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Mon"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Tue"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Wed"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Thu"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Fri"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Sat"))+" ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{top:"40px"}},[e._v(" "+e._s(e.getDateByDay(e.weekDates,"Sun"))+" ")])])]),e._v(" "),a("tbody",[e._l(e.machineItems,(function(t,n){return[a("tr",{key:""+n,staticClass:"tw-text-xs"},[a("td",{staticClass:"freeze-col tw-text-xxl tw-font-bold",staticStyle:{"min-width":"200px","vertical-align":"top !important"}},["1"==e.planHeaderData.status?a("div",{staticClass:"freeze-col-content"},[a("div",{staticClass:"pull-right tw-w-full tw-mb-10"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteMachineLine(t.machine_name)}}},[a("i",{staticClass:"fa fa-trash"}),e._v(" ลบเครื่อง \n                                    ")])]),e._v(" "),a("pm-el-select",{attrs:{name:"machine_name_"+n,id:"input_machine_name_"+n,"select-options":e.machines,"option-key":"machine_name","option-value":"machine_name","option-label":"machine_name",value:t.machine_name,filterable:!0},on:{onSelected:function(a){return e.onMachineNameChanged(a,t)}}})],1):a("div",{staticClass:"freeze-col-content"},[e._v(" "+e._s(t.machine_name)+" ")])]),e._v(" "),e.isDayEnabled(e.weekDates,"Mon")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_mon_"+n,id:"input_plan_time_mon_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.mon.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.mon)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.mon.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.mon.items,(function(i,s){return[a("tr",{key:"mon_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_mon_"+n+"_"+s,id:"input_request_number_mon_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"mon")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_mon_"+n+"_"+s,id:"input_qty_mon_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"mon")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineMonItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.mon.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"mon_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"mon_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(2,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineMonItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_mon_"+n+"_"+s,id:"input_remark_mon_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"mon")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"mon",t.mon.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(3,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Tue")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_tue_"+n,id:"input_plan_time_tue_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.tue.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.tue)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.tue.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.tue.items,(function(i,s){return[a("tr",{key:"tue_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_tue_"+n+"_"+s,id:"input_request_number_tue_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"tue")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_tue_"+n+"_"+s,id:"input_qty_tue_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"tue")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineTueItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.tue.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"tue_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"tue_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(4,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineTueItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_tue_"+n+"_"+s,id:"input_remark_tue_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"tue")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"tue",t.tue.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(5,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Wed")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_wed_"+n,id:"input_plan_time_wed_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.wed.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.wed)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.wed.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.wed.items,(function(i,s){return[a("tr",{key:"wed_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_wed_"+n+"_"+s,id:"input_request_number_wed_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"wed")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_wed_"+n+"_"+s,id:"input_qty_wed_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"wed")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineWedItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.wed.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"wed_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"wed_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(6,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineWedItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_wed_"+n+"_"+s,id:"input_remark_wed_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"wed")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"wed",t.wed.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(7,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Thu")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_thu_"+n,id:"input_plan_time_thu_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.thu.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.thu)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.thu.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.thu.items,(function(i,s){return[a("tr",{key:"thu_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_thu_"+n+"_"+s,id:"input_request_number_thu_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"thu")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_thu_"+n+"_"+s,id:"input_qty_thu_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"thu")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineThuItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.thu.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"thu_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"thu_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(8,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineThuItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_thu_"+n+"_"+s,id:"input_remark_thu_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"thu")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"thu",t.thu.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(9,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Fri")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_fri_"+n,id:"input_plan_time_fri_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.fri.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.fri)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.fri.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.fri.items,(function(i,s){return[a("tr",{key:"fri_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_fri_"+n+"_"+s,id:"input_request_number_fri_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"fri")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_fri_"+n+"_"+s,id:"input_qty_fri_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"fri")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineFriItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.fri.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"fri_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"fri_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(10,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineFriItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_fri_"+n+"_"+s,id:"input_remark_fri_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"fri")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"fri",t.fri.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(11,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Sat")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_sat_"+n,id:"input_plan_time_sat_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.sat.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.sat)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.sat.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.sat.items,(function(i,s){return[a("tr",{key:"sat_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_sat_"+n+"_"+s,id:"input_request_number_sat_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"sat")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_sat_"+n+"_"+s,id:"input_qty_sat_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"sat")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineSatItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.sat.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"sat_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"sat_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(12,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineSatItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_sat_"+n+"_"+s,id:"input_remark_sat_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"sat")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"sat",t.sat.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(13,!0)],e._v(" "),e.isDayEnabled(e.weekDates,"Sun")?[a("td",{staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"plan_time_sun_"+n,id:"input_plan_time_sun_"+n,"select-options":e.machineTimes,"option-key":"lookup_code","option-value":"lookup_code","option-label":"description",value:t.sun.plan_time,filterable:!0},on:{onSelected:function(a){return e.onMachinePlanTimeChanged(a,t.sun)}}})],1):a("div",[e._v(" "+e._s(e.getMachinePlanTimeDesc(e.machineTimes,t.sun.plan_time))+" ")])])]),e._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"min-width":"280px"}},[e._v(" Item ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Brand ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"50px"}},[e._v(" Product ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Quantity ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" UOM ")]),e._v(" "),a("td",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v(" Job Number")]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center",staticStyle:{"min-width":"60px"}},[e._v(" Delete ")]):e._e()]),e._v(" "),e._l(t.sun.items,(function(i,s){return[a("tr",{key:"sun_"+n+"_"+s+"_1"},[a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("pm-el-select",{attrs:{name:"request_number_sun_"+n+"_"+s,id:"input_request_number_sun_"+n+"_"+s,"select-options":e.remainingItems,"option-key":"request_number","option-value":"request_number","option-label":"full_item_desc",value:i.request_number,filterable:!0},on:{onSelected:function(a){return e.onMachineItemChanged(a,t,i,"sun")}}})],1):a("div",[e._v(" "+e._s(i.inv_item_number)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.colors?i.colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.brand)+" ")])]),e._v(" "),a("td",{staticClass:"text-center",style:{backgroundColor:i.product_colors?i.product_colors:"#FFF"}},[a("div",{staticClass:"tw-font-bold"},[e._v(" "+e._s(i.product)+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},["1"==e.planHeaderData.status?a("div",[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"qty_sun_"+n+"_"+s,id:"input_qty_sun_"+n+"_"+s,disabled:e.isLoading},on:{blur:function(a){return e.onMachineItemQtyChanged(t,i,"sun")}},model:{value:i.qty,callback:function(t){e.$set(i,"qty",t)},expression:"machineSunItem.qty"}})],1):a("div",[e._v(" "+e._s(i.qty?Number(i.qty).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):"")+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(e.getUomCodeDescription(e.uomCodes,i.uom))+" ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("div",[e._v(" "+e._s(i.request_number)+" ")])]),e._v(" "),"1"==e.planHeaderData.status?a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.onDeleteLine(t.sun.items,i)}}},[a("i",{staticClass:"fa fa-trash"})])]):e._e()]),e._v(" "),a("tr",{key:"sun_"+n+"_"+s+"_2"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("div",[e._v(" "+e._s(i.inv_item_desc)+" ")])])]),e._v(" "),a("tr",{key:"sun_"+n+"_"+s+"_3"},[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},["1"==e.planHeaderData.status?a("div",[a("div",{staticClass:"input-group"},[e._m(14,!0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.remark,expression:"machineSunItem.remark"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"remark_sun_"+n+"_"+s,id:"input_remark_sun_"+n+"_"+s,disabled:e.isLoading},domProps:{value:i.remark},on:{blur:function(a){return e.onMachineItemRemarkChanged(t,i,"sun")},input:function(t){t.target.composing||e.$set(i,"remark",t.target.value)}}})])]):a("div",[a("div",[e._v(" หมายเหตุ : "+e._s(i.remark?i.remark:"-")+" ")])])])])]})),e._v(" "),"1"==e.planHeaderData.status?a("tr",[a("td",{staticClass:"text-left",attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-success tw-w-16",on:{click:function(a){return e.onAddNewLine(n,"sun",t.sun.items)}}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่ม\n                                        ")])])]):e._e()],2)]:[e._m(15,!0)]],2)]}))],2)])]),e._v(" "),a("loading",{attrs:{active:e.isLoading,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{staticClass:"text-center freeze-col",staticStyle:{"min-width":"200px"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[e._v("   ")])]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" จันทร์ ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" อังคาร ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" พุธ ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" พฤหัส ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" ศุกร์ ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" เสาร์ ")]),e._v(" "),a("th",{staticClass:"text-center tw-text-lg",staticStyle:{"min-width":"700px"}},[e._v(" อาทิตย์ ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-center freeze-col",staticStyle:{top:"40px"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[e._v("   ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-addon input-sm tw-border-white"},[e._v(" หมายเหตุ : ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"text-center",staticStyle:{"min-width":"700px","vertical-align":"top !important"}},[t("div")])}],!1,null,null,null).exports;function g(e,t,a,n,i,s,r){try{var o=e[s](r),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function k(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function r(e){g(s,n,i,r,o,"next",e)}function o(e){g(s,n,i,r,o,"throw",e)}r(void 0)}))}}const x={props:["modalName","modalWidth","modalHeight","planHeader","periodYears","periodYearValue","periodNames","periodNameValue","biweeklys","biweeklyValue","weeklys","weeklyValue","printTypes","printTypeValue","saleTypes","saleTypeValue","sourceVersions","sourceVersionValue","dailyPlanVersions","dailyPlanVersionValue"],components:{Loading:r()},watch:{planHeader:function(e){this.planHeaderData=e},periodYears:function(e){this.periodYearOptions=e},periodYearValue:function(e){this.periodYear=this.periodYearValue,this.periodYearLabel=this.getPeriodYearLabel(this.periodYearOptions,this.periodYear)},periodNames:function(e){this.periodNameOptions=e},periodNameValue:function(e){this.periodName=this.periodNameValue,this.periodNameLabel=this.getPeriodNameLabel(this.periodNameOptions,this.periodName)},biweeklys:function(e){this.biweeklyOptions=e},biweeklyValue:function(e){this.biweekly=this.biweeklyValue},weeklys:function(e){this.weeklyOptions=e},weeklyValue:function(e){this.weekly=this.weeklyValue},printTypeValue:function(e){this.printType=e},saleTypeValue:function(e){this.saleType=e},sourceVersionValue:function(e){this.sourceVersion=e},sourceVersions:function(e){this.sourceVersionOptions=e},dailyPlanVersionValue:function(e){this.dailyPlanVersion=e},dailyPlanVersions:function(e){this.dailyPlanVersionOptions=e}},data:function(){return{is_loading:!1,width:this.modalWidth,planHeaderData:this.planHeader,periodYear:this.periodYearValue,periodYearLabel:this.getPeriodYearLabel(this.periodYears,this.periodYearValue),periodYearOptions:this.periodYears,periodName:this.periodNameValue,periodNameOptions:this.periodNames,biweekly:this.biweeklyValue,biweeklyOptions:this.biweeklys,weekly:this.weeklyValue,weeklyOptions:this.weeklys,printType:this.printTypeValue,saleType:this.saleTypeValue,sourceVersion:this.sourceVersionValue,sourceVersionOptions:this.sourceVersions,dailyPlanVersion:this.dailyPlanVersionValue,dailyPlanVersionOptions:this.dailyPlanVersions}},created:function(){this.handleResize()},methods:{handleResize:function(){window.innerWidth<768?this.width="90%":window.innerWidth<992?this.width="80%":this.width=this.modalWidth},onYearlyPlanChanged:function(e){this.periodYear=e,this.periodYearLabel=this.getPeriodYearLabel(this.periodYearOptions,this.periodYear),this.periodName=null,this.periodNameLabel="",this.periodNameOptions=[],this.biweeklyOptions=[],this.sourceVersion=null,this.sourceVersions=[],this.sourceVersion=null,this.sourceVersions=[],this.dailyPlanVersion=null,this.dailyPlanVersionOptions=[],this.getPeriodNames(e)},onPeriodNameChanged:function(e){this.periodName=e,this.periodNameLabel=this.getPeriodNameLabel(this.periodNameOptions,this.periodName),this.biweeklyOptions=[],this.sourceVersion=null,this.sourceVersions=[],this.dailyPlanVersion=null,this.dailyPlanVersionOptions=[],this.getBiweekOfPlans(this.periodYear,e)},onBiweekOfPlanChanged:function(e){var t=this;return k(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.biweekly=e,t.sourceVersion=null,t.sourceVersions=[],t.dailyPlanVersion=null,t.dailyPlanVersionOptions=[],a.next=7,t.getWeekOfPlans(t.periodYear,t.periodName,t.biweekly);case 7:if(t.weekly=t.weeklys.length>0?t.weeklys[0].weekly_value:null,!(t.periodYear&&t.periodName&&t.biweekly&&t.printType&&t.saleType)){a.next=12;break}return a.next=11,t.getSourceVersions(t.periodYear,t.periodName,t.biweekly,t.printType,t.saleType);case 11:t.weekly&&t.sourceVersion&&t.getDailyPlanData(t.periodYear,t.periodName,t.biweekly,t.weekly,t.printType,t.saleType,t.sourceVersion,null);case 12:case"end":return a.stop()}}),a)})))()},onWeekOfPlanChanged:function(e){var t=this;return k(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.weekly=e,t.periodYear&&t.periodName&&t.biweekly&&t.weekly&&t.printType&&t.saleType&&t.sourceVersion&&t.getDailyPlanData(t.periodYear,t.periodName,t.biweekly,t.weekly,t.printType,t.saleType,t.sourceVersion,null);case 2:case"end":return a.stop()}}),a)})))()},onSourceVersionChanged:function(e){this.sourceVersion=e},onPrintTypeChanged:function(e){this.printType=e,this.periodYear&&this.periodName&&this.biweekly&&this.weekly&&this.printType&&this.saleType&&this.sourceVersion&&this.getDailyPlanData(this.periodYear,this.periodName,this.biweekly,this.weekly,this.printType,this.saleType,this.sourceVersion,null)},onSaleTypeChanged:function(e){this.saleType=e,this.periodYear&&this.periodName&&this.biweekly&&this.weekly&&this.printType&&this.saleType&&this.sourceVersion&&this.getDailyPlanData(this.periodYear,this.periodName,this.biweekly,this.weekly,this.printType,this.saleType,this.sourceVersion,null)},onBiweeklyPlanVersionChanged:function(e){this.dailyPlanVersion=e},getPeriodYearLabel:function(e,t){var a=e.find((function(e){return e.period_year_value==t}));return a?a.period_year_label:""},getPeriodNameLabel:function(e,t){var a=e.find((function(e){return e.period_name_value==t}));return a?a.period_name_label:""},getPeriodNames:function(e){var t=this;return k(i().mark((function a(){var n;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.is_loading=!0,t.dailyPlanVersion=null,t.dailyPlanVersionOptions=[],n={period_year:e},a.next=6,axios.get("/ajax/pm/plans/daily/get-months",{params:n}).then((function(e){var t=e.data.data;return t.period_names?JSON.parse(t.period_names):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ปี ".concat(t.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 6:t.periodNameOptions=a.sent,t.is_loading=!1;case 8:case"end":return a.stop()}}),a)})))()},getBiweekOfPlans:function(e,t){var a=this;return k(i().mark((function n(){var s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.is_loading=!0,s={period_year:e,period_name:t},n.next=4,axios.get("/ajax/pm/plans/daily/get-biweeks",{params:s}).then((function(e){var t=e.data.data;return t.biweeklys?JSON.parse(t.biweeklys):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","เดือน : ".concat(a.periodNameLabel," ปี ").concat(a.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 4:a.biweeklyOptions=n.sent,a.is_loading=!1;case 6:case"end":return n.stop()}}),n)})))()},getWeekOfPlans:function(e,t,a){var n=this;return k(i().mark((function s(){var r;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.is_loading=!0,r={period_year:e,period_name:t,biweekly:a},i.next=4,axios.get("/ajax/pm/plans/daily/get-weeks",{params:r}).then((function(e){var t=e.data.data;return t.weeklys?JSON.parse(t.weeklys):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ปักษ์ : ".concat(n.biweekly," เดือน : ").concat(n.periodNameLabel," ปี ").concat(n.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 4:n.weeklyOptions=i.sent,n.is_loading=!1;case 6:case"end":return i.stop()}}),s)})))()},getDailyPlanData:function(e,t,a,n,s,r,o,l){var c=this;return k(i().mark((function u(){var d;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c.is_loading=!0,d={period_year:e,period_name:t,biweekly:a,weekly:n,print_type:s,sale_type:r,source_version:o,version:l},i.next=4,axios.get("/ajax/pm/plans/daily/get-info",{params:d}).then((function(e){var t=e.data.data;return c.dailyPlanVersionOptions=t.versions?JSON.parse(t.versions):[],t})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","".concat(e.message),"error")}));case 4:c.dailyPlanVersion=c.dailyPlanVersionOptions.length>0?c.dailyPlanVersionOptions[0].version:null,c.is_loading=!1;case 6:case"end":return i.stop()}}),u)})))()},getSourceVersions:function(e,t,a,n,s){var r=this;return k(i().mark((function o(){var l;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.isLoading=!0,r.sourceVersion=null,r.sourceVersionOptions=[],l={period_year:e,period_name:t,biweekly:a,print_type:n,sale_type:s},i.next=6,axios.get("/ajax/pm/plans/daily/get-source-versions",{params:l}).then((function(e){var t=e.data.data;return"error"==t.status?swal("เกิดข้อผิดพลาด","ข้อมูลไม่ถูกต้อง | ".concat(t.message),"error"):(r.sourceVersion=t.source_version?t.source_version:null,r.sourceVersionOptions=t.source_versions?JSON.parse(t.source_versions):[],r.sourceVersionOptions.length<=0&&swal("ไม่พบข้อมูล","ไม่พบข้อมูลแผนรายปักษ์ที่อนุมัติแล้ว","error")),t})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ข้อมูลไม่ถูกต้อง | ".concat(e.message),"error")}));case 6:r.isLoading=!1;case 7:case"end":return i.stop()}}),o)})))()},onSearchPlanVersion:function(){this.$modal.hide(this.modalName),this.$emit("onSearchPlanVersion",{period_year:this.periodYear,period_name:this.periodName,biweekly:this.biweekly,weekly:this.weekly,print_type:this.printType,sale_type:this.saleType,source_version:this.sourceVersion,source_versions:this.sourceVersionOptions,version:this.dailyPlanVersion})}}};var C=a(93379),P=a.n(C),S=a(50662),D={insert:"head",singleton:!1};P()(S.Z,D);S.Z.locals;const V=(0,b.Z)(x,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"fixed","z-index":"100"}},[a("modal",{attrs:{name:e.modalName,width:e.width,scrollable:!0,height:e.modalHeight,shiftX:.3,shiftY:.3}},[a("div",{staticClass:"p-4"},[a("h4",[e._v(" ค้นหาแผนผลิตสิ่งพิมพ์รายวัน ")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ระบบการพิมพ์ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"print_type",id:"input_print_type","select-options":e.printTypes,"option-key":"print_type_value","option-value":"print_type_value","option-label":"print_type_label",value:e.printType,filterable:!0},on:{onSelected:e.onPrintTypeChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ประเภทแผน ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"sale_type",id:"sale_type","select-options":e.saleTypes,"option-key":"value","option-value":"value","option-label":"description",value:e.saleType,filterable:!0},on:{onSelected:e.onSaleTypeChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0"},[e._v(" แผนประมาณการ "),a("br"),e._v(" จำหน่ายประจำปี ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_year",id:"input_period_year","select-options":e.periodYearOptions,"option-key":"period_year_value","option-value":"period_year_value","option-label":"period_year_label",value:e.periodYear,filterable:!0},on:{onSelected:e.onYearlyPlanChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ประจำเดือน ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_name",id:"input_period_name","select-options":e.periodNameOptions,"option-key":"period_name_value","option-value":"period_name_value","option-label":"period_name_label",value:e.periodName,filterable:!0},on:{onSelected:e.onPeriodNameChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ปักษ์ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"biweekly",id:"input_biweekly","select-options":e.biweeklyOptions,"option-key":"biweekly_value","option-value":"biweekly_value","option-label":"biweekly_label",value:e.biweekly,filterable:!0},on:{onSelected:e.onBiweekOfPlanChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" สัปดาห์ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"weekly",id:"input_weekly","select-options":e.weeklyOptions,"option-key":"weekly_value","option-value":"weekly_value","option-label":"weekly_label",value:e.weekly,filterable:!0},on:{onSelected:e.onWeekOfPlanChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" เวอร์ชั่น ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"monthly_plan_version",id:"input_monthly_plan_version","select-options":e.dailyPlanVersionOptions,"option-key":"version","option-value":"version","option-label":"version",value:e.dailyPlanVersion,filterable:!0},on:{onSelected:e.onBiweeklyPlanVersionChanged}})],1)]),e._v(" "),a("div",{staticClass:"text-right tw-mt-8"},[a("button",{staticClass:"btn btn-primary tw-w-32",attrs:{type:"button",disabled:!(e.periodYear&&e.periodName&&e.biweekly&&e.weekly&&e.dailyPlanVersion)},on:{click:e.onSearchPlanVersion}},[e._v(" \n                    เลือก \n                ")]),e._v(" "),a("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(t){return e.$modal.hide(e.modalName)}}},[e._v(" \n                    ยกเลิก \n                ")])])])]),e._v(" "),a("loading",{attrs:{active:e.is_loading,"is-full-page":!0},on:{"update:active":function(t){e.is_loading=t}}})],1)}),[],!1,null,"7054ba6f",null).exports;const N={props:["modalName","modalWidth","modalHeight","periodYearValue","periodNameValue","biweeklyValue","printTypeValue","saleTypeValue","productDaily71Dates","productMachine71Groups","product71Plans","productDaily78Dates","productMachine78Groups","product78Plans","uomCodes"],components:{Loading:r()},watch:{periodYearValue:function(e){this.periodYear=e},periodNameValue:function(e){this.periodName=e},biweeklyValue:function(e){this.biweekly=e},printTypeValue:function(e){this.printType=e},saleTypeValue:function(e){this.saleType=e},productDaily71Dates:function(e){this.productDaily71DateItems=e},productMachine71Groups:function(e){this.productMachine71GroupItems=e},product71Plans:function(e){this.product71PlanItems=e},productDaily78Dates:function(e){this.productDaily78DateItems=e},productMachine78Groups:function(e){this.productMachine78GroupItems=e},product78Plans:function(e){this.product78PlanItems=e}},data:function(){return{isLoading:!1,width:this.modalWidth,periodYear:this.periodYearValue,periodName:this.periodNameValue,biweekly:this.biweeklyValue,printType:this.printTypeValue,saleType:this.saleTypeValue,isProduct71Active:!0,isProduct78Active:!1,productDaily71DateItems:this.productDaily71Dates.length>0?this.productDaily71Dates:[],productMachine71GroupItems:this.productMachine71Groups.length>0?this.productMachine71Groups:[],product71PlanItems:this.product71Plans.length>0?this.product71Plans:[],productDaily78DateItems:this.productDaily78Dates.length>0?this.productDaily78Dates:[],productMachine78GroupItems:this.productMachine78Groups.length>0?this.productMachine78Groups:[],product78PlanItems:this.product78Plans.length>0?this.product78Plans:[]}},created:function(){this.handleResize()},methods:{handleResize:function(){window.innerWidth<768?this.width="90%":window.innerWidth<992?this.width="80%":this.width=this.modalWidth},toggleProductType:function(e){var t=this;this.isProduct71Active=!1,this.isProduct78Active=!1,this.$nextTick((function(){"71"==e&&(t.isProduct71Active=!0),"78"==e&&(t.isProduct78Active=!0)}))},getUomCodeDescription:function(e,t){var a=e.find((function(e){return e.uom_code==t}));return a?a.unit_of_measure:""},formatDateTh:function(e){return e?l()(e).add(543,"years").format("DD/MM/YYYY"):""},getDayOfWeekTh:function(e){var t="-";switch(e?l()(e).day():0){case 0:t="อาทิตย์";break;case 1:t="จันทร์";break;case 2:t="อังคาร";break;case 3:t="พุธ";break;case 4:t="พฤหัสบดี";break;case 5:t="ศุกร์";break;case 6:t="เสาร์";break;default:t="-"}return t}}};var T=a(1328),L={insert:"head",singleton:!1};P()(T.Z,L);T.Z.locals;const M=(0,b.Z)(N,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"fixed","z-index":"100"}},[a("modal",{attrs:{name:e.modalName,width:e.width,scrollable:!0,height:e.modalHeight,shiftX:.3,shiftY:.3}},[a("div",{staticClass:"p-4"},[a("div",[a("div",{staticClass:"tw-inline-block tw-px-4"},[e._v(" แผนการผลิตบุหรี่ : ")]),e._v(" "),a("div",{staticClass:"tw-inline-block btn-group",attrs:{role:"group"}},[a("button",{staticClass:"btn",class:[e.isProduct71Active?"btn-primary":"btn-white"],attrs:{type:"button"},on:{click:function(t){return e.toggleProductType("71")}}},[e._v(" 7.1 ")]),e._v(" "),a("button",{staticClass:"btn",class:[e.isProduct78Active?"btn-primary":"btn-white"],attrs:{type:"button"},on:{click:function(t){return e.toggleProductType("78")}}},[e._v(" 7.8 ")])])]),e._v(" "),a("hr"),e._v(" "),e.isProduct71Active?a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"400px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0",staticStyle:{"min-width":"800px"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center freeze-col",staticStyle:{"min-width":"220px"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-4 tw-py-5",staticStyle:{"min-width":"50px","max-width":"50px"}},[e._v("\n                                        ลำดับ  \n                                    ")]),e._v(" "),a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-4 tw-py-5",staticStyle:{"min-width":"140px","max-width":"140px","border-left":"1px solid #ddd"}},[e._v("\n                                        ขอบเขตเครื่องจักร\n                                    ")])])]),e._v(" "),e._l(e.productDaily71Dates,(function(t,n){return[a("th",{key:"pdh_"+n,staticClass:"text-center",staticStyle:{"min-width":"140px"}},[a("div",[e._v(" "+e._s(e.getDayOfWeekTh(t.daily_date))+" ")]),e._v(" "),a("div",[e._v(" "+e._s(e.formatDateTh(t.daily_date))+" ")]),e._v(" "),a("div",{staticClass:"tw-text-xs"},[e._v(" WH : \n                                        "),t.working_hour?e._e():a("span",{staticClass:"badge badge-default"},[e._v(" - ")]),e._v(" "),parseFloat(t.working_hour)<10?a("span",{staticClass:"badge badge-warning"},[e._v(" "+e._s(t.working_hour)+" ")]):e._e(),e._v(" "),parseFloat(t.working_hour)>=10?a("span",{staticClass:"badge badge-danger"},[e._v(" "+e._s(t.working_hour)+" ")]):e._e()])])]}))],2)]),e._v(" "),e.productMachine71GroupItems.length>0?a("tbody",[e._l(e.productMachine71GroupItems,(function(t,n){return[a("tr",{key:"1_"+n},[a("td",{staticClass:"freeze-col text-center",staticStyle:{"min-width":"220px"},attrs:{rowspan:"2"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5 tw-pr-2",staticStyle:{"min-width":"50px","max-width":"50px"}},[e._v("\n                                            "+e._s(n+1)+"\n                                        ")]),e._v(" "),a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5 tw-px-2",staticStyle:{"min-width":"140px","max-width":"140px","border-left":"1px solid #ddd"}},[e._v("\n                                            "+e._s(t.machine_group_desc)+"\n                                        ")])])]),e._v(" "),e._l(e.productDaily71Dates,(function(n,i){return[a("td",{key:"pddf_"+i,staticClass:"text-center",staticStyle:{"min-width":"140px","border-bottom-color":"#f5f5f5"}},[e.product71PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group}))?a("div",[e._v("\n                                            "+e._s(e.product71PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group})).item_description)+"\n                                        ")]):e._e()])]}))],2),e._v(" "),a("tr",{key:"2_"+n},[e._l(e.productDaily71Dates,(function(n,i){return[a("td",{key:"pdds_"+i,staticClass:"text-center",staticStyle:{"border-top-color":"#f5f5f5"}},[e.product71PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group}))?a("div",[e._v("\n                                            "+e._s(Number(e.product71PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group})).date_efficiency_product).toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}))+"\n                                        ")]):a("div",[e._v(" 0.000 ")])])]}))],2)]}))],2):a("tbody",[a("tr",[a("td",{attrs:{colspan:"4"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[e._v(" ไม่พบข้อมูล ")])])])])])]):e._e(),e._v(" "),e.isProduct78Active?a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"400px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0",staticStyle:{"min-width":"800px"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center freeze-col",staticStyle:{"min-width":"220px"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5",staticStyle:{"min-width":"50px","max-width":"50px"}},[e._v("\n                                        ลำดับ  \n                                    ")]),e._v(" "),a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5",staticStyle:{"min-width":"140px","max-width":"140px","border-left":"1px solid #ddd"}},[e._v("\n                                        ขอบเขตเครื่องจักร\n                                    ")])])]),e._v(" "),e._l(e.productDaily78Dates,(function(t,n){return[a("th",{key:"pdh_"+n,staticClass:"text-center",staticStyle:{"min-width":"140px"}},[a("div",[e._v(" "+e._s(e.getDayOfWeekTh(t.daily_date))+" ")]),e._v(" "),a("div",[e._v(" "+e._s(e.formatDateTh(t.daily_date))+" ")]),e._v(" "),a("div",{staticClass:"tw-text-xs"},[e._v(" WH : \n                                        "),t.working_hour?e._e():a("span",{staticClass:"badge badge-default"},[e._v(" - ")]),e._v(" "),parseFloat(t.working_hour)<10?a("span",{staticClass:"badge badge-warning"},[e._v(" "+e._s(t.working_hour)+" ")]):e._e(),e._v(" "),parseFloat(t.working_hour)>=10?a("span",{staticClass:"badge badge-danger"},[e._v(" "+e._s(t.working_hour)+" ")]):e._e()])])]}))],2)]),e._v(" "),e.productMachine78GroupItems.length>0?a("tbody",[e._l(e.productMachine78GroupItems,(function(t,n){return[a("tr",{key:"1_"+n},[a("td",{staticClass:"freeze-col text-center",staticStyle:{"min-width":"220px"},attrs:{rowspan:"2"}},[a("div",{staticClass:"freeze-col-content",staticStyle:{padding:"0px"}},[a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5 tw-pr-2",staticStyle:{"min-width":"50px","max-width":"50px"}},[e._v("\n                                            "+e._s(n+1)+"\n                                        ")]),e._v(" "),a("div",{staticClass:"text-center tw-inline-block tw-align-top tw-py-5 tw-px-2",staticStyle:{"min-width":"140px","max-width":"140px","border-left":"1px solid #ddd"}},[e._v("\n                                            "+e._s(t.machine_group_desc)+"\n                                        ")])])]),e._v(" "),e._l(e.productDaily78Dates,(function(n,i){return[a("td",{key:"pddf_"+i,staticClass:"text-center",staticStyle:{"min-width":"140px","border-bottom-color":"#f5f5f5"}},[e.product78PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group}))?a("div",[e._v("\n                                            "+e._s(e.product78PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group})).item_description)+"\n                                        ")]):e._e()])]}))],2),e._v(" "),a("tr",{key:"2_"+n},[e._l(e.productDaily78Dates,(function(n,i){return[a("td",{key:"pdds_"+i,staticClass:"text-center",staticStyle:{"border-top-color":"#f5f5f5"}},[e.product78PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group}))?a("div",[e._v("\n                                            "+e._s(Number(e.product78PlanItems.find((function(e){return e.daily_date==n.daily_date&&e.machine_group==t.machine_group})).date_efficiency_product).toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}))+"\n                                        ")]):a("div",[e._v(" 0.000 ")])])]}))],2)]}))],2):a("tbody",[a("tr",[a("td",{attrs:{colspan:"4"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[e._v(" ไม่พบข้อมูล ")])])])])])]):e._e()])]),e._v(" "),a("loading",{attrs:{active:e.isLoading,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1)}),[],!1,null,"b5ba0d1e",null).exports;function Y(e,t,a,n,i,s,r){try{var o=e[s](r),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function O(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function r(e){Y(s,n,i,r,o,"next",e)}function o(e){Y(s,n,i,r,o,"throw",e)}r(void 0)}))}}const I={components:{Loading:r(),TablePlanLines:w,ModalSearchPlan:V,ModalProductPlans:M},props:["periodYears","periodYearValue","periodNameValue","biweeklyValue","weeklyValue","planStatuses","printTypes","printTypeValue","saleTypes","saleTypeValue","sourceVersionValue","uomCodes","machines","machinePowers","machineTimes","assets"],mounted:function(){var e=this;this.periodYearValue&&this.getPeriodNames(this.periodYearValue).then((function(t){e.periodNameValue&&(e.periodNameLabel=e.getPeriodNameLabel(e.periodNames,e.periodNameValue),e.getBiweekOfPlans(e.periodYearValue,e.periodNameValue).then((function(t){e.biweeklyValue&&e.getProductPlans(e.periodYearValue,e.periodNameValue,e.biweeklyValue),e.biweeklyValue&&e.printTypeValue&&e.saleTypeValue&&e.sourceVersionValue&&e.getWeekOfPlans(e.periodYearValue,e.periodNameValue,e.biweeklyValue).then((function(t){e.weeklyValue&&e.getSourceVersions(e.periodYearValue,e.periodNameValue,e.biweeklyValue,e.printTypeValue,e.saleTypeValue).then((function(t){e.getDailyPlanData(e.periodYearValue,e.periodNameValue,e.biweeklyValue,e.weeklyValue,e.printTypeValue,e.saleTypeValue,e.sourceVersionValue,null)}))}))})))}))},data:function(){return{periodYear:this.periodYearValue,periodYearLabel:this.getPeriodYearLabel(this.periodYears,this.periodYearValue),periodName:this.periodNameValue,periodNameLabel:"",periodNames:[],printType:this.printTypeValue?this.printTypeValue:this.printTypes.length>0?this.printTypes[0].print_type_value:null,printTypeLabel:this.printTypeValue?this.getPrintTypeLabel(this.printTypes,this.printTypeValue):this.printTypes.length>0?this.printTypes[0].print_type_label:null,saleType:this.saleTypeValue?this.saleTypeValue:this.saleTypes.length>0?this.saleTypes[0].value:null,saleTypeLabel:this.saleTypeValue?this.getPrintTypeLabel(this.saleTypes,this.saleTypeValue):this.saleTypes.length>0?this.saleTypes[0].description:null,sourceVersion:this.sourceVersionValue?this.sourceVersionValue:null,sourceVersions:[],biweekly:this.biweeklyValue,biweeklys:[],weekly:this.weeklyValue,weeklys:[],dailyPlanHeader:null,dailyPlanVersion:null,dailyPlanLines:[],dailyPlanVersions:[],dailyRemainingItems:[],productDaily71Dates:[],productMachine71Groups:[],product71Plans:[],productDaily78Dates:[],productMachine78Groups:[],product78Plans:[],availableMachines:this.machines,machineEamSchedules:this.assets.map((function(e){return{machine_id:e.asset_id,asset_id:e.asset_id,asset_number:e.asset_number,resource_code:e.resource_code,resource_description:e.resource_description,eam_schedules:e.eam_plan_lines.map((function(e){return{scheduled_start_date:e.scheduled_start_date,scheduled_completion_date:e.scheduled_completion_date}}))}})),isNewlyCreate:!1,isLoading:!1}},computed:{},methods:{setUrlParams:function(){var e=new URLSearchParams(window.location.search);e.set("period_year",this.periodYear?this.periodYear:""),e.set("period_name",this.periodName?this.periodName:""),e.set("biweekly",this.biweekly?this.biweekly:""),e.set("weekly",this.weekly?this.weekly:""),e.set("print_type",this.printType?this.printType:""),e.set("sale_type",this.saleType?this.saleType:""),e.set("source_version",this.sourceVersion?this.sourceVersion:""),window.history.replaceState(null,null,"?"+e.toString())},onYearlyPlanChanged:function(e){this.periodYear=e,this.periodYearLabel=this.getPeriodYearLabel(this.periodYears,this.periodYear),this.setUrlParams(),this.periodName=null,this.periodNameLabel="",this.periodNames=[],this.biweekly=null,this.biweeklys=[],this.weekly=null,this.weeklys=[],this.sourceVersion=null,this.sourceVersions=[],this.dailyPlanHeader=null,this.dailyPlanVersion=null,this.dailyPlanLines=[],this.dailyPlanVersions=[],this.dailyRemainingItems=[],this.getPeriodNames(this.periodYear),this.availableMachines=this.getAvailableMachines(this.machines,this.dailyPlanLines)},onPeriodNameChanged:function(e){this.periodName=e,this.periodNameLabel=this.getPeriodNameLabel(this.periodNames,this.periodName),this.setUrlParams(),this.biweekly=null,this.biweeklys=[],this.weekly=null,this.weeklys=[],this.sourceVersion=null,this.sourceVersions=[],this.dailyPlanHeader=null,this.dailyPlanVersion=null,this.dailyPlanLines=[],this.dailyPlanVersions=[],this.dailyRemainingItems=[],this.getBiweekOfPlans(this.periodYear,this.periodName),this.availableMachines=this.getAvailableMachines(this.machines,this.dailyPlanLines)},onBiweekOfPlanChanged:function(e){var t=this;return O(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.biweekly=e,t.setUrlParams(),t.weekly=null,t.weeklys=[],t.sourceVersion=null,t.sourceVersions=[],t.dailyPlanHeader=null,t.dailyPlanVersion=null,t.dailyPlanLines=[],t.dailyPlanVersions=[],t.dailyRemainingItems=[],t.availableMachines=t.getAvailableMachines(t.machines,t.dailyPlanLines),a.next=14,t.getWeekOfPlans(t.periodYear,t.periodName,t.biweekly);case 14:return a.next=16,t.getProductPlans(t.periodYear,t.periodName,t.biweekly);case 16:if(!(t.periodYear&&t.periodName&&t.biweekly&&t.printType&&t.saleType)){a.next=20;break}return a.next=19,t.getSourceVersions(t.periodYear,t.periodName,t.biweekly,t.printType,t.saleType);case 19:t.weekly&&t.sourceVersion&&t.getDailyPlanData(t.periodYear,t.periodName,t.biweekly,t.weekly,t.printType,t.saleType,t.sourceVersion,null);case 20:case"end":return a.stop()}}),a)})))()},onWeekOfPlanChanged:function(e){this.weekly=e,this.setUrlParams(),this.periodYear&&this.periodName&&this.biweekly&&this.weekly&&this.printType&&this.saleType&&this.sourceVersion&&this.getDailyPlanData(this.periodYear,this.periodName,this.biweekly,this.weekly,this.printType,this.saleType,this.sourceVersion,null)},onSourceVersionChanged:function(e){this.sourceVersion=e,this.setUrlParams()},onPrintTypeChanged:function(e){this.printType=e,this.printTypeLabel=this.getPrintTypeLabel(this.printTypes,this.printType),this.setUrlParams(),this.periodYear&&this.periodName&&this.biweekly&&this.weekly&&this.printType&&this.saleType&&this.sourceVersion&&this.getDailyPlanData(this.periodYear,this.periodName,this.biweekly,this.weekly,this.printType,this.saleType,this.sourceVersion,null)},onSaleTypeChanged:function(e){this.saleType=e,this.saleTypeLabel=this.getSaleTypeLabel(this.saleTypes,this.saleType),this.setUrlParams(),this.periodYear&&this.periodName&&this.biweekly&&this.weekly&&this.printType&&this.saleType&&this.sourceVersion&&this.getDailyPlanData(this.periodYear,this.periodName,this.biweekly,this.weekly,this.printType,this.saleType,this.sourceVersion,null)},onSearchPlanVersion:function(e){var t=this;return O(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.periodYear=e.period_year,t.periodYearLabel=t.getPeriodYearLabel(t.periodYears,t.periodYear),t.periodName=e.period_name,t.periodNameLabel=t.getPeriodNameLabel(t.periodNames,t.periodName),t.biweekly=e.biweekly,t.weekly=e.weekly,t.dailyPlanVersion=e.version,t.printType=e.print_type,t.printTypeLabel=t.getPrintTypeLabel(t.printTypes,t.printType),t.saleType=e.sale_type,t.saleTypeLabel=t.getPrintTypeLabel(t.saleTypes,t.saleType),t.sourceVersion=e.source_version,t.sourceVersions=e.source_versions,t.dailyPlanLines=[],t.availableMachines=t.getAvailableMachines(t.machines,t.dailyPlanLines),a.next=17,t.getPeriodNames(t.periodYear);case 17:return a.next=19,t.getBiweekOfPlans(t.periodYear,t.periodName);case 19:return a.next=21,t.getWeekOfPlans(t.periodYear,t.periodName,t.biweekly);case 21:return a.next=23,t.getProductPlans(t.periodYear,t.periodName,t.biweekly);case 23:t.periodYear&&t.periodName&&t.biweekly&&t.weekly&&t.printType&&t.saleType&&t.sourceVersion&&t.getDailyPlanData(t.periodYear,t.periodName,t.biweekly,t.weekly,t.printType,t.saleType,t.sourceVersion,t.dailyPlanVersion);case 24:case"end":return a.stop()}}),a)})))()},getPeriodYearLabel:function(e,t){var a=e.find((function(e){return e.period_year_value==t}));return a?a.period_year_label:""},getPeriodNameLabel:function(e,t){var a=e.find((function(e){return e.period_name_value==t}));return a?a.period_name_label:""},getPrintTypeLabel:function(e,t){var a=e.find((function(e){return e.print_type_value==t}));return a?a.print_type_label:""},getSaleTypeLabel:function(e,t){var a=e.find((function(e){return e.value==t}));return a?a.description:""},getPeriodNames:function(e){var t=this;return O(i().mark((function a(){var n;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.isLoading=!0,n={period_year:e},a.next=4,axios.get("/ajax/pm/plans/daily/get-months",{params:n}).then((function(e){var t=e.data.data;return t.period_names?JSON.parse(t.period_names):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ปี ".concat(t.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 4:t.periodNames=a.sent,t.isLoading=!1;case 6:case"end":return a.stop()}}),a)})))()},getBiweekOfPlans:function(e,t){var a=this;return O(i().mark((function n(){var s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.isLoading=!0,s={period_year:e,period_name:t},n.next=4,axios.get("/ajax/pm/plans/daily/get-biweeks",{params:s}).then((function(e){var t=e.data.data;return t.biweeklys?JSON.parse(t.biweeklys):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","เดือน : ".concat(a.periodNameLabel," ปี ").concat(a.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 4:a.biweeklys=n.sent,a.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},getWeekOfPlans:function(e,t,a){var n=this;return O(i().mark((function s(){var r;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.isLoading=!0,r={period_year:e,period_name:t,biweekly:a},i.next=4,axios.get("/ajax/pm/plans/daily/get-weeks",{params:r}).then((function(e){var t=e.data.data;return t.weeklys?JSON.parse(t.weeklys):[]})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ปักษ์ : ".concat(n.biweekly," เดือน : ").concat(n.periodNameLabel," ปี ").concat(n.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 4:n.weeklys=i.sent,n.isLoading=!1;case 6:case"end":return i.stop()}}),s)})))()},getDailyPlanData:function(e,t,a,n,s,r,o,l){var c=this;return O(i().mark((function u(){var d;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c.isLoading=!0,c.dailyPlanHeader=null,c.dailyPlanVersion=l,c.dailyPlanLines=[],c.dailyPlanVersions=[],c.dailyRemainingItems=[],d={period_year:e,period_name:t,biweekly:a,weekly:n,print_type:s,sale_type:r,source_version:o,version:l},i.next=9,axios.get("/ajax/pm/plans/daily/get-info",{params:d}).then((function(e){var t=e.data.data;return c.dailyPlanHeader=t.plan_header?JSON.parse(t.plan_header):null,c.dailyPlanVersions=t.versions?JSON.parse(t.versions):[],t})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ปักษ์ : ".concat(c.biweekly," เดือน : ").concat(c.periodNameLabel," ปี ").concat(c.periodYearLabel," ไม่ถูกต้อง | ").concat(e.message),"error")}));case 9:if(c.dailyPlanHeader){i.next=12;break}return i.next=12,c.createNewPlanVersion();case 12:return i.next=14,c.onGetRemainingItems();case 14:return i.next=16,c.onGetDailyPlanLines();case 16:if(0!=c.dailyPlanLines.length){i.next=19;break}return i.next=19,c.onAddNewMachineLine();case 19:c.setUrlParams(),c.isLoading=!1;case 21:case"end":return i.stop()}}),u)})))()},getProductPlans:function(e,t,a){var n=this;return O(i().mark((function s(){var r;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.isLoading=!0,r={period_year:e,period_name:t,biweekly:a},i.next=4,axios.get("/ajax/pm/plans/daily/get-product-plans",{params:r}).then((function(e){var t=e.data.data;if("success"==t.status){var a=JSON.parse(t.daily_71_dates),i=JSON.parse(t.machine_71_groups),s=JSON.parse(t.product_71_plans),r=JSON.parse(t.daily_78_dates),o=JSON.parse(t.machine_78_groups),l=JSON.parse(t.product_78_plans);n.productDaily71Dates=a,n.productMachine71Groups=i,n.product71Plans=s,n.productDaily78Dates=r,n.productMachine78Groups=o,n.product78Plans=l}else swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิตบุหรี่ | ".concat(t.message),"error")})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิตบุหรี่ | ".concat(e.message),"error")}));case 4:n.isLoading=!1;case 5:case"end":return i.stop()}}),s)})))()},getSourceVersions:function(e,t,a,n,s){var r=this;return O(i().mark((function o(){var l;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.isLoading=!0,r.sourceVersion=null,r.sourceVersions=[],l={period_year:e,period_name:t,biweekly:a,print_type:n,sale_type:s},i.next=6,axios.get("/ajax/pm/plans/daily/get-source-versions",{params:l}).then((function(e){var t=e.data.data;return"error"==t.status?swal("เกิดข้อผิดพลาด","ข้อมูลไม่ถูกต้อง | ".concat(t.message),"error"):(r.sourceVersion=t.source_version?t.source_version:null,r.sourceVersions=t.source_versions?JSON.parse(t.source_versions):[],r.sourceVersions.length<=0&&swal("ไม่พบข้อมูล","ไม่พบข้อมูลแผนรายปักษ์ที่อนุมัติแล้ว","error")),t})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ข้อมูลไม่ถูกต้อง | ".concat(e.message),"error")}));case 6:r.isLoading=!1;case 7:case"end":return i.stop()}}),o)})))()},getPlanStatusDesc:function(e){var t="-";if(e){var a=this.planStatuses.find((function(t){return t.lookup_code==e}));t=a?a.description:"-"}return t},getAvailableMachines:function(e,t){return e.filter((function(e){return!t.find((function(t){return e.machine_name==t.machine_name}))}))},onGetDailyPlanLines:function(){var e=this;return O(i().mark((function t(){var a,n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a=e.weeklys.find((function(t){return t.weekly_value==e.weekly})),n=a?a.dates:[],s={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,weekly:e.weekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion,week_dates:JSON.stringify(n),machines:JSON.stringify(e.machines)},t.next=6,axios.get("/ajax/pm/plans/daily/get-lines",{params:s}).then((function(t){var a=t.data.data;if("success"==a.status){if(e.dailyPlanHeader=a.plan_header?JSON.parse(a.plan_header):null,e.dailyPlanLines=a.plan_lines?JSON.parse(a.plan_lines):[],e.dailyPlanHeader){if(e.sourceVersions.length>0){var n=e.sourceVersions.find((function(t){return t.source_version==e.dailyPlanHeader.source_version}));e.sourceVersion=n?n.source_version:e.sourceVersions[0].source_version}e.dailyPlanVersion=e.dailyPlanHeader.version}e.dailyPlanVersions=a.versions?JSON.parse(a.versions):[],e.availableMachines=e.getAvailableMachines(e.machines,e.dailyPlanLines)}else swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(a.message),"error");return a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},onAddNewMachineLine:function(){var e=this;return O(i().mark((function t(){var a,n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a=e.weeklys.find((function(t){return t.weekly_value==e.weekly})),n=a?a.dates:[],s={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,weekly:e.weekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion,week_dates:JSON.stringify(n),machines:JSON.stringify(e.availableMachines),plan_header:JSON.stringify(e.dailyPlanHeader)},t.next=6,axios.post("/ajax/pm/plans/daily/add-new-machine-line",s).then((function(t){var a=t.data.data;return"success"==a.status?(e.dailyPlanLines=a.plan_lines?JSON.parse(a.plan_lines):[],e.availableMachines=e.getAvailableMachines(e.machines,e.dailyPlanLines)):swal("เกิดข้อผิดพลาด","ไม่สามารถสร้างรายการ วางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(a.message),"error"),a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถสร้างรายการ วางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},onGenerateDailyPlanLines:function(){var e=this;return O(i().mark((function t(){var a,n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a=e.weeklys.find((function(t){return t.weekly_value==e.weekly})),n=a?a.dates:[],s={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,weekly:e.weekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion,week_dates:JSON.stringify(n),machines:JSON.stringify(e.machines)},t.next=6,axios.post("/ajax/pm/plans/daily/generate-lines",s).then((function(t){var a=t.data.data;if("success"==a.status){if(e.dailyPlanHeader=a.plan_header?JSON.parse(a.plan_header):null,e.dailyPlanLines=a.plan_lines?JSON.parse(a.plan_lines):[],e.dailyPlanHeader){if(e.sourceVersions.length>0){var n=e.sourceVersions.find((function(t){return t.source_version==e.dailyPlanHeader.source_version}));e.sourceVersion=n?n.source_version:e.sourceVersions[0].source_version}e.dailyPlanVersion=e.dailyPlanHeader.version}e.dailyPlanVersions=a.versions?JSON.parse(a.versions):[],e.isNewlyCreate=a.is_newly_create,e.availableMachines=e.getAvailableMachines(e.machines,e.dailyPlanLines)}else swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(a.message),"error");return a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},onGetRemainingItems:function(){var e=this;return O(i().mark((function t(){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,weekly:e.weekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion},t.next=4,axios.get("/ajax/pm/plans/daily/get-remaining-items",{params:a}).then((function(t){var a=t.data.data;return"success"==a.status?e.dailyRemainingItems=a.items?JSON.parse(a.items):[]:swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(a.message),"error"),a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},onSaveDailyPlan:function(){var e=this;return O(i().mark((function t(){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion,plan_header:JSON.stringify(e.dailyPlanHeader),plan_lines:JSON.stringify(e.dailyPlanLines)},e.isLoading=!0,t.next=4,axios.post("/ajax/pm/plans/daily/store-lines",a).then((function(t){var a=t.data.data,n=a.message,i=a.plan_header?JSON.parse(a.plan_header):null;return"success"==a.status&&(e.dailyPlanHeader=i,e.dailyPlanVersion=i.version,e.dailyPlanVersions=a.versions?JSON.parse(a.versions):[],e.isNewlyCreate=!1,swal("Success","บันทึกข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," version : ").concat(e.dailyPlanVersion),"success")),"error"==a.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(n),"error"),a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},onSubmitDailyPlan:function(){var e=this;return O(i().mark((function t(){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={period_year:e.periodYear,period_name:e.periodName,biweekly:e.biweekly,print_type:e.printType,sale_type:e.saleType,source_version:e.sourceVersion,version:e.dailyPlanVersion,plan_header:JSON.stringify(e.dailyPlanHeader),plan_lines:JSON.stringify(e.dailyPlanLines)},e.isLoading=!0,t.next=4,axios.post("/ajax/pm/plans/daily/submit-plan",a).then((function(t){var a=t.data.data,n=a.message;return"success"==a.status&&(e.dailyPlanHeader=a.plan_header?JSON.parse(a.plan_header):null,e.dailyPlanVersions=a.versions?JSON.parse(a.versions):[],swal("Success","ส่งข้อมูลแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel),"success")),"error"==a.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถส่งข้อมูลแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(n),"error"),a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถส่งข้อมูลแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(e.biweekly," เดือน : ").concat(e.periodNameLabel," ปี ").concat(e.periodYearLabel," ระบบการพิมพ์ ").concat(e.printTypeLabel," | ").concat(t.message),"error")}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},onCreateNewDailyPlanVersion:function(){var e=this;return O(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:swal({title:"",text:"ต้องการสร้าง แผนผลิตสิ่งพิมพ์รายวัน ปักษ์ แผนประมาณการจำหน่ายประจำปี : ".concat(e.periodYearLabel," เวอร์ชั่นใหม่ ?"),showCancelButton:!0,confirmButtonClass:"btn-primary",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",closeOnConfirm:!0},(function(t){t&&(e.dailyPlanLines=[],e.createNewPlanVersion(),e.availableMachines=e.getAvailableMachines(e.machines,e.dailyPlanLines))}));case 1:case"end":return t.stop()}}),t)})))()},isAllowSelectSourceVersion:function(e,t){var a=!1;return e?0==t.length&&(a=!0):a=!0,a},isAllowCreateNewPlanVersion:function(e){var t=!0;return 0==e.length&&(t=!1),e.filter((function(e){return 1==e.status})).length>0&&(t=!1),t},createNewPlanVersion:function(){var e=arguments,t=this;return O(i().mark((function a(){var n,s;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],s={period_year:t.periodYear,period_name:t.periodName,biweekly:t.biweekly,weekly:t.weekly,print_type:t.printType,sale_type:t.saleType,source_version:t.sourceVersion},t.isLoading=!0,a.next=5,axios.post("/ajax/pm/plans/daily/add-new-header",s).then((function(e){var a=e.data.data,i=a.message;return"success"==a.status&&(t.dailyPlanHeader=a.plan_header?JSON.parse(a.plan_header):null,t.dailyPlanVersion=a.version,t.dailyPlanVersions=a.versions?JSON.parse(a.versions):[],n&&swal("Success","สร้างข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(t.biweekly," เดือน : ").concat(t.periodNameLabel," ปี ").concat(t.periodYearLabel," ระบบการพิมพ์ ").concat(t.printTypeLabel," version : ").concat(t.dailyPlanVersion," )"),"success")),"error"==a.status&&swal("เกิดข้อผิดพลาด","สร้างข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(t.biweekly," เดือน : ").concat(t.periodNameLabel," ปี ").concat(t.periodYearLabel," ระบบการพิมพ์ ").concat(t.printTypeLabel," | ").concat(i),"error"),a})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","สร้างข้อมูลการวางแผนผลิตสิ่งพิมพ์รายวัน ปักษ์ : ".concat(t.biweekly," เดือน : ").concat(t.periodNameLabel," ปี ").concat(t.periodYearLabel," ระบบการพิมพ์ ").concat(t.printTypeLabel," | ").concat(e.message),"error")}));case 5:t.isLoading=!1;case 6:case"end":return a.stop()}}),a)})))()}}};const q=(0,b.Z)(I,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-content",staticStyle:{"min-height":"600px"}},[a("div",{staticClass:"tw-mb-4"},[a("div",{staticClass:"text-right tw-mb-2"},[a("button",{staticClass:"btn btn-inline-block btn-sm btn-success tw-w-40",attrs:{disabled:!e.isAllowCreateNewPlanVersion(e.dailyPlanVersions)},on:{click:e.onCreateNewDailyPlanVersion}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" สร้าง \n                ")]),e._v(" "),a("button",{staticClass:"btn btn-inline-block btn-sm btn-warning tw-w-40",attrs:{disabled:!e.dailyPlanHeader||"1"!=e.dailyPlanHeader.status||0==e.dailyPlanLines.length||e.isNewlyCreate},on:{click:e.onSubmitDailyPlan}},[a("i",{staticClass:"fa fa-check-square tw-mr-1"}),e._v(" ยืนยัน \n                ")]),e._v(" "),a("button",{staticClass:"btn btn-inline-block btn-sm btn-info tw-w-40",attrs:{disabled:!e.periodYear||!e.periodName||!e.biweekly},on:{click:function(t){return e.$modal.show("modal-product-plans")}}},[a("i",{staticClass:"fa fa-print tw-mr-1"}),e._v(" ดูแผนการผลิตบุหรี่ \n                ")]),e._v(" "),a("button",{staticClass:"btn btn-inline-block btn-sm btn-primary tw-w-40",attrs:{disabled:!e.dailyPlanHeader||"1"==e.dailyPlanHeader.status}},[a("i",{staticClass:"fa fa-print tw-mr-1"}),e._v(" พิมพ์รายงาน \n                ")]),e._v(" "),a("button",{staticClass:"btn btn-inline-block btn-sm btn-white tw-w-40",on:{click:function(t){return e.$modal.show("modal-search-plan")}}},[a("i",{staticClass:"fa fa-search tw-mr-1"}),e._v(" ค้นหา \n                ")])])]),e._v(" "),a("hr"),e._v(" "),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ระบบการพิมพ์ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"print_type",id:"input_print_type","select-options":e.printTypes,"option-key":"print_type_value","option-value":"print_type_value","option-label":"print_type_label",value:e.printType,filterable:!0}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ประเภทแผน ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"sale_type",id:"sale_type","select-options":e.saleTypes,"option-key":"value","option-value":"value","option-label":"description",value:e.saleType,filterable:!0},on:{onSelected:e.onSaleTypeChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_year",id:"input_period_year","select-options":e.periodYears,"option-key":"period_year_value","option-value":"period_year_value","option-label":"period_year_label",value:e.periodYear,filterable:!0},on:{onSelected:e.onYearlyPlanChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ประจำเดือน ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_name",id:"input_period_name","select-options":e.periodNames,"option-key":"period_name_value","option-value":"period_name_value","option-label":"period_name_label",value:e.periodName,filterable:!0},on:{onSelected:e.onPeriodNameChanged}})],1)])]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" ปักษ์ ")]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("pm-el-select",{attrs:{name:"biweekly",id:"input_biweekly","select-options":e.biweeklys,"option-key":"biweekly_value","option-value":"biweekly_value","option-label":"biweekly_label",value:e.biweekly,filterable:!0},on:{onSelected:e.onBiweekOfPlanChanged}})],1),e._v(" "),a("label",{staticClass:"col-md-2 col-form-label tw-font-bold"},[e._v(" ครั้งที่ ")]),e._v(" "),a("div",{staticClass:"col-md-3"},[e.isAllowSelectSourceVersion(e.dailyPlanHeader,e.dailyPlanLines)?a("pm-el-select",{attrs:{name:"source_version",id:"source_version","select-options":e.sourceVersions,"option-key":"source_version","option-value":"source_version","option-label":"source_version",value:e.sourceVersion,filterable:!0},on:{onSelected:e.onSourceVersionChanged}}):e._e(),e._v(" "),e.isAllowSelectSourceVersion(e.dailyPlanHeader,e.dailyPlanLines)?e._e():a("p",{staticClass:"col-form-label"},[e._v(" "+e._s(e.sourceVersion)+" ")])],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" สัปดาห์ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"weekly",id:"input_weekly","select-options":e.weeklys,"option-key":"weekly_value","option-value":"weekly_value","option-label":"weekly_label",value:e.weekly,filterable:!0},on:{onSelected:e.onWeekOfPlanChanged}})],1)]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" เวอร์ชั่น ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[e.dailyPlanHeader?a("p",{staticClass:"col-form-label"},[e._v(" "+e._s(e.dailyPlanHeader.version?e.dailyPlanHeader.version:"-")+" ")]):e._e(),e._v(" "),e.dailyPlanHeader?e._e():a("p",{staticClass:"col-form-label"},[e._v(" - ")])])]),e._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold"},[e._v(" สถานะ ")]),e._v(" "),a("div",{staticClass:"col-md-8"},[e.dailyPlanHeader?a("p",{staticClass:"col-form-label"},[e._v(" "+e._s(e.getPlanStatusDesc(e.dailyPlanHeader.status))+" ")]):e._e(),e._v(" "),e.dailyPlanHeader?e._e():a("p",{staticClass:"col-form-label"},[e._v(" - ")])])])])])]),e._v(" "),a("hr"),e._v(" "),e.dailyPlanLines.length>0?a("div",{staticClass:"tw-m-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"tw-mb-4"},[a("button",{staticClass:"btn btn-inline-block btn-sm btn-success tw-w-52",attrs:{disabled:!e.dailyPlanHeader||this.availableMachines.length<=0},on:{click:e.onAddNewMachineLine}},[a("i",{staticClass:"fa fa-plus tw-mr-1"}),e._v(" เพิ่มเครื่อง\n                        ")])]),e._v(" "),a("table-plan-lines",{attrs:{"plan-header":e.dailyPlanHeader,"plan-lines":e.dailyPlanLines,weeklys:e.weeklys,"uom-codes":e.uomCodes,machines:e.machines,"available-machines":e.availableMachines,"machine-powers":e.machinePowers,"machine-times":e.machineTimes,"daily-remaining-items":e.dailyRemainingItems}})],1)])]):e._e()]),e._v(" "),a("loading",{attrs:{active:e.isLoading,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),e._v(" "),a("modal-product-plans",{attrs:{"modal-name":"modal-product-plans","modal-width":"960","modal-height":"auto","period-year-value":e.periodYear,"period-name-value":e.periodName,"biweekly-value":e.biweekly,"print-type-value":e.printType,"sale-type-value":e.saleType,"product-daily71-dates":e.productDaily71Dates,"product-machine71-groups":e.productMachine71Groups,"product71-plans":e.product71Plans,"product-daily78-dates":e.productDaily78Dates,"product-machine78-groups":e.productMachine78Groups,"product78-plans":e.product78Plans,"uom-codes":e.uomCodes}}),e._v(" "),a("modal-search-plan",{attrs:{"modal-name":"modal-search-plan","modal-width":"640","modal-height":"auto","period-years":e.periodYears,"period-year-value":e.periodYear,"period-names":e.periodNames,"period-name-value":e.periodName,biweeklys:e.biweeklys,"biweekly-value":e.biweekly,weeklys:e.weeklys,"weekly-value":e.weekly,"print-types":e.printTypes,"print-type-value":e.printType,"sale-types":e.saleTypes,"sale-type-value":e.saleType,"source-versions":e.sourceVersions,"source-version-value":e.sourceVersion,"daily-plan-version-value":e.dailyPlanVersion,"daily-plan-versions":e.dailyPlanVersions},on:{onSearchPlanVersion:e.onSearchPlanVersion}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0"},[e._v(" แผนประมาณการ "),a("br"),e._v(" จำหน่ายประจำปี ")])}],!1,null,null,null).exports},7398:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n="undefined"!=typeof window?window.HTMLElement:Object,i={mounted:function(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn:function(e){if(this.isActive&&e.target!==this.$el&&!this.$el.contains(e.target)){var t=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||t&&t.contains(e.target))&&(e.preventDefault(),this.$el.focus())}}},beforeDestroy:function(){document.removeEventListener("focusin",this.focusIn)}};function s(e,t,a,n,i,s,r,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):i&&(l=o?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}var r=s({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height,stroke:this.color}},[t("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[t("circle",{attrs:{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}}),t("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"}})],1)])])])}),[],!1,null,null,null).exports,o=s({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:this.color,width:this.width,height:this.height}},[t("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[t("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,l=s({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:this.height,width:this.width,fill:this.color}},[t("rect",{attrs:{x:"0",y:"13",width:"4",height:"5"}},[t("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"10",y:"13",width:"4",height:"5"}},[t("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"20",y:"13",width:"4",height:"5"}},[t("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,c=s({name:"vue-loading",mixins:[i],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,n],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:function(){}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},data:function(){return{isActive:this.active}},components:{Spinner:r,Dots:o,Bars:l},beforeMount:function(){this.programmatic&&(this.container?(this.isFullPage=!1,this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0),document.addEventListener("keyup",this.keyPress)},methods:{cancel:function(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide:function(){var e=this;this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){var t;e.$destroy(),void 0!==(t=e.$el).remove?t.remove():t.parentNode.removeChild(t)}),150))},disableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vld-shown")},enableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vld-shown")},keyPress:function(e){27===e.keyCode&&this.cancel()}},watch:{active:function(e){this.isActive=e},isActive:function(e){e?this.disableScroll():this.enableScroll()}},computed:{bgStyle:function(){return{background:this.backgroundColor,opacity:this.opacity,backdropFilter:"blur(".concat(this.blur,")")}}},beforeDestroy:function(){document.removeEventListener("keyup",this.keyPress)}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:e.transition}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"vld-overlay is-active",class:{"is-full-page":e.isFullPage},style:{zIndex:e.zIndex},attrs:{tabindex:"0","aria-busy":e.isActive,"aria-label":"Loading"}},[a("div",{staticClass:"vld-background",style:e.bgStyle,on:{click:function(t){return t.preventDefault(),e.cancel(t)}}}),a("div",{staticClass:"vld-icon"},[e._t("before"),e._t("default",[a(e.loader,{tag:"component",attrs:{color:e.color,width:e.width,height:e.height}})]),e._t("after")],2)])])}),[],!1,null,null,null).exports,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{show:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s={programmatic:!0},r=Object.assign({},t,n,s),o=new(e.extend(c))({el:document.createElement("div"),propsData:r}),l=Object.assign({},a,i);return Object.keys(l).map((function(e){o.$slots[e]=l[e]})),o}}};a(0),c.install=function(e){var t=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});e.$loading=t,e.prototype.$loading=t},t.default=c}]).default}}]);