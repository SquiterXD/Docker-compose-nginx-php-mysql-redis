(self.webpackChunk=self.webpackChunk||[]).push([[5122],{25122:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>h});var s=a(87757),n=a.n(s),r=a(30381),i=a.n(r);function o(t,e,a,s,n,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,n)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var r=t.apply(e,a);function i(t){o(r,s,n,i,c,"next",t)}function c(t){o(r,s,n,i,c,"throw",t)}i(void 0)}))}}var l,d;const u={props:["header","transBtn","transDate","url","countOpen"],data:function(){return{loading:!1,getParamlLoading:!1,transactionDateFormat:"",transDateFormat:{from_date:"",to_date:""},inputParams:{wip_request_status:[],wip_req_header_id_list:[]},wipRequestNo:"",wipReqHeaderId:"",wipRequestStatus:"",requestHeaders:[]}},mounted:function(){},computed:{},watch:{countOpen:(d=c(n().mark((function t(e,a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.openModal();case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)}),"transDateFormat.from_date":function(t){this.getParam()},"transDateFormat.to_date":function(t){this.getParam()},wipRequestStatus:(l=c(n().mark((function t(e,a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getParam();case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},methods:{setdate:function(t){var e=arguments,a=this;return c(n().mark((function s(){var r,o,c;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:"",o=a,""!=r){s.next=8;break}return s.next=5,i()(t).format(o.transDate["js-format"]);case 5:o.transactionDateFormat=s.sent,s.next=13;break;case 8:return s.next=10,i()(t).format(o.transDate["js-format"]);case 10:"Invalid date"==(c=s.sent)&&(c=""),o.transDateFormat[r]=c;case 13:case"end":return s.stop()}}),s)})))()},openModal:function(){$("#modal_search").modal("show"),this.getParam()},remoteMethod:function(t){""!==t?this.getWipRequest({wip_request_no:t,transaction_date:this.transactionDateFormat,action:"search"}):this.requestHeaders=[]},getWipRequest:function(t){var e=this;e.loading=!0,axios.get(e.url.index,{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.requestHeaders=a.data}))},selectWipRequestHeader:function(t){var e=this;return c(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:$("#modal_search").modal("hide"),e.requestHeaders=[],e.$emit("selectWipRequestHeader",t);case 3:case"end":return a.stop()}}),a)})))()},searchForm:function(){var t=this;return c(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getWipRequest({wip_request_no:t.wipRequestNo,wip_req_header_id:t.wipReqHeaderId,wip_request_status:t.wipRequestStatus,from_transaction_date:t.transDateFormat.from_date,to_transaction_date:t.transDateFormat.to_date,action:"search"});case 1:case"end":return e.stop()}}),e)})))()},getParam:function(){var t=this;return c(n().mark((function e(){var a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t).getParamlLoading=!0,s={action:"search_get_param",from_transaction_date:a.transDateFormat.from_date,to_transaction_date:a.transDateFormat.to_date,wip_request_status:a.wipRequestStatus},axios.get(a.url.index,{params:s}).then((function(t){var e=t.data.data;a.getParamlLoading=!1,a.inputParams.wip_request_status=e.data.wip_request_status_list,a.inputParams.wip_req_header_id_list=e.data.wip_req_header_id_list}));case 4:case"end":return e.stop()}}),e)})))()}}};var v=a(51900);function p(t,e,a,s,n,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,n)}function m(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var r=t.apply(e,a);function i(t){p(r,s,n,i,o,"next",t)}function o(t){p(r,s,n,i,o,"throw",t)}i(void 0)}))}}const f={components:{modalSearch:(0,v.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.getParamlLoading,expression:"getParamlLoading"}],staticClass:"row col-12 "},[a("div",{staticClass:"form-group col-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-2 col-sm-6 col-xs-6 mt-2 "},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่ส่งผลผลิต :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือกวันที่",value:t.transDateFormat.from_date,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return t.setdate.apply(void 0,s.concat(["from_date"]))}}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"input-group "},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือกวันที่",value:t.transDateFormat.to_date,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return t.setdate.apply(void 0,s.concat(["to_date"]))}}})],1)])])]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" สถานะบันทึกผลผลิตเข้าคลัง :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"สถานะบันทึกผลผลิตเข้าคลัง",loading:t.getParamlLoading,"popper-append-to-body":!1},model:{value:t.wipRequestStatus,callback:function(e){t.wipRequestStatus=e},expression:"wipRequestStatus"}},t._l(t.inputParams.wip_request_status,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" เลขที่เอกสาร :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"เลขที่เอกสาร",loading:t.getParamlLoading,"popper-append-to-body":!1},model:{value:t.wipReqHeaderId,callback:function(e){t.wipReqHeaderId=e},expression:"wipReqHeaderId"}},t._l(t.inputParams.wip_req_header_id_list,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-12 mt-2"},[a("div",{staticClass:"text-right"},[a("button",{class:t.transBtn.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.searchForm}},[a("i",{class:t.transBtn.search.icon}),t._v("\n                                    "+t._s(t.transBtn.search.text)+"\n                                ")])])])]),t._v(" "),a("div",{staticClass:"ibox-content table-responsive m-t mb-3"},[a("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),a("tbody",t._l(t.requestHeaders,(function(e,s){return a("tr",[a("td",{staticClass:"text-center"},[t._v(t._s(e.transaction_date_format))]),t._v(" "),a("td",[t._v(t._s(e.wip_request_no))]),t._v(" "),a("td",{staticClass:"text-center"},[e.status?a("div",[t._v("\n                                            "+t._s(e.status.description)+"\n                                        ")]):t._e()]),t._v(" "),a("td",{staticClass:"text-right"},[a("button",{class:t.transBtn.detail.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return t.selectWipRequestHeader(e)}}},[a("i",{class:t.transBtn.detail.icon}),t._v("\n                                            "+t._s(t.transBtn.detail.text)+"\n                                        ")])])])})),0)])])]),t._v(" "),t._m(2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("ค้นหารายการบันทึกส่งสินค้าสำเร็จรูป")]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                         \n                    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"200px"}},[t._v("วันที่ส่งผลผลิต")]),t._v(" "),a("th",[t._v("เลขที่เอกสาร")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"200px"}},[t._v("สถานะขอเบิก")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"150px"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],!1,null,null,null).exports},props:["pUrl"],computed:{secondaryUomList:function(){var t=this;if(t.header.inventory_item_id){var e=t.data.item_list.filter((function(e){return e.inventory_item_id==t.header.inventory_item_id}));if(e.length)return t.header.attribute1||(t.header.attribute1=e[0].primary_uom_code),e[0].secondary_uom_list}return[]}},watch:{checkedAll:function(t){this.lines.forEach(function(){var e=m(n().mark((function e(a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!a.is_disable&&a.cost_valid&&(a.is_selected=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},data:function(){return{url:this.pUrl,data:!1,header:!1,profile:!1,searchTransactionDateFormat:"",transBtn:{},transDate:{},lines:[],checkedAll:!1,loading:{page:!1,before_mount:!1},firstLoad:!0,countOpen:0}},beforeMount:function(){console.log("beforeMount"),this.getInfo()},mounted:function(){console.log("wip-requests: Component mounted.")},methods:{show:function(t){var e=this;return m(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("show header",t),e.header=t,e.getLines(!1,"show");case 3:case"end":return a.stop()}}),a)})))()},getInfo:function(){var t=this;return m(n().mark((function e(){var a,s,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,s=window.location.search,r=!1,a.loading.page=!0,a.loading.before_mount=!0,a.lines=[],e.next=8,axios.get(a.url.index+s).then((function(t){"S"==(r=t.data.data).status&&(r=r.info),a.loading.page=!1}));case 8:r&&(a.data=r.data,a.header=r.header,a.profile=r.profile,a.transBtn=r.transBtn,a.transDate=r.transDate,a.url=r.url),a.loading.before_mount=!1;case 10:case"end":return e.stop()}}),e)})))()},setdate:function(t,e){var a=this;return m(n().mark((function s(){var r;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=a,s.next=3,i()(t).format(r.transDate["js-format"]);case 3:r.header[e]=s.sent;case 4:case"end":return s.stop()}}),s)})))()},addNewLine:function(){var t=this;return m(n().mark((function e(){var a,s,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(a=t).lines.length,e.next=4,_.clone(a.data.new_line);case 4:r=e.sent,a.$set(a.lines,s,r);case 6:case"end":return e.stop()}}),e)})))()},itemWasSelected:function(t,e){return m(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.inventory_item_id=t.inventory_item_id,e.item_classification_code=t.item_classification_code,e.item_desc=t.item_desc,e.item_number=t.item_number,e.organization_id=t.organization_id,e.secondary_uom_list=t.secondary_uom_list,e.transaction_uom=t.transaction_uom,e.transaction_uom_desc=t.transaction_uom_desc,e.transaction_type_id_from=t.transaction_type_id_from,e.organization_id_from=t.organization_id_from,e.subinventory_from=t.subinventory_from,e.locator_id_from=t.locator_id_from,e.locator_code_from=t.locator_code_from,e.transaction_type_id_to=t.transaction_type_id_to,e.organization_id_to=t.organization_id_to,e.subinventory_to=t.subinventory_to,e.locator_id_to=t.locator_id_to,e.locator_code_to=t.locator_code_to,console.log("itemWasSelected(item, line)",t,e);case 19:case"end":return a.stop()}}),a)})))()},save:function(){var t=this;return m(n().mark((function e(){var a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(a=t).lines.length){e.next=5;break}return e.next=4,helperAlert.showGenericFailureDialog("ไม่พบรายการ เลขที่คำสั่งผลิต");case 4:return e.abrupt("return");case 5:if(a.searchTransactionDateFormat==a.header.transaction_date_format){e.next=9;break}return e.next=8,helperAlert.showGenericFailureDialog("วันที่ส่งผลผลิต และวันที่เลขที่คำสั่งผลิตไม่ตรงกัน");case 8:return e.abrupt("return");case 9:return e.next=11,helperAlert.showProgressConfirm("กรุณายืนยัน บันทึกส่งสินค้าเข้าคลัง");case 11:if(!e.sent){e.next=17;break}return a.loading.page=!0,s=a.lines,e.next=17,axios.post(a.url.ajax_store,{header:a.header,lines:s}).then((function(t){var e=t.data.data;"S"==e.status&&(a.header=e.header,setTimeout(m(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getLines(!1,"show");case 2:case"end":return t.stop()}}),t)}))),500)),"S"!=e.status&&swal({title:"Error !",text:e.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading.page=!1}));case 17:case"end":return e.stop()}}),e)})))()},setStatus:function(t){var e=this;return m(n().mark((function a(){var s,r,i;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=e,!1,r="","infWipCompleted"==t&&(r="ยืนยันบันทึกเข้าคลัง"),"infWipCompletedReturn"==t&&(r="ยกเลิกบันทึกเข้าคลัง"),"cancelTransfer"==t&&(r="ยกเลิกใบส่ง"),a.next=8,helperAlert.showProgressConfirm(r);case 8:if(!a.sent){a.next=15;break}return s.loading.page=!0,i=s.url.ajax_set_status,""!=s.header.wip_req_header_id&&null!=s.header.wip_req_header_id&&(i=i.replace("-999",s.header.wip_req_header_id)),a.next=15,axios.post(i,{status:t,lines:s.lines}).then((function(t){var e=t.data.data;"S"==e.status&&(s.header.wip_request_status=String(e.wip_request_status),s.header.can=e.can,s.getLines(!1,"show")),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){s.loading.page=!1}));case 15:case"end":return a.stop()}}),a)})))()},setData:function(){var t=this;return m(n().mark((function e(){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=(a=t).header.transfer_header_id&&""!=a.header.transfer_header_id&&a.getLines(!1,"show"),a.firstLoad=!1;case 3:case"end":return e.stop()}}),e)})))()},indexPage:function(){this.getInfo()},getLines:function(){var t=arguments,e=this;return m(n().mark((function a(){var s,r,i,o;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=!(t.length>0&&void 0!==t[0])||t[0],r=t.length>1&&void 0!==t[1]?t[1]:"search",i=e,o=!0,!s){a.next=8;break}return a.next=7,helperAlert.showProgressConfirm("ค้นหารายการส่งสินค้าเข้าคลัง ?");case 7:o=a.sent;case 8:if(console.log("getLines",s,o),!o){a.next=15;break}return i.loading.page=!0,i.searchTransactionDateFormat=i.header.transaction_date_format,i.lines=[],a.next=15,axios.get(i.url.ajax_get_lines,{params:{header:i.header,action:r}}).then((function(t){var e=t.data.data;i.lines=_.sortBy(e.lines,(function(t){return t.batch_no}))})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){i.loading.page=!1}));case 15:return a.abrupt("return");case 16:case"end":return a.stop()}}),a)})))()},selectObjectiveCode:function(t){var e=this;return m(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getLines();case 2:case"end":return t.stop()}}),t)})))()}}};const h=(0,v.Z)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.page,expression:"loading.page"}],staticClass:"ibox float-e-margins"},[t.loading.before_mount?t._e():a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-right"},[a("button",{class:t.transBtn.search.class+" btn-lg tw-w-25 ",on:{click:function(e){t.countOpen+=1}}},[a("i",{class:t.transBtn.search.icon}),t._v("\n                        "+t._s(t.transBtn.search.text)+"\n                    ")]),t._v(" "),a("button",{class:t.transBtn.create.class+" btn-lg tw-w-25 mr-2",on:{click:function(e){return e.preventDefault(),t.indexPage(e)}}},[a("i",{class:t.transBtn.create.icon}),t._v("\n                        "+t._s(t.transBtn.create.text)+"\n                    ")]),t._v(" "),a("button",{class:t.transBtn.save.class+" btn-lg tw-w-25",attrs:{disabled:!t.header.can.edit},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[a("i",{class:t.transBtn.save.icon}),t._v("\n                        "+t._s(t.transBtn.save.text)+"\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-lg",attrs:{disabled:!t.header.can.transfer},on:{click:function(e){return e.preventDefault(),t.setStatus("infWipCompleted")}}},[a("strong",[t._v("ยืนยันบันทึกเข้าคลัง")])]),t._v(" "),a("button",{staticClass:"btn btn-w-m btn-danger btn-lg",attrs:{disabled:!t.header.can.cancel_transfer},on:{click:function(e){return e.preventDefault(),t.setStatus("infWipCompletedReturn")}}},[a("i",{staticClass:"fa fa-times"}),t._v(" ยกเลิกบันทึกเข้าคลัง\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-w-m btn-danger btn-lg",attrs:{disabled:!t.header.can.cancel_doc},on:{click:function(e){return e.preventDefault(),t.setStatus("cancelTransfer")}}},[a("i",{staticClass:"fa fa-times"}),t._v(" ยกเลิกเอกสาร\n                    ")])])])]),t._v(" "),t.loading.before_mount?t._e():a("div",{staticClass:"ibox-content",staticStyle:{"border-top":"0px"}},[a("modal-search",{attrs:{transDate:t.transDate,transBtn:t.transBtn,url:t.url,countOpen:t.countOpen},on:{selectWipRequestHeader:t.show}}),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-lg-2"},[t._v("หน่วยงาน")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("el-input",{staticClass:"w-100",attrs:{disabled:"",value:t.profile.department?t.profile.department.description:null}})],1),t._v(" "),a("div",{staticClass:"col-lg-2"},[t._v("เลขที่เอกสาร")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("el-input",{staticClass:"w-100",attrs:{value:t.header.wip_request_no,disabled:""}})],1)]),t._v(" "),a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-lg-2"},[t._v("วันที่ได้ผลผลิต")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"input_date",id:"input_date",disabled:!t.header.can.edit,placeholder:"โปรดเลือกวันที่",value:t.header.transaction_date_format,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return t.setdate.apply(void 0,s.concat(["transaction_date_format"]))}}})],1),t._v(" "),a("div",{staticClass:"col-lg-2"},[t._v("สถานะบันทึกผลผลิตเข้าคลัง")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("el-input",{staticClass:"w-100",attrs:{disabled:"",value:function(){if(t.header.wip_request_status&&t.header.wip_req_header_id){var e=t.data.request_status_list.find((function(e){return e.lookup_code==t.header.wip_request_status}));if(e)return e.description}return null}()}})],1)]),t._v(" "),a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-lg-12 text-right"},[a("button",{class:t.transBtn.search.class+" btn-lg tw-w-25",on:{click:function(e){return e.preventDefault(),t.getLines(!1,"show")}}},[a("i",{class:t.transBtn.search.icon}),t._v("\n                            แสดงข้อมูล\n                        ")])])])])],1)]),t._v(" "),t.loading.before_mount?t._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.page,expression:"loading.page"}],staticClass:"ibox float-e-margins"},[""!=t.searchTransactionDateFormat?a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"table-responsive m-t"},[t.searchTransactionDateFormat==t.header.transaction_date_format?a("table",{staticClass:"table text-nowrap-x table-hoverx table-bordered"},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"10px;"}},[t._v("\n                                เลือกทั้งหมด"),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedAll,expression:"checkedAll"}],attrs:{disabled:t.lines.length&&t.lines[0].is_disable,type:"checkbox"},domProps:{checked:Array.isArray(t.checkedAll)?t._i(t.checkedAll,null)>-1:t.checkedAll},on:{change:function(e){var a=t.checkedAll,s=e.target,n=!!s.checked;if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&(t.checkedAll=a.concat([null])):r>-1&&(t.checkedAll=a.slice(0,r).concat(a.slice(r+1)))}else t.checkedAll=n}}})]),t._v(" "),a("th",{attrs:{width:"130px;"}},[t._v("\n                                เลขที่คำสั่งผลิต\n                            ")]),t._v(" "),a("th",{attrs:{width:"150px;"}},[t._v("\n                                รหัสสินค้าสำเร็จรูป\n                            ")]),t._v(" "),a("th",[t._v("รายละเอียด")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px;"}},[t._v("\n                                OPT\n                            ")]),t._v(" "),a("th",{staticClass:"text-right",attrs:{width:"100px;"}},[t._v("\n                                คลังสินค้า\n                            ")]),t._v(" "),a("th",{staticClass:"text-right",attrs:{width:"100px;"}},[t._v("\n                                สถานที่จัดเก็บ\n                            ")]),t._v(" "),a("th",{staticClass:"text-right",attrs:{width:"100px;"}},[t._v("\n                                Lot No.\n                            ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"230px;"}},[t._v("\n                                จำนวนส่งเข้าคลัง\n                            ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px;"}},[t._v("\n                                หน่วยนับ\n                            ")])])]),t._v(" "),a("tbody",[t._l(t.lines,(function(e,s){return t.lines.length?[a("tr",[a("td",{staticClass:"align-middle text-center",attrs:{date:s}},[e.cost_valid?a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_selected,expression:"line.is_selected"}],attrs:{disabled:e.is_disable,type:"checkbox"},domProps:{checked:Array.isArray(e.is_selected)?t._i(e.is_selected,null)>-1:e.is_selected},on:{change:function(a){var s=e.is_selected,n=a.target,r=!!n.checked;if(Array.isArray(s)){var i=t._i(s,null);n.checked?i<0&&t.$set(e,"is_selected",s.concat([null])):i>-1&&t.$set(e,"is_selected",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(e,"is_selected",r)}}}):a("i",{staticClass:"fa fa-warning fa-2x text-warning"})]),t._v(" "),a("td",{staticClass:"align-middle text-left",attrs:{date:s}},[a("strong",[t._v(t._s(e.batch_no))])]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n                                    "+t._s(e.item_number)+"\n                                ")]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n                                    "+t._s(e.item_desc)+"\n                                    "),e.cost_valid?t._e():a("div",{staticClass:"text-danger"},[a("strong",[t._v(t._s(e.cost_validate_msg))])])]),t._v(" "),a("td",{staticClass:"text-center align-middle"},[t._v("\n                                    "+t._s(e.opt)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right align-middle"},[t._v("\n                                    "+t._s(e.subinventory_from)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right align-middle",attrs:{title:e.locator_code_from}},[t._v("\n                                    "+t._s(e.location_code_from)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right align-middle"},[t._v("\n                                    "+t._s(e.lot_number)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right align-middle"},[a("input",{staticClass:"form-control text-right align-middle",attrs:{type:"text",disabled:!0},domProps:{value:t._f("number2Digit")(e.web_qty)}})]),t._v(" "),a("td",{staticClass:"text-center align-middle",attrs:{title:e.transaction_uom}},[t._v("\n                                    "+t._s(e.primary_unit_of_measure)+"\n                                ")])]),t._v(" "),e.is_selected&&e.is_convert_flag?a("tr",[a("td",{attrs:{colspan:"10"}},[e.convert_info.valid?a("div",{staticClass:" mb-0 col-lg-8 col-md-6 col-sm-6 col-xs-6 offset-md-2 mt-2"},[a("table",{staticClass:"table text-nowrapx table-bordered table-hover"},[t._m(0,!0),t._v(" "),a("tbody",t._l(e.convert_info.lines,(function(e,s){return a("tr",[a("td",{staticClass:"align-middle"},[e.cost_valid?t._e():a("i",{staticClass:"fa fa-warning fa-2x text-warning"}),t._v("\n                                                        "+t._s(e.to_inventory_item_display)+"\n                                                        "),e.cost_valid?t._e():a("div",{staticClass:"text-danger"},[a("strong",[t._v(t._s(e.cost_validate_msg))])])]),t._v(" "),a("td",{staticClass:"text-right align-middle"},[t._v("\n                                                        "+t._s(e.transaction_quantity_format)+"\n                                                    ")]),t._v(" "),a("td",{staticClass:"text-center align-middle"},[a("div",{attrs:{title:"conversion_rate :"+e.conversion_rate}},[t._v("\n                                                            "+t._s(e.to_uom_display)+"\n                                                        ")])])])})),0)])]):a("h3",{staticClass:"no-margins text-danger text-center"},[t._v("\n                                        "+t._s(e.item_number)+" : "+t._s(e.convert_info.msg)+"\n                                        "),a("div")])])]):t._e()]:t._e()}))],2)]):t._e()]),t._v(" "),0===t.lines.length?a("div",{staticClass:"text-center"},[a("span",{staticClass:"lead"},[t._v("No Data.")])]):t._e()]):t._e()])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Item ปลายทาง")]),t._v(" "),a("th",{staticClass:"text-right",staticStyle:{width:"130px"}},[t._v("แปลงหน่วย")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{width:"130px"}},[t._v("หน่วนนับ")])])])}],!1,null,null,null).exports}}]);