(self.webpackChunk=self.webpackChunk||[]).push([[3774],{49233:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(87757),a=r.n(s);function i(e,t,r,s,a,i,l){try{var o=e[i](l),n=o.value}catch(e){return void r(e)}o.done?t(n):Promise.resolve(n).then(s,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var l=e.apply(t,r);function o(e){i(l,s,a,o,n,"next",e)}function n(e){i(l,s,a,o,n,"throw",e)}o(void 0)}))}}const o={props:["budgetYears","biWeekly","search","productTypes","url"],data:function(){return{budget_year:this.search?this.search.budget_year:"",bi_weekly:this.search?String(this.search.bi_weekly):"",times:"",month:"",product_type:"",loading:!1,b_loading:!1,errors:{budget_year:!1,bi_weekly:!1},biWeeklyLists:[]}},mounted:function(){this.budget_year&&this.getBiWeekly()},computed:{},watch:{errors:{handler:function(e){e.budget_year?this.setError("budget_year"):this.resetError("budget_year"),e.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{getBiWeekly:function(){var e=this;this.search||(this.bi_weekly="",this.month="",this.times=""),this.biWeeklyLists=this.biWeekly.filter((function(t){return t.period_year_thai.indexOf(e.budget_year)>-1}))},getDetail:function(){var e=this;this.times=1,this.biWeeklyLists.find((function(t){if(t.biweekly==e.bi_weekly)return e.month=t.thai_month}))},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""},submit:function(){var e=this;return l(a().mark((function t(){var r,s,i,l,o,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=$("#production-plan-create-form"),s=r.serialize(),i=!0,l="",e.errors.budget_year=!1,e.errors.bi_weekly=!1,$(r).find("div[id='el_explode_budget_year']").html(""),$(r).find("div[id='el_explode_bi_weekly']").html(""),""==e.budget_year&&(e.errors.budget_year=!0,i=!1,l="กรุณาเลือกปีงบประมาณ",$(r).find("div[id='el_explode_budget_year']").html(l)),""==e.bi_weekly&&(e.errors.bi_weekly=!0,i=!1,l="กรุณาเลือกปักษ์",$(r).find("div[id='el_explode_bi_weekly']").html(l)),i){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,e.create(s);case 14:o=t.sent,n=e,"S"==o.status?(swal({title:"สร้างแผนประมาณการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลแผนประมาณการผลิตเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=n.url.production_biweekly_index}),2e3)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+o.msg+"</span>",type:"error",html:!0});case 17:case"end":return t.stop()}}),t)})))()},create:function(e){var t=this;return l(a().mark((function r(){var s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=[],r.next=3,axios.post(t.url.ajax_production_biweekly_store,e).then((function(e){s=e.data})).catch((function(e){var t=e.response.data;swal({title:"มีข้อผิดพลาด",text:t.message,type:"error"})})).then((function(){t.loading=!1}));case 3:return r.abrupt("return",s);case 4:case"end":return r.stop()}}),r)})))()}}};const n=(0,r(51900).Z)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal fade",attrs:{id:"modal-create",role:"dialog"}},[r("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),r("div",{staticClass:"modal-body"},[r("div",{attrs:{id:"modal_content_create"}},[r("form",{attrs:{id:"production-plan-create-form"}},[r("div",{staticClass:"row col-12 m-0"},[r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[e._v(" ปีงบประมาณ :")]),e._v(" "),r("div",{staticClass:"input-group "},[r("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:e.budget_year}}),e._v(" "),r("el-select",{ref:"budget_year_create",attrs:{clearable:"",size:"medium",placeholder:"ปีงบประมาณ",filterable:""},on:{change:e.getBiWeekly},model:{value:e.budget_year,callback:function(t){e.budget_year=t},expression:"budget_year"}},e._l(e.budgetYears,(function(e,t){return r("el-option",{key:t,attrs:{label:e.period_year_thai,value:e.period_year_thai}})})),1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year_create"}})],1)]),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[e._v(" ปักษ์ที่ :")]),e._v(" "),r("div",{},[r("input",{attrs:{type:"hidden",name:"search[bi_weekly]"},domProps:{value:e.bi_weekly}}),e._v(" "),e.budget_year?r("el-select",{ref:"bi_weekly_create",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",filterable:"","v-loading":e.b_loading},on:{change:e.getDetail},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1):r("el-select",{ref:"bi_weekly_create",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",disabled:""},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly_create"}})],1)]),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[e._v(" ครั้งที่ :")]),e._v(" "),r("el-input",{attrs:{placeholder:"ครั้งที่",size:"medium",disabled:"disabled"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-3 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[e._v(" ประจำเดือน :")]),e._v(" "),r("el-input",{attrs:{placeholder:"ประจำเดือน",size:"medium",disabled:"disabled"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-4 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" ประมาณกำลังการผลิต :")]),e._v(" "),r("div",{},[r("input",{attrs:{type:"hidden",name:"search[product_type]"},domProps:{value:e.product_type}}),e._v(" "),r("el-select",{ref:"product_type",attrs:{clearable:"",size:"medium",placeholder:"ประมาณกำลังการผลิต",filterable:""},model:{value:e.product_type,callback:function(t){e.product_type=t},expression:"product_type"}},e._l(e.productTypes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.meaning,value:e.lookup_code}})})),1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_product_type"}})],1)]),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[e._m(1),e._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.submit()}}},[r("i",{staticClass:"fa fa-plus"}),e._v(" สร้าง\n                                    ")]),e._v(" "),e._m(2)])])])])])])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[e._v("\n                    สร้างแผนประมาณการผลิต\n                ")]),e._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:" tw-font-bold tw-uppercase mt-1"},[e._v(" "),r("br")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n                                    ")])}],!1,null,null,null).exports}}]);