(self.webpackChunk=self.webpackChunk||[]).push([[6063],{51063:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var n=o(23645),a=o.n(n)()((function(e){return e[1]}));a.push([e.id,".box-card[data-v-07b26993]{padding:20px}.error-message[data-v-07b26993]{display:flex;color:#ec4958;margin-top:5px}.error-message strong[data-v-07b26993]{margin-right:5px}.mt-custom__10[data-v-07b26993]{margin-top:10px}.text-title[data-v-07b26993]{font-size:16px;font-weight:600}.btn-info[data-v-07b26993]{background-color:#02b0ef;border-color:#02b0ef}.btn-success[data-v-07b26993]{background-color:#1ab394;border-color:#1ab394}.btn-cancel[data-v-07b26993]{background-color:#ec4958;border-color:#ec4958;color:#fff}.text-refresh[data-v-07b26993]{color:#ec4958}",""]);const r=a},76063:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>m});var n=o(87757),a=o.n(n);function r(e,t,o,n,a,r,s){try{var l=e[r](s),i=l.value}catch(e){return void o(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function s(e){return function(){var t=this,o=arguments;return new Promise((function(n,a){var s=e.apply(t,o);function l(e){r(s,n,a,l,i,"next",e)}function i(e){r(s,n,a,l,i,"throw",e)}l(void 0)}))}}const l={props:["segment"],data:function(){return{loading:!1,form_error:{},form:{ledger_details:[{}]},selectInput:{},option:{product_group:[],account:[],category:[],organization:[],cost_center:[],SEGMENT1:[],SEGMENT2:[],SEGMENT3:[],SEGMENT4:[],SEGMENT5:[],SEGMENT6:[],SEGMENT7:[],SEGMENT8:[],SEGMENT9:[],SEGMENT10:[],SEGMENT11:[],SEGMENT12:[]}}},created:function(){this.getMasterData()},methods:{checkOption:function(e){return!(e.length>0)},getMasterData:function(){var e=this;return s(a().mark((function t(){var o,n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e.loading=!0,e.getAccount(),e.getCategory(),e.getOrganization(),e.getCostCenter(),e.getProductGroup(),o=0,n=[1,2,3,4,6,7,8,9,10,11,12];o<n.length;o++)r="SEGMENT".concat(n[o]),e.setSegmentData(r);e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},getProductGroup:function(){var e=this;axios.get("/ct/ajax/product_group").then((function(t){e.option.product_group=t.data}))},getAccount:function(){var e=this;axios.get("/ct/ajax/account").then((function(t){e.option.account=t.data}))},getCategory:function(){var e=this;axios.get("/ct/ajax/get_category").then((function(t){e.option.category=t.data}))},getOrganization:function(){var e=this;axios.get("/ct/ajax/get_organizations").then((function(t){e.option.organization=t.data}))},getCostCenter:function(){var e=this;axios.get("/ct/ajax/cost_center").then((function(t){e.option.cost_center=t.data}))},searchSegment:function(e,t){var o=this;return s(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,!0;case 2:return o.selectInput[t]=n.sent,n.next=5,o.segment[t].filter((function(t){return t.description.includes(e)||t.flex_value.includes(e)}));case 5:r=n.sent,o.setSegmentData(t,r);case 7:case"end":return n.stop()}}),n)})))()},setSegmentData:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=t||this.segment[e],this.selectInput[e]=!0,t){if(t.length>100){var o=t;o.length=100,this.option[e]=o}else this.option[e]=t;this.selectInput[e]=!1}},getSegment:function(e){var t=this;axios.get("/ct/ajax/get_data_by_segment/".concat(e)).then((function(o){t.option[e]=o.data}))},addRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.push(t)},deleteRow:function(e,t){t.splice(e,1)},handleSubmit:function(){this.loading=!0,this.store()},errorMessage:function(e){var t=this,o=e.errors;o&&(Object.keys(o).forEach((function(e){t.form_error[e]={},t.form_error[e].title=e,t.form_error[e].message=o[e][0]})),this.resetError())},resetError:function(){var e=this;setTimeout((function(){e.form_error={}}),5e3)},store:function(){var e=this;return s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/ct/ajax/account_code_ledger",e.form).then((function(t){e.$message({showClose:!0,message:"บันทึกสำเร็จ",type:"success"})})).catch((function(t){e.errorMessage(t.response.data),e.$message({showClose:!0,message:"ไม่สามารถบันทึกได้",type:"error"})})).then((function(){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){this.form={}}}};var i=o(93379),c=o.n(i),d=o(51063),u={insert:"head",singleton:!1};c()(d.Z,u);d.Z.locals;const m=(0,o(51900).Z)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[o("div",{staticClass:"m-2"},[o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-2 col-form-label"},[e._v("รายการบัญชี")]),e._v(" "),o("div",{staticClass:"col-md-4 flex-wrap"},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"รายการบัญชี"},model:{value:e.form.account_seq,callback:function(t){e.$set(e.form,"account_seq",t)},expression:"form.account_seq"}},e._l(e.option.account,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1),e._v(" "),e.form_error.account_seq?o("div",{staticClass:"error-message"},[o("strong",{staticClass:"font-bold"},[e._v(e._s(e.form_error.account_seq.title))]),e._v(" "),o("span",{staticClass:"block sm:inline"},[e._v("\n                        "+e._s(e.form_error.account_seq.message)+"\n                    ")])]):e._e()],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-2 col-form-label"},[e._v("เหตุผลงบ")]),e._v(" "),o("div",{staticClass:"col-md-4 flex-wrap"},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"เหตุผลงบ",filterable:"",loading:e.selectInput.SEGMENT8,remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT8")}},model:{value:e.form.remark_reason,callback:function(t){e.$set(e.form,"remark_reason",t)},expression:"form.remark_reason"}},e._l(e.option.SEGMENT8,(function(e,t){return o("el-option",{key:t,attrs:{label:e.description,value:e.description}})})),1),e._v(" "),e.form_error.remark_reason?o("div",{staticClass:"error-message"},[o("strong",{staticClass:"font-bold"},[e._v(e._s(e.form_error.remark_reason.title))]),e._v(" "),o("span",{staticClass:"block sm:inline"},[e._v("\n                        "+e._s(e.form_error.remark_reason.message)+"\n                    ")])]):e._e()],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-2 col-form-label"},[e._v("RES1")]),e._v(" "),o("div",{staticClass:"col-md-4 flex-wrap"},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"RES1",loading:e.selectInput.SEGMENT11,filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT11")}},model:{value:e.form.res1,callback:function(t){e.$set(e.form,"res1",t)},expression:"form.res1"}},e._l(e.option.SEGMENT11,(function(e,t){return o("el-option",{key:t,attrs:{label:e.description,value:e.description}})})),1),e._v(" "),e.form_error.res1?o("div",{staticClass:"error-message"},[o("strong",{staticClass:"font-bold"},[e._v(e._s(e.form_error.res1.title))]),e._v(" "),o("span",{staticClass:"block sm:inline"},[e._v("\n                        "+e._s(e.form_error.res1.message)+"\n                    ")])]):e._e()],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-2 col-form-label"},[e._v("RES2")]),e._v(" "),o("div",{staticClass:"col-md-4 flex-wrap"},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"RES2",loading:e.selectInput.SEGMENT12,filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT12")}},model:{value:e.form.res2,callback:function(t){e.$set(e.form,"res2",t)},expression:"form.res2"}},e._l(e.option.SEGMENT12,(function(e,t){return o("el-option",{key:t,attrs:{label:e.description,value:e.description}})})),1),e._v(" "),e.form_error.res2?o("div",{staticClass:"error-message"},[o("strong",{staticClass:"font-bold"},[e._v(e._s(e.form_error.res2.title))]),e._v(" "),o("span",{staticClass:"block sm:inline"},[e._v("\n                        "+e._s(e.form_error.res2.message)+"\n                    ")])]):e._e()],1)])]),e._v(" "),o("div",{staticClass:"m-2"},[o("div",{staticClass:"form-group row flex-wrap"},[o("div",{staticClass:"col-md-12 m-2 "},e._l(e.form.ledger_details,(function(t,n){return o("el-card",{key:n,staticClass:"box-card my-4"},[o("div",{staticClass:"row justify-content-end"},[o("div",{staticClass:"col-md-2 "},[o("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger",disabled:e.form.ledger_details.length<=1},nativeOn:{click:function(t){return t.preventDefault(),e.deleteRow(n,e.form.ledger_details)}}},[o("i",{staticClass:"el-icon-delete"}),e._v("\n                                ลบ\n                            ")])],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                หน่วยงาน\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"หน่วยงาน",filterable:"",loading:e.selectInput.SEGMENT3,remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT3")}},model:{value:t.code_segment3,callback:function(o){e.$set(t,"code_segment3",o)},expression:"item.code_segment3"}},e._l(e.option.SEGMENT3,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                ศูนย์ต้นทุน\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"ศูนย์ต้นทุน",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT4")},loading:e.selectInput.SEGMENT4},model:{value:t.code_segment4,callback:function(o){e.$set(t,"code_segment4",o)},expression:"item.code_segment4"}},e._l(e.option.SEGMENT4,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                ORG.\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"ORG."},model:{value:t.organization_code,callback:function(o){e.$set(t,"organization_code",o)},expression:"item.organization_code"}},e._l(e.option.organization,(function(e,t){return o("el-option",{key:t,attrs:{label:e.organization_code+" - "+e.organization_name,value:e.organization_code}})})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                CAT.\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"CAT."},model:{value:t.item_cat_code,callback:function(o){e.$set(t,"item_cat_code",o)},expression:"item.item_cat_code"}},e._l(e.option.category,(function(e,t){return o("el-option",{key:t,attrs:{label:e.item_cat_desc,value:e.item_cat_code}})})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                กลุ่มผลิตภัณฑ์\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"กลุ่มผลิตภัณฑ์",loading:e.selectInput.product_group},model:{value:t.product_group_id,callback:function(o){e.$set(t,"product_group_id",o)},expression:"item.product_group_id"}},e._l(e.option.product_group,(function(t,n){return o("el-option",{key:n,attrs:{label:t.name,value:t.product_group_id}},[o("span",[e._v(e._s(t.code+" - "+t.name))])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                รหัสบัญชี (9)\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"รหัสบัญชี (9)",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT9")},loading:e.selectInput.SEGMENT9},model:{value:t.code_segment9,callback:function(o){e.$set(t,"code_segment9",o)},expression:"item.code_segment9"}},e._l(e.option.SEGMENT9,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                รหัสบัญชี (10)\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT10")},loading:e.selectInput.SEGMENT10,placeholder:"รหัสบัญชี (10)"},model:{value:t.code_segment10,callback:function(o){e.$set(t,"code_segment10",o)},expression:"item.code_segment10"}},e._l(e.option.SEGMENT10,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                รหัสบริษัท\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"รหัสบริษัท",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT1")},loading:e.selectInput.SEGMENT1},model:{value:t.code_segment1,callback:function(o){e.$set(t,"code_segment1",o)},expression:"item.code_segment1"}},e._l(e.option.SEGMENT1,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                EVM\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"EVM",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT2")},loading:e.selectInput.SEGMENT2},model:{value:t.code_segment2,callback:function(o){e.$set(t,"code_segment2",o)},expression:"item.code_segment2"}},e._l(e.option.SEGMENT2,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                รหัสงบ\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"รหัสงบ",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT6")},loading:e.selectInput.SEGMENT6},model:{value:t.code_segment6,callback:function(o){e.$set(t,"code_segment6",o)},expression:"item.code_segment6"}},e._l(e.option.SEGMENT6,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1),e._v(" "),o("div",{staticClass:"col-md-3 flex-wrap my-2"},[o("label",[e._v("\n                                รายละเอียดงบ\n                            ")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"รายละเอียดงบ",filterable:"",remote:"","remote-method":function(t){return e.searchSegment(t,"SEGMENT7")},loading:e.selectInput.SEGMENT7},model:{value:t.code_segment7,callback:function(o){e.$set(t,"code_segment7",o)},expression:"item.code_segment7"}},e._l(e.option.SEGMENT7,(function(t,n){return o("el-option",{key:n,attrs:{label:t.description,value:t.flex_value}},[o("span",[e._v("\n                                        "+e._s(t.flex_value+" - "+t.description)+"\n                                    ")])])})),1)],1)])])})),1),e._v(" "),o("div",{staticClass:"col-md-12 m-2"},[o("el-button",{staticClass:"btn-success",staticStyle:{width:"100%"},attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.addRow(e.form.ledger_details)}}},[e._v("\n                    สร้างระบบบัญชีแยกประเภททั่วไปใหม่\n                ")])],1)])]),e._v(" "),o("div",{staticClass:"col-md-12 text-right mt-4 px-0"},[o("el-button",{staticClass:"btn-success",attrs:{type:"success"},on:{click:function(t){return e.handleSubmit()}}},[e._v("\n            ยืนยัน\n        ")]),e._v(" "),o("el-button",{staticClass:"text-refresh",attrs:{type:"text"},nativeOn:{click:function(t){return t.preventDefault(),e.refresh()}}},[e._v("\n            ล้างข้อมูล\n        ")])],1)])}),[],!1,null,"07b26993",null).exports}}]);