(self.webpackChunk=self.webpackChunk||[]).push([[9027],{46510:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var n=e(23645),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}",""]);const s=r},25623:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var n=e(23645),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}.ibox .label,.nav .label{font-size:12px}.sticky-col{position:sticky;background-color:#f7f7f7!important;z-index:9999}.first-col{min-width:70px;left:0}.first-col,.second-col{width:150px;max-width:150px}.second-col{min-width:135px;left:68px}.th-col{width:250px;min-width:165px;max-width:250px;left:202px}.fo-col{min-width:100px;left:365px}.fi-col,.fo-col{width:200px;max-width:200px}.fi-col{min-width:125px;left:463px}.h1-col,.t1-col{width:200px;min-width:150px;max-width:200px;left:-5px}",""]);const s=r},88459:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var n=e(23645),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}",""]);const s=r},44700:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>W});var n=e(87757),r=e.n(n),s=e(80455),i=e.n(s);function o(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}const c={props:["defaultYear","defaultWorkingHour","btnTrans","url"],components:{VueNumeric:i()},data:function(){return{budget_year:this.defaultYear?this.defaultYear:"",times:"",loading:!1,timeLoading:!1,errors:{budget_year:!1,begin_onhand:!1,per_loss:!1},biWeeklyLists:[],html:"",begin_onhand:"",per_loss:"",working_hour:this.defaultWorkingHour?this.defaultWorkingHour:""}},mounted:function(){},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year")},deep:!0}},methods:{openModal:function(){$("#modal_create").modal("show"),this.getBiWeekly()},getBiWeekly:function(){this.times="",this.budget_year=this.defaultYear?this.defaultYear:"",this.getDetail()},getDetail:function(){var t=this;return l(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(e=t).times=1,e.html="",e.timeLoading=!0,axios.get(e.url.ajax_modal_create_details,{params:{budget_year:e.budget_year}}).then((function(t){var a=t.data.data;e.times=a.times,e.html=a.html,e.timeLoading=!1}));case 5:case"end":return a.stop()}}),a)})))()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},submit:function(){var t=this;return l(r().mark((function a(){var e,n,s,i,o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=t,n=$("#modal_create"),n.serialize(),s=!0,i="",t.errors.budget_year=!1,t.errors.begin_onhand=!1,t.errors.per_loss=!1,$(n).find("div[id='el_explode_budget_year']").html(""),$(n).find("div[id='el_explode_begin_onhand']").html(""),$(n).find("div[id='el_explode_per_loss']").html(""),""==t.budget_year&&(t.errors.budget_year=!0,s=!1,i="กรุณาเลือกปีงบประมาณ",$(n).find("div[id='el_explode_budget_year']").html(i)),""==t.begin_onhand&&(t.errors.begin_onhand=!0,s=!1,i="กรุณาระบุคงคลังต้นปีงบประมาณเพียงพอ",$(n).find("div[id='el_explode_begin_onhand']").html(i)),""==t.per_loss&&(t.errors.per_loss=!0,s=!1,i="กรุณาระบุเปอร์เซ็นต์สูญเสีย",$(n).find("div[id='el_explode_per_loss']").html(i)),s){a.next=16;break}return a.abrupt("return");case 16:return a.next=18,t.create();case 18:o=a.sent,e.loading=!1,"S"==o.status?(swal({title:"สร้างแผนประมาณการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลแผนประมาณการผลิตรายปีเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=o.redirect_show_page}),2e3)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+o.msg+"</span>",type:"error",html:!0});case 21:case"end":return a.stop()}}),a)})))()},create:function(){var t=this;return l(r().mark((function a(){var e,n,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("--S--"),n=[],s={budget_year:(e=t).budget_year,begin_onhand:e.begin_onhand,per_loss:e.per_loss,working_hour:e.working_hour},e.loading=!0,console.log("--S1--"),a.next=8,axios.post(e.url.ajax_production_yearly_store,s).then((function(t){console.log(t),n=t.data.data})).catch((function(t){var a=t.response.data.data;swal({title:"มีข้อผิดพลาด",text:a,type:"error"})})).then((function(){e.loading=!1}));case 8:return console.log("--E--"),a.abrupt("return",n);case 10:case"end":return a.stop()}}),a)})))()}}};var d=e(51900);const u=(0,d.Z)(c,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",[e("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[e("i",{class:t.btnTrans.create.icon}),t._v("\n        "+t._s(t.btnTrans.create.text)+"\n    ")]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal_create",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body text-left"},[e("form",{attrs:{id:"production-plan-create-form"}},[e("div",{staticClass:"row col-12 m-0"},[e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),e("div",{staticClass:"input-group "},[e("el-input",{attrs:{readonly:!0,placeholder:"Please input",size:"large"},model:{value:t.budget_year,callback:function(a){t.budget_year=a},expression:"budget_year"}}),t._v(" "),e("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่ :")]),t._v(" "),e("el-input",{directives:[{name:"loading",rawName:"v-loading",value:t.timeLoading,expression:"timeLoading"}],attrs:{placeholder:"ครั้งที่",size:"large",readonly:!0},model:{value:t.times,callback:function(a){t.times=a},expression:"times"}})],1),t._v(" "),e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-4 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" คงคลังต้นปีงบประมาณเพียงพอ(วัน) :")]),t._v(" "),e("vue-numeric",{staticClass:"form-control input-md text-right",style:"width: 100%; height: 40px; "+(t.errors.begin_onhand?"border: 1px solid red;":""),attrs:{name:"begin_onhand",minus:!1,min:0,max:100,autocomplete:"off"},model:{value:t.begin_onhand,callback:function(a){t.begin_onhand=a},expression:"begin_onhand"}}),t._v(" "),e("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_begin_onhand"}})],1),t._v(" "),e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" เปอร์เซ็นต์สูญเสีย(%) :")]),t._v(" "),e("vue-numeric",{staticClass:"form-control input-md text-right",style:"width: 100%; height: 40px; "+(t.errors.per_loss?"border: 1px solid red;":""),attrs:{name:"per_loss",minus:!1,precision:2,min:0,max:100,autocomplete:"off"},model:{value:t.per_loss,callback:function(a){t.per_loss=a},expression:"per_loss"}}),t._v(" "),e("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_per_loss"}})],1)])]),t._v(" "),e("transition",{attrs:{"enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[t.budget_year?e("div",{staticClass:"mt-4",domProps:{innerHTML:t._s(t.html)}}):t._e()])],1),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),e("button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.submit()}}},[e("i",{class:t.btnTrans.create.icon}),t._v("\n                        "+t._s(t.btnTrans.create.text)+"\n                    ")])])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v("สร้างแผนประมาณการผลิตประจำปี")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),e("span",{staticClass:"sr-only"},[t._v("Close")])])])}],!1,null,null,null).exports;function p(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}const m={props:["budgetYears","search","defaultYear","productTypes","btnTrans","url"],data:function(){return{budget_year:this.search.length?this.search.budget_year:String(this.defaultYear),times:"",loading:!1,errors:{budget_year:!1},html:""}},mounted:function(){},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{openModal:function(){$("#modal_search").modal("show")},searchForm:function(){var t,a=this;return(t=r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=a).loading=!0,t.next=4,axios.get(e.url.ajax_production_yearly_search,{params:{search:{budget_year:e.budget_year}}}).then((function(t){e.html=t.data.data.html})).catch((function(t){e.html="";var a=t.response.data;alert(a.message)})).then((function(){e.loading=!1}));case 4:case"end":return t.stop()}}),t)})),function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){p(s,n,r,i,o,"next",t)}function o(t){p(s,n,r,i,o,"throw",t)}i(void 0)}))})()}}};const _=(0,d.Z)(m,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",[e("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[e("i",{class:t.btnTrans.search.icon}),t._v("\n        "+t._s(t.btnTrans.search.text)+"\n    ")]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body text-left"},[e("div",{staticClass:"row col-12"},[e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),e("div",{staticClass:"input-group "},[e("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:t.budget_year}}),t._v(" "),e("el-select",{attrs:{size:"large",placeholder:"ปีงบประมาณ",filterable:"","popper-append-to-body":!1},model:{value:t.budget_year,callback:function(a){t.budget_year=a},expression:"budget_year"}},t._l(t.budgetYears,(function(t,a){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1),t._v(" "),e("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),e("div",{staticClass:"form-group text-right  pr-2 mb-0 col-lg-6 col-md-10 col-sm-12 col-xs-12"},[e("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" ")]),t._v(" "),e("div",{staticClass:"text-left"},[e("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.searchForm}},[e("i",{class:t.btnTrans.search.icon}),t._v("\n                                    "+t._s(t.btnTrans.search.text)+"\n                                ")])])])]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.html)}})]),t._v(" "),t._m(1)])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[t._v("\n                        ค้นหาแผนประมาณการผลิตประจำปี\n                    ")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),e("span",{staticClass:"sr-only"},[t._v("Close")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],!1,null,null,null).exports;var f=e(30381),h=e.n(f);function v(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}const y={props:["prodYearlyMain","lastUpdateDateFormat","productTypes","defaultInput","url"],data:function(){return{statusLists:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],headerP02:this.prodYearlyMain,canApprove:this.prodYearlyMain.can.approve,statusFlag:!1}},watch:{prodYearlyMain:function(t){this.canApprove=t.can.approve,this.headerP02=t}},methods:{dateOrderFrom:function(t){this.headerP02.approved_date=t?h()(t).format("DD-MM-YYYY"):""},editStatus:function(){this.statusFlag=!0},cancleStatus:function(){this.statusFlag=!1},saveStatus:function(){var t,a=this;return(t=r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=a).loading=!0,t.next=4,axios.post(e.url.ajax_update_status,{header:e.headerP02}).then((function(t){"S"==t.data.data.status?(swal({title:"อัพเดทประมาณการผลิตบุหรี่และก้นกรองประจำปี",text:'<span style="font-size: 16px; text-align: left;"> อัพเดทประมาณการผลิตบุหรี่และก้นกรองประจำปีเรียบร้อย </span>',type:"success",html:!0}),e.headerP02=t.data.data.header,e.statusFlag=!1,e.canApprove=e.headerP02.can.approve):swal({title:"มีข้อผิดพลาด",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var a=t.response.data;swal({title:"มีข้อผิดพลาด",text:a.message,type:"error",showConfirmButton:!0})})).then((function(){e.loading=!1}));case 4:case"end":return t.stop()}}),t)})),function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){v(s,n,r,i,o,"next",t)}function o(t){v(s,n,r,i,o,"throw",t)}i(void 0)}))})()}}};const g=(0,d.Z)(y,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{},[e("form",{attrs:{id:"production-yearly-form",action:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-8 b-r"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6"},[e("dl",{staticClass:"row mb-0"},[t._m(0),t._v(" "),e("div",{staticClass:"col-sm-8 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.budget_year)+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(1),t._v(" "),e("div",{staticClass:"col-sm-8 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.version_no)+"\n                                    ")]):t._e()])])])]),t._v(" "),e("div",{staticClass:"col-lg-6",attrs:{id:"cluster_info"}},[e("dl",{staticClass:"row mb-0"},[t._m(2),t._v(" "),e("div",{staticClass:"col-sm-4 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain?t.prodYearlyMain.budget_year:"-")+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(3),t._v(" "),e("div",{staticClass:"col-sm-4 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.first_sales_forecast.version)+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(4),t._v(" "),e("div",{staticClass:"col-sm-4 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.first_sales_forecast.approve_date_format)+"\n                                    ")]):t._e()])])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-10 col-md-10 col-sm-6 col-xs-6 mt-2"},[e("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ประมาณกำลังการผลิต ")]),t._v(" "),e("div",[e("el-radio-group",{attrs:{size:"small"},model:{value:t.defaultInput.product_type,callback:function(a){t.$set(t.defaultInput,"product_type",a)},expression:"defaultInput.product_type"}},[t._l(t.productTypes,(function(a,n){return[e("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:a.lookup_code,border:""}},[t._v("\n                                    "+t._s(a.meaning)+"\n                                ")])]}))],2)],1)])])]),t._v(" "),e("div",{staticClass:"col-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("dl",{staticClass:"row mb-0"},[t._m(5),t._v(" "),e("div",{staticClass:"col-sm-6 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.creation_date_format)+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(6),t._v(" "),e("div",{staticClass:"col-sm-6 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.lastUpdateDateFormat)+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(7),t._v(" "),e("div",{staticClass:"col-sm-6 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.headerP02?e("div",[t.statusFlag?t._e():e("span",{domProps:{innerHTML:t._s(t.headerP02.status_lable_html)}}),t._v(" "),t.canApprove?[t.statusFlag?t._e():e("button",{staticClass:"btn btn-xs btn-primary",attrs:{type:"button"},on:{click:function(a){return t.editStatus()}}},[e("i",{staticClass:"fa fa-pencil-square"})]),t._v(" "),t.statusFlag?e("el-select",{attrs:{size:"small",placeholder:"สถานะ",filterable:""},model:{value:t.headerP02.approved_status,callback:function(a){t.$set(t.headerP02,"approved_status",a)},expression:"headerP02.approved_status"}},t._l(t.statusLists,(function(t){return e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1):t._e(),t._v(" "),e("div",{staticClass:"text-right mt-2"},[t.statusFlag?e("button",{staticClass:"btn btn-xs btn-success",attrs:{type:"button"},on:{click:function(a){return t.saveStatus()}}},[e("i",{staticClass:"fa fa-check-square"})]):t._e(),t._v(" "),t.statusFlag?e("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button"},on:{click:function(a){return t.cancleStatus()}}},[e("i",{staticClass:"fa fa-times"})]):t._e()])]:t._e()],2):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(8),t._v(" "),e("div",{staticClass:"col-sm-6 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.prodYearlyMain?e("div",[t._v("\n                                        "+t._s(t.prodYearlyMain.updated_by?t.prodYearlyMain.updated_by.name:"-")+"\n                                    ")]):t._e()])])]),t._v(" "),e("dl",{staticClass:"row mb-0"},[t._m(9),t._v(" "),e("div",{staticClass:"col-sm-6 text-sm-left"},[e("dd",{staticClass:"mb-1"},[t.headerP02?e("div",[t.statusFlag?t._e():e("span",[t._v(" "+t._s(t.headerP02.approved_at_format)+" ")]),t._v(" "),t.statusFlag?e("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2 approve_date",staticStyle:{width:"100%"},attrs:{id:"approved_at",placeholder:"โปรดเลือกวันที่",value:t.headerP02.approved_at_format,format:"DD/MM/YYYY"},on:{dateWasSelected:t.dateOrderFrom},model:{value:t.headerP02.approved_at_format,callback:function(a){t.$set(t.headerP02,"approved_at_format",a)},expression:" headerP02.approved_at_format"}}):t._e()],1):t._e()])])])])])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[e("dt",[t._v("ปีงบประมาณ:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[e("dt",[t._v("ครั้งที่:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-8  pl-0 text-sm-right"},[e("dt",[t._v("\n                                    อ้างอิงประมาณการจำหน่ายปีงบประมาณ:\n                                ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-8 pl-0  text-sm-right"},[e("dt",[t._v("ครั้งที่:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-8 pl-0  text-sm-right"},[e("dt",[t._v("วันที่อนุมัติแผนขาย:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6 text-sm-right"},[e("dt",[t._v("วันที่สร้าง:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6 text-sm-right"},[e("dt",{attrs:{title:""}},[t._v("วันที่แก้ไขล่าสุด:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6 text-sm-right"},[e("dt",[t._v("สถานะ:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6 text-sm-right"},[e("dt",[t._v("ผู้บันทึก:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6 text-sm-right"},[e("dt",[t._v("วันที่อนุมัติ:")])])}],!1,null,null,null).exports;function b(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}var x,C;const w={props:["pDateFormat","machineEfficiencyProd","prodYearlyMain","productType","url","workingHour","selTabName","pRefresh"],data:function(){return{loading:!1,html:""}},mounted:function(){this.getProductPlanMachine()},methods:{getProductPlanMachine:function(){var t=this;if(t.productType&&"tab1"==t.selTabName){t.loading=!0;var a={yearly_main_id:t.prodYearlyMain.yearly_main_id,product_type:t.productType};axios.get(t.url.ajax_get_plan_machine,{params:a}).then((function(a){var e=a.data.data;t.html=e.html})).catch((function(t){var a=t.response.data;swal({title:"มีข้อผิดพลาด",text:a.message,type:"error"})})).then((function(){t.loading=!1}))}}},watch:{productType:function(){this.getProductPlanMachine()},pRefresh:(x=r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getProductPlanMachine();case 1:case"end":return t.stop()}}),t,this)})),C=function(){var t=this,a=arguments;return new Promise((function(e,n){var r=x.apply(t,a);function s(t){b(r,e,n,s,i,"next",t)}function i(t){b(r,e,n,s,i,"throw",t)}s(void 0)}))},function(t,a){return C.apply(this,arguments)})},computed:{p01EfficiencyProduct:function(){var t=this,a="-";if(t.prodYearlyMain){var e=t.machineEfficiencyProd.filter((function(a){return a.product_type==t.productType}));e&&(a=e[0].efficiency_product)}return a}}};const T=(0,d.Z)(w,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-lg-2 col-form-label text-left"},[e("strong",[t._v(" สั่งผลิต(%) ")]),t._v("   \n            "+t._s(t.p01EfficiencyProduct)+"\n        ")])]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.html)}})])}),[],!1,null,null,null).exports;const D={components:{VueNumeric:i()},props:["line","estByBrandData","beginOnhandQtyChangeData","periods","periodCal","canEdit"],data:function(){return{oldBeginOnhandQty:this.line.begin_onhand_qty}},mounted:function(){},watch:{editFlag:function(t){0==t&&(this.line.begin_onhand_qty=Number(this.oldBeginOnhandQty),this.changeOnhandQuantity())}},methods:{changeOnhandQuantity:function(){var t=this,a=Number(t.line.begin_onhand_qty),e=0,n="",r=0;Object.keys(t.periods).filter((function(s,i){r=i-1,n=t.periodCal[r];var o=0;if(t.estByBrandData[s][t.line.item_code].begin_onhand_qty=Number(a),0==i)e=a+Number(t.estByBrandData[s][t.line.item_code].planning_qty)-Number(t.line.forcast_qty),t.estByBrandData[s][t.line.item_code].bal_onhand_qty=Number(e);else{var l=t.estByBrandData[n][t.line.item_code].bal_onhand_qty?Number(t.estByBrandData[n][t.line.item_code].bal_onhand_qty):0,c=t.estByBrandData[s][t.line.item_code].planning_qty?Number(t.estByBrandData[s][t.line.item_code].planning_qty):0,d=t.estByBrandData[s][t.line.item_code].forcast_qty?Number(t.estByBrandData[s][t.line.item_code].forcast_qty):0;console.log(l),console.log(c),console.log(d),o=l+c-d,t.estByBrandData[s][t.line.item_code].bal_onhand_qty=Number(o)}})),Vue.set(t.beginOnhandQtyChangeData,t.line.item_code,Number(t.line.begin_onhand_qty))}}};const k=(0,d.Z)(D,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.canEdit?[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,min:0,max:9999999999,minus:!1},on:{change:function(a){return t.changeOnhandQuantity()},blur:function(a){return t.changeOnhandQuantity()}},model:{value:t.line.begin_onhand_qty,callback:function(a){t.$set(t.line,"begin_onhand_qty",a)},expression:"line.begin_onhand_qty"}})]:[e("span",[t._v(" "+t._s(t._f("number3Digit")(t.line.begin_onhand_qty))+" ")])]],2)}),[],!1,null,null,null).exports;const P={components:{VueNumeric:i()},props:["line","totalQtyChangeData","canEdit"],data:function(){return{oldTotalQty:this.line.total_qty}},mounted:function(){},watch:{editFlag:function(t){0==t&&(this.line.total_qty=Number(this.oldTotalQty),this.changeTotalQuantity())}},methods:{changeTotalQuantity:function(){var t=this,a=Number(t.line.total_qty)*Number(t.line.define_product_cigaret);t.line.planning_qty=a,Vue.set(t.totalQtyChangeData,t.line.period_no+"|"+t.line.item_code,Number(t.line.total_qty))}}};const B=(0,d.Z)(P,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.canEdit?[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",min:0,precision:2,max:9999999999,minus:!1},on:{change:function(a){return t.changeTotalQuantity()},blur:function(a){return t.changeTotalQuantity()}},model:{value:t.line.total_qty,callback:function(a){t.$set(t.line,"total_qty",a)},expression:"line.total_qty"}})]:[e("span",[t._v(" "+t._s(t._f("number3Digit")(t.line.total_qty))+" ")])]],2)}),[],!1,null,null,null).exports;const E={components:{VueNumeric:i()},props:["line","totalPlanChangeData","canEdit","estByBrandData","periods","periodCal"],data:function(){return{oldTotalQty:this.line.planning_qty}},mounted:function(){},watch:{editFlag:function(t){0==t&&(this.line.planning_qty=Number(this.oldTotalQty),this.changeTotalQuantity())}},methods:{changeTotalQuantity:function(){var t=this,a=Number(t.line.planning_qty)/Number(t.line.define_product_cigaret);t.line.total_qty=a,Vue.set(t.totalPlanChangeData,t.line.period_no+"|"+t.line.item_code,Number(t.line.planning_qty));Number(t.line.begin_onhand_qty);var e=0,n="",r=0;Object.keys(t.periods).filter((function(a,s){r=s-1,n=t.periodCal[r];var i=0;if(0==s)e=Number(t.estByBrandData[a][t.line.item_code].begin_onhand_qty)+Number(t.estByBrandData[a][t.line.item_code].planning_qty)-Number(t.line.forcast_qty),t.estByBrandData[a][t.line.item_code].bal_onhand_qty=Number(e);else{var o=t.estByBrandData[n][t.line.item_code].bal_onhand_qty?Number(t.estByBrandData[n][t.line.item_code].bal_onhand_qty):0,l=t.estByBrandData[a][t.line.item_code].planning_qty?Number(t.estByBrandData[a][t.line.item_code].planning_qty):0,c=t.estByBrandData[a][t.line.item_code].forcast_qty?Number(t.estByBrandData[a][t.line.item_code].forcast_qty):0;console.log(n),console.log(t.line.item_code),console.log(o),i=o+l-c,t.estByBrandData[a][t.line.item_code].bal_onhand_qty=Number(i)}}))}}};const q=(0,d.Z)(E,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.canEdit?[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,min:0,max:9999999999,minus:!1},on:{change:function(a){return t.changeTotalQuantity()},blur:function(a){return t.changeTotalQuantity()}},model:{value:t.line.planning_qty,callback:function(a){t.$set(t.line,"planning_qty",a)},expression:"line.planning_qty"}})]:[e("span",[t._v(" "+t._s(t._f("number3Digit")(t.line.planning_qty))+" ")])]],2)}),[],!1,null,null,null).exports;const Y={components:{VueNumeric:i()},props:["placeholder","totalEffProduct","summaryTotal"],data:function(){return{value:Number(this.totalEffProduct)-Number(this.summaryTotal)}},mounted:function(){},methods:{}};function M(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}function N(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){M(s,n,r,i,o,"next",t)}function o(t){M(s,n,r,i,o,"throw",t)}i(void 0)}))}}const Q={components:{InputOnhandQuantity:k,InputTotalQuantity:B,InputPlanQuantity:q,Tab2EffProductPeriod:(0,d.Z)(Y,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,placeholder:t.placeholder,disabled:""},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1)}),[],!1,null,null,null).exports,VueNumeric:i()},props:["url","prodYearlyMain","productType","btnTrans","yearlyColorCode","canEdit","pRefresh","pWorkingHour","pLoading","beginOnhandQtyChangeData","totalQtyChangeData","totalPlanChangeData"],data:function(){return{loading:!1,refresh:null!=this.pRefresh&&""!=this.pRefresh&&this.pRefresh,items:[],periods:[],periodCal:[],summaryByPeriodData:[],summaryTotalData:[],estByBrandData:[],totalEffProductData:[],omDayForSaleData:[],estKkTableHtml:"",summaryTotalQty:[],summaryTotalPlaningQty:[],summaryTotalOnhandQty:[],summaryTotalForcastQty:[],sel_item:"",formula1:"ผลิต / Batch * จำนวน(ชุด)",formula2:"ปริมานใช้ใบยาต่อ 1 ล้านมวน * ประมาณการผลิต (ล้านมวน)",formula3:"คงคลัง (ล้านมวน) + ประมาณการผลิต (ล้านมวน) - ประมาณการขาย (ล้านมวน)"}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;return N(r().mark((function a(){var e,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=t).refresh){a.next=3;break}return a.abrupt("return");case 3:return e.loading=!0,e.estByBrandData=!1,e.estKkTableHtml=!1,e.summaryData=[],n={yearly_main_id:e.prodYearlyMain.yearly_main_id,product_type:e.productType},a.next=10,axios.get(e.url.ajax_get_est_by_brand,{params:n}).then((function(t){e.items=t.data.data.items,e.periods=t.data.data.periods,e.periodCal=t.data.data.period_cal,e.estKkTableHtml=t.data.data.est_kk_table_html,e.estByBrandData=t.data.data.est_by_brand,e.totalEffProductData=t.data.data.total_eff_product,e.omDayForSaleData=t.data.data.om_day_for_sale,e.summaryByPeriodData=t.data.data.summary_by_period,e.summaryTotalData=t.data.data.summary_total})).catch((function(t){console.log("error");var a=t.response.data;alert(a.message)})).then((function(){e.loading=!1}));case 10:e.refresh=!1;case 11:case"end":return a.stop()}}),a)})))()},selItem:function(t){this.sel_item=t}},computed:{totalBeginOnhand:function(){return Object.values(this.items).reduce((function(t,a){return t+parseFloat(a.begin_onhand_qty)}),0)},totalQuantity:function(){var t=[],a=[],e=this;e.estByBrandData&&(Object.keys(e.periods).filter((function(n){return Object.values(e.estByBrandData[n]).filter((function(e){a[e.period_no]||(a[e.period_no]={period:e.period_no,total_qty:0},t.push(a[e.period_no])),a[e.period_no].total_qty+=parseFloat(e.total_qty)}))}),0),e.summaryTotalQty=t)},totalPlanningQuantity:function(){var t=[],a=[],e=this;e.estByBrandData&&(Object.keys(e.periods).filter((function(n){return Object.values(e.estByBrandData[n]).filter((function(e){a[e.period_no]||(a[e.period_no]={period:e.period_no,planning_qty:0},t.push(a[e.period_no])),a[e.period_no].planning_qty+=parseFloat(e.planning_qty)}))}),0),e.summaryTotalPlaningQty=t,this.$emit("summaryTotalPlaningTab2",this.summaryTotalPlaningQty))},totalOnhandQuantity:function(){var t=[],a=[],e=this;e.estByBrandData&&(Object.keys(e.periods).filter((function(n){return Object.values(e.estByBrandData[n]).filter((function(e){a[e.period_no]||(a[e.period_no]={period:e.period_no,bal_onhand_qty:0},t.push(a[e.period_no])),a[e.period_no].bal_onhand_qty+=parseFloat(e.bal_onhand_qty)}))}),0),this.summaryTotalOnhandQty=t)},totalForcastQuantity:function(){var t=[],a=[],e=this;e.estByBrandData&&(Object.keys(e.periods).filter((function(n){return Object.values(e.estByBrandData[n]).filter((function(e){a[e.period_no]||(a[e.period_no]={period:e.period_no,forcast_qty:0},t.push(a[e.period_no])),a[e.period_no].forcast_qty+=parseFloat(e.forcast_qty)}))}),0),this.summaryTotalForcastQty=t)}},watch:{pRefresh:function(){var t=N(r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.refresh=!0,this.getData();case 2:case"end":return t.stop()}}),t,this)})));return function(a,e){return t.apply(this,arguments)}}(),totalQuantity:function(t){return t},totalPlanningQuantity:function(t){return t},totalOnhandQuantity:function(t){return t},totalForcastQuantity:function(t){return t}}};e(81267);function S(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}function O(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){S(s,n,r,i,o,"next",t)}function o(t){S(s,n,r,i,o,"throw",t)}i(void 0)}))}}var F;const I={components:{Tab2EstimateBrandTable:(0,d.Z)(Q,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.pLoading?t._e():e("div",[e("div",{staticClass:"hr-line-dashed"}),t._v(" "),e("div",{staticClass:"table-responsive m-t"},["KK"==t.productType?e("div",{domProps:{innerHTML:t._s(t.estKkTableHtml)}}):t._e(),t._v(" "),"KK"!=t.productType?e("table",{staticClass:"table text-nowrap table-bordered table-hover",staticStyle:{position:"sticky"}},[e("thead",[e("tr",[e("th",{staticClass:"align-bottom sticky-col h1-col",staticStyle:{"background-color":"#ffffff !important",border:"0px"},attrs:{colspan:"4"}}),t._v(" "),e("th",{staticClass:"align-bottom",staticStyle:{"background-color":"#ffffff !important",border:"0px"}}),t._v(" "),e("th",{staticClass:"align-bottom",staticStyle:{"background-color":"#ffffff !important",border:"0px"}}),t._v(" "),t._l(t.periods,(function(a,n,r){return[e("td",{staticClass:"text-right",staticStyle:{"background-color":"#ffffff",border:"0px"},attrs:{colspan:"5"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("strong",[t._v(" "+t._s(a)+" ")])]),t._v(" "),e("div",{staticClass:"col-md-5"},[t._v(" ประมาณการผลิตสูงสุด ")]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,min:0,max:9999999999,minus:!1,placeholder:"ประมาณการผลิตสูงสุด",disabled:""},model:{value:t.totalEffProductData[n],callback:function(a){t.$set(t.totalEffProductData,n,a)},expression:"totalEffProductData[key]"}})],1)]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-3"}),t._v(" "),e("div",{staticClass:"col-md-5"},[t._v(" จำนวนวันขาย (วัน) ")]),t._v(" "),e("div",{staticClass:"col-md-4",staticStyle:{"text-align":"right"}},[e("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,min:0,max:9999999999,minus:!1,placeholder:"จำนวนวันขาย",disabled:""},model:{value:t.omDayForSaleData[n],callback:function(a){t.$set(t.omDayForSaleData,n,a)},expression:"omDayForSaleData[key]"}})],1)]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-3"}),t._v(" "),e("div",{staticClass:"col-md-5"},[t._v(" ประมาณการผลิตสูงสุดหักขาย ")]),t._v(" "),e("div",{staticClass:"col-md-4",staticStyle:{"text-align":"right"}},[e("Tab2EffProductPeriod",{attrs:{placeholder:"ประมาณการผลิตสูงสุดหักขาย",totalEffProduct:t.totalEffProductData[n],summaryTotal:t.summaryTotalForcastQty[r].forcast_qty}})],1)]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-3"}),t._v(" "),e("div",{staticClass:"col-md-5",staticStyle:{"font-size":"12px"}},[t._v(" ประมาณการผลิตสูงสุดหักผลิตที่กำหนด ")]),t._v(" "),e("div",{staticClass:"col-md-4",staticStyle:{"text-align":"right"}},[e("Tab2EffProductPeriod",{attrs:{placeholder:"ประมาณการผลิตสูงสุดหักผลิตที่กำหนด",totalEffProduct:t.totalEffProductData[n],summaryTotal:t.summaryTotalPlaningQty[r].planning_qty}})],1)])])]}))],2),t._v(" "),e("tr",[e("th",{staticClass:"align-middle text-center sticky-col first-col",attrs:{rowspan:"2"}},[t._v(" ลำดับ ")]),t._v(" "),e("th",{staticClass:"align-middle text-center sticky-col second-col",attrs:{rowspan:"2"}},[t._v(" รหัสบุหรี่ ")]),t._v(" "),e("th",{staticClass:"align-middle text-center sticky-col th-col",attrs:{rowspan:"2"}},[t._v(" ตราบุหรี่ ")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._l(t.periods,(function(a,n,r){return[e("th",{staticClass:"text-center text-white",style:"background-color: "+t.yearlyColorCode[r]+"; border-right: 3px solid #646464;",attrs:{colspan:"5"}},[t._v(" "+t._s(a)+" ")])]})),t._v(" "),e("th",{staticClass:"align-middle text-center text-white",staticStyle:{"background-color":"#35d399"},attrs:{colspan:"3"}},[t._v(" รวมทั้งปีงบประมาณ ")])],2),t._v(" "),e("tr",[t._l(t.periods,(function(a,n,r){return[e("th",{staticClass:"text-center"},[t._v(" จำนวน (ชุด) ")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{title:t.formula1}},[t._v(" ประมาณการผลิต "),e("br"),t._v(" (ล้านมวน) ")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{title:t.formula2}},[t._v(" ประมาณใช้ใบยา "),e("br"),t._v(" (กก.) ")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v(" ประมาณการขาย "),e("br"),t._v(" (ล้านมวน) ")]),t._v(" "),e("th",{staticClass:"text-center",staticStyle:{"border-right":"3px solid #646464"},attrs:{title:t.formula3}},[t._v(" คงคลังสิ้นเดือน "),e("br"),t._v(" (ล้านมวน) ")])]})),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5)],2)]),t._v(" "),e("tbody",[t._l(t.items,(function(a,n,r){return[e("tr",[e("td",{staticClass:"text-center sticky-col first-col",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(r>=0?Number(r)+1:n+1)+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-center sticky-col second-col",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(a.item_code)+"\n                        ")]),t._v(" "),e("td",{staticClass:"sticky-col th-col",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(a.item_description)+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-center sticky-col fo-col",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(a.define_product_cigaret)+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(a.formula_qty)))+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[e("input-onhand-quantity",{attrs:{line:a,"est-by-brand-data":t.estByBrandData,"begin-onhand-qty-change-data":t.beginOnhandQtyChangeData,periods:t.periods,"period-cal":t.periodCal,"can-edit":t.canEdit}})],1),t._v(" "),t._l(t.estByBrandData,(function(n,r){return[t._l(n,(function(n,r){return[a.item_code==r?[e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                                        "+t._s(t._f("number2Digit")(n.total_qty))+"\n                                    ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[e("input-plan-quantity",{attrs:{line:n,"total-plan-change-data":t.totalPlanChangeData,"est-by-brand-data":t.estByBrandData,periods:t.periods,"period-cal":t.periodCal,"can-edit":t.canEdit}})],1),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                                        "+t._s(t._f("number2Digit")(n.used_qty))+"\n                                    ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                                        "+t._s(t._f("number2Digit")(n.forcast_qty))+"\n                                    ")]),t._v(" "),e("td",{staticClass:"text-right",style:t.sel_item==a.item_code?"background-color: #9AD9DB; vertical-align: middle; border-right: 3px solid #646464;":"vertical-align: middle; border-right: 3px solid #646464;",on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                                        "+t._s(t._f("number2Digit")(n.bal_onhand_qty))+"\n                                    ")])]:t._e()]}))]})),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(a.total_planning_qty)))+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(a.total_forcast_qty)))+"\n                        ")]),t._v(" "),e("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},on:{click:function(e){return t.selItem(a.item_code)}}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(a.total_final_qty)))+"\n                        ")])],2)]})),t._v(" "),e("tr",[e("th",{staticClass:"text-right sticky-col t1-col",attrs:{colspan:"4"}},[t._v(" รวม ")]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{"background-color":"#34d399"}}),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                        "+t._s(t._f("number2Digit")(Number(t.totalBeginOnhand)))+"\n                    ")]),t._v(" "),t._l(t.periodCal,(function(a,n){return[e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(t.summaryTotalQty[n].total_qty)))+"\n                        ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(t.summaryTotalPlaningQty[n].planning_qty)))+"\n                        ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t._f("number2Digit")(t.summaryByPeriodData[a].used_qty))+"\n                        ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t._f("number2Digit")(t.summaryByPeriodData[a].forcast_qty))+"\n                        ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399","border-right":"3px solid #646464"}},[t._v("\n                            "+t._s(t._f("number2Digit")(Number(t.summaryTotalOnhandQty[n].bal_onhand_qty)))+"\n                        ")])]})),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                        "+t._s(t._f("number2Digit")(Number(t.summaryTotalData.total_planning_qty)))+"\n                    ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                        "+t._s(t._f("number2Digit")(Number(t.summaryTotalData.total_forcast_qty)))+"\n                    ")]),t._v(" "),e("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                        "+t._s(t._f("number2Digit")(Number(t.summaryTotalData.total_final_qty)))+"\n                    ")])],2)],2)]):t._e()])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center sticky-col fo-col",attrs:{rowspan:"2"}},[t._v(" ผลิต/BATCH "),e("br"),t._v(" (ล้านมวน) ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v(" ปริมาณใช้ใบยาต่อ "),e("br"),t._v(" 1 ล้านมวน (กก.) ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v(" คาดการณ์คงคลัง  "),e("br"),t._v(" (ล้านมวน) ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center"},[t._v(" รวมประมาณการผลิต "),e("br"),t._v(" (ล้านมวน) ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center"},[t._v(" รวมประมาณการขาย "),e("br"),t._v(" (ล้านมวน) ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("th",{staticClass:"align-middle text-center"},[t._v(" ผลต่างผลิตหักขาย "),e("br"),t._v(" (ล้านมวน) ")])}],!1,null,null,null).exports},props:["prodYearlyMain","url","pDateFormat","pRefresh","btnTrans","yearlyColorCode","selTabName","productType","pDefaultInput","beginOnhandQtyChangeData","totalQtyChangeData","totalPlanChangeData","canEdit","pWorkingHour"],data:function(){return{dateFormat:null!=this.pDateFormat&&""!=this.pDateFormat?this.pDateFormat:"DD/MM/YYYY",loading:0,refreshData:0,html:""}},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var t=this;return O(r().mark((function a(){var e,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=t).prodYearlyMain){a.next=3;break}return a.abrupt("return");case 3:return e.refreshData=e.refreshData+1,e.loading=!0,e.html="",n={yearly_main_id:e.prodYearlyMain.yearly_main_id,product_type:e.productType},a.next=9,axios.get(e.url.ajax_get_summary_working_hour,{params:n}).then((function(t){e.html=t.data.data.html})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){e.loading=!1}));case 9:case"end":return a.stop()}}),a)})))()},summaryTotalPlaning:function(t){this.$emit("summaryTotalPlaningTab2",t)}},watch:{productType:(F=O(r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab2"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getData();case 3:case"end":return t.stop()}}),t,this)}))),function(t,a){return F.apply(this,arguments)}),pRefresh:function(){var t=O(r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab2"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getData();case 3:case"end":return t.stop()}}),t,this)})));return function(a,e){return t.apply(this,arguments)}}()}};e(72050);const j=(0,d.Z)(I,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],domProps:{innerHTML:t._s(t.html)}}),t._v(" "),e("Tab2EstimateBrandTable",{attrs:{url:t.url,btnTrans:t.btnTrans,prodYearlyMain:t.prodYearlyMain,"product-type":t.productType,pRefresh:t.refreshData,"p-working-hour":t.pWorkingHour,canEdit:t.canEdit,yearlyColorCode:t.yearlyColorCode,"p-loading":t.loading,"begin-onhand-qty-change-data":t.beginOnhandQtyChangeData,"total-qty-change-data":t.totalQtyChangeData,"total-plan-change-data":t.totalPlanChangeData},on:{summaryTotalPlaningTab2:t.summaryTotalPlaning}})],1)}),[],!1,null,null,null).exports;function H(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}function z(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){H(s,n,r,i,o,"next",t)}function o(t){H(s,n,r,i,o,"throw",t)}i(void 0)}))}}const L={props:["url","pRefresh","productType","prodYearlyMain","selTabName"],data:function(){return{loading:!1,refreshData:0,html:""}},mounted:function(){this.getEstByYearly()},computed:{},methods:{getEstByYearly:function(){var t=this;return z(r().mark((function a(){var e,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=t).prodYearlyMain){a.next=3;break}return a.abrupt("return");case 3:return e.refreshData=e.refreshData+1,e.loading=!0,e.html="",n={yearly_main_id:e.prodYearlyMain.yearly_main_id,product_type:e.productType},a.next=9,axios.get(e.url.ajax_get_est_by_yearly,{params:n}).then((function(t){e.html=t.data.data.html})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){e.loading=!1}));case 9:case"end":return a.stop()}}),a)})))()}},watch:{productType:function(){this.getEstByYearly()},pRefresh:function(){var t=z(r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab3"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getEstByYearly();case 3:case"end":return t.stop()}}),t,this)})));return function(a,e){return t.apply(this,arguments)}}()}};e(84769);function A(t,a,e,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void e(t)}o.done?a(l):Promise.resolve(l).then(n,r)}function R(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var s=t.apply(a,e);function i(t){A(s,n,r,i,o,"next",t)}function o(t){A(s,n,r,i,o,"throw",t)}i(void 0)}))}}var Z;const U={components:{ModalCreate:u,ModalSearch:_,HeaderDetail:g,Tab1:T,Tab2:j,Tab3:(0,d.Z)(L,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],domProps:{innerHTML:t._s(t.html)}})])}),[],!1,null,null,null).exports},props:["prodYearly","modalCreateInput","modalSearchInput","yearlyColorCode","machineEfficiencyProd","pDateFormat","productTypes","workingHour","pDefaultInput","btnTrans","url"],data:function(){return{loading:{approveProcess:!1,copyProcess:!1},prodYearlyMain:this.prodYearly,defaultInput:null!=this.pDefaultInput&&""!=this.pDefaultInput?this.pDefaultInput:null,lastUpdateDateFormat:"",selTabName:"tab1",refreshTab1:0,refreshTab2:0,refreshTab3:0,canEdit:!1,canApprove:!1,beginOnhandQtyChangeData:{},totalQtyChangeData:{},totalPlanChangeData:{},summaryPlanning:[]}},mounted:function(){null!=this.prodYearlyMain&&""!=this.prodYearlyMain&&(this.canEdit=this.prodYearlyMain.can.edit,this.canApprove=this.prodYearlyMain.can.approve),null!=this.prodYearlyMain&&""!=this.prodYearlyMain&&this.setLastUpdateDateFormat(this.prodYearlyMain.last_update_date_format)},computed:{},watch:{selTabName:(Z=R(r().mark((function t(a,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"tab1"==a&&(this.refreshTab1=this.refreshTab1+1,this.beginOnhandQtyChangeData={},this.totalQtyChangeData={},this.totalPlanChangeData={}),"tab2"==a&&(this.refreshTab2=this.refreshTab2+1,this.beginOnhandQtyChangeData={},this.totalQtyChangeData={},this.totalPlanChangeData={}),"tab3"==a&&(this.refreshTab3=this.refreshTab3+1,this.beginOnhandQtyChangeData={},this.totalQtyChangeData={},this.totalPlanChangeData={});case 3:case"end":return t.stop()}}),t,this)}))),function(t,a){return Z.apply(this,arguments)})},methods:{setLastUpdateDateFormat:function(t){this.lastUpdateDateFormat=t},saveTab2EstChange:function(){var t=this;return R(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=t).canEdit){a.next=3;break}return a.abrupt("return");case 3:if(0!=Object.keys(e.beginOnhandQtyChangeData).length||0!=Object.keys(e.totalPlanChangeData).length){a.next=6;break}return swal({title:"อัพเดทแผนการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> ไม่พบข้อมูลการอัพเดท </span>',type:"warning",html:!0}),a.abrupt("return");case 6:swal({html:!0,title:"อัพเดทแผนการผลิตประจำปี ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทแผนการผลิตประจำปี ? </span></h2>',showCancelButton:!0,confirmButtonText:e.btnTrans.ok.text,cancelButtonText:e.btnTrans.cancel.text,confirmButtonClass:e.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:e.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=R(r().mark((function t(a){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}return n={product_type:e.defaultInput.product_type,begin_onhand_qty_data:e.beginOnhandQtyChangeData,total_qty_data:e.totalQtyChangeData,total_plan_data:e.totalPlanChangeData,summaryPlanning:e.summaryPlanning},t.next=4,axios.patch(e.url.ajax_production_yearly_update,{params:n}).then((function(t){"S"==t.data.data.status&&(swal({title:"อัพเดทแผนการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> อัพเดทแผนการผลิตประจำปีสำเร็จ </span>',type:"success",html:!0}),e.setLastUpdateDateFormat(t.data.data.last_update_date),e.beginOnhandQtyChangeData={},e.totalQtyChangeData={},e.totalPlanChangeData={},"tab2"==e.selTabName&&(e.refreshTab2=e.refreshTab2+1)),"S"!=t.data.data.status&&swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.data.msg+"</span>",type:"warning",showConfirmButton:!0,html:!0})})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){}));case 4:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}());case 7:case"end":return a.stop()}}),a)})))()},checkApprove:function(){var t=this;return R(r().mark((function a(){var e,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=t).canApprove){a.next=3;break}return a.abrupt("return");case 3:return e.loading.approveProcess=!0,n={summaryPlanning:e.summaryPlanning},a.next=7,axios.get(e.url.ajax_check_approve,{params:n}).then((function(t){"S"==t.data.data.status?swal({html:!0,title:"อนุมัติประมาณการผลิตประจำปี",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอนุมัติประมาณการผลิตประจำปี? </span></h2>',showCancelButton:!0,confirmButtonText:e.btnTrans.ok.text,cancelButtonText:e.btnTrans.cancel.text,confirmButtonClass:e.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:e.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=R(r().mark((function t(a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&e.approve();case 1:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()):swal({title:"ข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){e.loading.approveProcess=!1}));case 7:case"end":return a.stop()}}),a)})))()},approve:function(){var t=this;return R(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t,a.next=3,axios.patch(e.url.ajax_approve).then((function(t){"S"==t.data.data.status&&(swal({title:"อนุมัติประมาณการผลิตประจำปักษ์",text:'<span style="font-size: 16px; text-align: left;"> อนุมัติประมาณการผลิตประจำปีเรียบร้อย </span>',type:"success",html:!0}),e.tab2AvgChangeData={},"tab2"==e.selTabName&&(e.refreshTab2=e.refreshTab2+1),e.canEdit=!1,e.canApprove=!1,e.prodYearlyMain=t.data.data.prod_yearly_main),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){}));case 3:case"end":return a.stop()}}),a)})))()},checkUnapprove:function(){var t=this;return R(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e=t).canApprove){a.next=3;break}return a.abrupt("return");case 3:return e.loading.approveProcess=!0,a.next=6,axios.get(e.url.ajax_check_unapprove).then((function(t){"S"==t.data.data.status?swal({html:!0,title:"ยกเลิกอนุมัติประมาณการผลิตประจำปี",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการยกเลิกอนุมัติประมาณการผลิตประจำปี? </span></h2>',showCancelButton:!0,confirmButtonText:e.btnTrans.ok.text,cancelButtonText:e.btnTrans.cancel.text,confirmButtonClass:e.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:e.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=R(r().mark((function t(a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&e.unapprove();case 1:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()):swal({title:"ยกเลิกอนุมัติประมาณการผลิตประจำปักษ์",text:t.data.data.msg,html:!0,showCancelButton:!0,confirmButtonText:e.btnTrans.ok.text,cancelButtonText:e.btnTrans.cancel.text,confirmButtonClass:e.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:e.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=R(r().mark((function t(a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&(console.log("Approve"),e.approve());case 1:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}())})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){e.loading.approveProcess=!1}));case 6:case"end":return a.stop()}}),a)})))()},unapprove:function(){var t=this;return R(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t,a.next=3,axios.patch(e.url.ajax_unapprove).then((function(t){"S"==t.data.data.status&&(swal({title:"ยกเลิกอนุมัติประมาณการผลิตประจำปักษ์",text:'<span style="font-size: 16px; text-align: left;"> ยกเลิกอนุมัติประมาณการผลิตประจำปีเรียบร้อย </span>',type:"success",html:!0}),e.tab2AvgChangeData={},"tab2"==e.selTabName&&(e.refreshTab2=e.refreshTab2+1),e.canEdit=!0,e.canApprove=!0,e.prodYearlyMain=t.data.data.prod_yearly_main),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){}));case 3:case"end":return a.stop()}}),a)})))()},copyPlan:function(){var t=this;return R(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=t,!(Object.keys(e.beginOnhandQtyChangeData).length>0||Object.keys(e.totalPlanChangeData).length>0)){a.next=4;break}return swal({title:"อนุมัติประมาณการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> ไม่สามารถทำการอนุมัติประมาณการผลิตประจำปี เนื่องจากมีรายการที่แก้ไขอยู่ กรุณาตรวจสอบ </span>',type:"warning",html:!0}),a.abrupt("return");case 4:return e.loading.copyProcess=!0,a.next=7,axios.patch(e.url.ajax_copy_plan).then((function(t){"S"==t.data.data.status?(swal({title:"คัดลอกแผนประมาณการผลิตประจำปักษ์",text:'<span style="font-size: 16px; text-align: left;"> คัดลอกแผนประมาณการผลิตประจำปีเรียบร้อย </span>',type:"success",html:!0}),window.location.href=t.data.data.redirect_show_page):swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var a=t.response.data;alert(a.message)})).then((function(){e.loading.copyProcess=!1}));case 7:case"end":return a.stop()}}),a)})))()},summaryTotalPlaning:function(t){this.summaryPlanning=t}}};const W=(0,d.Z)(U,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.approveProcess||t.loading.copyProcess,expression:"loading.approveProcess || loading.copyProcess"}]},[e("div",{staticClass:"ibox float-e-margins mb-2"},[e("div",{staticClass:"col-12 text-right mt-1"},[e("modal-search",{attrs:{"btn-trans":t.btnTrans,url:t.url,defaultYear:t.pDefaultInput.budget_year,budgetYears:t.modalSearchInput.budget_years,search:[]}}),t._v(" "),e("modal-create",{staticClass:"pr-2",attrs:{"btn-trans":t.btnTrans,url:t.url,defaultYear:t.modalCreateInput.default_year,defaultWorkingHour:t.modalCreateInput.default_workingHour}}),t._v(" "),t.canEdit?e("button",{class:t.btnTrans.save.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.saveTab2EstChange()}}},[e("i",{class:t.btnTrans.save.icon}),t._v("\n                "+t._s(t.btnTrans.save.text)+"\n            ")]):t._e(),t._v(" "),t.prodYearlyMain?[t.canApprove?e("button",{class:t.btnTrans.approve.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.checkApprove()}}},[e("i",{class:t.btnTrans.approve.icon}),t._v("\n                    "+t._s(t.btnTrans.approve.text)+"\n                ")]):e("button",{class:t.btnTrans.unapprove.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.checkUnapprove()}}},[e("i",{class:t.btnTrans.unapprove.icon}),t._v("\n                    "+t._s(t.btnTrans.unapprove.text)+"\n                ")]),t._v(" "),e("button",{class:t.btnTrans.copy.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.copyPlan()}}},[e("i",{class:t.btnTrans.copy.icon}),t._v("\n                    "+t._s(t.btnTrans.copy.text)+"แผน\n                ")])]:t._e()],2)]),t._v(" "),e("div",{staticClass:"card border-primary mb-3 mt-3"},[e("div",{staticClass:"card-body"},[e("header-detail",{attrs:{lastUpdateDateFormat:t.lastUpdateDateFormat,"prod-yearly-main":t.prodYearlyMain,"product-types":t.productTypes,"default-input":t.pDefaultInput,url:t.url}})],1)]),t._v(" "),e("div",{staticClass:"tabs-container"},[e("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[e("li",[e("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#tab1"},on:{click:function(a){t.selTabName="tab1"}}},[t._v("\n                    ประมาณกำลังการผลิต\n                ")])]),t._v(" "),e("li",[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#tab2"},on:{click:function(a){t.selTabName="tab2"}}},[t._v("\n                    ประมาณการผลิตแยกรายตรา\n                ")])]),t._v(" "),e("li",[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#tab3"},on:{click:function(a){t.selTabName="tab3"}}},[t._v("\n                    ประมาณการผลิตทั้งปีงบประมาณ\n                ")])])]),t._v(" "),e("div",{staticClass:"tab-content"},[e("div",{staticClass:"tab-pane active",attrs:{role:"tabpanel",id:"tab1"}},[e("div",{staticClass:"panel-body "},[t.prodYearlyMain?e("tab1",{attrs:{machineEfficiencyProd:t.machineEfficiencyProd,"product-type":t.defaultInput.product_type,"working-hour":t.workingHour,"sel-tab-name":t.selTabName,url:t.url,pRefresh:t.refreshTab1,"prod-yearly-main":t.prodYearlyMain,"p-date-format":t.pDateFormat}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"tab-pane",attrs:{role:"tabpanel",id:"tab2"}},[e("div",{staticClass:"panel-body"},[t.prodYearlyMain?e("tab2",{attrs:{"prod-yearly-main":t.prodYearlyMain,"product-type":t.defaultInput.product_type,pRefresh:t.refreshTab2,"p-date-format":t.pDateFormat,"p-working-hour":t.workingHour,"sel-tab-name":t.selTabName,pDefaultInput:t.pDefaultInput,canEdit:t.canEdit,btnTrans:t.btnTrans,yearlyColorCode:t.yearlyColorCode,url:t.url,"begin-onhand-qty-change-data":t.beginOnhandQtyChangeData,"total-qty-change-data":t.totalQtyChangeData,"total-plan-change-data":t.totalPlanChangeData},on:{summaryTotalPlaningTab2:t.summaryTotalPlaning}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"tab-pane",attrs:{role:"tabpanel",id:"tab3"}},[e("div",{staticClass:"panel-body"},[t.prodYearlyMain?e("tab3",{attrs:{"prod-yearly-main":t.prodYearlyMain,"product-type":t.defaultInput.product_type,pRefresh:t.refreshTab3,"sel-tab-name":t.selTabName,url:t.url}}):t._e()],1)])])])])}),[],!1,null,null,null).exports},72050:(t,a,e)=>{var n=e(46510);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,e(45346).Z)("05254d4c",n,!0,{})},81267:(t,a,e)=>{var n=e(25623);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,e(45346).Z)("0044423a",n,!0,{})},84769:(t,a,e)=>{var n=e(88459);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,e(45346).Z)("1ea52f0c",n,!0,{})}}]);