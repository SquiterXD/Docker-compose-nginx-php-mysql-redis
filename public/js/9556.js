(self.webpackChunk=self.webpackChunk||[]).push([[9556],{78796:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(87757),c=a.n(n);function s(e,t,a,n,c,s,l){try{var i=e[s](l),r=i.value}catch(e){return void a(e)}i.done?t(r):Promise.resolve(r).then(n,c)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,c){var l=e.apply(t,a);function i(e){s(l,n,c,i,r,"next",e)}function r(e){s(l,n,c,i,r,"throw",e)}i(void 0)}))}}var i;const r={props:["setName","setData","placeholder"],data:function(){return{options:[],value:"",loading:!1}},mounted:function(){this.value=this.setData,this.getValueSetList(this.value),this.changeInput()},watch:{setData:function(){this.value=this.setData,this.getValueSetList(this.value),this.options=this.setOptions},setOptions:(i=l(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.options=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},methods:{getValueSetList:function(e){var t=this;return l(c().mark((function a(){return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,axios.get("/ir/ajax/vehicles/getlookupData",{params:{flex_value_set_name:t.setName,flex_value_set_data:t.value,query:e}}).then((function(e){t.options=e.data,t.changeInput()})).catch((function(e){})).then((function(){t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},changeInput:function(){var e=this,t="",a="";this.options.find((function(n){n.meaning==e.value&&(t=n.meaning,a=n.description)})),this.$emit("getLocation",{name:this.setName,value:this.value,value_code:t,value_name:a})}}};const o=(0,a(51900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:e.placeholder,"remote-method":e.getValueSetList,loading:e.loading,size:"large"},on:{change:e.changeInput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+" : "+e.description,value:e.meaning}})})),1)],1)}),[],!1,null,null,null).exports},82404:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(87757),c=a.n(n);function s(e,t,a,n,c,s,l){try{var i=e[s](l),r=i.value}catch(e){return void a(e)}i.done?t(r):Promise.resolve(r).then(n,c)}const l={components:{LocationInputValue:a(78796).Z},props:["btnTrans","search_url","dataSearch"],data:function(){return{licensePlates:[],vehicleTypes:[],insuranceTypes:[],loading:!1,search:{license_plate:"",vehicle_type_code:"",insurance_type_code:"",return_vat_flag:"",location_code:"",active_flag:""},returnVatLists:[{label:"ขอคืนภาษีได้",value:"Y"},{label:"ขอคืนภาษีไม่ได้",value:"N"}],activeLists:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}]}},mounted:function(){this.dataSearch&&(this.search.license_plate=this.dataSearch.license_plate,this.search.vehicle_type_code=this.dataSearch.vehicle_type_code,this.search.insurance_type_code=this.dataSearch.insurance_type_code,this.search.return_vat_flag=this.dataSearch.return_vat_flag,this.search.location_code=this.dataSearch.location_code,this.search.active_flag=this.dataSearch.active_flag),this.getLicensePlate(this.search.license_plate),this.getVehicleType(this.search.vehicle_type_code),this.getInsuranceType(this.search.insurance_type_code)},methods:{getLicensePlate:function(e){var t=this;this.licensePlates=[],axios.get("/ir/ajax/lov/license-plate",{params:{license_plate:e}}).then((function(e){var a=e.data;t.loading=!1,t.licensePlates=a.data})).catch((function(e){swal("Error",e,"error")}))},getVehicleType:function(e){var t=this;this.vehicleTypes=[],axios.get("/ir/ajax/lov/vehicles-type",{params:{keyword:e}}).then((function(e){var a=e.data;t.loading=!1,t.vehicleTypes=a.data})).catch((function(e){swal("Error",e,"error")}))},getInsuranceType:function(e){var t=this;this.insuranceTypes=[],axios.get("/ir/ajax/lov/renew-type-irm0007",{params:{keyword:e}}).then((function(e){var a=e.data;t.loading=!1,t.insuranceTypes=a.data})).catch((function(e){swal("Error",e,"error")}))},getLocation:function(e){this.search.location_code=e.value_code},clickSearch:function(){return(e=c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$("#searchForm").submit();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,c){var l=e.apply(t,a);function i(e){s(l,n,c,i,r,"next",e)}function r(e){s(l,n,c,i,r,"throw",e)}i(void 0)}))})();var e},clickCancel:function(){this.search.license_plate="",this.search.vehicle_type_code="",this.search.insurance_type_code="",this.search.return_vat_flag="",this.search.active_flag="",this.search.location_code="",window.location.href="/ir/settings/vehicle"}}};const i=(0,a(51900).Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{action:e.search_url,id:"searchForm"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("input",{attrs:{type:"hidden",name:"license_plate"},domProps:{value:e.search.license_plate}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"ระบุทะเบียนรถ","remote-method":e.getLicensePlate},model:{value:e.search.license_plate,callback:function(t){e.$set(e.search,"license_plate",t)},expression:"search.license_plate"}},e._l(e.licensePlates,(function(e,t){return a("el-option",{key:t,attrs:{label:e.license_plate,value:e.license_plate}})})),1)],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12"},[a("input",{attrs:{type:"hidden",name:"vehicle_type_code"},domProps:{value:e.search.vehicle_type_code}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"ระบุประเภทรถ","remote-method":e.getVehicleType},model:{value:e.search.vehicle_type_code,callback:function(t){e.$set(e.search,"vehicle_type_code",t)},expression:"search.vehicle_type_code"}},e._l(e.vehicleTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.vehicle_type_name,value:e.vehicle_type_code}})})),1)],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12"},[a("input",{attrs:{type:"hidden",name:"insurance_type_code"},domProps:{value:e.search.insurance_type_code}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"ระบุประเภทประกันภัย","remote-method":e.getInsuranceType},model:{value:e.search.insurance_type_code,callback:function(t){e.$set(e.search,"insurance_type_code",t)},expression:"search.insurance_type_code"}},e._l(e.insuranceTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.lookup_code+" : "+e.description,value:e.lookup_code}})})),1)],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("input",{attrs:{type:"hidden",name:"location_code"},domProps:{value:e.search.location_code}}),e._v(" "),a("location-input-value",{attrs:{"set-name":"FA_LOCATION","set-data":e.search.location_code,placeholder:"รหัสสถานที่"},on:{getLocation:e.getLocation}})],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12"},[a("input",{attrs:{type:"hidden",name:"return_vat_flag"},domProps:{value:e.search.return_vat_flag}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"ขอคืนภาษี"},model:{value:e.search.return_vat_flag,callback:function(t){e.$set(e.search,"return_vat_flag",t)},expression:"search.return_vat_flag"}},e._l(e.returnVatLists,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12"},[a("input",{attrs:{type:"hidden",name:"active_flag"},domProps:{value:e.search.active_flag}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"Status"},model:{value:e.search.active_flag,callback:function(t){e.$set(e.search,"active_flag",t)},expression:"search.active_flag"}},e._l(e.activeLists,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),e._v(" "),a("div",{staticClass:"row text-right mt-3"},[a("div",{staticClass:"offset-md-9 col-md-3 col-sm-12 padding_12",staticStyle:{"margin-top":"auto","margin-bottom":"auto"}},[a("button",{class:e.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:e.clickSearch}},[a("i",{class:e.btnTrans.search.icon}),e._v("\n                "+e._s(e.btnTrans.search.text)+"\n            ")]),e._v(" "),a("button",{class:e.btnTrans.reset.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.clickCancel()}}},[a("i",{class:e.btnTrans.reset.icon}),e._v("\n                "+e._s(e.btnTrans.reset.text)+"\n            ")])])])])}),[],!1,null,null,null).exports}}]);