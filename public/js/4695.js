(self.webpackChunk=self.webpackChunk||[]).push([[4695],{59799:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,"td[data-v-25de704e],th[data-v-25de704e]{padding:.25rem}th[data-v-25de704e]{background:#fff;position:-webkit-sticky;position:sticky;top:0}.highlight[data-v-25de704e]{cursor:pointer;background-color:#d4edda}.el-form-item[data-v-25de704e]{margin-bottom:0!important}.mx-datepicker[data-v-25de704e]{height:33px!important}",""]);const o=r},124:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,'.el-form-item__content{line-height:40px;position:relative;font-size:14px;margin-left:0!important}.table.b-table>thead>tr>[aria-sort]>div{display:flex;justify-content:space-between;align-items:flex-end}.table.b-table>thead>tr>[aria-sort]{cursor:pointer}table.b-table>tfoot>tr>th[aria-sort=descending]>div:before,table.b-table>thead>tr>th[aria-sort=descending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=descending]>div:after,table.b-table>thead>tr>th[aria-sort=descending]>div:after{opacity:1;content:"\\2193";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:before,table.b-table>thead>tr>th[aria-sort=ascending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:after,table.b-table>thead>tr>th[aria-sort=ascending]>div:after{opacity:1;content:"\\2191";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=none]>div:before,table.b-table>thead>tr>th[aria-sort=none]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=none]>div:after,table.b-table>thead>tr>th[aria-sort=none]>div:after{opacity:1;content:"\\21C5";font-weight:400;padding-left:10px}.table-active,.table-active>td,.table-active>th,.table-hover>tbody>tr:hover{background-color:#d4edda!important}',""]);const o=r},94695:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>we});var n=a(23570),r=a.n(n),o=a(87757),s=a.n(o);const i={name:"car-renew-type",data:function(){return{loading:!1,data:this.value,renewTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","disabled","sizeSmall"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/renew-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.renewTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(e){e.target.value?this.getLovGasStationType({keyword:e.target.value}):this.getLovGasStationType(this.paramasQuery)},changeRenewType:function(e){var t=this.renewTypeList.find((function(t){return t.meaning===e}));this.$emit("renewType",t)}},watch:{value:function(e){this.data=e}},created:function(){}};var l=a(51900);const c=(0,l.Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,loading:e.loading,placeholder:"ประเภทการต่ออายุ",disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeRenewType},nativeOn:{click:function(t){return e.click(t)}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.renewTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:""+e.description,value:e.description}})})),1)],1)}),[],!1,null,null,null).exports;const d={props:["placeholder","attrName","setData"],data:function(){return{rows:[],loading:!1,value:""}},mounted:function(){this.value=this.setData,this.getDataRows(this.value)},watch:{setData:function(){this.value=this.setData,this.getDataRows(this.value)},errors:{handler:function(e){e.department_code?this.setError("department_code"):this.resetError("department_code")},deep:!0}},methods:{getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:{keyword:e}}).then((function(e){var a=e.data.data;t.rows=a,t.loading=!1})).catch((function(e){swal("มีข้อผิดพลาด",e,"error")}))},onChange:function(e){this.$emit("change-lov",{department_code:e})},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""}}};const u=(0,l.Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{ref:"department_code",staticStyle:{width:"100%"},attrs:{placeholder:e.placeholder,"remote-method":e.getDataRows,loading:e.loading,remote:"",clearable:"",filterable:""},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.department_code+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports;const m={name:"car-lov-group",data:function(){return{loading:!1,result:this.value,list:[]}},props:["value","popperBody"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/group-code",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getLovGasStationType()},handleChange:function(e){this.$emit("groupType",e)}},watch:{value:function(e){this.result=e}}};const p=(0,l.Z)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"meduim",placeholder:"กลุ่ม",loading:e.loading,"popper-append-to-body":e.popperBody},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.meaning,value:e.group_code}})})),1)],1)}),[],!1,null,null,null).exports;const _={name:"car-lov-assets",props:["value","placeholder","disabled","sizeSmall"],data:function(){return{loading:!1,result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large"}},methods:{getAssetStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/asset-status",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getAssetStatus()},handleChange:function(e){this.$emit("assetStaus",e)}},watch:{value:function(e){this.result=e}}};const v=(0,l.Z)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,remote:"",clearable:!0,loading:e.loading,filterable:"",size:e.sizeDefault,disabled:e.disabled},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.flex_value_meaning}})})),1)],1)}),[],!1,null,null,null).exports;const f={name:"gas-station-lov-status",data:function(){return{loading:!1,result:this.value,list:[]}},props:["value","placeholder"],methods:{getLovStatus:function(){var e=this;e.loading=!0,axios.get("/ir/ajax/lov/status").then((function(t){var a=t.data;e.loading=!1,e.list=a})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getLovStatus()},handleChange:function(e){this.$emit("status",e)}}};const h=(0,l.Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:e.placeholder,loading:e.loading},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.meaning,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;const b={name:"car-lov-vehicles",data:function(){return{result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large",loading:!1}},props:["value","popperBody","sizeSmall","disabled","paramsQuery"],methods:{getLovVehicles:function(e){this.loading=!0;var t=this;axios.get("/ir/ajax/lov/vehicle-license-plate",{params:{license_plate:e}}).then((function(e){var a=e.data;t.list=a.data,t.loading=!1})).catch((function(e){swal("Error",e,"error")}))},click:function(e){e.target.value?this.getLovVehicles({keyword:e.target.value}):this.getLovVehicles(this.paramasQuery)},handleChange:function(e){var t=this.list.find((function(t){return t.license_plate===e}));this.$emit("vehicle",t)},onclick:function(){this.getLovVehicles({renew_type:""})}},watch:{value:function(e){this.result=e},"paramsQuery.license_plate":function(e){this.getLovVehicles(this.paramsQuery),this.paramsQuery.renew_type?this.getLovVehicles(this.paramsQuery):this.getLovVehicles({renew_type:""})},"paramsQuery.renew_type":function(e){this.getLovVehicles(this.paramsQuery)},"paramsQuery.group":function(e){this.getLovVehicles(this.paramsQuery)}}};const g=(0,l.Z)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,"remote-method":e.getLovVehicles,placeholder:"ทะเบียนรถยนต์",disabled:e.disabled,"popper-append-to-body":e.popperBody,loading:e.loading},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.license_plate,value:e.license_plate}})})),1)],1)}),[],!1,null,null,null).exports;var y=a(1550);const w={name:"car-renew-type",data:function(){return{loading:!1,data:this.value,renewTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","disabled","sizeSmall"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/renew-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.renewTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){},changeRenewType:function(e){this.$emit("renewType",e)}},watch:{value:function(e){this.data=e}},created:function(){this.getLovGasStationType()}};(0,l.Z)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,loading:e.loading,placeholder:"ประเภทการต่ออายุ",disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeRenewType},nativeOn:{click:function(t){return e.click()}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.renewTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:""+e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var x=a(30381),k=a.n(x);const C={name:"ir-stock-yearly-modal-fetch",data:function(){return{fetch:{year:"2565",renew_type:"",group:"",vehicle:"",department_from:"",department_to:"",date_from:"",date_to:"",status_asset:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}]},dateFormat:"YYYY",showLoading:!1}},props:["paramsQueryLicensePlate"],methods:{clickSearch:function(){var e=this;this.$refs.cars_modal.validate((function(t){if(!t)return!1;e.getDataRows()}))},clickClear:function(){this.resetFields()},getDataRows:function(){var e=this,t=this;t.showLoading=!0;var a={year:t.fetch.year,renew_type:t.fetch.renew_type,group_code:t.fetch.group,license_plate:t.fetch.vehicle,department_from:t.fetch.department_from,department_to:t.fetch.department_to,asset_status:t.fetch.status_asset,date_from:t.fetch.date_from,date_to:t.fetch.date_to};axios.get("/ir/ajax/cars/fetch",{params:a}).then((function(a){var n=a.data;t.showLoading=!1,e.$emit("fetch-table-header",n.data),$("#modal_stock_yearly_fetch").modal("hide")})).catch((function(e){swal({title:"Error",text:e,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})}))},resetFields:function(){this.$refs.cars_modal.resetFields()},receivedDatefrom:function(e){e?(this.fetch.date_from=k()(e).format("DD/MM/YYYY"),this.$refs.cars_modal.fields.find((function(e){return"date_from"==e.prop})).clearValidate()):(this.fetch.date_from="",this.$refs.cars_modal.validateField("date_from"))},receivedDateto:function(e){e?(this.fetch.date_to=k()(e).format("DD/MM/YYYY"),this.$refs.cars_modal.fields.find((function(e){return"date_to"==e.prop})).clearValidate()):(this.fetch.date_to="",this.$refs.cars_modal.validateField("date_to"))},receivedYear:function(e){var t=this;e?(t.fetch.year=k()(e).format(t.dateFormat),this.$refs.cars_modal.fields.find((function(e){return"year"==e.prop})).clearValidate()):(t.fetch.year="",this.$refs.cars_modal.validateField("year"))},receivedRenewType:function(e){var t=this;e?(t.fetch.renew_type=e.meaning,t.paramsQueryLicensePlate.renew_type=e.meaning):(t.fetch.renew_type="",t.paramsQueryLicensePlate.renew_type="")},receivedGroupType:function(e){var t=this;e?(t.fetch.group=e,t.paramsQueryLicensePlate.group=e):(t.fetch.group="",t.paramsQueryLicensePlate.group="")},receivedLicensePlate:function(e){this.fetch.vehicle=e?e.license_plate:""},receivedStartDepartment:function(e){this.fetch.department_from=e?e.department_code:""},receivedEndDepartment:function(e){this.fetch.department_to=e?e.department_code:""}},components:{lovRenewTypedesc:c,lovGroup:p,lovVehicle:g,lovDepartment:u}};const T=(0,l.Z)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_stock_yearly_fetch",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[e._m(0),e._v(" "),a("el-form",{ref:"cars_modal",attrs:{model:e.fetch,rules:e.rules}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ปี *")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"year",rules:e.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.year,name:"input_year",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year",popperBody:!1},on:{dateWasSelected:function(t){return e.receivedYear.apply(void 0,arguments)}},model:{value:e.fetch.year,callback:function(t){e.$set(e.fetch,"year",t)},expression:"fetch.year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ประเภทการต่ออายุ")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"renew_type",attrs:{prop:"renew_type"}},[a("lov-renew-typedesc",{attrs:{value:e.fetch.renew_type,name:"renew_type",sizeSmall:!1,popperBody:!1},on:{renewType:e.receivedRenewType},model:{value:e.fetch.renew_type,callback:function(t){e.$set(e.fetch,"renew_type",t)},expression:"fetch.renew_type"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("กลุ่ม")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"group",attrs:{prop:"group"}},[a("lov-group",{attrs:{value:e.fetch.group,name:"group",popperBody:!1},on:{groupType:e.receivedGroupType},model:{value:e.fetch.group,callback:function(t){e.$set(e.fetch,"group",t)},expression:"fetch.group"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ทะเบียนรถยนต์")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"vehicle",attrs:{prop:"vehicle"}},[a("lov-vehicle",{attrs:{value:e.fetch.vehicle,name:"vehicle",popperBody:!1,paramsQuery:e.paramsQueryLicensePlate},on:{vehicle:e.receivedLicensePlate},model:{value:e.fetch.vehicle,callback:function(t){e.$set(e.fetch,"vehicle",t)},expression:"fetch.vehicle"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่รหัสหน่วยงาน")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_from",attrs:{prop:"department_from"}},[a("lov-department",{attrs:{value:e.fetch.department_from,placeholder:"ตั้งแต่รหัสหน่วยงาน",name:"department_from",sizeSmall:!1,popperBody:!1},on:{department:e.receivedStartDepartment},model:{value:e.fetch.department_from,callback:function(t){e.$set(e.fetch,"department_from",t)},expression:"fetch.department_from"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_to",attrs:{prop:"department_to"}},[a("lov-department",{attrs:{value:e.fetch.department_to,placeholder:"ถึง",sizeSmall:!1,name:"department_to",popperBody:!1},on:{department:e.receivedEndDepartment},model:{value:e.fetch.department_to,callback:function(t){e.$set(e.fetch,"department_to",t)},expression:"fetch.department_to"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่วันที่สิ้นอายุประกัน")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"date_from",attrs:{prop:"date_from"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.date_from,format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่",pType:"date",popperBody:!1},on:{dateWasSelected:e.receivedDatefrom},model:{value:e.fetch.date_from,callback:function(t){e.$set(e.fetch,"date_from",t)},expression:"fetch.date_from"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"dete_to",attrs:{prop:"date_to"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.date_to,format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่",pType:"date",popperBody:!1},on:{dateWasSelected:e.receivedDateto},model:{value:e.fetch.date_to,callback:function(t){e.$set(e.fetch,"date_to",t)},expression:"fetch.date_to"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.clickSearch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n           ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n           ")])])])],1)])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("การดึงข้อมูล")])])}],!1,null,null,null).exports;function D(e,t,a,n,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function R(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){D(o,n,r,s,i,"next",e)}function i(e){D(o,n,r,s,i,"throw",e)}s(void 0)}))}}const S={components:{lovRenewTypedesc:c,lovDepartment:u,lovGroup:p,lovAssetStatus:v,lovStatus:h,lovVehicle:g,yearInput:y.Z,modalFetch:T},name:"index-header-gas-station",data:function(){return{header:{year:"",renew_type:"",group_code:"",license_plate:"",department_from:"",department_to:"",status:""},oilTypeList:[],groupCodeList:[],statusList:[],loading:!1,dateFormat:"YYYY",showLoading:!1}},props:["paramsQueryLicensePlate"],methods:{receivedRenewType:function(e){this.header.renew_type=e?e.meaning:""},receivedGroupType:function(e){this.header.group_code=e||""},receivedLicensePlate:function(e){this.header.license_plate=e?e.license_plate:""},receivedStartDepartment:function(e){this.header.department_from=e.department_code},receivedEndDepartment:function(e){this.header.department_to=e.department_code},receivedStatus:function(e){this.header.status=e||""},Search:function(){var e=this;e.loading=!0,e.$refs.searchCars.validate((function(t){if(!t)return!1;e.getCars()}))},Cancel:function(){window.location.reload()},getStYear:function(e){this.header.year=e.value},checkValid:function(){var e=this,t=this;this.$emit("loading",!0),axios.get("/ir/ajax/cars",{params:t.header}).then(function(){var a=R(s().mark((function a(n){var r;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.data,e.$emit("loading",!1),t.loading=!1,a.next=5,e.$emit("dataSearch",[]);case 5:return a.next=7,e.$emit("dataSearch",r.data);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.loading=!1,swal({title:"Error",text:e,type:"error",showCancelButton:!1,showConfirmButton:!0})}))},getCars:function(){var e=this,t=this;this.$emit("loading",!0),axios.get("/ir/ajax/cars",{params:t.header}).then(function(){var a=R(s().mark((function a(n){var r;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.data,e.$emit("loading",!1),t.loading=!1,a.next=5,e.$emit("dataSearch",[]);case 5:return a.next=7,e.$emit("dataSearch",r.data);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.loading=!1,swal({title:"Error",text:e,type:"error",showCancelButton:!1,showConfirmButton:!0})}))},receivedYear:function(e){var t=this;t.header.year=e&&"Invalid date"!=k()(e).format(t.dateFormat)?k()(e).format(t.dateFormat):""},receivedAssetStatus:function(e){this.header.status_asset=e||""},clickFetch:function(){this.$refs.modal_fetch.resetFields(),this.$emit("set-params-license-plate",{renew_type:null,license_plate:null,group:null})},fetchTableHeader:function(e){this.$emit("fetch-show-table-header",e.data)}},mounted:function(){}};const E=(0,l.Z)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchCars",attrs:{model:e.header,loading:e.loading}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ปี")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",{attrs:{prop:"year"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.header.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year"},on:{dateWasSelected:function(t){return e.receivedYear.apply(void 0,arguments)}},model:{value:e.header.year,callback:function(t){e.$set(e.header,"year",t)},expression:"header.year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ทะเบียนรถยนต์")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-vehicle",{on:{vehicle:e.receivedLicensePlate},model:{value:e.header.license_plate,callback:function(t){e.$set(e.header,"license_plate",t)},expression:"header.license_plate"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่รหัสหน่วยงาน")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ตั้งแต่รหัสหน่วยงาน",attrName:"department_from","set-data":e.header.start_department},on:{"change-lov":e.receivedStartDepartment}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("สถานะ")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-status",{attrs:{placeholder:"สถานะ"},on:{status:e.receivedStatus},model:{value:e.header.status,callback:function(t){e.$set(e.header,"status",t)},expression:"header.status"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-4 col-md-3 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ประเภทการต่ออายุ")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",{attrs:{prop:"renew_type"}},[a("lov-renew-typedesc",{on:{renewType:e.receivedRenewType},model:{value:e.header.renew_type,callback:function(t){e.$set(e.header,"renew_type",t)},expression:"header.renew_type"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-4 col-md-3 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("กลุ่ม")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-group",{on:{groupType:e.receivedGroupType},model:{value:e.header.group_code,callback:function(t){e.$set(e.header,"group_code",t)},expression:"header.group_code"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-4 col-md-3 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ถึงรหัสหน่วยงาน",attrName:"department_to","set-data":e.header.end_department},on:{"change-lov":e.receivedEndDepartment}})],1)],1)])])]),e._v(" "),a("div",{staticClass:"row align-items-center justify-content-end d-flex mr-2"},[a("button",{staticClass:"btn btn-default m-1",attrs:{type:"button"},on:{click:function(t){return e.Search()}}},[a("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา")]),e._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#modal_stock_yearly_fetch"},on:{click:function(t){return e.clickFetch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n      ")]),e._v(" "),a("button",{staticClass:"btn btn-warning m-1",attrs:{type:"button"},on:{click:function(t){return e.Cancel()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต")])])]),e._v(" "),a("modal-fetch",{ref:"modal_fetch",attrs:{paramsQueryLicensePlate:e.paramsQueryLicensePlate},on:{"fetch-table-header":e.fetchTableHeader}})],1)}),[],!1,null,null,null).exports;var L=a(61701),N=a(84371),A=a(49710),F=a(30077),Y=a(57460),P=a(9882),M=a(35938),Z=a(8613),I=a(22374),j=a(75721),B=a(31262),V=a(25826),O=a(24829);function z(e,t,a,n,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function Q(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){z(o,n,r,s,i,"next",e)}function i(e){z(o,n,r,s,i,"throw",e)}s(void 0)}))}}const q={name:"ir-gas-station-modal-account-code",data:function(){return{argSearchCompany:{compnany_code:"",description:""},expense_account:"",expense_account_desc:"",account:this.accounts,description:this.descriptions,rules:{company:[{required:!0,message:"กรุณาระบุ Company Code",trigger:"change"}],evm:[{required:!0,message:"กรุณาระบุ EVM",trigger:"change"}],department:[{required:!0,message:"กรุณาระบุ Department",trigger:"change"}],cost_center:[{required:!0,message:"กรุณาระบุ Cost Center",trigger:"change"}],budget_year:[{required:!0,message:"กรุณาระบุ Budget Year",trigger:"change"}],budget_type:[{required:!0,message:"กรุณาระบุ Budget Type",trigger:"change"}],budget_detail:[{required:!0,message:"กรุณาระบุ Budget Detail",trigger:"change"}],budget_reason:[{required:!0,message:"กรุณาระบุ Budget Reason",trigger:"change"}],main_account:[{required:!0,message:"กรุณาระบุ Main Account",trigger:"change"}],sub_account:[{required:!0,message:"กรุณาระบุ Sub Account",trigger:"change"}],reserved1:[{required:!0,message:"กรุณาระบุ Reserved1",trigger:"change"}],reserved2:[{required:!0,message:"กรุณาระบุ Reserved2",trigger:"change"}]},account_id:this.accountId,typeCost:this.type_cost,selectedTypeCostdisabled:!1}},props:["index","rows","accounts","descriptions","disabled","accountId","type_cost"],methods:{clickAgree:function(){var e=this;return Q(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.modal_account_mapping.validate(function(){var t=Q(s().mark((function t(a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return e.expense_account=e.account.company+"."+e.account.evm+"."+e.account.department+"."+e.account.cost_center+"."+e.account.budget_year+"."+e.account.budget_type+"."+e.account.budget_detail+"."+e.account.budget_reason+"."+e.account.main_account+"."+e.account.sub_account+"."+e.account.reserved1+"."+e.account.reserved2,e.expense_account_desc=e.description.department+"."+e.description.main_account+"."+e.description.sub_account,e.rows[e.index].expense_account=e.expense_account,t.next=6,axios.get("/ir/ajax/vehicles/get-coa-desc",{params:{coa:e.expense_account}}).then((function(t){e.expense_account_desc=t.data.desc_disply})).then((function(){e.rows[e.index].expense_account_desc=e.expense_account_desc,e.$emit("select-accounts",e.rows)}));case 6:$("#modal_account".concat(e.index)).modal("hide"),t.next=9;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getDataCompany:function(e){this.account.company=e.value,this.description.company=e.desc},getDataBranch:function(e){this.account.evm=e.value,this.description.evm=e.desc},getValueDepartment:function(e){this.account.department=e.value,this.description.department=e.desc},getDataProduct:function(e){this.account.cost_center=e.value,this.description.cost_center=e.desc},getDataSource:function(e){this.account.budget_year=e.value,this.description.budget_year=e.desc},getDataAccount:function(e){this.account.budget_type=e.value,this.description.budget_type=e.desc},getDataSubAccount:function(e){this.account.budget_detail=e.value,this.description.budget_detail=e.desc},getDataProjectActivity:function(e){this.account.budget_reason=e.value,this.description.budget_reason=e.desc},getDataInterCompany:function(e){this.account.main_account=e.value,this.description.main_account=e.desc},getDataAllocation:function(e){this.account.sub_account=e.value,this.description.sub_account=e.desc},getDataFutureUsed1:function(e){this.account.reserved1=e.value,this.description.reserved1=e.desc},getDataFutureUsed2:function(e){this.account.reserved2=e.value,this.description.reserved2=e.desc},getValueAccount:function(e){this.account=e.account,this.description=e.description},getValueTypeCode:function(e,t){this.rows.length>0&&(this.rows[this.index].expense_account_id=e.id)}},components:{lovCompany:L.Z,lovBranch:N.Z,lovDepartment:A.Z,lovProduct:F.Z,lovSource:Y.Z,lovAccount:P.Z,lovSubAccount:M.Z,lovProjectActivity:Z.Z,lovInterCompany:I.Z,lovAllocation:j.Z,lovFutureUsed1:B.Z,lovFutureUsed2:V.Z,lovTypeCost:O.Z},watch:{accountId:function(e,t){this.account_id=e}}};const W=(0,l.Z)(q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_account"+e.index,tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-md"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.clickAgree()}}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),e._v(" "),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("ข้อมูลรหัสบัญชี (Account Mapping)")])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("el-form",{ref:"modal_account_mapping",staticClass:"demo-ruleForm",attrs:{model:e.account,rules:e.rules,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Company Code *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"company"}},[a("lov-company",{attrs:{attrName:"segmentCompany"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataCompany},model:{value:e.account.company,callback:function(t){e.$set(e.account,"company",t)},expression:"account.company"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              EVM *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"evm"}},[a("lov-branch",{attrs:{attrName:"segmentBranch"+e.index,vendorId:"",disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataBranch},model:{value:e.account.evm,callback:function(t){e.$set(e.account,"evm",t)},expression:"account.evm"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Department *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"department"}},[a("lov-department",{attrs:{attrName:"segmentDepartment"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getValueDepartment},model:{value:e.account.department,callback:function(t){e.$set(e.account,"department",t)},expression:"account.department"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Cost Center *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"cost_center"}},[a("lov-product",{attrs:{attrName:"segmentProduct"+e.index,departmentCode:e.account.department,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataProduct},model:{value:e.account.cost_center,callback:function(t){e.$set(e.account,"cost_center",t)},expression:"account.cost_center"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Year *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"budget_year"}},[a("lov-source",{attrs:{attrName:"segmentSource"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataSource},model:{value:e.account.budget_year,callback:function(t){e.$set(e.account,"budget_year",t)},expression:"account.budget_year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Type *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"budget_type"}},[a("lov-account",{attrs:{attrName:"segmentAccount"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataAccount},model:{value:e.account.budget_type,callback:function(t){e.$set(e.account,"budget_type",t)},expression:"account.budget_type"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Detail *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"budget_detail"}},[a("lov-sub-account",{attrs:{attrName:"segmentSubAccount"+e.index,budgetType:e.account.budget_type,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataSubAccount},model:{value:e.account.budget_detail,callback:function(t){e.$set(e.account,"budget_detail",t)},expression:"account.budget_detail"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Reason *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"budget_reason"}},[a("lov-project-activity",{attrs:{attrName:"segmentProjectActivity"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataProjectActivity},model:{value:e.account.budget_reason,callback:function(t){e.$set(e.account,"budget_reason",t)},expression:"account.budget_reason"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Main Account *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"main_account"}},[a("lov-inter-company",{attrs:{attrName:"segmentInterCompany"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataInterCompany},model:{value:e.account.main_account,callback:function(t){e.$set(e.account,"main_account",t)},expression:"account.main_account"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Sub Account *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"sub_account"}},[a("lov-allocation",{attrs:{attrName:"segmentAllocation"+e.index,mainAccount:e.account.main_account,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataAllocation},model:{value:e.account.sub_account,callback:function(t){e.$set(e.account,"sub_account",t)},expression:"account.sub_account"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Reserved *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"reserved1"}},[a("lov-future-used1",{attrs:{attrName:"segmentFutureUsed1"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataFutureUsed1},model:{value:e.account.reserved1,callback:function(t){e.$set(e.account,"reserved1",t)},expression:"account.reserved1"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Reserved *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"reserved2"}},[a("lov-future-used2",{attrs:{attrName:"segmentFutureUsed2"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataFutureUsed2},model:{value:e.account.reserved2,callback:function(t){e.$set(e.account,"reserved2",t)},expression:"account.reserved2"}})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickAgree()}}},[a("i",{staticClass:"fa fa-check-circle-o"}),e._v(" ตกลง\n        ")])])])])])}),[],!1,null,null,null).exports;var U=a(14766),G=a(17159);const H={name:"gas-station-lov-company",data:function(){return{loading:!1,result:this.value?parseInt(this.value):"",list:[]}},props:["value","placeholder","disabled","size","isSave"],methods:{getCompany:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/companies",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getCompany()},handleChange:function(e){var t="",a="",n="";if(e)for(var r in this.list){var o=this.list[r];o.company_id===+e&&(t=o.company_number,a=o.company_name,n=e)}else t="",a="",n="";var s={code:t,desc:a,id:n};this.$emit("company",s)}},watch:{value:function(e){this.result=e?+e:e}}};const J=(0,l.Z)(H,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,remote:"",clearable:!0,loading:e.loading,filterable:"",size:"small",disabled:e.disabled},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_number+": "+e.company_name,value:e.company_id}})})),1)],1)}),[],!1,null,null,null).exports;function K(e,t,a,n,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function X(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){K(o,n,r,s,i,"next",e)}function i(e){K(o,n,r,s,i,"throw",e)}s(void 0)}))}}var ee;const te={props:["setName","setData","placeholder","disabled","index"],data:function(){return{options:[],value:"",loading:!1}},mounted:function(){this.value=this.setData},watch:{setData:function(){this.value=this.setData,this.getValueSetList(this.value),this.options=this.setOptions},setOptions:(ee=X(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.options=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)})},methods:{getValueSetList:function(e){var t=this;return X(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,axios.get("/ir/ajax/vehicles/getlookupData",{params:{flex_value_set_name:t.setName,flex_value_set_data:t.value,query:e}}).then((function(e){t.options=e.data,t.changeInput()})).catch((function(e){})).then((function(){t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},changeInput:function(){var e=this,t="",a="";this.value,this.options.find((function(n){n.meaning==e.value&&(t=n.meaning,a=n.description)})),this.$emit("getLocation",{name:this.setName,value:this.value,value_code:t,value_name:a,index:this.index})}}};const ae=(0,l.Z)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:e.placeholder,"remote-method":e.getValueSetList,loading:e.loading,size:"small",disabled:e.disabled},on:{change:function(t){e.changeInput(),e.getValueSetList()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(t,n){return a("el-option",{key:n,attrs:{label:t.meaning,value:t.meaning}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.meaning))]),e._v(" "),a("span",{staticStyle:{float:"left",color:"#8492a6"}},[e._v(" : "+e._s(t.description))])])})),1)],1)}),[],!1,null,null,null).exports;const ne={name:"ir-components-lov-receivable",data:function(){return{receivables:[],loading:!1,result:this.value}},props:["placeholder","name","value","disabled","size","popperBody"],methods:{remoteMethodReceivable:function(e){this.getReceivables({value:"",keyword:e})},getReceivables:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/receivable-charge",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.receivables=a})).catch((function(e){swal("Error",e,"error")}))},focusReceivable:function(e){this.getReceivables({value:"",keyword:""})},changeReceivable:function(e){var t={code:"",id:"",desc:""};if(e)for(var a in this.receivables){var n=this.receivables[a];n.description===e&&(t.desc=e,t.code=n.meaning,t.id="")}else t.code="",t.id="",t.desc="";this.$emit("change-lov",t)}},mounted:function(){},watch:{value:function(e,t){this.result=e}}};const re=(0,l.Z)(ne,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethodReceivable,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeReceivable,focus:e.focusReceivable},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.receivables,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.description}})})),1)],1)}),[],!1,null,null,null).exports;var oe=a(75943);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ce(e,t,a,n,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function de(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){ce(o,n,r,s,i,"next",e)}function i(e){ce(o,n,r,s,i,"throw",e)}s(void 0)}))}}const ue={name:"index-table-cars",data:function(){return{dateFormat:"DD/MM/YYYY",complete:!0,locked:!1,rowselect:-1,columnSelected:[],columnSelectedId:[],lastRowId:-1,indexTable:-1,accountCars:{company:"",evm:"",department:"",cost_center:"",budget_year:"",budget_type:"",budget_detail:"",budget_reason:"",main_account:"",sub_account:"",reserved1:"",reserved2:""},descriptionCars:{company:"",evm:"",department:"",cost_center:"",budget_year:"",budget_type:"",budget_detail:"",budget_reason:"",main_account:"",sub_account:"",reserved1:"",reserved2:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"blur"}],license_plate:[{required:!0,message:"กรุณาระบุทะเบียนรถยนต์",trigger:"blur"}],department_code:[{required:!0,message:"กรุณาระบุรหัสหน่วยงาน",trigger:"blur"}],location_code:[{required:!0,message:"กรุณาระบุรหัสสถานที่",trigger:"blur"}],asset_status:[{required:!0,message:"กรุณาระบุประเภทสถานะทรัพย์สิน",trigger:"blur"}],renew_type_code:[{required:!0,message:"กรุณาระบุประเภทการต่ออายุ",trigger:"blur"}],start_date:[{required:!0,message:"กรุณาระบุวันที่เริ่มต้น",trigger:"blur"}],end_date:[{required:!0,message:"กรุณาระบุวันที่สิ้นสุด",trigger:"blur"}],group_code:[{required:!0,message:"กรุณาระบุกลุ่ม",trigger:"blur"}],insurance_amount:[{required:!0,message:"กรุณาระบุค่าเบี้ยประกัน",trigger:"blur"}],expense_account:[{required:!0,message:"กรุณาระบุรหัสค่าใช้จ่าย",trigger:"blur"}]},paramsQueryLicensePlate:{renew_type:"",license_plate:"",group:""},accountId:"",type_cost:"",receivables:[],net_amount:0,result_receivable:[],fields:[{key:"selected",sortable:!1,class:"text-center text-nowrap"},{key:"status",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"document_number",sortable:!0,thClass:"text-center text-nowrap",tdClass:"align-middle"},{key:"year",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 105px;",tdClass:"el_field"},{key:"license_plate",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 150px;",tdClass:"el_field"},{key:"receivable_name",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 110px;",tdClass:"el_field"},{key:"renew_typex",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"start_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"end_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"total_days",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"insurance_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 125px;",tdClass:"el_field"},{key:"discount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 125px;",tdClass:"el_field"},{key:"duty_amount",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"vat_amount",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"net_amount",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"vat_refund",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"car_type",sortable:!0,thClass:"text-center text-nowrap",tdClass:"align-middle text-nowrap"},{key:"policy_number",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"company_id",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"company_name",sortable:!0,thClass:"text-center text-nowrap",tdClass:"text-nowrap"},{key:"asset_number",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"group_name",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"location_code",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 145px;",tdClass:"el_field"},{key:"location_description",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"expense_account",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 420px;",tdClass:"el_field"},{key:"expense_account_desc",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"car_brand",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"car_cc",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"engine_number",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"tank_number",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"expense_flag",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"action",sortable:!1,class:"text-center text-nowrap",thStyle:"min-width: 65px;"},{key:"remove",sortable:!1,class:"text-center text-nowrap",thStyle:"min-width: 65px;"}],totalRows:0,currentPage:1,perPage:10,sortBy:"",sortDesc:!1,sortDirection:"asc",showLoading:!1,isBusy:!1,groupTypeList:[]}},methods:{onRowSelected:function(e){this.selected=e},rowClass:function(e,t,a){if(e&&"row"===t)return e.row_id===this.lastRowId?"newLine":void 0},updateselectindex:function(e){this.locked=e},selectRow:function(e){this.rowselect=e},clickSelectRow:function(e,t){var a=this;if($('input[name="cars_select'.concat(e,'"]')).is(":checked")){a.setSelectedColumn(t),a.dataTable.rows.filter((function(e,t){return!a.isDisabled(e)})).length===a.columnSelected.length&&$('input[name="cars_select_all"]').prop("checked",!0)}else{var n=a.columnSelected.indexOf(t);n>-1&&(a.columnSelected.splice(n,1),a.columnSelectedId.splice(n,1)),$('input[name="cars_select_all"]').prop("checked",!1)}},receivedYear:function(e,t){var a=this;e?(a.dataTable.rows[t].year="Invalid date"!=k()(e).format("YYYY")?k()(e).format("YYYY"):"",a.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".year")})).clearValidate(),a.duplicatedCheck(a.dataTable.rows[t],t,"year")):(a.dataTable.rows[t].year="",this.$refs.save_table_line.validateField("rows.".concat(t,".year")))},warningday367:function(){swal({title:"Warning",text:"วันที่สิ้นสุดที่คิดค่าเบี้ยประกัน มากกว่าหรือน้อยกว่า 1 ปี ต้องการทำรายการต่อหรือไม่ ?",type:"warning"})},getAdjustmentDateStart:function(e,t){var a=this;return de(s().mark((function n(){var r,o,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a,null!==e){n.next=7;break}r.dataTable.rows[t].start_date="",r.dataTable.rows[t].start_timer="",r.$refs.save_table_line.validateField("rows.".concat(t,".start_date")),n.next=16;break;case 7:return r.dataTable.rows[t].start_date=k()(e).format(r.dateFormat),r.dataTable.rows[t].end_date=k()(e).add(1,"years").format(r.dateFormat),n.next=11,r.parseToDate(e);case 11:o=n.sent,r.dataTable.rows[t].start_timer=o,r.dataTable.rows[t].end_timer=k()(o,"DD/MM/YYYY").add(1,"years").toDate(),r.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),r.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 16:r.dataTable.rows[t].start_timer&&r.dataTable.rows[t].end_timer&&(r.dataTable.rows[t].total_days=Math.floor(Math.abs(r.dataTable.rows[t].start_timer-r.dataTable.rows[t].end_timer)/864e5),i=r.getyeardays(r.dataTable.rows[t].start_date),(r.dataTable.rows[t].total_days>i||r.dataTable.rows[t].total_days<i)&&r.warningday367());case 17:case"end":return n.stop()}}),n)})))()},setCopyRowDate:function(e,t){var a=this;return de(s().mark((function n(){var r,o,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=a).dataTable.rows[t].start_date=["NEW","CANCEL","INTERFACE"].includes(e.status)?e.start_date:e.end_date,r.dataTable.rows[t].end_date=["NEW","CANCEL","INTERFACE"].includes(e.status)?e.end_date:k()(e.start_date,r.dateFormat).add(1,"years").format(r.dateFormat),n.next=5,r.parseToDate(r.dataTable.rows[t].start_date);case 5:return o=n.sent,n.next=8,r.parseToDate(r.dataTable.rows[t].end_date);case 8:i=n.sent,r.dataTable.rows[t].start_timer=o,r.dataTable.rows[t].end_timer=i,r.dataTable.rows[t].total_days=Math.floor(Math.abs(r.dataTable.rows[t].start_timer-r.dataTable.rows[t].end_timer)/864e5);case 12:case"end":return n.stop()}}),n)})))()},getyeardays:function(e){if(e){var t=e.split("/"),a=t[0],n=t[1],r=+t[2]-543,o=new Date(n+"/"+a+"/"+r),s=new Date(n+"/"+a+"/"+r),i=new Date(s.setFullYear(s.getFullYear()+1)),l=Math.abs(i-o);return Math.ceil(l/864e5)}return 0},getAdjustmentDateEnd:function(e,t,a){var n=this;return de(s().mark((function r(){var o,i,l,c,d;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=new Date(a.split("/")[1]+"/"+a.split("/")[0]+"/"+a.split("/")[2]),i=n,null!==e){r.next=8;break}i.dataTable.rows[t].end_date="",i.dataTable.rows[t].end_timer="",n.$refs.save_table_line.validateField("rows.".concat(t,".end_date")),r.next=14;break;case 8:return i.dataTable.rows[t].end_date=k()(e).format(i.dateFormat),r.next=11,i.parseToDate(e);case 11:l=r.sent,i.dataTable.rows[t].end_timer=k()(l,"DD/MM/YYYY").toDate(),n.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 14:if(null!==o){r.next=20;break}i.dataTable.rows[t].start_date="",i.dataTable.rows[t].start_timer="",i.$refs.save_table_line.validateField("rows.".concat(t,".start_date")),r.next=27;break;case 20:return i.dataTable.rows[t].start_date=k()(o).format(i.dateFormat),r.next=23,i.parseToDate(o);case 23:c=r.sent,i.dataTable.rows[t].start_timer=c,i.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),i.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 27:i.dataTable.rows[t].start_timer&&i.dataTable.rows[t].end_timer&&(i.dataTable.rows[t].total_days=Math.floor(Math.abs(i.dataTable.rows[t].start_timer-i.dataTable.rows[t].end_timer)/864e5),d=i.getyeardays(i.dataTable.rows[t].start_date),(i.dataTable.rows[t].total_days>d||i.dataTable.rows[t].total_days<d)&&i.warningday367());case 28:case"end":return r.stop()}}),r)})))()},getDataRowSelectAccount:function(e){this.dataTable.rows=e},clickSelectAll:function(){var e=this;e.columnSelected=[],e.columnSelectedId=[];var t=$('input[name="cars_select_all"]').is(":checked");e.dataTable.rows.forEach((function(a,n){t&&!e.isDisabled(a)&&e.setSelectedColumn(a)}))},getValueAssetStatus:function(e,t){this.dataTable.rows[t].asset_status=e},receivedLicensePlate:function(e,t){var a=this;e?(axios.get("/ir/ajax/vehicles/get-coa-desc",{params:{coa:e.account_number}}).then((function(e){a.dataTable.rows[t].expense_account_desc=e.data.desc_disply})),a.dataTable.rows[t].license_plate=e.license_plate,a.dataTable.rows[t].renew_type_code=e.renew_type_code,a.dataTable.rows[t].renew_typex=e.renew_type_code,a.dataTable.rows[t].group_name=e.group_desc,a.dataTable.rows[t].group_code=e.group_code,a.dataTable.rows[t].vat_refund="Y"===e.return_vat_flag?"Yes":"No",a.dataTable.rows[t].car_type=e.vehicle_type_name,a.dataTable.rows[t].car_type_code=e.car_type_code,a.dataTable.rows[t].asset_number=e.asset_number,a.dataTable.rows[t].asset_id=e.asset_id,a.dataTable.rows[t].vat_percent=e.vat_percent,a.dataTable.rows[t].car_brand=e.car_brand,a.dataTable.rows[t].car_cc=e.vehicle_cc,a.dataTable.rows[t].engine_number=e.engine_number,a.dataTable.rows[t].tank_number=e.tank_number,a.dataTable.rows[t].policy_set_header_id=e.policy_set_header_id,a.dataTable.rows[t].department_code=e.department_code,a.dataTable.rows[t].department_name=e.department_desc,a.dataTable.rows[t].revenue_stamp_percent=e.revenue_stamp_percent,a.dataTable.rows[t].expense_account_id=e.account_id,a.dataTable.rows[t].expense_account=e.account_number,a.dataTable.rows[t].location_code=e.location_code,a.dataTable.rows[t].location_description=e.location_description,a.dataTable.rows[t].car_brand=e.vehicle_brand_name,a.dataTable.rows[t].car_brand_code=e.vehicle_brand_code,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".license_plate")})).clearValidate(),this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".renew_type_code")})).clearValidate(),a.duplicatedCheck(a.dataTable.rows[t],t,"license_plate")):(a.dataTable.rows[t].license_plate="",a.dataTable.rows[t].renew_type_code="",a.dataTable.rows[t].renew_typex="",a.dataTable.rows[t].group_name="",a.dataTable.rows[t].group_code="",a.dataTable.rows[t].vat_refund="",a.dataTable.rows[t].car_type="",a.dataTable.rows[t].car_type_code="",a.dataTable.rows[t].asset_number="",a.dataTable.rows[t].asset_id="",a.dataTable.rows[t].vat_percent="",a.dataTable.rows[t].car_brand="",a.dataTable.rows[t].car_cc="",a.dataTable.rows[t].engine_number="",a.dataTable.rows[t].tank_number="",a.dataTable.rows[t].policy_set_header_id="",a.dataTable.rows[t].department_code="",a.dataTable.rows[t].department_name="",a.dataTable.rows[t].revenue_stamp_percent="",a.dataTable.rows[t].expense_account_id="",a.dataTable.rows[t].expense_account_desc="",a.dataTable.rows[t].expense_account="",this.$refs.save_table_line.validateField("rows.".concat(t,".license_plate")),this.$refs.save_table_line.validateField("rows.".concat(t,".renew_type_code"))),this.accountId=e&&e.expense_account_id?e.expense_account_id:""},receivedCompany:function(e,t){var a=this;a.dataTable.rows[t].company_number=e.code,a.dataTable.rows[t].company_name=e.desc,a.dataTable.rows[t].company_id=e.id,e?(a.dataTable.rows[t].company_number=e.code,a.dataTable.rows[t].company_name=e.desc,a.dataTable.rows[t].company_id=e.id,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".company_id")})).clearValidate()):(a.dataTable.rows[t].company_number="",a.dataTable.rows[t].company_name="",a.dataTable.rows[t].company_id="",this.$refs.save_table_line.validateField("rows.".concat(t,".company_id")))},receivedRenewType:function(e,t){var a=this;e?(a.dataTable.rows[t].renew_type_code=e.lookup_code,a.dataTable.rows[t].renew_type=e.meaning,a.dataTable.rows[t].renew_typex=e.lookup_code+":"+e.meaning,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".renew_type_code")})).clearValidate(),a.duplicatedCheck(a.dataTable.rows[t],t,"renew_type")):(a.dataTable.rows[t].renew_type_code="",a.dataTable.rows[t].renew_type="",a.dataTable.rows[t].renew_typex="",this.$refs.save_table_line.validateField("rows.".concat(t,".renew_type_code")))},clickModalAccount:function(e,t){var a=this;if(a.indexTable=t,null!==e.expense_account&&void 0!==e.expense_account&&""!==e.expense_account){var n=e.expense_account.split("."),r=0;if(a.accountCars.company="",a.accountCars.evm="",a.accountCars.department="",a.accountCars.cost_center="",a.accountCars.budget_year="",a.accountCars.budget_type="",a.accountCars.budget_detail="",a.accountCars.budget_reason="",a.accountCars.main_account="",a.accountCars.sub_account="",a.accountCars.reserved1="",a.accountCars.reserved2="",a.descriptionCars.company="",a.descriptionCars.evm="",a.descriptionCars.department="",a.descriptionCars.cost_center="",a.descriptionCars.budget_year="",a.descriptionCars.budget_type="",a.descriptionCars.budget_detail="",a.descriptionCars.budget_reason="",a.descriptionCars.main_account="",a.descriptionCars.sub_account="",a.descriptionCars.reserved1="",a.descriptionCars.reserved2="",e.expense_account)for(var o in a.accountCars)a.accountCars[o]=n[r],r++;a.accountId=e.expense_account_id,a.type_cost=e.type_cost}},setSelectedColumn:function(e){this.columnSelected.push(e),this.columnSelectedId.push(e.row_id)},receivedDepartment:function(e,t){var a=this;e?(a.dataTable.rows[t].department_name=e.description,a.dataTable.rows[t].department_code=e.value,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".department_code")})).clearValidate()):(a.dataTable.rows[t].department_name="",a.dataTable.rows[t].department_code="",this.$refs.save_table_line.validateField("rows.".concat(t,".department_code")))},clickConfirm:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="CONFIRMED",e})),$('input[name="cars_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยืนยัน!","warning")},clickCancel:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="CANCELLED",e})),$('input[name="cars_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยกเลิก!","warning")},clickClear:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="NEW",e})),$('input[name="cars_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการรีเซต!","warning")},clickSave:function(){var e=this;this.$refs.save_table_line.validate((function(t){t&&(e.setComplete(),e.locked=!e.locked)}))},clickComplete:function(){var e=this;this.$refs.save_table_line.validate((function(t){t&&e.setComplete()}))},setComplete:function(){this.dataTable.rows.every((function(e){return e.flgAdd}))?this.checkDuplicateField()?swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"}):(this.dataTable.rows.forEach((function(e){e.isDuplicated=!1})),this.saveCars()):this.dataTable.rows.find((function(e){return e.isDuplicated}))?swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"}):this.saveCars()},saveCars:function(){var e=this,t={data:this.dataTable.rows.map((function(e,t){return e.row_id||(e.row_id=r()()),e}))};axios.post("/ir/ajax/cars",t).then((function(t){e.complete=!1,e.dataTable.rows.map((function(e,a){delete e.flgAdd;var n=t.data.data.find((function(t){return t.row_id==e.row_id}));return n&&(e.car_id=n.car_id,e.document_number=n.document_number),e})),$('input[name="cars_select_all"]').prop("checked",!1),e.columnSelected=[],e.columnSelectedId=[],e.$nextTick((function(){swal({title:"Success",text:"บันทึกสำเร็จ",type:"success",showCancelButton:!1,showConfirmButton:!0})}))})).catch((function(e){400===e.response.data.status?swal({title:"Warning",text:e.response.data.message,type:"warning"}):swal({title:"Error",text:e.response.data.message,type:"error"})}))},clickIncomplete:function(){this.complete=!0,this.locked=!0},validateinsurance_amount:function(e){var t=this;t.dataTable.rows[e].insurance_amount<t.dataTable.rows[e].discount&&(swal({title:"Warning",text:"ส่วนลดเบี้ยประกัน ต้องน้อยกว่าเท่ากับ เบี้ยประกัน",type:"warning"}),this.$nextTick((function(){t.dataTable.rows[e].discount=0})))},insuranceChange:function(e,t){this.validateinsurance_amount(t)},discountChange:function(e,t){this.validateinsurance_amount(t)},ClickAddRow:function(){var e=this,t=this;t.showLoading=!0,t.lastRowId=r()(),axios.get("/ir/ajax/lov/period-year").then((function(a){var n,r=(le(n={policy_set_header_id:null,car_type:null,car_id:null,asset_status:"Y",document_number:null,renew_type_code:null,renew_type:null,start_date:null,end_date:null,total_days:null,department_code:null,department_name:null,license_plate:null,location_code:null,group_code:null,group_name:null,duty_amount:null,insurance_amount:"",discount:0,revenue_stamp_percent:null,vat_amount:null,net_amount:null,vat_refund:null,car_type_code:null,status:"NEW",policy_number:null,company_id:null,company_name:null,asset_id:null,asset_number:null,expense_account:null,expense_account_id:null,expense_account_desc:null,car_brand:null,car_brand_code:null,car_cc:null,engine_number:null,tank_number:null,line_type:null,year:a.data.data.period_year.toString(),vat_percent:null,flgAdd:!0,isDuplicated:!1,expense_flag:"N",type_cost:"",receivable_name:""},"revenue_stamp_percent",0),le(n,"vat_percent",7),le(n,"row_id",t.lastRowId),n);t.locked=!0,t.dataTable.rows.push(r),t.totalRows=t.dataTable.rows.length,t.$nextTick((function(){t.currentPage=Math.ceil(t.totalRows/t.perPage),t.$nextTick((function(){var a=e.$el.getElementsByClassName("newLine")[0];a&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.showLoading=!1}))}))})).catch((function(e){swal("Error",e,"error")}))},copyRow:function(e){var t=this;return de(s().mark((function a(){var n;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(n=t).showLoading=!0,n.lastRowId=r()(),a.next=5,axios.get("/ir/ajax/lov/period-year").then(function(){var a=de(s().mark((function a(r){var o,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.data,(o=ie({},e)).status="NEW",o.insurance_amount=0,o.flgAdd=!0,o.isDuplicated=!1,o.expense_flag="N",o.row_id=n.lastRowId,o.document_number=null,o.car_id=null,n.locked=!0,i=n.dataTable.rows.indexOf(e)+1,n.dataTable.rows.splice(i,0,o),n.setCopyRowDate(e,i),n.totalRows=n.dataTable.rows.length,n.$nextTick((function(){n.currentPage=Math.ceil((i+1)/n.perPage),n.$nextTick((function(){var e=t.$el.getElementsByClassName("newLine")[0];e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),n.showLoading=!1}))}));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){swal("Error",e,"error")}));case 5:case"end":return a.stop()}}),a)})))()},removeRow:function(e){var t=this;return de(s().mark((function a(){var n;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t,a.next=3,swal({title:"Warning",text:"ต้องการลบหรือไม่!",type:"warning",showCancelButton:!0,closeOnConfirm:!0},function(){var t=de(s().mark((function t(a){var r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}if(!e.car_id){t.next=5;break}return r={car_id:e.car_id},t.next=5,axios.post("/ir/ajax/cars/remove",r).then((function(e){})).catch((function(e){swal({title:"Error",text:"Remove Error",type:"error"})}));case 5:o=n.dataTable.rows.indexOf(e),n.dataTable.rows.splice(o,1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return a.stop()}}),a)})))()},checkDuplicateField:function(){var e=!1,t=this.dataTable.rows;return t.length>1?t.forEach((function(a,n){t.find((function(e,t){return n!==t&&a.year===e.year&&a.license_plate===e.license_plate&&a.receivable_name===e.receivable_name&&a.renew_type_code===e.renew_type_code&&a.renew_type===e.renew_type&&"Cancelled"!==a.status&&"Cancelled"!==e.status}))&&(e=!0)})):e=t[0].isDuplicated&&"Cancelled"!==t[0].status,e},dutyAmount:function(e){return e.duty_amount=parseFloat((e.insurance_amount-+e.discount)*+e.revenue_stamp_percent/100),e.duty_amount},vatAmount:function(e){return e.vat_amount=parseFloat((e.insurance_amount-+e.discount+parseFloat(e.duty_amount))*+e.vat_percent/100),e.vat_amount},netAmount:function(e){return e.net_amount=parseFloat(e.insurance_amount-+e.discount+parseFloat(e.duty_amount)+parseFloat(e.vat_amount)),e.net_amount},convertCurrenyToNum:function(e){return Number(e.replace(/[^0-9.-]+/g,""))},duplicatedCheck:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this,r={data:{rows:n.dataTable.rows,year:e.year,renew_type:e.renew_type,renew_type_code:e.renew_type_code,license_plate:e.license_plate,receivable_name:e.receivable_name,row_id:t}};e.year&&e.renew_type_code&&e.license_plate&&axios.post("/ir/ajax/cars/duplicate-check",r).then((function(e){n.dataTable.rows[t].isDuplicated=!1})).catch((function(r){400===r.response.data.status?(n.dataTable.rows[t].isDuplicated=!0,swal({title:"Warning",text:"ไม่สามารถเลือกรายการซ้ำได้",type:"warning"}),n.$nextTick((function(){"renew_type"===a&&(e.renew_type_code="",e.renew_type="",e.renew_typex=""),"year"===a&&(e.year=""),"license_plate"===a&&(e.license_plate="")}))):swal({title:"Error",text:r.response.data.message,type:"error"})}))},isDisabled:function(e){return!this.locked||!(!e||"CONFIRMED"!==e.status||"Y"!=!e.expense_flag)},parseToDate:function(){var e=arguments;return de(s().mark((function t(){var a,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:null,n=e.length>1&&void 0!==e[1]?e[1]:"DD/MM/YYYY",null!=a){t.next=4;break}return t.abrupt("return",k()().toDate());case 4:return t.abrupt("return",k()(a,n).subtract(543,"years").toDate());case 5:case"end":return t.stop()}}),t)})))()},getValueReceivable:function(e,t){this.dataTable.rows[t].receivable_name=e.desc,this.dataTable.rows[t].receivable_code=e.code},setReceivables:function(){var e=this;this.receivables=[],this.rows,this.dataTable.rows.filter((function(t){e.checkStatusConfirmed(t.status)&&t.receivable_name&&e.receivables.push(ie({},t))}));var t=[],a=this;this.receivables.reduce((function(e,n){e[n.receivable_code]||(e[n.receivable_code]={receivable_code:n.receivable_code,net_amount:0,receivable_name:n.receivable_name},t.push(e[n.receivable_code]));var r="string"==typeof n.net_amount&&n.net_amount?a.convertCurrenyToNum(n.net_amount):n.net_amount;return e[n.receivable_code].net_amount+=r,e}),{}),this.result_receivable=t},getLocation:function(e){this.dataTable.rows[e.index].location_code=e.value,this.dataTable.rows[e.index].location_description=e.value_name},getGroupType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;axios.get("/ir/ajax/lov/group-code",{params:e}).then((function(e){var a=e.data;t.groupTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))}},props:["dataTable","defaultValueSetName","setLabelExpenseFlag","formatCurrency","isNullOrUndefined","checkStatusConfirmed","setLabelStatusAsset"],components:{modalAccountCode:W,dateInput:U.Z,currencyInput:G.Z,lovCompany:J,lovRenewType:c,lovDepartment:u,lovVehicle:g,lovAssetStatus:v,lovReceivable:re,dropdownStatusAsset:oe.Z,lovLocation:ae},computed:{tableTotal:function(){var e=this,t=null,a=null,n=null,r=0,o=0,s=0,i=0,l=0,c=0,d=[],u=[];return 0===e.dataTable.rows.length||(e.groupTypeList.forEach((function(e){u.push({group_name:e.meaning,premium:0,discount:0,duty_fee:0,vat:0,net_amount:0,rec_insu:0,result_receivable:[]})})),e.dataTable.rows.forEach((function(e){["CONFIRMED","INTERFACE"].includes(e.status)&&(n=a=t=null,(t=u.find((function(t){return t.group_name==e.group_name})))?(t.premium+=parseFloat(e.insurance_amount),t.discount+=parseFloat(e.discount),t.duty_fee+=parseFloat(e.duty_amount),t.vat+=parseFloat(e.vat_amount),t.net_amount+=parseFloat(e.net_amount),e.receivable_code&&(t.rec_insu+=parseFloat(e.net_amount),(a=t.result_receivable.find((function(t){return t.receivable_code==e.receivable_code})))&&(a.net_amount+=parseFloat(e.net_amount)))):u.push({group_name:e.group_name,premium:parseFloat(e.insurance_amount),discount:parseFloat(e.discount),duty_fee:parseFloat(e.duty_amount),vat:parseFloat(e.vat_amount),net_amount:parseFloat(e.net_amount),rec_insu:e.receivable_code?parseFloat(e.net_amount):0,result_receivable:e.receivable_code?[{receivable_code:e.receivable_code,receivable_name:e.receivable_name,net_amount:parseFloat(e.net_amount)}]:[]}),r+=parseFloat(e.insurance_amount),o+=parseFloat(e.discount),s+=parseFloat(e.duty_amount),i+=parseFloat(e.vat_amount),l+=parseFloat(e.net_amount),e.receivable_code&&(c+=parseFloat(e.net_amount),(n=d.find((function(t){return t.receivable_code==e.receivable_code})))?n.net_amount+=parseFloat(e.net_amount):d.push({receivable_code:e.receivable_code,receivable_name:e.receivable_name,net_amount:parseFloat(e.net_amount)})))})),u.push({group_name:"Total",premium:r,discount:o,duty_fee:s,vat:i,net_amount:l,rec_insu:c,result_receivable:d})),u}},watch:{complete:function(e,t){e?($("#table_edit").find("input").prop("disabled",!1),$('input[name="cars_select_all"]').prop("disabled",!1)):($("#table_edit").find("input").prop("disabled",!0),$('input[name="cars_select_all"]').prop("checked",!1),$('input[name="cars_select_all"]').prop("disabled",!0),$("#table_edit").find('input[type="checkbox"]').prop("checked",!1),this.columnSelected=[],this.columnSelectedId=[])},"dataTable.rows":function(e,t){$('input[name="cars_select_all"]').prop("checked",!1),this.totalRows=this.dataTable.rows.length}},mounted:function(){window.vm=this,this.getGroupType()}};var me=a(93379),pe=a.n(me),_e=a(59799),ve={insert:"head",singleton:!1};pe()(_e.Z,ve);_e.Z.locals;var fe=a(124),he={insert:"head",singleton:!1};pe()(fe.Z,he);fe.Z.locals;const be=(0,l.Z)(ue,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"margin_top_20"},[a("div",{staticClass:"table-responsive table_style_scroll"},[a("table",{staticClass:"table table-striped table_style"},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{directives:[{name:"show",rawName:"v-show",value:e.tableTotal.length>0,expression:"tableTotal.length > 0"}],staticClass:"text-nowrap"}),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),a("th",{staticClass:"text-right"},[e._v("ค่าเบี้ยประกันเรียกเก็บสุทธิรวม")])])]),e._v(" "),a("tbody",{attrs:{id:"table_search"}},[e._l(e.tableTotal,(function(t,n){return[a("tr",{key:n,staticClass:"text-right"},[a("td",{staticClass:"text-nowrap",staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.group_name))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.premium)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.discount)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.duty_fee)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.vat)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.net_amount)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.rec_insu)))])]),e._v(" "),e._l(t.result_receivable,(function(r,o){return a("tr",{key:"rec_"+n+"_"+o,staticClass:"text-right"},[a("td",{attrs:{colspan:"6"}},[e._v("\n              "+e._s(e.isNullOrUndefined(r.receivable_name))+"\n            ")]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(r.net_amount)||0===e.isNullOrUndefined(r.net_amount)?e.formatCurrency(r.net_amount):e.isNullOrUndefined(t.net_amount)))])])}))]})),e._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===e.tableTotal.length,expression:"tableTotal.length === 0"}],staticClass:"text-center"},[a("td",{attrs:{colspan:"99"}},[e._v("ไม่มีข้อมูล")])])],2),e._v(" "),a("tfoot")])]),e._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col-md-12 text-right"},[a("button",{staticClass:"btn btn-success m-1",attrs:{type:"danger"},on:{click:function(t){return e.ClickAddRow()}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" เพิ่ม")])])]),e._v(" "),a("div",{},[a("div",[a("el-form",{ref:"save_table_line",staticClass:"demo-dynamic form_table_line",attrs:{model:e.dataTable,"label-width":"120px",rules:e.rules}},[a("div",{staticClass:"table-responsive"},[a("b-table",{staticStyle:{display:"block",overflow:"auto","max-height":"500px"},attrs:{"table-class":"table table-bordered",busy:e.isBusy,items:e.dataTable.rows,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,"tbody-tr-class":e.rowClass,"primary-key":"row_id","show-empty":"",small:"",hover:"","select-mode":"single",selectable:""},on:{"update:busy":function(t){e.isBusy=t},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("strong",[e._v("Loading...")])])]},proxy:!0},{key:"head(selected)",fn:function(t){return[e._v("\n            Select All "),a("br"),e._v(" "),a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{staticClass:"form-check-input",staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"cars_select_all",disabled:!e.locked},on:{click:function(t){return e.clickSelectAll()}}})])]}},{key:"head(status)",fn:function(t){return[a("div",[e._v("\n              IR Status"),a("br"),e._v("สถานะ\n            ")])]}},{key:"head(document_number)",fn:function(t){return[a("div",[e._v("\n              Document number"),a("br"),e._v("เลขที่เอกสาร\n            ")])]}},{key:"head(year)",fn:function(t){return[a("div",[e._v("\n              Year"),a("br"),e._v("ปี *\n            ")])]}},{key:"head(license_plate)",fn:function(t){return[a("div",[e._v("\n              License plate"),a("br"),e._v("ทะเบียนรถยนต์ *\n            ")])]}},{key:"head(receivable_name)",fn:function(t){return[a("div",[e._v("\n              เรียกเก็บ\n            ")])]}},{key:"head(renew_typex)",fn:function(t){return[a("div",[e._v("\n              Renew type"),a("br"),e._v("ประเภทการต่ออายุ *\n            ")])]}},{key:"head(start_date)",fn:function(t){return[a("div",[e._v("\n              Start date"),a("br"),e._v("วันที่เริ่มต้นการคิดเบี้ยประกัน *\n            ")])]}},{key:"head(end_date)",fn:function(t){return[a("div",[e._v("\n              End date"),a("br"),e._v("วันที่สิ้นสุดการคิดเบี้ยประกัน *\n            ")])]}},{key:"head(total_days)",fn:function(t){return[a("div",[e._v("\n              Days"),a("br"),e._v("จำนวนวัน\n            ")])]}},{key:"head(insurance_amount)",fn:function(t){return[a("div",[e._v("\n              Premium"),a("br"),e._v("ค่าเบี้ยประกัน *\n            ")])]}},{key:"head(discount)",fn:function(t){return[a("div",[e._v("\n              Discount"),a("br"),e._v("ส่วนลด\n            ")])]}},{key:"head(duty_amount)",fn:function(t){return[a("div",[e._v("\n              Duty fee"),a("br"),e._v("อากร\n            ")])]}},{key:"head(vat_amount)",fn:function(t){return[a("div",[e._v("\n              Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่ม\n            ")])]}},{key:"head(net_amount)",fn:function(t){return[a("div",[e._v("\n              Net amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิ\n            ")])]}},{key:"head(vat_refund)",fn:function(t){return[a("div",[e._v("\n              Tax recoverable"),a("br"),e._v("ภาษีขอคืนได้\n            ")])]}},{key:"head(car_type)",fn:function(t){return[a("div",[e._v("\n              Car type"),a("br"),e._v("ประเภทรถยนต์\n            ")])]}},{key:"head(policy_number)",fn:function(t){return[a("div",[e._v("\n              Policy no."),a("br"),e._v("เลขที่กรมธรรม์\n            ")])]}},{key:"head(company_id)",fn:function(t){return[a("div",[e._v("\n              Company code"),a("br"),e._v("รหัสผู้รับประกันภัย\n            ")])]}},{key:"head(company_name)",fn:function(t){return[a("div",[e._v("\n              Company name"),a("br"),e._v("ผู้รับประกันภัย\n            ")])]}},{key:"head(asset_number)",fn:function(t){return[a("div",[e._v("\n              Asset number"),a("br"),e._v("เลขที่สินทรัพย์\n            ")])]}},{key:"head(group_name)",fn:function(t){return[a("div",[e._v("\n              Group"),a("br"),e._v("กลุ่ม *\n            ")])]}},{key:"head(location_code)",fn:function(t){return[a("div",[e._v("\n              Location Code"),a("br"),e._v("รหัสสถานที่ *\n            ")])]}},{key:"head(location_description)",fn:function(t){return[a("div",[e._v("\n              Location"),a("br"),e._v("สถานที่\n            ")])]}},{key:"head(expense_account)",fn:function(t){return[a("div",[e._v("\n              Expense account"),a("br"),e._v("รหัสบัญชีค่าใช้จ่าย *\n            ")])]}},{key:"head(expense_account_desc)",fn:function(t){return[a("div",[e._v("\n              Expense account description"),a("br"),e._v("บัญชีค่าใช้จ่าย\n            ")])]}},{key:"head(car_brand)",fn:function(t){return[a("div",[e._v("\n              Brand"),a("br"),e._v("ยี่ห้อ\n            ")])]}},{key:"head(car_cc)",fn:function(t){return[a("div",[e._v("\n              CC."),a("br"),e._v("ซีซี รถ\n            ")])]}},{key:"head(engine_number)",fn:function(t){return[a("div",[e._v("\n              Engine number"),a("br"),e._v("หมายเลขเครื่องยนต์\n            ")])]}},{key:"head(tank_number)",fn:function(t){return[a("div",[e._v("\n              Vehicle identification Number"),a("br"),e._v("หมายเลขตัวถัง\n            ")])]}},{key:"head(expense_flag)",fn:function(t){return[a("div",[e._v("\n              สถานะการตัดค่าใช้จ่าย\n            ")])]}},{key:"head(action)",fn:function(t){return[a("div",[e._v("\n              Action\n            ")])]}},{key:"head(remove)",fn:function(t){return[a("div",[e._v("\n              ลบ\n            ")])]}},{key:"cell(selected)",fn:function(t){return[a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{class:"form-check-input "+(e.isDisabled(t.item)?"checkbox_edit_disabled":""),staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"cars_select"+t.item.row_id,disabled:e.isDisabled(t.item)},domProps:{value:""+t.item.row_id,checked:e.columnSelectedId.includes(t.item.row_id)},on:{click:function(a){return e.clickSelectRow(t.item.row_id,t.item)}}})])]}},{key:"cell(status)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.status?t.item.status:"")+"\n            ")])]}},{key:"cell(document_number)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.document_number?t.item.document_number:"")+"\n            ")])]}},{key:"cell(year)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".year",rules:e.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",disabled:e.isDisabled(t.item),pType:"year"},on:{dateWasSelected:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.receivedYear.apply(void 0,r.concat([t.index]))}},model:{value:t.item.year,callback:function(a){e.$set(t.item,"year",a)},expression:"row.item.year"}})],1)]}},{key:"cell(license_plate)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".license_plate",rules:e.rules.license_plate}},[a("lov-vehicle",{attrs:{value:t.item.license_plate,name:"license_plate",placeholder:"ทะเบียนรถยนต์",sizeSmall:!0,disabled:e.isDisabled(t.item),paramsQuery:e.paramsQueryLicensePlate},on:{vehicle:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.receivedLicensePlate.apply(void 0,r.concat([t.index]))}},model:{value:t.item.license_plate,callback:function(a){e.$set(t.item,"license_plate",a)},expression:"row.item.license_plate"}})],1)]}},{key:"cell(receivable_name)",fn:function(t){return[a("el-form-item",[a("lov-receivable",{attrs:{name:"receivable_name"+t.index,disabled:e.isDisabled(t.item),placeholder:"เรียกเก็บ",size:"small",popperBody:!0},on:{"change-lov":function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.getValueReceivable.apply(void 0,r.concat([t.index]))}},model:{value:t.item.receivable_name,callback:function(a){e.$set(t.item,"receivable_name",a)},expression:"row.item.receivable_name"}})],1)]}},{key:"cell(renew_typex)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".renew_type_code",rules:e.rules.renew_type_code}},[a("lov-renew-type",{attrs:{value:t.item.renew_type,name:"renew_type_code",placeholder:"ประเภทการต่ออายุ",sizeSmall:!0,disabled:e.isDisabled(t.item)},on:{renewType:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.receivedRenewType.apply(void 0,r.concat([t.index]))}},model:{value:t.item.renew_type,callback:function(a){e.$set(t.item,"renew_type",a)},expression:"row.item.renew_type"}})],1)]}},{key:"cell(start_date)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".start_date",rules:e.rules.start_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.start_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่เริ่มต้น",disabled:e.isDisabled(t.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.getAdjustmentDateStart.apply(void 0,r.concat([t.index]))}},model:{value:t.item.start_date,callback:function(a){e.$set(t.item,"start_date",a)},expression:"row.item.start_date"}})],1)]}},{key:"cell(end_date)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".end_date",rules:e.rules.end_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.end_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่สิ้นสุด",disabled:e.isDisabled(t.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.getAdjustmentDateEnd.apply(void 0,r.concat([t.index],[t.item.start_date]))}},model:{value:t.item.end_date,callback:function(a){e.$set(t.item,"end_date",a)},expression:"row.item.end_date"}})],1)]}},{key:"cell(total_days)",fn:function(t){return[a("div",[e._v(e._s(t.item.total_days?t.item.total_days:""))])]}},{key:"cell(insurance_amount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+t.index+".insurance_amount",rules:e.rules.insurance_amount}},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:e.isDisabled(t.item),placeholder:"ค่าเบี้ยประกัน","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.insuranceChange.apply(void 0,r.concat([t.index]))}},model:{value:t.item.insurance_amount,callback:function(a){e.$set(t.item,"insurance_amount",a)},expression:"row.item.insurance_amount"}})],1)])]}},{key:"cell(discount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right"},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:e.isDisabled(t.item),placeholder:"ส่วนลด","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.discountChange.apply(void 0,r.concat([t.index]))}},model:{value:t.item.discount,callback:function(a){e.$set(t.item,"discount",a)},expression:"row.item.discount"}})],1)])]}},{key:"cell(duty_amount)",fn:function(t){return[a("div",[e._v("\n              "+e._s(e.formatCurrency(e.dutyAmount(t.item)))+"\n            ")])]}},{key:"cell(vat_amount)",fn:function(t){return[a("div",[e._v("\n              "+e._s(e.formatCurrency(e.vatAmount(t.item)))+"\n            ")])]}},{key:"cell(net_amount)",fn:function(t){return[a("div",[e._v("\n              "+e._s(e.formatCurrency(e.netAmount(t.item)))+"\n            ")])]}},{key:"cell(vat_refund)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.vat_refund?t.item.vat_refund:"")+"\n            ")])]}},{key:"cell(car_type)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.car_type?t.item.car_type:"")+"\n            ")])]}},{key:"cell(policy_number)",fn:function(t){return[a("el-form-item",[a("el-input",{staticClass:"el-input--small",attrs:{disabled:e.isDisabled(t.item),placeholder:"เลขที่กรมธรรม์"},model:{value:t.item.policy_number,callback:function(a){e.$set(t.item,"policy_number",a)},expression:"row.item.policy_number"}})],1)]}},{key:"cell(company_id)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+t.index+".company_id",rules:e.rules.company_id}},[a("lov-company",{attrs:{value:t.item.company_id,placeholder:"รหัสผู้รับประกันภัย",disabled:e.isDisabled(t.item),isSave:!e.complete},on:{company:function(a){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return e.receivedCompany.apply(void 0,r.concat([t.index]))}},model:{value:t.item.company_id,callback:function(a){e.$set(t.item,"company_id",a)},expression:"row.item.company_id"}})],1)]}},{key:"cell(company_name)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.company_name?t.item.company_name:"")+"\n            ")])]}},{key:"cell(asset_number)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.asset_number?t.item.asset_number:"")+"\n            ")])]}},{key:"cell(group_name)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".group_name",rules:e.rules.group_name}},[a("div",[e._v("\n                "+e._s(t.item.group_name?t.item.group_name:"")+"\n              ")])])]}},{key:"cell(location_code)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".location_code",rules:e.rules.location_code}},[a("lov-location",{attrs:{"set-name":"FA_LOCATION","set-data":t.item.location_code,index:t.index,placeholder:"รหัสสถานที่",disabled:e.isDisabled(t.item)},on:{getLocation:e.getLocation},model:{value:t.item.location_code,callback:function(a){e.$set(t.item,"location_code",a)},expression:"row.item.location_code"}})],1)]}},{key:"cell(location_description)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.location_description?t.item.location_description:"")+"\n            ")])]}},{key:"cell(expense_account)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".expense_account",rules:e.rules.expense_account}},[a("el-input",{staticClass:"readonly el-input--small",attrs:{placeholder:"รหัสบัญชี",value:t.item.expense_account,disabled:e.isDisabled(t.item)},model:{value:t.item.expense_account,callback:function(a){e.$set(t.item,"expense_account",a)},expression:"row.item.expense_account"}},[a("el-button",{attrs:{slot:"append","data-toggle":"modal","data-target":"#modal_account"+t.index},on:{click:function(a){return e.clickModalAccount(t.item,t.index)}},slot:"append"},[a("i",{staticClass:"fa fa-search"})])],1)],1)]}},{key:"cell(expense_account_desc)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.expense_account_desc?t.item.expense_account_desc:"")+"\n            ")])]}},{key:"cell(car_brand)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.car_brand?t.item.car_brand:"")+"\n            ")])]}},{key:"cell(car_cc)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.car_cc?t.item.car_cc:"")+"\n            ")])]}},{key:"cell(engine_number)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.engine_number?t.item.engine_number:"")+"\n            ")])]}},{key:"cell(tank_number)",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.item.tank_number?t.item.tank_number:"")+"\n            ")])]}},{key:"cell(expense_flag)",fn:function(t){return[a("div",[e._v("\n              "+e._s(e.setLabelExpenseFlag(t.item.expense_flag))+"\n            ")])]}},{key:"cell(action)",fn:function(t){return[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isDisabled(t.item),expression:"!isDisabled(row.item)"}]},[a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:function(a){return e.copyRow(t.item)}}},[a("i",{staticClass:"fa fa-files-o",attrs:{"aria-hidden":"true"}}),e._v("\n                คัดลอก\n              ")])])]}},{key:"cell(remove)",fn:function(t){return[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"NEW"==t.item.status&&!e.isDisabled(t.item),expression:"row.item.status == 'NEW' && !isDisabled(row.item)"}]},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.removeRow(t.item)}}},[a("i",{staticClass:"fa fa-times"}),e._v("\n                ลบ\n              ")])])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalRows>e.perPage,expression:"totalRows > perPage"}],staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),e._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),e._v(" ยืนยัน\n              ")]),e._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n              ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n              ")])])],1)]),e._v(" "),a("div",{staticClass:"col-md-6 lable_align"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{directives:[{name:"show",rawName:"v-show",value:e.locked,expression:"locked"}],staticClass:"btn btn-primary",attrs:{type:"button",disabled:0===e.dataTable.rows.length},on:{click:function(t){return e.clickSave()}}},[a("i",{staticClass:"fa fa-save"}),e._v(" บันทึก (ล็อค)\n              ")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.locked,expression:"!locked"}],staticClass:"btn btn-danger cursor-pointer",attrs:{type:"button",disabled:0===e.dataTable.rows.length},on:{click:function(t){return e.clickIncomplete()}}},[a("i",{staticClass:"fa fa-minus-square-o"}),e._v(" แก้ไข (ปลดล็อค)\n              ")])])],1)])])])],1)]),e._v(" "),a("modal-account-code",{attrs:{index:e.indexTable,rows:e.dataTable.rows,accounts:e.accountCars,descriptions:e.descriptionCars,disabled:!!e.dataTable.rows[e.indexTable]&&e.isDisabled(e.dataTable.rows[e.indexTable]),accountId:e.accountId,type_cost:e.type_cost},on:{"select-accounts":e.getDataRowSelectAccount}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Premium"),a("br"),e._v("ค่าเบี้ยประกันรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Discount"),a("br"),e._v("ส่วนลดรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Duty Fee"),a("br"),e._v("อากรรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่มรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Net Amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิรวม")])}],!1,null,"25de704e",null).exports;var ge=a(67791);const ye={props:["defaultValueSetName"],data:function(){return{data:{rows:[]},funcs:ge.sD,paramsQueryLicensePlate:{renew_type:null,license_plate:null,group:null},showLoading:!1}},components:{IndexHeader:E,IndexTable:be},methods:{loading:function(e){this.showLoading=e},test:function(e){this.$refs.indextable.updateselectindex(e)},financial:function(e){return isNaN(e)?0:Number(parseFloat(e).toFixed(2))},receivedDataSearchf:function(e){this.receivedDataSearch(e)},receivedDataSearcht:function(e){this.test(!0),this.receivedDataSearch(e)},receivedDataSearch:function(e){var t=this;this.data.rows=e.map((function(e,a){e.renew_typex=e.renew_type_code+":"+e.renew_type,e.renew_typex.includes("null")&&(e.renew_typex="");var n=e.expense_account_desc.split("."),o=n[2]+"."+n[8]+"."+n[9];return e.expense_account_desc=o,null===e.insurance_amount?e.insurance_amount=0:e.insurance_amount,null===e.discount?e.discount=0:e.discount,"Y"===e.vat_refund?e.vat_refund="Yes":e.vat_refund="No",e.duty_amount&&(e.duty_amount=t.financial(e.duty_amount)),e.vat_amount&&(e.vat_amount=t.financial(e.vat_amount)),e.net_amount&&(e.net_amount=t.financial(e.net_amount)),"Y"!==e.return_vat_flag||(e.return_vat_flag="Yes"),e.year=+e.year,e.program_code="IRP0005",e.row_id=r()(),e})),this.data.rows.filter((function(e){return e.year=e.year.toString(),e})),this.$refs.indextable.columnSelected=[],this.$refs.indextable.columnSelectedId=[]},getValueParamsLicensePlate:function(e){this.paramsQueryLicensePlate=e}}};const we=(0,l.Z)(ye,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[a("index-header",{attrs:{paramsQueryLicensePlate:e.paramsQueryLicensePlate},on:{dataSearch:e.receivedDataSearchf,"fetch-show-table-header":e.receivedDataSearcht,"set-params-license-plate":e.getValueParamsLicensePlate,loading:e.loading}}),e._v(" "),a("index-table",{ref:"indextable",attrs:{dataTable:e.data,"default-value-set-name":e.defaultValueSetName,setLabelExpenseFlag:e.funcs.setLabelExpenseFlag,formatCurrency:e.funcs.formatCurrency,isNullOrUndefined:e.funcs.isNullOrUndefined,checkStatusConfirmed:e.funcs.checkStatusConfirmed,setLabelStatusAsset:e.funcs.setLabelStatusAsset}})],1)}),[],!1,null,null,null).exports},75943:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-dropdown-status-asset",data:function(){return{rows:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}],loading:!1,result:this.value}},props:["value","name","size","popperBody","disabled","placeholder"],methods:{onchange:function(e){this.$emit("change-dropdown",e)}},watch:{value:function(e,t){this.result=e}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0,size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)}),[],!1,null,null,null).exports},9882:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-account",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_type:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-type",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_type:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_type===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({budget_type:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_type:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Type",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_type}})})),1)],1)}),[],!1,null,null,null).exports},75721:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-allocation",data:function(){return{dataRows:[],loading:!1,result:this.value,main_account:""}},props:["attrName","value","mainAccount","disabled"],methods:{remoteMethod:function(e){this.getDataRows({sub_account:"",keyword:e,main_account:this.main_account})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/sub-account",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.sub_account===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.main_account=this.mainAccount,this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},watch:{value:function(e,t){this.result=e},mainAccount:function(e,t){this.main_account=e,this.getDataRows({sub_account:this.result,keyword:"",main_account:e})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Sub Account",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.sub_account}})})),1)],1)}),[],!1,null,null,null).exports},84371:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-branch",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","vendorId","disabled"],methods:{remoteMethod:function(e){this.getDataRows({evm_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/evm-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({vendor_id:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.evm_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({vendor_id:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({vendor_id:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"EVM",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.evm_code}})})),1)],1)}),[],!1,null,null,null).exports},61701:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({compnany_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/company-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({compnany_code:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.company_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({compnany_code:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({compnany_code:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Company Code",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_code+": "+e.description,value:e.company_code}})})),1)],1)}),[],!1,null,null,null).exports},49710:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-department",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({department_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({department_code:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.department_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({department_code:"",keyword:""})},watch:{value:function(e,t){this.result=this.value,this.getDataRows({department_code:this.result,keyword:this.result})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Department",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports},31262:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-future-used1",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({reserved1:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved1",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({reserved1:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.reserved1===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({reserved1:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({reserved1:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.reserved1}})})),1)],1)}),[],!1,null,null,null).exports},25826:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-future-used2",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({reserved2:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved2",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({reserved2:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.reserved2===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({reserved2:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({reserved2:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.reserved2}})})),1)],1)}),[],!1,null,null,null).exports},22374:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-inter-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({main_account:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/main-account",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({main_account:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.main_account===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({main_account:this.value,keyword:this.value})},watch:{value:function(e,t){this.result=e,this.getDataRows({main_account:e,keyword:e})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Main Account",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.main_account}})})),1)],1)}),[],!1,null,null,null).exports},30077:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-product",data:function(){return{dataRows:[],loading:!1,result:this.value,department_code:""}},props:["attrName","value","departmentCode","disabled"],methods:{remoteMethod:function(e){this.getDataRows({cost_center_code:"",keyword:e,department_code:this.department_code})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/cost-center-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.cost_center_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.department_code=this.departmentCode,this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},watch:{value:function(e,t){this.result=e},departmentCode:function(e,t){this.department_code=e,this.getDataRows({cost_center_code:"",keyword:"",department_code:e})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Cost Center",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.cost_center_code}})})),1)],1)}),[],!1,null,null,null).exports},8613:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-project-activity",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_reason:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-reason",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_reason:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_reason===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({budget_reason:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_reason:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Reason",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_reason}})})),1)],1)}),[],!1,null,null,null).exports},57460:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-source",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_year:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-year",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_year:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_year===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.getDataRows({budget_year:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_year:e,keyword:""})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Year",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_year}})})),1)],1)}),[],!1,null,null,null).exports},35938:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-segments-lov-sub-account",data:function(){return{dataRows:[],loading:!1,result:this.value,budget_type:""}},props:["attrName","value","budgetType","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_detail:"",keyword:e,budget_type:this.budget_type})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-detail",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_detail===e){var n={value:e,desc:a.meaning};return void this.$emit("change-lov-segment",n)}}var r={value:e,desc:""};this.$emit("change-lov-segment",r)}},mounted:function(){this.budget_type=this.budgetType,this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},watch:{value:function(e,t){this.result=e},budgetType:function(e,t){this.budget_type=e,this.getDataRows({budget_detail:"",keyword:"",budget_type:e})}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Detail",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,disabled:e.disabled,remote:"",filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.budget_detail+": "+e.meaning,value:e.budget_detail}})})),1)],1)}),[],!1,null,null,null).exports},24829:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const n={name:"ir-components-lov-type-cost",data:function(){return{rows:[],loading:!1,code:"",desc:"",result:this.value,account:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},description:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},accountId:""}},props:["value","placeholder","popperBody","name","disabled"],methods:{remoteMethod:function(e){this.getDataRows({account_id:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onchange:function(e){var t={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};if(e)for(var a in this.rows){var n=this.rows[a];n.account_id==e&&(t.code=n.account_code,t.id=e,t.desc=n.description,t.account_combine=n.account_combine,t.account_combine_desc=n.account_combine_desc)}else t.code="",t.id="",t.desc="",t.account_combine="",t.account_combine_desc="";this.result=e,this.setPropAccountSplitCombine(t),this.$emit("change-lov",t)},onclick:function(){this.getDataRows({account_id:this.result,keyword:""})},setPropAccountSplitCombine:function(e){if(""!=e.account_combine){var t=e.account_combine.split("."),a=e.account_combine_desc.split("."),n=0,r=0;for(var o in this.account)this.account[o]=t[n],n++;for(var s in this.description)this.description[s]=a[r],r++;this.$emit("split-account",{account:e.account_combine,description:e.account_combine_desc,type_cost:e.code,type_cost_id:e.id})}else this.$emit("split-account",{account:"",description:"",type_cost:"",type_cost_id:""})},receivedDataRows:function(e){var t=this,a={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var n=e.data;if(t.loading=!1,t.rows=n.data,t.accountId&&null!==t.accountId&&void 0!==t.accountId)if(t.rows.length>0)for(var r in t.rows){var o=t.rows[r];o.account_id==t.accountId&&(t.result=o.account_id,a.code=o.account_code,a.id=o.account_id,a.desc=o.description,a.account_combine=o.account_combine,a.account_combine_desc=o.account_combine_desc)}else t.result="",a.code="",a.id=t.accountId,a.desc="",a.account_combine="",a.account_combine_desc="";else a.code="",a.id="",a.desc="",a.account_combine="",a.account_combine_desc="";t.$emit("change-lov",a)})).catch((function(e){swal("Error",e,"error")}))}},mounted:function(){},watch:{value:function(e,t){this.result=e}}};const r=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.account_code+": "+e.description,value:e.account_id}})})),1)],1)}),[],!1,null,null,null).exports}}]);