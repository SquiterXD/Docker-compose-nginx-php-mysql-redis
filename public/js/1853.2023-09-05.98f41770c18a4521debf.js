(self.webpackChunk=self.webpackChunk||[]).push([[1853],{47305:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,".image-box[data-v-4e7a5ae2]{max-width:300px}",""]);const i=s},26818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,".style-chooser .vs__dropdown-menu{max-height:150px}",""]);const i=s},11853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(87757),s=a.n(n),i=a(7398),l=a.n(i);a(2223);function o(e,t,a,n,s,i,l){try{var o=e[i](l),r=o.value}catch(e){return void a(e)}o.done?t(r):Promise.resolve(r).then(n,s)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function l(e){o(i,n,s,l,r,"next",e)}function r(e){o(i,n,s,l,r,"throw",e)}l(void 0)}))}}const c={components:{Loading:l()},props:{item:{},auth:{},url_ajax:null,btn_trans:{type:Object},machine_relations:{},request_ingredients:{},uom:{}},data:function(){return{machine:null,ingredients:null,remaining_amount:null,isLoading:!0,fullPage:!0,el:{machine:null,ingredients:null},validate:{machine:null,ingredients:null}}},mounted:function(){console.log(this),this.isLoading=!1},methods:{popoverHide:function(e){setTimeout((function(){console.log($("#"+e).parents(".el-select").popover("hide"))}),500)},changeMachineSet:function(e){var t=this;return r(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.machine=e;case 1:case"end":return a.stop()}}),a)})))()},changeIngredients:function(e){var t=this;return r(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.ingredients=e;case 1:case"end":return a.stop()}}),a)})))()},resetEl:function(){var e=this;return r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.el={machine:null,ingredients:null};case 1:case"end":return t.stop()}}),t)})))()},handleSave:function(e){var t=this;return r(s().mark((function a(){var n,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),null==t.el.ingredients?(t.validate.ingredients="กรุณาเลือกข้อมูลตราบุหรี่",setTimeout((function(){$("#select-box2").parents(".el-select").popover("show")}),200)):($("#select-box2").parents(".el-select").popover("hide"),t.validate.ingredients=""),null==t.el.machine?(t.validate.machine="กรุณาเลือกข้อมูลหมายเลขเครื่อง",setTimeout((function(){$("#select-box1").parents(".el-select").popover("show")}),200)):($("#select-box1").parents(".el-select").popover("hide"),t.validate.machine=""),null!=t.el.machine&&null!=t.el.ingredients){a.next=5;break}return a.abrupt("return",!1);case 5:return n=t.url_ajax.raw_material_store,i={machine_set:t.el.machine,item_no:t.el.ingredients,record_type:"in",organization_id:t.item.organization_id,remaining_amount:t.remaining_amount,organization_code:t.item.organization_code,item_cat_code:t.item.item_cat_code,last_updated_by_id:t.auth.fnd_user_id,last_updated_by:t.auth.user_id,created_by:t.auth.user_id,created_by_id:t.auth.fnd_user_id},t.isLoading=!0,a.next=10,axios.post(n,i).then((function(e){swal("แจ้งเตือน","ทำรายการสำเร็จ","success"),t.resetEl(),setTimeout((function(){window.location.href="/pm/raw_material_list"}),500)})).catch((function(e){swal("แจ้งเตือน","กรุณาตรวจสอบข้อมูลใหม่อีกครั้ง","error")}));case 10:t.isLoading=!1;case 11:case"end":return a.stop()}}),a)})))()}}};a(71915),a(33114);const u=(0,a(51900).Z)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-title"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-sm-12 col-lg-12 align-middle"},[a("h4",{staticClass:"tw-text-lg tw-py-1"},[e._v("\n            รายงานวัตถุดิบคงเหลือ : "+e._s(e.item.name)+"\n          ")])])])]),e._v(" "),a("div",{staticClass:"ibox-content"},[a("form",{on:{submit:e.handleSave}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row tw-items-center"},[a("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"}),e._v(" "),a("div",{staticClass:"col-lg-9"},[a("img",{staticClass:"image-box",attrs:{src:e.item.img?e.item.img:"/images/no-image.png",alt:""}})])])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-lg-9"},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"",id:"select-box1",required:"true","data-toggle":"popover","data-placement":"bottom","data-content":e.validate.machine,placeholder:"หมายเลขเครื่อง"},on:{change:e.changeMachineSet,focus:function(t){return e.popoverHide("select-box1")}},model:{value:e.el.machine,callback:function(t){e.$set(e.el,"machine",t)},expression:"el.machine"}},e._l(e.machine_relations,(function(e,t){return a("el-option",{key:t,attrs:{label:e.machine_set,value:e.machine_set}})})),1)],1)])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[e._m(1),e._v(" "),a("div",{staticClass:"col-lg-9"},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"",id:"select-box2",placeholder:"หมายเลขเครื่อง","data-toggle":"popover","data-placement":"bottom","data-content":e.validate.ingredients},on:{change:e.changeIngredients,focus:function(t){return e.popoverHide("select-box2")}},model:{value:e.el.ingredients,callback:function(t){e.$set(e.el,"ingredients",t)},expression:"el.ingredients"}},e._l(e.request_ingredients,(function(e,t){return a("el-option",{key:t,attrs:{label:e.item_desc,value:e.item_no}})})),1)],1)])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[e._m(2),e._v(" "),a("div",{staticClass:"col-lg-9",staticStyle:{display:"flex",gap:"5px","justify-content":"center","align-items":"center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.remaining_amount,expression:"remaining_amount"}],staticClass:"form-control",staticStyle:{width:"211px"},attrs:{type:"text",required:""},domProps:{value:e.remaining_amount},on:{input:function(t){t.target.composing||(e.remaining_amount=t.target.value)}}}),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",remote:"",id:"select-box2",placeholder:"หน่วยนับ","data-toggle":"popover","data-placement":"bottom","data-content":e.validate.uom},on:{change:e.changeIngredients,focus:function(t){return e.popoverHide("select-box2")}},model:{value:e.el.uom,callback:function(t){e.$set(e.el,"uom",t)},expression:"el.uom"}},e._l(e.uom,(function(e,t){return a("el-option",{key:t,attrs:{label:e.uom,value:e.uom}})})),1)],1)])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"}),e._v(" "),a("div",{staticClass:"col-lg-9"},[a("button",{class:e.btn_trans.save.class,attrs:{type:"submit"}},[a("i",{class:e.btn_trans.save.icon}),e._v("\n                  "+e._s(e.btn_trans.save.text)+"\n                ")]),e._v(" "),a("button",{class:e.btn_trans.cancel.class,attrs:{type:"button"},on:{click:e.resetEl}},[a("i",{class:e.btn_trans.cancel.icon}),e._v("\n                  "+e._s(e.btn_trans.cancel.text)+"\n                ")])])])])])])])]),e._v(" "),a("loading",{attrs:{active:e.isLoading,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"},[e._v("หมายเลขเครื่อง "),a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(":")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"},[e._v("ตราบุหรี่ "),a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(":")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-lg-3 col-sm-5 col-form-label"},[e._v("จำนวนที่คงเหลือ "),a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(":")])}],!1,null,"4e7a5ae2",null).exports},71915:(e,t,a)=>{var n=a(47305);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("03f1633f",n,!0,{})},33114:(e,t,a)=>{var n=a(26818);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("6ae67163",n,!0,{})}}]);