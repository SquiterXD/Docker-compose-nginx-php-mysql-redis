(self.webpackChunk=self.webpackChunk||[]).push([[7214],{55083:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"td[data-v-18a03448],th[data-v-18a03448]{padding:.25rem}.highlight[data-v-18a03448]{cursor:pointer;background-color:#d4edda}.el-form-item[data-v-18a03448]{margin-bottom:0!important}.mx-datepicker[data-v-18a03448]{height:33px!important}",""]);const i=o},6463:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,'th{z-index:1;background:#fff;position:sticky;top:0}.el-form-item__content{line-height:40px;position:relative;font-size:14px;margin-left:0!important}.table.b-table>thead>tr>[aria-sort]>div{display:flex;justify-content:space-between;align-items:flex-end}.table.b-table>thead>tr>[aria-sort]{cursor:pointer}table.b-table>tfoot>tr>th[aria-sort=descending]>div:before,table.b-table>thead>tr>th[aria-sort=descending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=descending]>div:after,table.b-table>thead>tr>th[aria-sort=descending]>div:after{opacity:1;content:"\\2193";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:before,table.b-table>thead>tr>th[aria-sort=ascending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:after,table.b-table>thead>tr>th[aria-sort=ascending]>div:after{opacity:1;content:"\\2191";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=none]>div:before,table.b-table>thead>tr>th[aria-sort=none]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=none]>div:after,table.b-table>thead>tr>th[aria-sort=none]>div:after{opacity:1;content:"\\21C5";font-weight:400;padding-left:10px}.table-active,.table-active>td,.table-active>th,.table-hover>tbody>tr:hover{background-color:#d4edda!important}',""]);const i=o},37266:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-policy-set-header-id",data:function(){return{rows:[],dataSet:[],loading:!1,result:this.value,isDisabled:void 0!==this.disabled&&this.disabled}},props:["value","name","size","placeholder","popperBody","fixTypeFr","fixTypeSc","check","disabled"],methods:{remoteMethod:function(e){this.dataSet=this.rows.filter((function(t){return t.policy_set_number.toLowerCase().indexOf(e.toLowerCase())>-1||t.policy_set_description.toLowerCase().indexOf(e.toLowerCase())>-1}))},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-set-header",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.check?t.dataSet=t.rows=a.data.filter((function(e){return e.meaning.toLowerCase()==t.check.toLowerCase()})):t.dataSet=t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.getDataRows({policy_set_header_id:"",keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},onchange:function(e){this.$emit("change-lov",e)}},mounted:function(){this.result=this.value?+this.value:this.value,this.getDataRows({policy_set_header_id:this.value,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},watch:{value:function(e,t){this.result=e?+e:e,this.getDataRows({policy_set_header_id:e,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},disabled:function(){this.isDisabled=this.disabled}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.isDisabled},on:{focus:e.onfocus,change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataSet,(function(e,t){return a("el-option",{key:t,attrs:{label:e.policy_set_number+": "+e.policy_set_description,value:e.policy_set_header_id}})})),1)],1)}),[],!1,null,null,null).exports},9882:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-account",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_type:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-type",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_type:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_type===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_type:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_type:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Type",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_type}})})),1)],1)}),[],!1,null,null,null).exports},75721:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-allocation",data:function(){return{dataRows:[],loading:!1,result:this.value,main_account:""}},props:["attrName","value","mainAccount","disabled"],methods:{remoteMethod:function(e){this.getDataRows({sub_account:"",keyword:e,main_account:this.main_account})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/sub-account",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.sub_account===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.main_account=this.mainAccount,this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},watch:{value:function(e,t){this.result=e},mainAccount:function(e,t){this.main_account=e,this.getDataRows({sub_account:this.result,keyword:"",main_account:e})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Sub Account",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.sub_account}})})),1)],1)}),[],!1,null,null,null).exports},84371:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-branch",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","vendorId","disabled"],methods:{remoteMethod:function(e){this.getDataRows({evm_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/evm-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({vendor_id:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.evm_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({vendor_id:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({vendor_id:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"EVM",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.evm_code}})})),1)],1)}),[],!1,null,null,null).exports},61701:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({compnany_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/company-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({compnany_code:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.company_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({compnany_code:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({compnany_code:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Company Code",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_code+": "+e.description,value:e.company_code}})})),1)],1)}),[],!1,null,null,null).exports},49710:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-department",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({department_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({department_code:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.department_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({department_code:"",keyword:""})},watch:{value:function(e,t){this.result=this.value,this.getDataRows({department_code:this.result,keyword:this.result})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Department",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports},31262:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-future-used1",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({reserved1:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved1",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({reserved1:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.reserved1===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({reserved1:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({reserved1:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.reserved1}})})),1)],1)}),[],!1,null,null,null).exports},25826:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-future-used2",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({reserved2:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved2",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({reserved2:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.reserved2===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({reserved2:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({reserved2:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.reserved2}})})),1)],1)}),[],!1,null,null,null).exports},22374:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-inter-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({main_account:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/main-account",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({main_account:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.main_account===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({main_account:this.value,keyword:this.value})},watch:{value:function(e,t){this.result=e,this.getDataRows({main_account:e,keyword:e})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Main Account",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.main_account}})})),1)],1)}),[],!1,null,null,null).exports},30077:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-product",data:function(){return{dataRows:[],loading:!1,result:this.value,department_code:""}},props:["attrName","value","departmentCode","disabled"],methods:{remoteMethod:function(e){this.getDataRows({cost_center_code:"",keyword:e,department_code:this.department_code})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/cost-center-code",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.cost_center_code===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.department_code=this.departmentCode,this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},watch:{value:function(e,t){this.result=e},departmentCode:function(e,t){this.department_code=e,this.getDataRows({cost_center_code:"",keyword:"",department_code:e})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Cost Center",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.cost_center_code}})})),1)],1)}),[],!1,null,null,null).exports},8613:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-project-activity",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_reason:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-reason",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_reason:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_reason===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_reason:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_reason:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Reason",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_reason}})})),1)],1)}),[],!1,null,null,null).exports},57460:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-source",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_year:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-year",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_year:"",keyword:""})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_year===e){var n={value:e,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_year:"",keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({budget_year:e,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Year",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,remote:"",disabled:e.disabled,filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.budget_year}})})),1)],1)}),[],!1,null,null,null).exports},35938:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-sub-account",data:function(){return{dataRows:[],loading:!1,result:this.value,budget_type:""}},props:["attrName","value","budgetType","disabled"],methods:{remoteMethod:function(e){this.getDataRows({budget_detail:"",keyword:e,budget_type:this.budget_type})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-detail",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},change:function(e){if(e)for(var t in this.dataRows){var a=this.dataRows[t];if(a.budget_detail===e){var n={value:e,desc:a.meaning};return void this.$emit("change-lov-segment",n)}}var o={value:e,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.budget_type=this.budgetType,this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},watch:{value:function(e,t){this.result=e},budgetType:function(e,t){this.budget_type=e,this.getDataRows({budget_detail:"",keyword:"",budget_type:e})}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Detail",name:e.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":e.remoteMethod,loading:e.loading,disabled:e.disabled,remote:"",filterable:""},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.budget_detail+": "+e.meaning,value:e.budget_detail}})})),1)],1)}),[],!1,null,null,null).exports},24829:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-type-cost",data:function(){return{rows:[],loading:!1,code:"",desc:"",result:this.value,account:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},description:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},accountId:""}},props:["value","placeholder","popperBody","name","disabled"],methods:{remoteMethod:function(e){this.getDataRows({account_id:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onchange:function(e){var t={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};if(e)for(var a in this.rows){var n=this.rows[a];n.account_id==e&&(t.code=n.account_code,t.id=e,t.desc=n.description,t.account_combine=n.account_combine,t.account_combine_desc=n.account_combine_desc)}else t.code="",t.id="",t.desc="",t.account_combine="",t.account_combine_desc="";this.result=e,this.setPropAccountSplitCombine(t),this.$emit("change-lov",t)},onclick:function(){this.getDataRows({account_id:this.result,keyword:""})},setPropAccountSplitCombine:function(e){if(""!=e.account_combine){var t=e.account_combine.split("."),a=e.account_combine_desc.split("."),n=0,o=0;for(var i in this.account)this.account[i]=t[n],n++;for(var s in this.description)this.description[s]=a[o],o++;this.$emit("split-account",{account:e.account_combine,description:e.account_combine_desc,type_cost:e.code,type_cost_id:e.id})}else this.$emit("split-account",{account:"",description:"",type_cost:"",type_cost_id:""})},receivedDataRows:function(e){var t=this,a={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var n=e.data;if(t.loading=!1,t.rows=n.data,t.accountId&&null!==t.accountId&&void 0!==t.accountId)if(t.rows.length>0)for(var o in t.rows){var i=t.rows[o];i.account_id==t.accountId&&(t.result=i.account_id,a.code=i.account_code,a.id=i.account_id,a.desc=i.description,a.account_combine=i.account_combine,a.account_combine_desc=i.account_combine_desc)}else t.result="",a.code="",a.id=t.accountId,a.desc="",a.account_combine="",a.account_combine_desc="";else a.code="",a.id="",a.desc="",a.account_combine="",a.account_combine_desc="";t.$emit("change-lov",a)})).catch((function(e){swal("Error",e,"error")}))}},mounted:function(){},watch:{value:function(e,t){this.result=e}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.account_code+": "+e.description,value:e.account_id}})})),1)],1)}),[],!1,null,null,null).exports},57214:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var n=a(23570),o=a.n(n),i=a(87757),s=a.n(i),r=a(1550);const c={name:"governor-lov-policy-type",data:function(){return{policy:this.value,policyTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","disabled","sizeSmall","fetchPolicy"],mounted:function(){this.getPolicyType()},methods:{getPolicyType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;axios.get("/ir/ajax/lov/governer-policy-type",{params:e}).then((function(e){var a=e.data;t.policyTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},changePolicyType:function(e){var t=this,a={code:"",desc:"",tag:""};if(e)for(var n in t.policyTypeList){var o=t.policyTypeList[n];o.lookup_code==e&&(a.code=e,a.desc=o.description,a.tag=o.tag)}else a.code="",a.desc="",a.tag="";t.$emit("policyType",a)}},watch:{fetchPolicy:function(e){e&&this.getPolicyType()}}};var l=a(51900);const d=(0,l.Z)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,placeholder:"ประเภทกรมธรรม์",disabled:e.disabled},on:{change:e.changePolicyType},model:{value:e.policy,callback:function(t){e.policy=t},expression:"policy"}},e._l(e.policyTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:""+e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;const u={name:"governor-invoice-lov",data:function(){return{result:this.value,list:[]}},props:["value","disabled","fetchInvoice"],mounted:function(){this.getLovInvoiceType()},methods:{getLovInvoiceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;axios.get("/ir/ajax/lov/invoice-number",{params:e}).then((function(e){var a=e.data;t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},handleChange:function(e){this.$emit("invoice",e)}},watch:{fetchInvoice:function(e){e&&this.getLovInvoiceType()}}};const m=(0,l.Z)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:"เลขที่ใบแจ้งหนี้",disabled:e.disabled},on:{change:e.handleChange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.invoice_number,value:e.invoice_number}})})),1)],1)}),[],!1,null,null,null).exports;const p={name:"gas-station-lov-status",data:function(){return{result:this.value,list:[]}},props:["value","placeholder"],mounted:function(){this.getLovStatus()},methods:{getLovStatus:function(){var e=this;axios.get("/ir/ajax/lov/status").then((function(t){var a=t.data;e.list=a})).catch((function(e){swal("Error",e,"error")}))},handleChange:function(e){this.$emit("status",e)}}};const v=(0,l.Z)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:e.placeholder},on:{change:e.handleChange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.meaning,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var _=a(30381),f=a.n(_);function h(e,t,a,n,o,i,s){try{var r=e[i](s),c=r.value}catch(e){return void a(e)}r.done?t(c):Promise.resolve(c).then(n,o)}const b={components:{lovInsurance:d,lovInvoice:m,lovStatus:v,yearInput:r.Z},name:"index-header-governor",data:function(){return{header:{year:"",policy_type_code:"",invoice_type:"",status:""},oilTypeList:[],groupCodeList:[],statusList:[],rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}]},dateFormat:"YYYY"}},methods:{receivedYear:function(e){var t=this;e?(t.header.year=f()(e).format(t.dateFormat),this.$refs.search_governor.fields.find((function(e){return"year"==e.prop})).clearValidate()):(t.header.year="",this.$refs.search_governor.validateField("year"))},receivedPolicyType:function(e){this.header.policy_type_code=e||""},receivedInvoiceType:function(e){this.header.invoice_type=e||""},receivedStatus:function(e){this.header.status=e||""},Search:function(){this.getGovernor()},Cancel:function(){window.location.reload()},getGovernor:function(){var e=this;e.$emit("show-loading",!0),axios.get("/ir/ajax/persons",{params:e.header}).then(function(){var t,a=(t=s().mark((function t(a){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.data,t.next=3,e.$emit("show-loading",!1);case 3:return t.next=5,e.$emit("dataSearch",n.data);case 5:return t.next=7,e.$emit("dataSearch",[]);case 7:return t.next=9,e.$emit("dataSearch",n.data);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,o){var i=t.apply(e,a);function s(e){h(i,n,o,s,r,"next",e)}function r(e){h(i,n,o,s,r,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}()).catch((function(t){e.$emit("show-loading",!1),swal({title:"Error",text:t,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})}))}},props:["fetchInvoice","fetchPolicy"]};const g=(0,l.Z)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"search_governor",attrs:{model:e.header}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ปี")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",{attrs:{prop:"year"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.header.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year"},on:{dateWasSelected:function(t){return e.receivedYear.apply(void 0,arguments)}},model:{value:e.header.year,callback:function(t){e.$set(e.header,"year",t)},expression:"header.year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("เลขที่ใบแจ้งหนี้")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-invoice",{attrs:{fetchInvoice:e.fetchInvoice},on:{invoice:e.receivedInvoiceType},model:{value:e.header.invoice_type,callback:function(t){e.$set(e.header,"invoice_type",t)},expression:"header.invoice_type"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ประเภทกรมธรรม์")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-insurance",{attrs:{fetchPolicy:e.fetchPolicy},on:{policyType:e.receivedPolicyType},model:{value:e.header.policy_type_code,callback:function(t){e.$set(e.header,"policy_type_code",t)},expression:"header.policy_type_code"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("สถานะ")])]),e._v(" "),a("div",{staticClass:"col-lg-6 col-md-7 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-status",{attrs:{placeholder:"สถานะ"},on:{status:e.receivedStatus},model:{value:e.header.status,callback:function(t){e.$set(e.header,"status",t)},expression:"header.status"}})],1)],1)])])]),e._v(" "),a("div",{staticClass:"text-right el_field"},[a("button",{staticClass:"btn btn-default m-1",attrs:{type:"button"},on:{click:function(t){return e.Search()}}},[a("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา")]),e._v(" "),a("button",{staticClass:"btn btn-warning m-1",attrs:{type:"button"},on:{click:function(t){return e.Cancel()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต")])])])],1)}),[],!1,null,null,null).exports;const y={name:"governor-invoice-lov",data:function(){return{result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","disabled","sizeSmall","fetchInvoice"],mounted:function(){this.getLovInvoiceType()},methods:{getLovInvoiceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;axios.get("/ir/ajax/lov/invoice-type",{params:e}).then((function(e){var a=e.data;t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},handleChange:function(e){this.$emit("invoice",e)}},watch:{fetchInvoice:function(e){this.getLovInvoiceType()}}};const w=(0,l.Z)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,placeholder:"ประเภทใบแจ้งหนี้",disabled:e.disabled},on:{change:e.handleChange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.invoice_type,value:e.invoice_type}})})),1)],1)}),[],!1,null,null,null).exports;var x=a(4510);const C={name:"gas-station-lov-company",data:function(){return{result:this.value?parseInt(this.value):"",list:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","placeholder","disabled","sizeSmall","isSave"],mounted:function(){this.getCompany()},methods:{getCompany:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;axios.get("/ir/ajax/lov/companies",{params:e}).then((function(e){var a=e.data;t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},handleChange:function(e){var t="",a="",n="";if(e)for(var o in this.list){var i=this.list[o];i.company_id===+e&&(t=i.company_number,a=i.company_name,n=e)}else t="",a="",n="";var s={code:t,desc:a,id:n};this.$emit("company",s)}},watch:{value:function(e){this.result=e?+e:e}}};const k=(0,l.Z)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,remote:"",clearable:!0,filterable:"",size:e.sizeDefault,disabled:e.disabled},on:{change:e.handleChange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_number+": "+e.company_name,value:e.company_id}})})),1)],1)}),[],!1,null,null,null).exports;var D=a(61701),T=a(84371),R=a(49710),S=a(30077),A=a(57460),I=a(9882),N=a(35938),E=a(8613),F=a(22374),M=a(75721),P=a(31262),Z=a(25826),Y=a(24829);function j(e,t,a,n,o,i,s){try{var r=e[i](s),c=r.value}catch(e){return void a(e)}r.done?t(c):Promise.resolve(c).then(n,o)}function U(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function s(e){j(i,n,o,s,r,"next",e)}function r(e){j(i,n,o,s,r,"throw",e)}s(void 0)}))}}const L={name:"ir-gas-station-modal-account-code",data:function(){return{argSearchCompany:{compnany_code:"",description:""},expense_account:"",expense_account_desc:"",account:this.accounts,description:this.descriptions,rules:{company:[{required:!0,message:"กรุณาระบุ Company Code",trigger:"change"}],branch:[{required:!0,message:"กรุณาระบุ EVM",trigger:"change"}],department:[{required:!0,message:"กรุณาระบุ Department",trigger:"change"}],product:[{required:!0,message:"กรุณาระบุ Cost Center",trigger:"change"}],source:[{required:!0,message:"กรุณาระบุ Budget Year",trigger:"change"}],account:[{required:!0,message:"กรุณาระบุ Budget Type",trigger:"change"}],subAccount:[{required:!0,message:"กรุณาระบุ Budget Detail",trigger:"change"}],projectActivity:[{required:!0,message:"กรุณาระบุ Budget Reason",trigger:"change"}],interCompany:[{required:!0,message:"กรุณาระบุ Main Account",trigger:"change"}],allocation:[{required:!0,message:"กรุณาระบุ Sub Account",trigger:"change"}],futureUsed1:[{required:!0,message:"กรุณาระบุ Reserved",trigger:"change"}],futureUsed2:[{required:!0,message:"กรุณาระบุ Reserved",trigger:"change"}]},account_id:this.accountId,typeCost:this.type_cost,selectedTypeCostdisabled:!1}},props:["index","rows","accounts","descriptions","disabled","accountId","type_cost"],methods:{clickAgree:function(){var e=this;return U(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.modal_account_mapping.validate(function(){var t=U(s().mark((function t(a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return e.expense_account=e.account.company+"."+e.account.branch+"."+e.account.department+"."+e.account.product+"."+e.account.source+"."+e.account.account+"."+e.account.subAccount+"."+e.account.projectActivity+"."+e.account.interCompany+"."+e.account.allocation+"."+e.account.futureUsed1+"."+e.account.futureUsed2,e.expense_account_desc=(null==e.description.department?"":e.description.department)+"."+(null==e.description.interCompany?"":e.description.interCompany)+"."+(null==e.description.allocation?"":e.description.allocation),e.rows[e.index].expense_account=e.expense_account,t.next=6,axios.get("/ir/ajax/vehicles/get-coa-desc",{params:{coa:e.expense_account}}).then((function(t){e.expense_account_desc=t.data.desc_disply})).then((function(){e.rows[e.index].expense_account_desc=e.expense_account_desc,e.$emit("select-accounts",e.rows)}));case 6:$("#modal_account".concat(e.index)).modal("hide"),t.next=9;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getDataCompany:function(e){this.account.company=e.value,this.description.company=e.desc},getDataBranch:function(e){this.account.branch=e.value,this.description.branch=e.desc},getValueDepartment:function(e){this.account.department=e.value,this.description.department=e.desc},getDataProduct:function(e){this.account.product=e.value,this.description.product=e.desc},getDataSource:function(e){this.account.source=e.value,this.description.source=e.desc},getDataAccount:function(e){this.account.account=e.value,this.description.account=e.desc},getDataSubAccount:function(e){this.account.subAccount=e.value,this.description.subAccount=e.desc},getDataProjectActivity:function(e){this.account.projectActivity=e.value,this.description.projectActivity=e.desc},getDataInterCompany:function(e){this.account.interCompany=e.value,this.description.interCompany=e.desc},getDataAllocation:function(e){this.account.allocation=e.value,this.description.allocation=e.desc},getDataFutureUsed1:function(e){this.account.futureUsed1=e.value,this.description.futureUsed1=e.desc},getDataFutureUsed2:function(e){this.account.futureUsed2=e.value,this.description.futureUsed2=e.desc},getValueAccount:function(e){this.account=e.account,this.description=e.description},getValueTypeCode:function(e,t){this.rows.length>0&&(this.rows[this.index].expense_account_id=e.id,this.rows[this.index].type_cost=e.code),e.code?this.selectedTypeCostdisabled=!0:this.selectedTypeCostdisabled=!1}},components:{lovCompany:D.Z,lovBranch:T.Z,lovDepartment:R.Z,lovProduct:S.Z,lovSource:A.Z,lovAccount:I.Z,lovSubAccount:N.Z,lovProjectActivity:E.Z,lovInterCompany:F.Z,lovAllocation:M.Z,lovFutureUsed1:P.Z,lovFutureUsed2:Z.Z,lovTypeCost:Y.Z}};const B=(0,l.Z)(L,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_account"+e.index,tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.clickAgree()}}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),e._v(" "),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("ข้อมูลรหัสบัญชี (Account Mapping)")])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("el-form",{ref:"modal_account_mapping",staticClass:"demo-ruleForm",attrs:{model:e.account,rules:e.rules,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Company Code *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"company"}},[a("lov-company",{attrs:{attrName:"segmentCompany"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataCompany},model:{value:e.account.company,callback:function(t){e.$set(e.account,"company",t)},expression:"account.company"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              EVM *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"branch"}},[a("lov-branch",{attrs:{attrName:"segmentBranch"+e.index,vendorId:"",disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataBranch},model:{value:e.account.branch,callback:function(t){e.$set(e.account,"branch",t)},expression:"account.branch"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Department *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"department"}},[a("lov-department",{attrs:{attrName:"segmentDepartment"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getValueDepartment},model:{value:e.account.department,callback:function(t){e.$set(e.account,"department",t)},expression:"account.department"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Cost Center *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"product"}},[a("lov-product",{attrs:{attrName:"segmentProduct"+e.index,departmentCode:e.account.department,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataProduct},model:{value:e.account.product,callback:function(t){e.$set(e.account,"product",t)},expression:"account.product"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Year *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"source"}},[a("lov-source",{attrs:{attrName:"segmentSource"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataSource},model:{value:e.account.source,callback:function(t){e.$set(e.account,"source",t)},expression:"account.source"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Type *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"account"}},[a("lov-account",{attrs:{attrName:"segmentAccount"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataAccount},model:{value:e.account.account,callback:function(t){e.$set(e.account,"account",t)},expression:"account.account"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Detail *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"subAccount"}},[a("lov-sub-account",{attrs:{attrName:"segmentSubAccount"+e.index,budgetType:e.account.account,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataSubAccount},model:{value:e.account.subAccount,callback:function(t){e.$set(e.account,"subAccount",t)},expression:"account.subAccount"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Budget Reason *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"projectActivity"}},[a("lov-project-activity",{attrs:{attrName:"segmentProjectActivity"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataProjectActivity},model:{value:e.account.projectActivity,callback:function(t){e.$set(e.account,"projectActivity",t)},expression:"account.projectActivity"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Main Account *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"interCompany"}},[a("lov-inter-company",{attrs:{attrName:"segmentInterCompany"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataInterCompany},model:{value:e.account.interCompany,callback:function(t){e.$set(e.account,"interCompany",t)},expression:"account.interCompany"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Sub Account *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"allocation"}},[a("lov-allocation",{attrs:{attrName:"segmentAllocation"+e.index,mainAccount:e.account.interCompany,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataAllocation},model:{value:e.account.allocation,callback:function(t){e.$set(e.account,"allocation",t)},expression:"account.allocation"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Reserved *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"futureUsed1"}},[a("lov-future-used1",{attrs:{attrName:"segmentFutureUsed1"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataFutureUsed1},model:{value:e.account.futureUsed1,callback:function(t){e.$set(e.account,"futureUsed1",t)},expression:"account.futureUsed1"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[e._v("\n              Reserved *\n            ")]),e._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"futureUsed2"}},[a("lov-future-used2",{attrs:{attrName:"segmentFutureUsed2"+e.index,disabled:e.disabled||e.selectedTypeCostdisabled},on:{"change-lov-segment":e.getDataFutureUsed2},model:{value:e.account.futureUsed2,callback:function(t){e.$set(e.account,"futureUsed2",t)},expression:"account.futureUsed2"}})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickAgree()}}},[a("i",{staticClass:"fa fa-check-circle-o"}),e._v(" ตกลง\n        ")])])])])])}),[],!1,null,null,null).exports;var O=a(37266);function q(e,t,a,n,o,i,s){try{var r=e[i](s),c=r.value}catch(e){return void a(e)}r.done?t(c):Promise.resolve(c).then(n,o)}function V(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function s(e){q(i,n,o,s,r,"next",e)}function r(e){q(i,n,o,s,r,"throw",e)}s(void 0)}))}}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const G={name:"index-table-governor",components:{lovPolicyType:d,lovInvoice:w,currencyInput:x.Z,lovCompany:k,modalAccountCode:B,lovPolicySetHeaderId:O.Z},props:["dataTable","yearHeader","setLabelExpenseFlag","isNullOrUndefined","formatCurrency","setYearCE"],data:function(){return{lastRowId:-1,setDataRowsNotInterface:[],sessionShow:!1,dateFormat:"DD/MM/YYYY",tableData:[],complete:!0,columnSelected:[],columnSelectedId:[],indexTable:0,accountGovernor:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},descriptionGovernor:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},rules:{year:[{required:!0,message:"กรุณาระบุวันปี",trigger:"change"}],start_date:[{required:!0,message:"กรุณาระบุวันที่เริ่มต้น",trigger:"change"}],end_date:[{required:!0,message:"กรุณาระบุวันที่สิ้นสุด",trigger:"change"}],insurance_amount:[{required:!0,message:"กรุณาระบุค่าเบี้ยประกัน",trigger:"change"}],expense_account:[{required:!0,message:"กรุณาระบุรหัสค่าใช้จ่าย",trigger:"change"}],company_id:[{required:!0,message:"กรุณาระบุรหัสผู้รับประกันภัย",trigger:"change"}],invoice_type:[{required:!0,message:"กรุณาระบุประเภทใบแจ้งหนี้",trigger:"change"}],invoice_number:[{required:!0,message:"กรุณาระบุรหัสใบแจ้งหนี้",trigger:"change"}],person_name:[{required:!0,message:"กรุณาระบุชื่อผู้ว่าการ",trigger:"change"}],policy_type_code:[{required:!0,message:"กรุณาระบุประเภทกรมธรรม์",trigger:"change"}],policy_set_header_id:[{required:!0,message:"กรุณาระบุกรมธรรม์ชุดที่",trigger:"change"}]},headerTable:{total:"",discount:"",duty_fee:"",vat:"",net_amount:""},accountId:"",type_cost:"",fields:[{key:"selected",sortable:!1,class:"text-center text-nowrap"},{key:"status",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"reference_document_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 180px;",tdClass:"align-middle"},{key:"year",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 120px;",tdClass:"el_field"},{key:"policy_set_header_id",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 200px;",tdClass:"el_field"},{key:"invoice_number",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 180px;",tdClass:"el_field"},{key:"policy_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 150px;",tdClass:"el_field"},{key:"start_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"end_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"el_field"},{key:"total_days",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"person_name",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 200px;",tdClass:"align-middle"},{key:"policy_type_code",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 230px;",tdClass:"align-middle"},{key:"insurance_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"el_field"},{key:"discount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"el_field"},{key:"duty_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 90px;",tdClass:"align-middle"},{key:"vat_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 120px;",tdClass:"align-middle"},{key:"net_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"align-middle"},{key:"company_id",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 200px;",tdClass:"el_field"},{key:"company_name",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"text-nowrap"},{key:"expense_account",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 420px;",tdClass:"el_field"},{key:"expense_account_desc",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"payment_status",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"voucher_number",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"document_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 180px;",tdClass:"align-middle"},{key:"remove",sortable:!1,class:"text-center text-nowrap",thStyle:"min-width: 80px;"}],totalRows:0,currentPage:1,perPage:100,sortBy:"",sortDesc:!1,sortDirection:"asc",isBusy:!1,dataExport:[]}},methods:{onRowSelected:function(e){this.selected=e},rowClass:function(e,t,a){if(e&&"row"===t)return e.row_id===this.lastRowId?"newLine":void 0},clickSelectRow:function(e,t){var a=this;if($('input[name="governor_select'.concat(e,'"]')).is(":checked")){a.setSelectedColumn(t),a.dataTable.rows.filter((function(e,t){return!a.isDisabled(e)})).length===a.columnSelected.length&&$('input[name="governor_select_all"]').prop("checked",!0)}else{var n=a.columnSelected.indexOf(t);n>-1&&(a.columnSelected.splice(n,1),a.columnSelectedId.splice(n,1)),$('input[name="governor_select_all"]').prop("checked",!1)}},receivedPolicyType:function(e,t,a){var n=this,o=n.dataTable.rows.indexOf(a);e?(this.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".policy_type_code")})).clearValidate(),n.dataTable.rows[o].policy_type_code=e.code,n.dataTable.rows[o].tag=e.tag,this.calAmount(o)):(n.dataTable.rows[o].policy_type_code="",n.dataTable.rows[o].tag="",this.$refs.save_table_line_governor.validateField("rows.".concat(t,".policy_type_code")))},ClickAddRow:function(){var e=this,t=this;t.lastRowId=o()(),axios.get("/ir/ajax/lov/defaultirp0007").then((function(a){var n,o=a.data.datas,i=(z(n={row_id:t.lastRowId,person_id:null,company_id:null==o?void 0:o.company_code,company_name:null==o?void 0:o.company_name,discount_amount:0,document_number:null,discount:0,duty_amount:0,expense_account:null==o?void 0:o.account_combine,expense_account_desc:null==o?void 0:o.account_code_desc,expense_account_id:null==o?void 0:o.gl_expense_account_id,insurance_amount:0,invoice_number:null,invoice_type:null,net_amount:0,payment_date:null,payment_status:null},"person_id",null),z(n,"person_name",null),z(n,"policy_number",null==o?void 0:o.user_policy_number),z(n,"policy_type_code",null),z(n,"policy_type_name",null),z(n,"start_date",null),z(n,"end_date",null),z(n,"status","New"),z(n,"total_days",null),z(n,"vat_amount",0),z(n,"vat_percent",+(null==o?void 0:o.tax)),z(n,"voucher_number",null),z(n,"year",o.thai_year),z(n,"flgAdd",!0),z(n,"company_number",null),z(n,"isDuplicated",!1),z(n,"isDuplicatedInvoice",!1),z(n,"type_cost",null==o?void 0:o.gl_expense_account_code),z(n,"policy_set_header_id",null==o?void 0:o.policy_set_header_id),z(n,"revenue_stamp",null==o?void 0:o.revenue_stamp),z(n,"tag",null==o?void 0:o.include_tax_flag),n),s=t.dataTable.rows.push(i)-1;e.$nextTick((function(){e.complete=!1,e.calAmount(s);var t=e.$el.getElementsByClassName("endTable")[0];t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))}))},clickSelectAll:function(){var e=this;e.columnSelected=[],e.columnSelectedId=[];var t=$('input[name="governor_select_all"]').is(":checked");e.dataTable.rows.forEach((function(a,n){t&&!e.isDisabled(a)&&e.setSelectedColumn(a)}))},clickModalAccount:function(e,t){var a,n,o=this,i=o.dataTable.rows.indexOf(e);if(o.indexTable=i,null!==e.expense_account&&void 0!==e.expense_account){var s=null===(a=e.expense_account)||void 0===a?void 0:a.split("."),r=null===(n=e.expense_account_desc)||void 0===n?void 0:n.split("."),c=0,l=0;if(e.expense_account_desc)for(var d in o.accountGovernor)o.accountGovernor[d]=s[c],c++;else for(var u in o.accountGovernor)o.accountGovernor[u]="",c++;if(e.expense_account_desc)for(var m in o.descriptionGovernor)o.descriptionGovernor[m]=r[l],l++;else for(var p in o.descriptionGovernor)o.descriptionGovernor[p]="",l++;this.accountId=e.expense_account_id,this.type_cost=e.type_cost}},clickRemoveFlgAdd:function(e,t){var a=this;swal({title:"Warning",text:"ต้องการลบหรือไม่?",type:"warning",showCancelButton:!0,showConfirmButton:!0,closeOnConfirm:!1},(function(n){n&&(e.person_id?axios.post("/ir/ajax/persons/delete",e).then((function(e){var n=e.data;a.dataTable.rows.splice(t,1);n.data;swal({title:"Success",text:"",type:"success",showConfirmButton:!0,closeOnConfirm:!0})})):(a.dataTable.rows.splice(t,1),swal({title:"Success",text:"",type:"success",showConfirmButton:!0,closeOnConfirm:!0})))}))},setSelectedColumn:function(e){this.columnSelected.push(e),this.columnSelectedId.push(e.row_id)},receivedInvoice:function(e,t){e?(this.dataTable.rows[t].invoice_type=e,this.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".invoice_type")})).clearValidate()):(this.dataTable.rows[t].invoice_type="",this.$refs.save_table_line_governor.validateField("rows.".concat(t,".invoice_type")))},receivedCompany:function(e,t,a){var n=this,o=n.dataTable.rows.indexOf(a);e?(this.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".company_id")})).clearValidate(),n.dataTable.rows[o].company_id=e.id,n.dataTable.rows[o].company_name=e.desc,n.dataTable.rows[o].company_number=e.code):(this.$refs.save_table_line_governor.validateField("rows.".concat(t,".company_id")),n.dataTable.rows[o].company_id="",n.dataTable.rows[o].company_name="",n.dataTable.rows[o].company_number="")},focusNotKey:function(){$(".readonly").on("keydown paste focus mousedown",(function(e){9!=e.keyCode&&e.preventDefault()}))},clickConfirm:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line_governor.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="Confirmed",e})),$('input[name="governor_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยืนยัน!","warning")},clickClear:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line_governor.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="New",e})),$('input[name="governor_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการรีเซต!","warning")},clickCancel:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line_governor.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="Cancelled",e})),$('input[name="governor_select_all"]').prop("checked",!1),e.columnSelected=[],void(e.columnSelectedId=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยกเลิก!","warning")},clickComplete:function(){var e=this;this.$refs.save_table_line_governor.validate((function(t){if(!t)return!0;e.setComplete()}))},setComplete:function(){this.dataTable.rows.every((function(e){return e.flgAdd}))?this.checkDuplicateField()||this.checkDuplicateInvoice()?swal({title:"Warning",text:"ไม่สามารถบันทึก รายการซ้ำได้",type:"warning"}):(this.dataTable.rows.forEach((function(e){e.isDuplicated=!1,e.isDuplicatedInvoice=!1})),this.saveGovernor()):this.dataTable.rows.find((function(e){return e.isDuplicated||e.isDuplicatedInvoice}))?swal({title:"Warning",text:"ไม่สามารถบันทึก รายการซ้ำได้",type:"warning"}):(this.dataTable.rows.forEach((function(e){e.isDuplicated=!1,e.isDuplicatedInvoice=!1})),this.saveGovernor())},saveGovernor:function(){var e=this,t={data:this.dataTable.rows.map((function(e,t){return e.row_id||(e.row_id=t),e}))};axios.post("/ir/ajax/persons",t).then((function(t){e.complete=!0,e.dataTable.rows.map((function(e,a){return delete e.flgAdd,$('input[name="governor_select'.concat(a,'"]')).prop("checked",!1),t.data.data.rows.map((function(t,a){t.row_id==e.row_id&&(e.person_id=t.person_id,e.document_number=t.document_number)})),e})),e.columnSelected=[],e.$emit("fetchPerson",!0),swal({title:"Success",text:"บันทึกสำเร็จ",type:"success",showCancelButton:!1,showConfirmButton:!0})})).catch((function(e){400===e.response.data.status?swal({title:"Warning",text:e.response.data.message,type:"warning"}):swal({title:"Error",text:e.response.data.message,type:"error"})}))},validateinsurance_amount:function(e){var t=this;t.dataTable.rows[e].insurance_amount<t.dataTable.rows[e].discount&&(swal({title:"Warning",text:"ส่วนลดเบี้ยประกัน ต้องน้อยกว่าเท่ากับ เบี้ยประกัน",type:"warning"}),t.$nextTick((function(){t.dataTable.rows[e].discount=0})))},insuranceChange:function(e,t,a){var n=this,o=n.dataTable.rows.indexOf(a);e?(n.dataTable.rows[o].insurance_amount=e,this.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".insurance_amount")})).clearValidate()):(n.dataTable.rows[o].insurance_amount="",this.$refs.save_table_line_governor.validateField("rows.".concat(t,".insurance_amount"))),n.validateinsurance_amount(o),this.calAmount(o)},discountChange:function(e,t,a){var n=this,o=n.dataTable.rows.indexOf(a);e?n.dataTable.rows[o].discount=e:(n.dataTable.rows[o].discount=0,n.dataTable.rows[o].net_amount=0),n.validateinsurance_amount(o),this.calAmount(o)},dutyFeeChage:function(e,t){this.dataTable.rows[t].duty_amount=e||""},vatChage:function(e,t){this.dataTable.rows[t].vat_amount=e||""},netAmountChage:function(e,t){this.dataTable.rows[t].net_amount=e||""},clickIncomplete:function(){this.complete=!1},getDataRowSelectAccount:function(e){this.dataTable.rows=e},headerTotalChange:function(e){this.headerTable.total=e},headerDiscountChange:function(e){this.headerTable.discount=e},headerDutyFeeChange:function(e){this.headerTable.duty_fee=e},headerVatChange:function(e){this.headerTable.vat=e},headerNetAmountChange:function(e){this.headerTable.net_amount=e},receivedYear:function(e,t,a){var n=this,o=n.dataTable.rows.indexOf(a);n.dataTable.rows[o].year="Invalid date"!=f()(e).format("YYYY")?f()(e).format("YYYY"):"",e?this.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".year")})).clearValidate():this.$refs.save_table_line_governor.validateField("rows.".concat(t,".year"));var i=this.dataTable.rows[o].policy_set_header_id;e&&i&&this.receivedDataMaster({policy_set_header_id:i,date_from:"",date_to:"",year:this.setYearCE("year",n.dataTable.rows[o].year)},o)},getAdjustmentDateStart:function(e,t,a){var n=this;return V(s().mark((function o(){var i,r,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=(i=n).dataTable.rows.indexOf(a),null!==e){o.next=8;break}i.dataTable.rows[r].start_date="",i.dataTable.rows[r].start_timer="",i.$refs.save_table_line_governor.validateField("rows.".concat(t,".start_date")),o.next=17;break;case 8:return i.dataTable.rows[r].start_date=f()(e).format(i.dateFormat),o.next=11,i.parseToDate(e);case 11:c=o.sent,i.dataTable.rows[r].start_timer=c,i.dataTable.rows[r].end_timer=f()(c,"DD/MM/YYYY").add(1,"years").toDate(),i.dataTable.rows[r].end_date=f()(e).add(1,"years").format(i.dateFormat),i.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),i.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 17:i.dataTable.rows[r].start_timer&&i.dataTable.rows[r].end_timer&&(i.dataTable.rows[r].total_days=Math.floor(Math.abs(i.dataTable.rows[r].start_timer-i.dataTable.rows[r].end_timer)/864e5));case 18:case"end":return o.stop()}}),o)})))()},getAdjustmentDateEnd:function(e,t,a,n){var o=this;return V(s().mark((function i(){var r,c,l,d,u;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=(r=o).dataTable.rows.indexOf(n),l=new Date(a.split("/")[1]+"/"+a.split("/")[0]+"/"+a.split("/")[2]),null!==e){i.next=9;break}r.dataTable.rows[c].end_date="",r.dataTable.rows[c].end_timer="",o.$refs.save_table_line_governor.validateField("rows.".concat(t,".end_date")),i.next=15;break;case 9:return r.dataTable.rows[c].end_date=f()(e).format(r.dateFormat),i.next=12,r.parseToDate(e);case 12:d=i.sent,r.dataTable.rows[c].end_timer=f()(d,"DD/MM/YYYY").toDate(),o.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 15:if(null!==l){i.next=21;break}r.dataTable.rows[c].start_date="",r.dataTable.rows[c].start_timer="",r.$refs.save_table_line_governor.validateField("rows.".concat(t,".start_date")),i.next=28;break;case 21:return r.dataTable.rows[c].start_date=f()(l).format(r.dateFormat),i.next=24,r.parseToDate(l);case 24:u=i.sent,r.dataTable.rows[c].start_timer=u,r.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),r.$refs.save_table_line_governor.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 28:r.dataTable.rows[c].start_timer&&r.dataTable.rows[c].end_timer&&(r.dataTable.rows[c].total_days=Math.floor(Math.abs(r.dataTable.rows[c].start_timer-r.dataTable.rows[c].end_timer)/864e5)),(r.dataTable.rows[c].total_days<365||r.dataTable.rows[c].total_days>366)&&swal({title:"Warning",text:"วันที่สิ้นสุดที่คิดค่าเบี้ยประกัน มากกว่าหรือน้อยกว่า 1 ปี ต้องการทำรายการต่อหรือไม่ ?",type:"warning"});case 30:case"end":return i.stop()}}),i)})))()},parseToDate:function(){var e=arguments;return V(s().mark((function t(){var a,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:null,n=e.length>1&&void 0!==e[1]?e[1]:"DD/MM/YYYY",null!=a){t.next=4;break}return t.abrupt("return",f()().toDate());case 4:return t.abrupt("return",f()(a,n).subtract(543,"years").toDate());case 5:case"end":return t.stop()}}),t)})))()},clickSave:function(){var e=this;this.$refs.save_table_line_governor.validate((function(t){t&&e.setComplete()}))},checkDuplicateField:function(){return!1},checkDuplicateInvoice:function(){var e=!1,t=this.dataTable.rows;return t.length>1?(t.forEach((function(a,n){t.find((function(e,t){return n!==t&&a.invoice_number===e.invoice_number}))&&(e=!0)})),e):e=t[0].isDuplicatedInvoice},duplicatedCheckInvoiceNumber:function(e,t){var a=this,n=a.dataTable.rows.indexOf(t),o={data:{rows:a.dataTable.rows,year:t.year,person_name:t.person_name,policy_type_code:t.policy_type_code,invoice_number:t.invoice_number,row_id:t.row_id}};t.invoice_number&&axios.post("/ir/ajax/persons/duplicate-check/invoice-number",o).then((function(e){a.dataTable.rows[n].isDuplicatedInvoice=!1})).catch((function(e){400===e.response.data.status?(a.dataTable.rows[n].isDuplicatedInvoice=!0,swal({title:"Warning",text:"ไม่สามารถเลือกเลขที่ใบแจ้งหนี้ ซ้ำกับรายการที่บันทึกไปแล้วได้",type:"warning"})):swal({title:"Error",text:e.response.data.message,type:"error"})}))},isDisabled:function(e){return!!this.complete||!(!e||"Interface"!==e.status)},isDisabled2:function(e){return 1==this.complete},getValuePolicy:function(e,t,a){var n=this.dataTable.rows.indexOf(a);this.dataTable.rows[n].policy_set_header_id=e,e&&this.receivedDataMaster({policy_set_header_id:e,date_from:"",date_to:"",year:this.setYearCE("year",a.year)},n)},receivedDataMaster:function(e,t){var a=this;axios.get("/ir/ajax/lov/premium-rate",{params:e}).then((function(e){var n=e.data;""===n.data||null===n.data||void 0===n.data?a.dataTable.rows[t].revenue_stamp=0:n.data.revenue_stamp&&null!==n.data.revenue_stamp&&void 0!==n.data.revenue_stamp?a.dataTable.rows[t].revenue_stamp=parseFloat(n.data.revenue_stamp):a.dataTable.rows[t].revenue_stamp=0})).catch((function(e){swal("Error",e,"error")}))},calAmount:function(e){var t=this.dataTable.rows[e],a=t.insurance_amount||0===t.insurance_amount?+t.insurance_amount:0,n=t.discount||0===t.discount?+t.discount:0,o=t.revenue_stamp,i=+t.vat_percent,s=t.tag,r=(a-n)*o/100,c=s&&"N"!=s?(a-n+r)*i/100:0;t.duty_amount=r,t.vat_amount=c;var l=c;t.net_amount=a-n+r+l}},computed:{totalPremium:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"Confirmed"!=t.status&&"Interface"!=t.status||(e+=+t.insurance_amount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},discount:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"Confirmed"!=t.status&&"Interface"!=t.status||(e+=+t.discount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},totalDutyFee:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"Confirmed"!=t.status&&"Interface"!=t.status||(e+=+t.duty_amount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},vat:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"Confirmed"!=t.status&&"Interface"!=t.status||(e+=+t.vat_amount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},netAmount:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"Confirmed"!=t.status&&"Interface"!=t.status||(e+=+t.net_amount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},tableTotal:function(){var e=null,t=null,a=null,n=0,o=0,i=0,s=0,r=0,c=0,l=[],d=[];return 0===this.dataTable.rows.length||(this.dataTable.rows.forEach((function(u){a=t=e=null,(e=d.find((function(e){return e.group_name==u.group_name})))?(e.premium+=parseFloat(u.insurance_amount),e.discount+=parseFloat(u.discount),e.duty_fee+=parseFloat(u.duty_amount),e.vat+=parseFloat(u.vat_amount),e.net_amount+=parseFloat(u.net_amount),u.receivable_code&&(e.rec_insu+=parseFloat(u.net_amount),(t=e.result_receivable.find((function(e){return e.receivable_code==u.receivable_code})))&&(t.net_amount+=parseFloat(u.net_amount)))):d.push({group_name:u.group_name,premium:parseFloat(u.insurance_amount),discount:parseFloat(u.discount),duty_fee:parseFloat(u.duty_amount),vat:parseFloat(u.vat_amount),net_amount:parseFloat(u.net_amount),rec_insu:u.receivable_code?parseFloat(u.net_amount):0,result_receivable:u.receivable_code?[{receivable_code:u.receivable_code,receivable_name:u.receivable_name,net_amount:parseFloat(u.net_amount)}]:[]}),n+=parseFloat(u.insurance_amount),o+=parseFloat(u.discount),i+=parseFloat(u.duty_amount),s+=parseFloat(u.vat_amount),r+=parseFloat(u.net_amount),u.receivable_code&&(c+=parseFloat(u.net_amount),(a=l.find((function(e){return e.receivable_code==u.receivable_code})))?a.net_amount+=parseFloat(u.net_amount):l.push({receivable_code:u.receivable_code,receivable_name:u.receivable_name,net_amount:parseFloat(u.net_amount)}))})),d.push({group_name:"Total",premium:n,discount:o,duty_fee:i,vat:s,net_amount:r,rec_insu:c,result_receivable:l})),d}},watch:{},mounted:function(){window.vm=this}};a(84635),a(92593);const W=(0,l.Z)(G,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"margin_top_20"},[a("div",[a("table",{staticClass:"table table-striped table_style"},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{directives:[{name:"show",rawName:"v-show",value:e.tableTotal.length>0,expression:"tableTotal.length > 0"}],staticClass:"text-nowrap"}),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4)])]),e._v(" "),a("tbody",{attrs:{id:"table_search"}},[e._l(e.tableTotal,(function(t,n){return[a("tr",{key:n,staticClass:"text-right"},[a("td",{staticClass:"text-nowrap",staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.group_name))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.premium)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.discount)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.duty_fee)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.vat)))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(t.net_amount)))])]),e._v(" "),e._l(t.result_receivable,(function(o,i){return a("tr",{key:"rec_"+n+"_"+i,staticClass:"text-right"},[a("td",{attrs:{colspan:"6"}},[e._v("\n                    "+e._s(e.isNullOrUndefined(o.receivable_name))+"\n                ")]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(o.net_amount)||0===e.isNullOrUndefined(o.net_amount)?e.formatCurrency(o.net_amount):e.isNullOrUndefined(t.net_amount)))])])}))]})),e._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===e.tableTotal.length,expression:"tableTotal.length === 0"}],staticClass:"text-center"},[a("td",{attrs:{colspan:"99"}},[e._v("ไม่มีข้อมูล")])])],2),e._v(" "),a("tfoot")]),e._v(" "),a("div",{staticClass:"my-5"},[a("div",{staticClass:"col justify-content-end  padding_12 d-flex"},[a("button",{staticClass:"btn btn-success m-1",attrs:{type:"danger"},on:{click:function(t){return e.ClickAddRow()}}},[a("i",{staticClass:"fa fa-plus"}),e._v("\n                    เพิ่ม\n                ")])])]),e._v(" "),a("div",[a("div",[a("el-form",{ref:"save_table_line_governor",staticClass:"demo-dynamic form_table_line",attrs:{model:e.dataTable,rules:e.rules}},[a("div",{staticClass:"table-responsive"},[a("b-table",{staticStyle:{display:"block",overflow:"auto","max-height":"500px"},attrs:{"table-class":"table table-bordered",busy:e.isBusy,items:e.dataTable.rows,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,"tbody-tr-class":e.rowClass,"primary-key":"row_id","show-empty":"",small:"",hover:"","select-mode":"single",selectable:""},on:{"update:busy":function(t){e.isBusy=t},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("strong",[e._v("Loading...")])])]},proxy:!0},{key:"head(selected)",fn:function(t){return[e._v("\n                                Select All "),a("br"),e._v(" "),a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{staticClass:"form-check-input",staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"governor_select_all",disabled:e.complete},on:{click:function(t){return e.clickSelectAll()}}})])]}},{key:"head(status)",fn:function(t){return[a("div",[e._v("\n                                    IR status"),a("br"),e._v("สถานะ\n                                ")])]}},{key:"head(reference_document_number)",fn:function(t){return[a("div",[e._v("\n                                    Reference "),a("br"),e._v("Document\n                                ")])]}},{key:"head(year)",fn:function(t){return[a("div",[e._v("\n                                    Year"),a("br"),e._v("ปี *\n                                ")])]}},{key:"head(policy_set_header_id)",fn:function(t){return[a("div",[e._v("\n                                    Policy No."),a("br"),e._v("กรมธรรม์ชุดที่ *\n                                ")])]}},{key:"head(invoice_number)",fn:function(t){return[a("div",[e._v("\n                                    Invoice number"),a("br"),e._v("เลขที่ใบแจ้งหนี้ *\n                                ")])]}},{key:"head(policy_number)",fn:function(t){return[a("div",[e._v("\n                                    Policy Number"),a("br"),e._v("เลขที่กรมธรรม์\n                                ")])]}},{key:"head(start_date)",fn:function(t){return[a("div",[e._v("\n                                    Start date"),a("br"),e._v("วันที่เริ่มต้นการคิดเบี้ยประกัน *\n                                ")])]}},{key:"head(end_date)",fn:function(t){return[a("div",[e._v("\n                                    End date"),a("br"),e._v("วันที่สิ้นสุดการคิดเบี้ยประกัน *\n                                ")])]}},{key:"head(total_days)",fn:function(t){return[a("div",[e._v("\n                                    Days"),a("br"),e._v("จำนวนวัน\n                                ")])]}},{key:"head(person_name)",fn:function(t){return[a("div",[e._v("\n                                    Name"),a("br"),e._v("ชื่อ-สกุล ผู้ว่าการ *\n                                ")])]}},{key:"head(policy_type_code)",fn:function(t){return[a("div",[e._v("\n                                    Governor policy type"),a("br"),e._v("ประเภทกรมธรรม์(ผู้ว่าการยาสูบ) *\n                                ")])]}},{key:"head(insurance_amount)",fn:function(t){return[a("div",[e._v("\n                                    Premium"),a("br"),e._v("ค่าเบี้ยประกัน *\n                                ")])]}},{key:"head(discount)",fn:function(t){return[a("div",[e._v("\n                                    Discount"),a("br"),e._v("ส่วนลด\n                                ")])]}},{key:"head(duty_amount)",fn:function(t){return[a("div",[e._v("\n                                    Duty fee"),a("br"),e._v("อากร\n                                ")])]}},{key:"head(vat_amount)",fn:function(t){return[a("div",[e._v("\n                                    Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่ม\n                                ")])]}},{key:"head(net_amount)",fn:function(t){return[a("div",[e._v("\n                                    Net amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิ\n                                ")])]}},{key:"head(company_id)",fn:function(t){return[a("div",[e._v("\n                                    Company code"),a("br"),e._v("รหัสผู้รับประกันภัย *\n                                ")])]}},{key:"head(company_name)",fn:function(t){return[a("div",[e._v("\n                                    Company name"),a("br"),e._v("ผู้รับประกันภัย\n                                ")])]}},{key:"head(expense_account)",fn:function(t){return[a("div",[e._v("\n                                    Expense account"),a("br"),e._v("รหัสบัญชีค่าใช้จ่าย *\n                                ")])]}},{key:"head(expense_account_desc)",fn:function(t){return[a("div",[e._v("\n                                    Expense account description"),a("br"),e._v("บัญชีค่าใช้จ่าย\n                                ")])]}},{key:"head(payment_status)",fn:function(t){return[a("div",[e._v("\n                                    Payment status"),a("br"),e._v("สถานะการจ่ายเงิน\n                                ")])]}},{key:"head(voucher_number)",fn:function(t){return[a("div",[e._v("\n                                    Voucher number"),a("br"),e._v("เลขที่ใบสำคัญ\n                                ")])]}},{key:"head(document_number)",fn:function(t){return[a("div",[e._v("\n                                    Document number"),a("br"),e._v("เลขที่เอกสาร\n                                ")])]}},{key:"head(remove)",fn:function(t){return[a("div",[e._v("\n                                    ลบ\n                                ")])]}},{key:"cell(selected)",fn:function(t){return[a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{class:"form-check-input "+(e.isDisabled(t.item)?"checkbox_edit_disabled":""),staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"governor_select"+t.item.row_id,disabled:e.isDisabled(t.item)},domProps:{value:""+t.item.row_id,checked:e.columnSelectedId.includes(t.item.row_id)},on:{click:function(a){return e.clickSelectRow(t.item.row_id,t.item)}}})])]}},{key:"cell(status)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.status?t.item.status:"")+"\n                                ")])]}},{key:"cell(reference_document_number)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.reference_document_number?t.item.reference_document_number:"")+"\n                                ")])]}},{key:"cell(year)",fn:function(t){return[a("el-form-item",{class:t.item.isDuplicated?"el-input--small is-error":"el-input--small",attrs:{prop:"rows."+t.index+".year",rules:e.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",disabled:e.isDisabled(t.item),pType:"year"},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.receivedYear.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.year,callback:function(a){e.$set(t.item,"year",a)},expression:"row.item.year"}})],1)]}},{key:"cell(policy_set_header_id)",fn:function(t){return[a("el-form-item",{class:t.item.isDuplicated?"el-input--small is-error":"el-input--small",attrs:{prop:"rows."+t.index+".policy_set_header_id",rules:e.rules.policy_set_header_id}},[a("lov-policy-set-header-id",{attrs:{name:"policy_set_header_id"+t.index,size:"small",placeholder:"กรมธรรม์ชุดที่",popperBody:!0,fixTypeFr:"50",fixTypeSc:"",disabled:e.isDisabled2(t.item)},on:{"change-lov":function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.getValuePolicy.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.policy_set_header_id,callback:function(a){e.$set(t.item,"policy_set_header_id",a)},expression:"row.item.policy_set_header_id"}})],1)]}},{key:"cell(invoice_number)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".invoice_number",rules:e.rules.invoice_number}},[a("el-input",{staticClass:"el-input--small",attrs:{disabled:e.isDisabled(t.item),placeholder:"เลขที่ใบแจ้งหนี้"},on:{change:function(a){return e.duplicatedCheckInvoiceNumber(t.index,t.item)}},model:{value:t.item.invoice_number,callback:function(a){e.$set(t.item,"invoice_number",a)},expression:"row.item.invoice_number"}})],1)]}},{key:"cell(policy_number)",fn:function(t){return[a("el-form-item",[a("el-input",{staticClass:"el-input--small",attrs:{placeholder:"เลขที่กรมธรรม์",disabled:e.isDisabled(t.item)},model:{value:t.item.policy_number,callback:function(a){e.$set(t.item,"policy_number",a)},expression:"row.item.policy_number"}})],1)]}},{key:"cell(start_date)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".start_date",rules:e.rules.start_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.start_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่เริ่มต้น",disabled:e.isDisabled(t.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.getAdjustmentDateStart.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.start_date,callback:function(a){e.$set(t.item,"start_date",a)},expression:"row.item.start_date"}})],1)]}},{key:"cell(end_date)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".end_date",rules:e.rules.end_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:t.item.end_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่สิ้นสุด",disabled:e.isDisabled(t.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.getAdjustmentDateEnd.apply(void 0,o.concat([t.index],[t.item.start_date],[t.item]))}},model:{value:t.item.end_date,callback:function(a){e.$set(t.item,"end_date",a)},expression:"row.item.end_date"}})],1)]}},{key:"cell(total_days)",fn:function(t){return[a("div",[e._v(e._s(t.item.total_days?t.item.total_days:""))])]}},{key:"cell(person_name)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".person_name",rules:e.rules.person_name}},[a("el-input",{staticClass:"el-input--small",attrs:{disabled:e.isDisabled(t.item),placeholder:"ชื่อ-สกุล ผู้ว่าการ"},model:{value:t.item.person_name,callback:function(a){e.$set(t.item,"person_name",a)},expression:"row.item.person_name"}})],1)]}},{key:"cell(policy_type_code)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".policy_type_code",rules:e.rules.policy_type_code}},[a("lov-policy-type",{attrs:{placeholder:"ประเภทกรมธรรม์",sizeSmall:!0,disabled:e.isDisabled(t.item)},on:{policyType:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.receivedPolicyType.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.policy_type_code,callback:function(a){e.$set(t.item,"policy_type_code",a)},expression:"row.item.policy_type_code"}})],1)]}},{key:"cell(insurance_amount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+t.index+".insurance_amount",rules:e.rules.insurance_amount}},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:e.isDisabled(t.item),placeholder:"ค่าเบี้ยประกัน","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.insuranceChange.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.insurance_amount,callback:function(a){e.$set(t.item,"insurance_amount",a)},expression:"row.item.insurance_amount"}})],1)])]}},{key:"cell(discount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right"},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:e.isDisabled(t.item),placeholder:"ส่วนลด","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.discountChange.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.discount,callback:function(a){e.$set(t.item,"discount",a)},expression:"row.item.discount"}})],1)])]}},{key:"cell(duty_amount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right"},[e._v("\n\n                                    "+e._s(e.isNullOrUndefined(t.item.duty_amount)||0===e.isNullOrUndefined(t.item.duty_amount)?e.formatCurrency(t.item.duty_amount):e.isNullOrUndefined(t.item.duty_amount))+"\n                                    ")])]}},{key:"cell(vat_amount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right"},[e._v("\n                                    "+e._s(e.isNullOrUndefined(t.item.vat_amount)||0===e.isNullOrUndefined(t.item.vat_amount)?e.formatCurrency(t.item.vat_amount):e.isNullOrUndefined(t.item.vat_amount))+"\n                                    ")])]}},{key:"cell(net_amount)",fn:function(t){return[a("el-form-item",{staticClass:"currency_right"},[e._v("\n                                    "+e._s(e.isNullOrUndefined(t.item.net_amount)||0===e.isNullOrUndefined(t.item.net_amount)?e.formatCurrency(t.item.net_amount):e.isNullOrUndefined(t.item.net_amount))+"\n                                    ")])]}},{key:"cell(company_id)",fn:function(t){return[a("el-form-item",{attrs:{prop:"rows."+t.index+".company_id",rules:e.rules.company_id}},[a("lov-company",{attrs:{value:t.item.company_id,placeholder:"รหัสผู้รับประกันภัย",disabled:e.isDisabled(t.item),isSave:!e.complete},on:{company:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return e.receivedCompany.apply(void 0,o.concat([t.index],[t.item]))}},model:{value:t.item.company_id,callback:function(a){e.$set(t.item,"company_id",a)},expression:"row.item.company_id"}})],1)]}},{key:"cell(company_name)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.company_name?t.item.company_name:"")+"\n                                ")])]}},{key:"cell(expense_account)",fn:function(t){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+t.index+".expense_account",rules:e.rules.expense_account}},[a("el-input",{staticClass:"readonly el-input--small",attrs:{placeholder:"รหัสบัญชี",value:t.item.expense_account,disabled:e.isDisabled(t.item)},model:{value:t.item.expense_account,callback:function(a){e.$set(t.item,"expense_account",a)},expression:"row.item.expense_account"}},[a("el-button",{attrs:{slot:"append","data-toggle":"modal","data-target":"#modal_account"+t.index},on:{click:function(a){return e.clickModalAccount(t.item,t.index)}},slot:"append"},[a("i",{staticClass:"fa fa-search"})])],1)],1)]}},{key:"cell(expense_account_desc)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.expense_account_desc?t.item.expense_account_desc:"")+"\n                                ")])]}},{key:"cell(payment_status)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.payment_status?t.item.payment_status:"")+"\n                                ")])]}},{key:"cell(voucher_number)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.voucher_number?t.item.voucher_number:"")+"\n                                ")])]}},{key:"cell(document_number)",fn:function(t){return[a("div",[e._v("\n                                    "+e._s(t.item.document_number?t.item.document_number:"")+"\n                                ")])]}},{key:"cell(remove)",fn:function(t){return[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"New"==t.item.status&&!e.isDisabled(t.item),expression:"row.item.status == 'New' && !isDisabled(row.item)"}]},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.clickRemoveFlgAdd(t.item,t.index)}}},[a("i",{staticClass:"fa fa-times"}),e._v("\n                                        ลบ\n                                    ")])])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalRows>e.perPage,expression:"totalRows > perPage"}],staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),e._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),e._v(" ยืนยัน\n                                    ")]),e._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n                                    ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n                                    ")])])],1)]),e._v(" "),a("div",{staticClass:"col-md-6 lable_align"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{directives:[{name:"show",rawName:"v-show",value:!e.complete,expression:"!complete"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickSave()}}},[a("i",{staticClass:"fa fa-check-square-o"}),e._v(" บันทึก (ล็อค)\n                                    ")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.complete,expression:"complete"}],staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickIncomplete()}}},[a("i",{staticClass:"fa fa-minus-square-o"}),e._v(" แก้ไข (ปลดล็อค)\n                                    ")])])],1)])])])],1)])]),e._v(" "),a("modal-account-code",{attrs:{index:e.indexTable,rows:e.dataTable.rows,accounts:e.accountGovernor,descriptions:e.descriptionGovernor,disabled:!!e.dataTable.rows[e.indexTable]&&e.isDisabled(e.dataTable.rows[e.indexTable]),accountId:e.accountId,type_cost:e.type_cost},on:{"select-accounts":e.getDataRowSelectAccount}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Premium"),a("br"),e._v("ค่าเบี้ยประกันรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Discount"),a("br"),e._v("ส่วนลดรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Duty Fee"),a("br"),e._v("อากรรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่มรวม")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"text-right"},[e._v("Total Net Amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิรวม")])}],!1,null,"18a03448",null).exports;var H=a(67791);const K={name:"index-governor",data:function(){return{data:{rows:[]},yearHeader:"",fetchInvoice:!1,loading:!1,funcs:H.sD}},components:{IndexHeader:g,IndexTable:W},methods:{showLoading:function(e){this.loading=e},fetchPerson:function(e){this.fetchInvoice=e},financial:function(e){return Number(parseFloat(e).toFixed(2))},receivedDataSearch:function(e){var t=this,a=!1;this.data.rows=e.map((function(e){return e.document_number&&(a=!0),"Y"===e.return_vat_flag?e.return_vat_flag="Yes":e.return_vat_flag="No",null===e.insurance_amount?e.insurance_amount="":e.insurance_amount,null===e.discount?e.discount="":e.discount,e.duty_amount&&(e.duty_amount=t.financial(e.duty_amount)),e.vat_amount&&(e.vat_amount=t.financial(e.vat_amount)),e.net_amount&&(e.net_amount=t.financial(e.net_amount)),"Y"===e.vat_refeaund?e.vat_refund="Yes":e.vat_refund="No",e.policy_set_header_id=e.policy_set_header_id?e.policy_set_header_id:"",e.revenue_stamp=e.revenue_stamp&&null!==e.revenue_stamp&&void 0!==e.revenue_stamp?+e.revenue_stamp:0,e.tag=e.tag?e.tag:"",e.row_id=o()(),e})),this.$refs.tableline.complete=a},receivedHeaderSearch:function(e){this.yearHeader=e.year}}};const J=(0,l.Z)(K,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("index-header",{attrs:{fetchInvoice:e.fetchInvoice},on:{dataSearch:e.receivedDataSearch,headerSearch:e.receivedHeaderSearch,"show-loading":e.showLoading}}),e._v(" "),a("index-table",{ref:"tableline",attrs:{dataTable:e.data,yearHeader:e.yearHeader,setLabelExpenseFlag:e.funcs.setLabelExpenseFlag,isNullOrUndefined:e.funcs.isNullOrUndefined,formatCurrency:e.funcs.formatCurrency,setYearCE:e.funcs.setYearCE},on:{fetchPerson:e.fetchPerson}})],1)}),[],!1,null,null,null).exports},84635:(e,t,a)=>{var n=a(55083);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("a7a2e214",n,!0,{})},92593:(e,t,a)=>{var n=a(6463);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("238f3bc1",n,!0,{})}}]);