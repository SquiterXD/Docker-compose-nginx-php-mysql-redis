(self.webpackChunk=self.webpackChunk||[]).push([[6972],{20806:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,"td[data-v-45b68402],th[data-v-45b68402]{padding:.25rem}.highlight[data-v-45b68402]{cursor:pointer;background-color:#d4edda}.el-form-item[data-v-45b68402]{margin-bottom:0!important}.mx-datepicker[data-v-45b68402]{height:33px!important}",""]);const s=o},44932:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,'th{z-index:1;background:#fff;position:-webkit-sticky;position:sticky;top:0}.el-form-item__content{line-height:40px;position:relative;font-size:14px;margin-left:0!important}.table.b-table>thead>tr>[aria-sort]>div{display:flex;justify-content:space-between;align-items:flex-end}.table.b-table>thead>tr>[aria-sort]{cursor:pointer}table.b-table>tfoot>tr>th[aria-sort=descending]>div:before,table.b-table>thead>tr>th[aria-sort=descending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=descending]>div:after,table.b-table>thead>tr>th[aria-sort=descending]>div:after{opacity:1;content:"\\2193";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:before,table.b-table>thead>tr>th[aria-sort=ascending]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=ascending]>div:after,table.b-table>thead>tr>th[aria-sort=ascending]>div:after{opacity:1;content:"\\2191";padding-left:10px}table.b-table>tfoot>tr>th[aria-sort=none]>div:before,table.b-table>thead>tr>th[aria-sort=none]>div:before{content:"";padding-left:15px}table.b-table>tfoot>tr>th[aria-sort=none]>div:after,table.b-table>thead>tr>th[aria-sort=none]>div:after{opacity:1;content:"\\21C5";font-weight:400;padding-left:10px}.table-active,.table-active>td,.table-active>th,.table-hover>tbody>tr:hover{background-color:#d4edda!important}',""]);const s=o},9882:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-account",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({budget_type:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-type",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({budget_type:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.budget_type===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_type:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({budget_type:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Type",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.budget_type}})})),1)],1)}),[],!1,null,null,null).exports},75721:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-allocation",data:function(){return{dataRows:[],loading:!1,result:this.value,main_account:""}},props:["attrName","value","mainAccount","disabled"],methods:{remoteMethod:function(t){this.getDataRows({sub_account:"",keyword:t,main_account:this.main_account})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/sub-account",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.sub_account===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.main_account=this.mainAccount,this.getDataRows({sub_account:"",keyword:"",main_account:this.main_account})},watch:{value:function(t,e){this.result=t},mainAccount:function(t,e){this.main_account=t,this.getDataRows({sub_account:this.result,keyword:"",main_account:t})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Sub Account",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.sub_account}})})),1)],1)}),[],!1,null,null,null).exports},84371:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-branch",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","vendorId","disabled"],methods:{remoteMethod:function(t){this.getDataRows({evm_code:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/evm-code",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({vendor_id:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.evm_code===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({vendor_id:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({vendor_id:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"EVM",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.evm_code}})})),1)],1)}),[],!1,null,null,null).exports},61701:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({compnany_code:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/company-code",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({compnany_code:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.company_code===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({compnany_code:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({compnany_code:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Company Code",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.company_code+": "+t.description,value:t.company_code}})})),1)],1)}),[],!1,null,null,null).exports},49710:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-department",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({department_code:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({department_code:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.department_code===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({department_code:"",keyword:""})},watch:{value:function(t,e){this.result=this.value,this.getDataRows({department_code:this.result,keyword:this.result})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Department",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.department_code}})})),1)],1)}),[],!1,null,null,null).exports},31262:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-future-used1",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({reserved1:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved1",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({reserved1:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.reserved1===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({reserved1:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({reserved1:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.reserved1}})})),1)],1)}),[],!1,null,null,null).exports},25826:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-future-used2",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({reserved2:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/reserved2",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({reserved2:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.reserved2===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({reserved2:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({reserved2:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Reserved",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.reserved2}})})),1)],1)}),[],!1,null,null,null).exports},22374:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-inter-company",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({main_account:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/main-account",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({main_account:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.main_account===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({main_account:this.value,keyword:this.value})},watch:{value:function(t,e){this.result=t,this.getDataRows({main_account:t,keyword:t})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Main Account",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",disabled:t.disabled,filterable:""},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.main_account}})})),1)],1)}),[],!1,null,null,null).exports},30077:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-product",data:function(){return{dataRows:[],loading:!1,result:this.value,department_code:""}},props:["attrName","value","departmentCode","disabled"],methods:{remoteMethod:function(t){this.getDataRows({cost_center_code:"",keyword:t,department_code:this.department_code})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/cost-center-code",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.cost_center_code===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.department_code=this.departmentCode,this.getDataRows({cost_center_code:"",keyword:"",department_code:this.department_code})},watch:{value:function(t,e){this.result=t},departmentCode:function(t,e){this.department_code=t,this.getDataRows({cost_center_code:"",keyword:"",department_code:t})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Cost Center",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",filterable:"",disabled:t.disabled},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.cost_center_code}})})),1)],1)}),[],!1,null,null,null).exports},8613:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-project-activity",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({budget_reason:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-reason",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({budget_reason:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.budget_reason===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_reason:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({budget_reason:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Reason",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",disabled:t.disabled,filterable:""},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.budget_reason}})})),1)],1)}),[],!1,null,null,null).exports},57460:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-source",data:function(){return{dataRows:[],loading:!1,result:this.value}},props:["attrName","value","disabled"],methods:{remoteMethod:function(t){this.getDataRows({budget_year:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-year",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({budget_year:"",keyword:""})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.budget_year===t){var n={value:t,desc:a.description};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.getDataRows({budget_year:"",keyword:""})},watch:{value:function(t,e){this.result=t,this.getDataRows({budget_year:t,keyword:""})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Year",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,remote:"",disabled:t.disabled,filterable:""},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning+": "+t.description,value:t.budget_year}})})),1)],1)}),[],!1,null,null,null).exports},35938:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-segments-lov-sub-account",data:function(){return{dataRows:[],loading:!1,result:this.value,budget_type:""}},props:["attrName","value","budgetType","disabled"],methods:{remoteMethod:function(t){this.getDataRows({budget_detail:"",keyword:t,budget_type:this.budget_type})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/budget-detail",{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.dataRows=a})).catch((function(t){swal("Error",t,"error")}))},focus:function(t){this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},change:function(t){if(t)for(var e in this.dataRows){var a=this.dataRows[e];if(a.budget_detail===t){var n={value:t,desc:a.meaning};return void this.$emit("change-lov-segment",n)}}var o={value:t,desc:""};this.$emit("change-lov-segment",o)}},mounted:function(){this.budget_type=this.budgetType,this.getDataRows({budget_detail:"",keyword:"",budget_type:this.budget_type})},watch:{value:function(t,e){this.result=t},budgetType:function(t,e){this.budget_type=t,this.getDataRows({budget_detail:"",keyword:"",budget_type:t})}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"Budget Detail",name:t.attrName,"popper-append-to-body":!1,clearable:!0,"remote-method":t.remoteMethod,loading:t.loading,disabled:t.disabled,remote:"",filterable:""},on:{change:t.change,focus:t.focus},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.dataRows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.budget_detail+": "+t.meaning,value:t.budget_detail}})})),1)],1)}),[],!1,null,null,null).exports},24829:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"ir-components-lov-type-cost",data:function(){return{rows:[],loading:!1,code:"",desc:"",result:this.value,account:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},description:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},accountId:""}},props:["value","placeholder","popperBody","name","disabled"],methods:{remoteMethod:function(t){this.getDataRows({account_id:"",keyword:t})},getDataRows:function(t){var e=this;this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:t}).then((function(t){var a=t.data;e.loading=!1,e.rows=a.data})).catch((function(t){swal("Error",t,"error")}))},onchange:function(t){var e={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};if(t)for(var a in this.rows){var n=this.rows[a];n.account_id==t&&(e.code=n.account_code,e.id=t,e.desc=n.description,e.account_combine=n.account_combine,e.account_combine_desc=n.account_combine_desc)}else e.code="",e.id="",e.desc="",e.account_combine="",e.account_combine_desc="";this.result=t,this.setPropAccountSplitCombine(e),this.$emit("change-lov",e)},onclick:function(){this.getDataRows({account_id:this.result,keyword:""})},setPropAccountSplitCombine:function(t){if(""!=t.account_combine){var e=t.account_combine.split("."),a=t.account_combine_desc.split("."),n=0,o=0;for(var s in this.account)this.account[s]=e[n],n++;for(var r in this.description)this.description[r]=a[o],o++;this.$emit("split-account",{account:t.account_combine,description:t.account_combine_desc,type_cost:t.code,type_cost_id:t.id})}else this.$emit("split-account",{account:"",description:"",type_cost:"",type_cost_id:""})},receivedDataRows:function(t){var e=this,a={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:t}).then((function(t){var n=t.data;if(e.loading=!1,e.rows=n.data,e.accountId&&null!==e.accountId&&void 0!==e.accountId)if(e.rows.length>0)for(var o in e.rows){var s=e.rows[o];s.account_id==e.accountId&&(e.result=s.account_id,a.code=s.account_code,a.id=s.account_id,a.desc=s.description,a.account_combine=s.account_combine,a.account_combine_desc=s.account_combine_desc)}else e.result="",a.code="",a.id=e.accountId,a.desc="",a.account_combine="",a.account_combine_desc="";else a.code="",a.id="",a.desc="",a.account_combine="",a.account_combine_desc="";e.$emit("change-lov",a)})).catch((function(t){swal("Error",t,"error")}))}},mounted:function(){},watch:{value:function(t,e){this.result=t}}};const o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.placeholder,"remote-method":t.remoteMethod,loading:t.loading,name:t.name,clearable:!0,"popper-append-to-body":t.popperBody,disabled:t.disabled},on:{change:t.onchange},nativeOn:{click:function(e){return t.onclick(e)}},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.rows,(function(t,e){return a("el-option",{key:e,attrs:{label:t.account_code+": "+t.description,value:t.account_id}})})),1)],1)}),[],!1,null,null,null).exports},96972:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>at});var n=a(23570),o=a.n(n),s=a(87757),r=a.n(s);const i={name:"gas-station-lov-oil-type",data:function(){return{oil:this.value,oilTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","sizeSmall","placeholder","disabled"],mounted:function(){this.getLovGasStationType()},methods:{getLovGasStationType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},e=this;axios.get("/ir/ajax/lov/gas-station-type-master",{params:t}).then((function(t){var a=t.data;e.oilTypeList=a.data})).catch((function(t){swal("Error",t,"error")}))},changeOilType:function(t){var e=this.oilTypeList.find((function(e){return e.type_code===t}));this.$emit("oilType",e)}},watch:{value:function(t){this.oil=t}}};var c=a(51900);const l=(0,c.Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_field"},[a("el-select",{staticClass:"w-100",attrs:{value:t.oil,filterable:"",remote:"",clearable:!0,size:t.sizeDefault,placeholder:t.placeholder,"popper-append-to-body":t.popperBody,disabled:t.disabled},on:{change:t.changeOilType},model:{value:t.oil,callback:function(e){t.oil=e},expression:"oil"}},t._l(t.oilTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:""+t.type_code,value:t.type_code}})})),1)],1)}),[],!1,null,null,null).exports;const d={name:"ir-gas-station-lov-department",data:function(){return{result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","placeholder","popperBody","sizeSmall","disabled"],mounted:function(){this.getDepartment({department_code:"",keyword:this.value})},methods:{remoteMethodDepartment:function(t){this.getDepartment({department_code:"",keyword:t})},getDepartment:function(t){var e=this;axios.get("/ir/ajax/lov/department-code",{params:t}).then((function(t){var a=t.data;e.list=a.data})).catch((function(t){swal("Error",t,"error")}))},focusDepartment:function(){this.getDepartment({department_code:"",keyword:""})},handleChange:function(t){for(var e in this.list){var a=this.list[e];a.department_code===t&&this.$emit("department",a)}t||this.$emit("department","")}},watch:{value:function(t){this.result=t,this.getDepartment({department_code:"",keyword:t})}}};const u=(0,c.Z)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:t.placeholder,remote:"","remote-method":t.remoteMethodDepartment,clearable:!0,filterable:"",size:t.sizeDefault,"popper-append-to-body":t.popperBody,disabled:t.disabled},on:{change:t.handleChange,focus:t.focusDepartment},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(t,e){return a("el-option",{key:e,attrs:{label:t.department_code+": "+t.description,value:t.department_code}})})),1)],1)}),[],!1,null,null,null).exports;const m={name:"gas-station-lov-oil-type",data:function(){return{result:this.value,list:[]}},props:["value","popperBody"],mounted:function(){this.getLovGasStationType()},methods:{getLovGasStationType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},e=this;axios.get("/ir/ajax/lov/group-code",{params:t}).then((function(t){var a=t.data;e.list=a.data})).catch((function(t){swal("Error",t,"error")}))},handleChange:function(t){this.$emit("groupType",t)}},watch:{value:function(t){this.result=t}}};const p=(0,c.Z)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:"กลุ่ม","popper-append-to-body":t.popperBody},on:{change:t.handleChange},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(t,e){return a("el-option",{key:e,attrs:{label:""+t.meaning,value:t.group_code}})})),1)],1)}),[],!1,null,null,null).exports;const f={name:"gas-station-lov-status",data:function(){return{result:this.value,list:[]}},props:["value","placeholder"],mounted:function(){this.getLovStatus()},methods:{getLovStatus:function(){var t=this;axios.get("/ir/ajax/lov/status").then((function(e){var a=e.data;t.list=a})).catch((function(t){swal("Error",t,"error")}))},handleChange:function(t){this.$emit("status",t)}}};const _=(0,c.Z)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:t.placeholder},on:{change:t.handleChange},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(t,e){return a("el-option",{key:e,attrs:{label:""+t.meaning,value:t.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var v=a(1550),h=a(30381),g=a.n(h);const b={name:"modal-fetch-gas-stations",data:function(){return{fetch:{year:"",type_code:"",group_code:"",department_from:"",department_to:"",status:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}]},dateFormat:"YYYY",showLoading:!1}},methods:{resetFields:function(){var t=this;this.$refs.gas_station_modal.resetFields(),axios.get("/ir/ajax/lov/period-year").then((function(e){var a=e.data;t.fetch.year=a.data.period_year.toString()})).catch((function(t){swal("Error",t,"error")}))},receivedYear:function(t){var e=this;t?(e.fetch.year=g()(t).format(e.dateFormat),this.$refs.gas_station_modal.fields.find((function(t){return"year"==t.prop})).clearValidate()):(e.fetch.year="",this.$refs.gas_station_modal.validateField("year"))},receivedOilType:function(t){this.fetch.type_code=t.type_code},receivedGroupType:function(t){this.fetch.group_code=t},receivedStartDepartment:function(t){this.fetch.department_from=t.department_code},receivedEndDepartment:function(t){this.fetch.department_to=t.department_code},clickSearch:function(){var t=this;this.$refs.gas_station_modal.validate((function(e){if(!e)return!1;t.checkFetch()}))},clickClear:function(){this.resetFields()},checkFetch:function(){var t=this;t.showLoading=!0;var e={year:t.fetch.year,type_code:t.fetch.type_code,group_code:t.fetch.group_code,department_from:t.fetch.department_from,department_to:t.fetch.department_to};axios.get("/ir/ajax/extend-gas-stations/check-fetch",{params:e}).then((function(e){var a=e.data;"E"==a.status?(swal("Warning",a.msg,"warning"),t.showLoading=!1):"W"==a.status?swal({title:"Warning",text:a.msg,type:"warning",showCancelButton:!0,closeOnConfirm:!0},(function(e){e?t.getDataRows():t.showLoading=!1})):t.getDataRows()})).catch((function(e){t.showLoading=!1,swal("Error",e,"error")}))},getDataRows:function(){var t=this;this.showLoading=!0;var e={year:t.fetch.year,type_code:t.fetch.type_code,group_code:t.fetch.group_code,department_from:t.fetch.department_from,department_to:t.fetch.department_to};axios.get("/ir/ajax/extend-gas-stations/fetch",{params:e}).then((function(e){var a=e.data;"E"==a.status?(swal("Warning",a.msg,"warning"),t.showLoading=!1):(t.showLoading=!1,t.$emit("fetch-table-header",a.data),$("#modal_gas_station_fetch").modal("hide"))})).catch((function(t){swal({title:"Error",text:t,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})}))}},components:{lovOilType:l,lovGroup:p,lovDepartment:u}};const y=(0,c.Z)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_gas_station_fetch",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showLoading,expression:"showLoading"}]},[t._m(0),t._v(" "),a("el-form",{ref:"gas_station_modal",attrs:{model:t.fetch,rules:t.rules}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[t._v("ปี *")])]),t._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"input_year",attrs:{prop:"year",rules:t.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:t.fetch.year,name:"input_year",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year",popperBody:!1},on:{dateWasSelected:t.receivedYear},model:{value:t.fetch.year,callback:function(e){t.$set(t.fetch,"year",e)},expression:"fetch.year"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[t._v("ประเภทสถานีน้ำมัน")])]),t._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"type_code",attrs:{prop:"type_code"}},[a("lov-oil-type",{attrs:{value:t.fetch.type_code,name:"type_code",popperBody:!1},on:{oilType:t.receivedOilType},model:{value:t.fetch.type_code,callback:function(e){t.$set(t.fetch,"type_code",e)},expression:"fetch.type_code"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[t._v("กลุ่ม")])]),t._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"group_code",attrs:{prop:"group_code"}},[a("lov-group",{attrs:{value:t.fetch.group_code,name:"group",popperBody:!1},on:{groupType:t.receivedGroupType},model:{value:t.fetch.group_code,callback:function(e){t.$set(t.fetch,"group_code",e)},expression:"fetch.group_code"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[t._v("ตั้งแต่รหัสหน่วยงาน")])]),t._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_from",attrs:{prop:"department_from"}},[a("lov-department",{attrs:{value:t.fetch.department_from,placeholder:"ตั้งแต่รหัสหน่วยงาน",name:"department_from",popperBody:!1},on:{department:t.receivedStartDepartment},model:{value:t.fetch.department_from,callback:function(e){t.$set(t.fetch,"department_from",e)},expression:"fetch.department_from"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[t._v("ถึง")])]),t._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_to",attrs:{prop:"department_to"}},[a("lov-department",{attrs:{value:t.fetch.department_to,placeholder:"ถึง",name:"department_to",popperBody:!1},on:{department:t.receivedEndDepartment},model:{value:t.fetch.department_to,callback:function(e){t.$set(t.fetch,"department_to",e)},expression:"fetch.department_to"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.clickSearch()}}},[a("i",{staticClass:"fa fa-database"}),t._v(" ดึงข้อมูล\n           ")]),t._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),t._v(" รีเซต\n           ")])])])],1)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("p",{staticClass:"modal-title text-left"},[t._v("การดึงข้อมูล")])])}],!1,null,null,null).exports;function w(t,e,a,n,o,s,r){try{var i=t[s](r),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,o)}const x={components:{lovOilType:l,lovDepartment:u,lovGroup:p,lovStatus:_,yearInput:v.Z,modalFetch:y},name:"index-header-gas-station",data:function(){return{header:{year:"",type_code:"",group_code:"",department_from:"",department_to:"",status:""},oilTypeList:[],groupCodeList:[],statusList:[],loading:!1,dateFormat:"YYYY",showLoading:!1}},methods:{receivedOilType:function(t){this.header.type_code=t?t.type_code:""},receivedGroupType:function(t){this.header.group_code=t||""},receivedStartDepartment:function(t){this.header.department_from=t?t.department_code:""},receivedEndDepartment:function(t){this.header.department_to=t?t.department_code:""},receivedStatus:function(t){this.header.status=t||""},Search:function(){this.getGasStations()},Cancel:function(){window.location.reload()},getStYear:function(t){this.header.year=t.value},getGasStations:function(){var t=this,e=this;e.$emit("show-loading",!0),axios.get("/ir/ajax/extend-gas-stations",{params:e.header}).then(function(){var a,n=(a=r().mark((function a(n){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=n.data,a.next=3,e.$emit("show-loading",!1);case 3:return a.next=5,t.$emit("dataSearch",[]);case 5:return a.next=7,t.$emit("dataSearch",o.data);case 7:case"end":return a.stop()}}),a)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var s=a.apply(t,e);function r(t){w(s,n,o,r,i,"next",t)}function i(t){w(s,n,o,r,i,"throw",t)}r(void 0)}))});return function(t){return n.apply(this,arguments)}}()).catch((function(t){e.$emit("show-loading",!1),swal({title:"Error",text:t,type:"error",showCancelButton:!1,showConfirmButton:!1})}))},receivedYear:function(t){var e=this;e.header.year="Invalid date"!=g()(t).format(e.dateFormat)?g()(t).format(e.dateFormat):""},fetchTableHeader:function(t){this.$emit("fetch-show-table-header",t)},clickFetch:function(){this.$refs.modal_fetch.resetFields()}}};const C=(0,c.Z)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"searchGasStations",attrs:{model:t.header,loading:t.loading}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("ปี")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year"},on:{dateWasSelected:function(e){return t.receivedYear.apply(void 0,arguments)}},model:{value:t.header.year,callback:function(e){t.$set(t.header,"year",e)},expression:"header.year"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("กลุ่ม")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("lov-group",{on:{groupType:t.receivedGroupType},model:{value:t.header.group_code,callback:function(e){t.$set(t.header,"group_code",e)},expression:"header.group_code"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("ตั้งแต่รหัสหน่วยงาน")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ตั้งแต่รหัสหน่วยงาน"},on:{department:t.receivedStartDepartment},model:{value:t.header.start_department,callback:function(e){t.$set(t.header,"start_department",e)},expression:"header.start_department"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("ประเภทสถานีน้ำมัน")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("lov-oil-type",{attrs:{placeholder:"ประเภทสถานีน้ำมัน"},on:{oilType:t.receivedOilType},model:{value:t.header.type_code,callback:function(e){t.$set(t.header,"type_code",e)},expression:"header.type_code"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("สถานะ")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("lov-status",{attrs:{placeholder:"สถานะ"},on:{status:t.receivedStatus},model:{value:t.header.status,callback:function(e){t.$set(t.header,"status",e)},expression:"header.status"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[a("strong",[t._v("ถึง")])]),t._v(" "),a("div",{staticClass:"col-xl-7 col-lg-8 col-md-8 el_field"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ถึง"},on:{department:t.receivedEndDepartment},model:{value:t.header.end_department,callback:function(e){t.$set(t.header,"end_department",e)},expression:"header.end_department"}})],1)],1)])])]),t._v(" "),a("div",{staticClass:"row align-items-center justify-content-end d-flex mr-2"},[a("button",{staticClass:"btn btn-default m-1",attrs:{type:"button"},on:{click:function(e){return t.Search()}}},[a("i",{staticClass:"fa fa-search"}),t._v(" ค้นหา")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#modal_gas_station_fetch"},on:{click:function(e){return t.clickFetch()}}},[a("i",{staticClass:"fa fa-database"}),t._v(" ดึงข้อมูล\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-warning m-1",attrs:{type:"button"},on:{click:function(e){return t.Cancel()}}},[a("i",{staticClass:"fa fa-repeat"}),t._v(" รีเซต")])])]),t._v(" "),a("modal-fetch",{ref:"modal_fetch",on:{"fetch-table-header":t.fetchTableHeader}})],1)}),[],!1,null,null,null).exports;var k=a(14766),D=a(17159);const T={name:"gas-station-lov-company",data:function(){return{result:this.value?parseInt(this.value):"",list:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","placeholder","disabled","sizeSmall","isSave"],mounted:function(){this.getCompany()},methods:{getCompany:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},e=this;axios.get("/ir/ajax/lov/companies",{params:t}).then((function(t){var a=t.data;e.list=a.data})).catch((function(t){swal("Error",t,"error")}))},handleChange:function(t){var e="",a="",n="";if(t)for(var o in this.list){var s=this.list[o];s.company_id===+t&&(e=s.company_number,a=s.company_name,n=t)}else e="",a="",n="";var r={code:e,desc:a,id:n};this.$emit("company",r)}},watch:{value:function(t){this.result=t?+t:t}}};const S=(0,c.Z)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:t.placeholder,remote:"",clearable:!0,filterable:"",size:t.sizeDefault,disabled:t.disabled},on:{change:t.handleChange},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(t,e){return a("el-option",{key:e,attrs:{label:t.company_number+": "+t.company_name,value:t.company_id}})})),1)],1)}),[],!1,null,null,null).exports;var R=a(61701),E=a(84371),A=a(49710),N=a(30077),I=a(57460),F=a(9882),Y=a(35938),M=a(8613),Z=a(22374),j=a(75721),B=a(31262),L=a(25826),U=a(24829);const P={name:"ir-gas-station-modal-account-code",data:function(){return{argSearchCompany:{compnany_code:"",description:""},expense_account:"",expense_account_desc:"",account:this.accounts,description:this.descriptions,rules:{company:[{required:!0,message:"กรุณาระบุ Company Code",trigger:"change"}],branch:[{required:!0,message:"กรุณาระบุ EVM",trigger:"change"}],department:[{required:!0,message:"กรุณาระบุ Department",trigger:"change"}],product:[{required:!0,message:"กรุณาระบุ Cost Center",trigger:"change"}],source:[{required:!0,message:"กรุณาระบุ Budget Year",trigger:"change"}],account:[{required:!0,message:"กรุณาระบุ Budget Type",trigger:"change"}],subAccount:[{required:!0,message:"กรุณาระบุ Budget Detail",trigger:"change"}],projectActivity:[{required:!0,message:"กรุณาระบุ Budget Reason",trigger:"change"}],interCompany:[{required:!0,message:"กรุณาระบุ Main Account",trigger:"change"}],allocation:[{required:!0,message:"กรุณาระบุ Sub Account",trigger:"change"}],futureUsed1:[{required:!0,message:"กรุณาระบุ Reserved",trigger:"change"}],futureUsed2:[{required:!0,message:"กรุณาระบุ Reserved",trigger:"change"}]},account_id:this.accountId,typeCost:this.type_cost,selectedTypeCostdisabled:!1}},props:["index","rows","accounts","descriptions","disabled","accountId","type_cost"],methods:{clickAgree:function(){var t=this;this.$refs.modal_account_mapping.validate((function(e){e&&(t.expense_account=t.account.company+"."+t.account.branch+"."+t.account.department+"."+t.account.product+"."+t.account.source+"."+t.account.account+"."+t.account.subAccount+"."+t.account.projectActivity+"."+t.account.interCompany+"."+t.account.allocation+"."+t.account.futureUsed1+"."+t.account.futureUsed2,t.expense_account_desc=t.description.department+"."+t.description.interCompany+"."+t.description.allocation,t.rows[t.index].expense_account=t.expense_account,t.rows[t.index].expense_account_desc=t.expense_account_desc,t.$emit("select-accounts",t.rows),$("#modal_account".concat(t.index)).modal("hide"))}))},getDataCompany:function(t){this.account.company=t.value,this.description.company=t.desc},getDataBranch:function(t){this.account.branch=t.value,this.description.branch=t.desc},getValueDepartment:function(t){this.account.department=t.value,this.description.department=t.desc},getDataProduct:function(t){this.account.product=t.value,this.description.product=t.desc},getDataSource:function(t){this.account.source=t.value,this.description.source=t.desc},getDataAccount:function(t){this.account.account=t.value,this.description.account=t.desc},getDataSubAccount:function(t){this.account.subAccount=t.value,this.description.subAccount=t.desc},getDataProjectActivity:function(t){this.account.projectActivity=t.value,this.description.projectActivity=t.desc},getDataInterCompany:function(t){this.account.interCompany=t.value,this.description.interCompany=t.desc},getDataAllocation:function(t){this.account.allocation=t.value,this.description.allocation=t.desc},getDataFutureUsed1:function(t){this.account.futureUsed1=t.value,this.description.futureUsed1=t.desc},getDataFutureUsed2:function(t){this.account.futureUsed2=t.value,this.description.futureUsed2=t.desc},getValueAccount:function(t){this.account=t.account,this.description=t.description},getValueTypeCode:function(t,e){this.rows.length>0&&(this.rows[this.index].expense_account_id=t.id,this.rows[this.index].type_cost=t.code),t.code?this.selectedTypeCostdisabled=!0:this.selectedTypeCostdisabled=!1}},components:{lovCompany:R.Z,lovBranch:E.Z,lovDepartment:A.Z,lovProduct:N.Z,lovSource:I.Z,lovAccount:F.Z,lovSubAccount:Y.Z,lovProjectActivity:M.Z,lovInterCompany:Z.Z,lovAllocation:j.Z,lovFutureUsed1:B.Z,lovFutureUsed2:L.Z,lovTypeCost:U.Z},watch:{accountId:function(t,e){this.account_id=t}}};const O=(0,c.Z)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_account"+t.index,tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.clickAgree()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("p",{staticClass:"modal-title text-left"},[t._v("ข้อมูลรหัสบัญชี (Account Mapping)")])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("el-form",{ref:"modal_account_mapping",staticClass:"demo-ruleForm",attrs:{model:t.account,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              ประเภทค่าใช้จ่าย\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"type_cost"}},[a("lov-type-cost",{attrs:{account_id:t.accountId,placeholder:"ประเภทค่าใช้จ่าย",popperBody:!1,name:"type_cost"+t.index,disabled:t.disabled},on:{"split-account":t.getValueAccount,"change-lov":t.getValueTypeCode},model:{value:t.typeCost,callback:function(e){t.typeCost=e},expression:"typeCost"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Company Code *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"company"}},[a("lov-company",{attrs:{attrName:"segmentCompany"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataCompany},model:{value:t.account.company,callback:function(e){t.$set(t.account,"company",e)},expression:"account.company"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              EVM *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"branch"}},[a("lov-branch",{attrs:{attrName:"segmentBranch"+t.index,vendorId:"",disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataBranch},model:{value:t.account.branch,callback:function(e){t.$set(t.account,"branch",e)},expression:"account.branch"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Department *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"department"}},[a("lov-department",{attrs:{attrName:"segmentDepartment"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getValueDepartment},model:{value:t.account.department,callback:function(e){t.$set(t.account,"department",e)},expression:"account.department"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Cost Center *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"product"}},[a("lov-product",{attrs:{attrName:"segmentProduct"+t.index,departmentCode:t.account.department,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataProduct},model:{value:t.account.product,callback:function(e){t.$set(t.account,"product",e)},expression:"account.product"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Budget Year *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"source"}},[a("lov-source",{attrs:{attrName:"segmentSource"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataSource},model:{value:t.account.source,callback:function(e){t.$set(t.account,"source",e)},expression:"account.source"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Budget Type *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"account"}},[a("lov-account",{attrs:{attrName:"segmentAccount"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataAccount},model:{value:t.account.account,callback:function(e){t.$set(t.account,"account",e)},expression:"account.account"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Budget Detail *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"subAccount"}},[a("lov-sub-account",{attrs:{attrName:"segmentSubAccount"+t.index,budgetType:t.account.account,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataSubAccount},model:{value:t.account.subAccount,callback:function(e){t.$set(t.account,"subAccount",e)},expression:"account.subAccount"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Budget Reason *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"projectActivity"}},[a("lov-project-activity",{attrs:{attrName:"segmentProjectActivity"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataProjectActivity},model:{value:t.account.projectActivity,callback:function(e){t.$set(t.account,"projectActivity",e)},expression:"account.projectActivity"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Main Account *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"interCompany"}},[a("lov-inter-company",{attrs:{attrName:"segmentInterCompany"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataInterCompany},model:{value:t.account.interCompany,callback:function(e){t.$set(t.account,"interCompany",e)},expression:"account.interCompany"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Sub Account *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"allocation"}},[a("lov-allocation",{attrs:{attrName:"segmentAllocation"+t.index,mainAccount:t.account.interCompany,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataAllocation},model:{value:t.account.allocation,callback:function(e){t.$set(t.account,"allocation",e)},expression:"account.allocation"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Reserved *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"futureUsed1"}},[a("lov-future-used1",{attrs:{attrName:"segmentFutureUsed1"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataFutureUsed1},model:{value:t.account.futureUsed1,callback:function(e){t.$set(t.account,"futureUsed1",e)},expression:"account.futureUsed1"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[t._v("\n              Reserved *\n            ")]),t._v(" "),a("div",{staticClass:"col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"futureUsed2"}},[a("lov-future-used2",{attrs:{attrName:"segmentFutureUsed2"+t.index,disabled:t.disabled||t.selectedTypeCostdisabled},on:{"change-lov-segment":t.getDataFutureUsed2},model:{value:t.account.futureUsed2,callback:function(e){t.$set(t.account,"futureUsed2",e)},expression:"account.futureUsed2"}})],1)],1)])])],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.clickAgree()}}},[a("i",{staticClass:"fa fa-check-circle-o"}),t._v(" ตกลง\n        ")])])])])])}),[],!1,null,null,null).exports;function V(t,e,a,n,o,s,r){try{var i=t[s](r),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function G(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var s=t.apply(e,a);function r(t){V(s,n,o,r,i,"next",t)}function i(t){V(s,n,o,r,i,"throw",t)}r(void 0)}))}}const q={name:"index-table-gas-station",data:function(){return{lastRowId:-1,dateFormat:"DD/MM/YYYY",complete:!0,locked:!1,columnSelected:[],columnSelectedId:[],indexTable:0,selectindex:-1,accountGasStations:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},descriptionGasStations:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}],start_date:[{required:!0,message:"กรุณาระบุวันที่เริ่มต้น",trigger:"change"}],end_date:[{required:!0,message:"กรุณาระบุวันที่สิ้นสุด",trigger:"change"}],department_code:[{required:!0,message:"กรุณาระบุรหัสหน่วยงาน",trigger:"change"}],group_code:[{required:!0,message:"กรุณาระบุกลุ่ม",trigger:"change"}],insurance_amount:[{required:!0,message:"กรุณาระบุค่าเบี้ยประกัน",trigger:"change"}],expense_account:[{required:!0,message:"กรุณาระบุรหัสค่าใช้จ่าย",trigger:"change"}],company_id:[{required:!0,message:"กรุณาระบุรหัสผู้รับประกันภัย",trigger:"change"}],type_code:[{required:!0,message:"กรุณาระบุประเภทสถานีน้ำมัน",trigger:"change"}]},accountId:"",type_cost:"",fields:[{key:"selected",sortable:!1,class:"text-center text-nowrap"},{key:"status",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"document_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"align-middle"},{key:"reference_document_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 120px;",tdClass:"align-middle"},{key:"year",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 110px;",tdClass:"el_field"},{key:"type_code",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 120px;",tdClass:"el_field"},{key:"group_name",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 100px;",tdClass:"el_field"},{key:"start_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 150px;",tdClass:"el_field"},{key:"end_date",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 150x;",tdClass:"el_field"},{key:"total_days",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"coverage_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"el_field"},{key:"insurance_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"el_field"},{key:"discount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"el_field"},{key:"duty_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 90px;",tdClass:"align-middle"},{key:"vat_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 120px;",tdClass:"align-middle"},{key:"net_amount",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"align-middle"},{key:"vat_refund",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 140px;",tdClass:"align-middle"},{key:"policy_number",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 150px;",tdClass:"el_field"},{key:"company_id",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 200px;",tdClass:"el_field"},{key:"company_name",sortable:!0,thClass:"text-center text-nowrap",thStyle:"min-width: 165px;",tdClass:"text-nowrap"},{key:"expense_account",sortable:!0,class:"text-center text-nowrap",thStyle:"min-width: 420px;",tdClass:"el_field"},{key:"expense_account_desc",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"expense_flag",sortable:!0,class:"text-center text-nowrap",tdClass:"align-middle"},{key:"remove",sortable:!1,class:"text-center text-nowrap",thStyle:"min-width: 80px;"}],totalRows:0,currentPage:1,perPage:100,sortBy:"",sortDesc:!1,sortDirection:"asc",isBusy:!1,dataExport:[]}},methods:{onRowSelected:function(t){this.selected=t},rowClass:function(t,e,a){if(t&&"row"===e)return t.row_id===this.lastRowId?"newLine":void 0},clickSelectRow:function(t,e){var a=this;if($('input[name="gas_station_select'.concat(t,'"]')).is(":checked")){a.setSelectedColumn(e),a.dataTable.rows.filter((function(t,e){return!a.isDisabled(t)})).length===a.columnSelected.length&&$('input[name="gas_station_select_all"]').prop("checked",!0)}else{var n=a.columnSelected.indexOf(e);n>-1&&(a.columnSelected.splice(n,1),a.columnSelectedId.splice(n,1)),$('input[name="gas_station_select_all"]').prop("checked",!1)}},updateselectindex:function(t){this.selectindex=-1,this.locked=t},selectrow:function(t){this.selectindex=t},clickConfirm:function(){var t=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(e){return!!e&&(t.columnSelected.filter((function(t,e){return t.status="Confirmed",$('input[name="gas_station_select'.concat(e,'"]')).prop("checked",!1),t})),void(t.columnSelected=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยืนยัน!","warning")},clickCancel:function(){var t=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(e){return!!e&&(t.columnSelected.filter((function(t,e){return t.status="Cancelled",$('input[name="gas_station_select'.concat(e,'"]')).prop("checked",!1),t})),void(t.columnSelected=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยกเลิก!","warning")},clickClear:function(){var t=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(e){return!!e&&(t.columnSelected.filter((function(t,e){return t.status="New",$('input[name="gas_station_select'.concat(e,'"]')).prop("checked",!1),t})),void(t.columnSelected=[]))})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการรีเซต!","warning")},clickComplete:function(){var t=this;this.$refs.save_table_line.validate((function(e){e&&t.setComplete()}))},setComplete:function(){if(this.dataTable.rows.every((function(t){return t.flgAdd})))this.checkDuplicateField()?swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"}):(this.dataTable.rows.forEach((function(t){t.isDuplicated=!1})),this.dataTable.rows.find((function(t){return""==t.total_days}))?swal({title:"Warning",text:"ไม่สามารถ Save ได้ เนื่องจากจำนวนวัน เป็น 0",type:"warning"}):this.saveGasStations());else if(this.dataTable.rows.find((function(t){return t.isDuplicated})))swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"});else{this.dataTable.rows.find((function(t){return""==t.total_days}))?swal({title:"Warning",text:"ไม่สามารถ Save ได้ เนื่องจากจำนวนวัน เป็น 0",type:"warning"}):this.saveGasStations()}},saveGasStations:function(){var t=this,e={data:this.dataTable.rows.map((function(t,e){return t.row_id||(t.row_id=e),t}))};axios.post("/ir/ajax/extend-gas-stations",e).then((function(e){t.complete=!1,t.dataTable.rows.map((function(t,a){return delete t.flgAdd,$('input[name="gas_station_select'.concat(a,'"]')).prop("checked",!1),e.data.data.rows.map((function(e){e.row_id==t.row_id&&(t.ex_gas_station_id=e.ex_gas_station_id,t.document_number=e.document_number)})),t})),t.columnSelected=[],swal({title:"Success",text:"บันทึกสำเร็จ",type:"success",showCancelButton:!1,showConfirmButton:!0})})).catch((function(t){400===t.response.data.status?swal({title:"Warning",text:t.response.data.message,type:"warning"}):swal({title:"Error",text:t.response.data.message,type:"error"})}))},clickSelectAll:function(){var t=this;t.columnSelected=[],t.columnSelectedId=[];var e=$('input[name="gas_station_select_all"]').is(":checked");t.dataTable.rows.forEach((function(a,n){e&&!t.isDisabled(a)&&t.setSelectedColumn(a)}))},setSelectedColumn:function(t){this.columnSelected.push(t),this.columnSelectedId.push(t.row_id)},receivedOilType:function(t,e,a){var n=this,o=n.dataTable.rows.indexOf(a);if(t){n.dataTable.rows[o].type_code=t.type_code,n.dataTable.rows[o].group_code=t.group_code,n.dataTable.rows[o].group_name=t.group_desc,n.dataTable.rows[o].vat_refund=t.vat_refund,n.dataTable.rows[o].vat_percent=t.vat_percent,n.dataTable.rows[o].revenue_stamp_percent=t.revenue_stamp_percent,n.dataTable.rows[o].expense_account=t.account_combine,n.dataTable.rows[o].gas_station_id=t.gas_station_id,n.dataTable.rows[o].policy_set_header_id=t.policy_set_header_id;var s=t.account_combine.split(".");axios.get("/ir/ajax/asset/validate-account",{params:{segmentAlls:s}}).then((function(t){n.dataTable.rows[o].expense_account_desc=t.data.desc})),this.duplicatedCheck(n.dataTable.rows[o],o)}else n.dataTable.rows[o].type_code="",n.dataTable.rows[o].group_code="",n.dataTable.rows[o].group_name="",n.dataTable.rows[o].vat_refund="N",n.dataTable.rows[o].vat_percent="",n.dataTable.rows[o].revenue_stamp_percent="",n.dataTable.rows[o].expense_account="",n.dataTable.rows[o].expense_account_desc="",n.dataTable.rows[o].gas_station_id="";this.accountId=t.account_id?t.account_id:"",n.dataTable.rows[o].expense_account_id=this.accountId},receivedDepartment:function(t,e){this.dataTable.rows[e].department_name=t.description,this.dataTable.rows[e].department_code=t.department_code,t?this.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".department_code")})).clearValidate():this.$refs.save_table_line.validateField("rows.".concat(e,".department_code"))},receivedCompany:function(t,e,a){var n=this,o=n.dataTable.rows.indexOf(a);t?(n.dataTable.rows[o].company_name=t.desc,n.dataTable.rows[o].company_id=t.id,n.dataTable.rows[o].company_number=t.code,this.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".company_id")})).clearValidate()):(n.dataTable.rows[o].company_name="",n.dataTable.rows[o].company_id="",n.dataTable.rows[o].company_number="",this.$refs.save_table_line.validateField("rows.".concat(e,".company_id")))},clickModalAccount:function(t,e){var a=this,n=a.dataTable.rows.indexOf(t);if(a.indexTable=n,null!==t.expense_account&&void 0!==t.expense_account){var o=t.expense_account.split("."),s=t.expense_account_desc.split("."),r=0,i=0;if(t.expense_account_desc)for(var c in a.accountGasStations)a.accountGasStations[c]=o[r],r++;if(t.expense_account_desc)for(var l in a.descriptionGasStations)a.descriptionGasStations[l]=s[i],i++;this.accountId=t.expense_account_id,this.type_cost=t.type_cost}},getDataRowSelectAccount:function(t){this.dataTable.rows=t},clickIncomplete:function(){this.locked=!0,this.complete=!1},insuranceChange:function(t,e,a){var n=this,o=n.dataTable.rows.indexOf(a);n.validatediscount(o),t?this.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".insurance_amount")})).clearValidate():(n.dataTable.rows[o].insurance_amount="",this.$refs.save_table_line.validateField("rows.".concat(e,".insurance_amount")))},discountChange:function(t,e,a){var n=this.dataTable.rows.indexOf(a);this.validatediscount(n)},validatediscount:function(t){var e=this;return!(e.dataTable.rows[t].insurance_amount<e.dataTable.rows[t].discount)||(e.dataTable.rows[t].discount=0,swal({title:"Warning",text:"ส่วนลดเบี้ยประกัน ต้องน้อยกว่าเท่ากับ ส่วนลด",type:"warning"}),e.$nextTick((function(){e.dataTable.rows[t].discount=0})),!1)},receivedYear:function(t,e,a){var n=this,o=n.dataTable.rows.indexOf(a);n.dataTable.rows[o].year="Invalid date"!=g()(t).format("YYYY")?g()(t).format("YYYY"):"",t?(this.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".year")})).clearValidate(),this.duplicatedCheck(n.dataTable.rows[o],o)):this.$refs.save_table_line.validateField("rows.".concat(e,".year"))},getAdjustmentDateStart:function(t,e,a){var n=this;return G(r().mark((function o(){var s,i;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=(s=n).dataTable.rows.indexOf(a),null===t?(s.dataTable.rows[i].start_date="",s.dataTable.rows[i].start_timer="",n.$refs.save_table_line.validateField("rows.".concat(e,".start_date"))):(s.dataTable.rows[i].start_date=t,s.dataTable.rows[i].start_timer=g()(t,"DD/MM/YYYY"),s.dataTable.rows[i].end_timer=g()(t,"DD/MM/YYYY").add(1,"years").toDate(),s.dataTable.rows[i].end_date=g()(t,"DD/MM/YYYY").add(1,"years").toDate(),n.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".start_date")})).clearValidate(),n.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".end_date")})).clearValidate()),s.dataTable.rows[i].start_timer&&s.dataTable.rows[i].end_timer&&(s.dataTable.rows[i].total_days=Math.floor(Math.abs(s.dataTable.rows[i].start_timer-s.dataTable.rows[i].end_timer)/864e5));case 4:case"end":return o.stop()}}),o)})))()},getAdjustmentDateEnd:function(t,e,a,n){var o=this;return G(r().mark((function s(){var i,c,l,d,u;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c=(i=o).dataTable.rows.indexOf(n),l=new Date(a.split("/")[1]+"/"+a.split("/")[0]+"/"+a.split("/")[2]),null!==t){s.next=9;break}i.dataTable.rows[c].end_date="",i.dataTable.rows[c].end_timer="",o.$refs.save_table_line.validateField("rows.".concat(e,".end_date")),s.next=15;break;case 9:return i.dataTable.rows[c].end_date=g()(t).format(i.dateFormat),s.next=12,i.parseToDate(t);case 12:d=s.sent,i.dataTable.rows[c].end_timer=g()(d,"DD/MM/YYYY").toDate(),o.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".end_date")})).clearValidate();case 15:if(null!==l){s.next=21;break}i.dataTable.rows[c].start_date="",i.dataTable.rows[c].start_timer="",i.$refs.save_table_line.validateField("rows.".concat(e,".start_date")),s.next=28;break;case 21:return i.dataTable.rows[c].start_date=g()(l).format(i.dateFormat),s.next=24,i.parseToDate(l);case 24:u=s.sent,i.dataTable.rows[c].start_timer=u,i.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".start_date")})).clearValidate(),i.$refs.save_table_line.fields.find((function(t){return t.prop=="rows.".concat(e,".end_date")})).clearValidate();case 28:i.dataTable.rows[c].start_timer&&i.dataTable.rows[c].end_timer&&(i.dataTable.rows[c].total_days=Math.floor(Math.abs(i.dataTable.rows[c].start_timer-i.dataTable.rows[c].end_timer)/864e5)),(i.dataTable.rows[c].total_days<365||i.dataTable.rows[c].total_days>366)&&swal({title:"Warning",text:"วันที่สิ้นสุดที่คิดค่าเบี้ยประกัน มากกว่าหรือน้อยกว่า 1 ปี ต้องการทำรายการต่อหรือไม่ ?",type:"warning"});case 30:case"end":return s.stop()}}),s)})))()},parseToDate:function(){var t=arguments;return G(r().mark((function e(){var a,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:null,n=t.length>1&&void 0!==t[1]?t[1]:"DD/MM/YYYY",null!=a){e.next=4;break}return e.abrupt("return",g()().toDate());case 4:return e.abrupt("return",g()(a,n).subtract(543,"years").toDate());case 5:case"end":return e.stop()}}),e)})))()},clickSave:function(){var t=this;this.$refs.save_table_line.validate((function(e){e&&(t.setComplete(),t.locked=!t.locked)}))},ClickAddRow:function(){var t=this,e=this;e.lastRowId=o()(),this.locked=!0,this.complete=!1,axios.get("/ir/ajax/lov/period-year").then((function(a){var n=a.data,o={row_id:e.lastRowId,ex_gas_station_id:null,gas_station_id:null,document_number:null,year:n.data.period_year.toString(),start_date:null,end_date:null,total_days:null,department_code:null,department_name:null,group_code:null,group_name:null,type_code:null,type_name:null,insurance_amount:0,discount:0,duty_amount:0,revenue_stamp_percent:null,vat_percent:null,vat_amount:0,net_amount:0,return_vat_flag:null,policy_number:null,company_id:null,company_name:null,company_number:null,expense_account_id:null,expense_account:null,expense_account_desc:null,policy_set_header_id:null,status:"New",flgAdd:!0,isDuplicated:!1,expense_flag:"N",type_cost:"",coverage_amount:0};e.dataTable.rows.push(o),t.$nextTick((function(){var e=t.$el.getElementsByClassName("endTable")[0];e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))})).catch((function(t){swal("Error",t,"error")}))},clickRemoveFlgAdd:function(t,e){var a=this,n=a.dataTable.rows.indexOf(t);swal({title:"Warning",text:"ต้องการลบหรือไม่?",type:"warning",showCancelButton:!0,closeOnConfirm:!1},(function(e){e&&(t.ex_gas_station_id?axios.post("/ir/ajax/extend-gas-stations/delete",t).then((function(t){var e=t.data;a.dataTable.rows.splice(n,1);e.data;swal({title:"Success",text:"ลบสำเร็จ",type:"success",showConfirmButton:!0,closeOnConfirm:!1})})):(a.dataTable.rows.splice(n,1),swal({title:"Success",text:"ลบสำเร็จ",type:"success",showCancelButton:!1,showConfirmButton:!0})))}))},checkDuplicateField:function(){var t=!1,e=this.dataTable.rows;return e.length>1?e.forEach((function(a,n){e.find((function(t,e){return n!==e&&a.year===t.year&&a.type_code===t.type_code&&"Cancelled"!==a.status&&"Cancelled"!==t.status}))&&(t=!0)})):t=e[0].isDuplicated&&"Cancelled"!==e[0].status,t},vatAmount:function(t){var e=parseFloat((t.insurance_amount-+t.discount+t.duty_amount)*+t.vat_percent/100).toFixed(2),a=parseInt(e.split(".")[0]).toLocaleString(),n=e.split(".")[1];return t.vat_amount="".concat(a,".").concat(n),"".concat(a,".").concat(n)},netAmount:function(t){var e=parseFloat(t.insurance_amount-+t.discount+t.duty_amount+this.convertCurrenyToNum(t.vat_amount)).toFixed(2),a=parseInt(e.split(".")[0]).toLocaleString(),n=e.split(".")[1];return t.net_amount="".concat(a,".").concat(n),"".concat(a,".").concat(n)},convertCurrenyToNum:function(t){return Number(t.replace(/[^0-9.-]+/g,""))},duplicatedCheck:function(t,e){var a=this,n={data:{rows:a.dataTable.rows,year:t.year,type_code:t.type_code,status:t.status,row_id:e}};t.year&&t.type_code&&axios.post("/ir/ajax/extend-gas-stations/duplicate-check",n).then((function(t){a.dataTable.rows[e].isDuplicated=!1})).catch((function(t){400===t.response.data.status?(a.dataTable.rows[e].isDuplicated=!0,swal({title:"Warning",text:"ไม่สามารถเลือกรายการซ้ำ กับรายการที่บันทึกไปแล้วได้",type:"warning"}),a.$nextTick((function(){a.dataTable.rows[e].type_code=""}))):swal({title:"Error",text:t.response.data.message,type:"error"})}))},isDisabled:function(t){return!this.locked||!(!t||"Interface"!==t.status)},setDefaultDate:function(t,e,a){if(t){if(console.log(t),t.insurance_date){var n=this,o=n.dataTable.rows.indexOf(a),s=g()(String(t.insurance_date)).format("DD/MM/YYYY").split("/"),r=s[0]+"/"+s[1]+"/"+n.dataTable.rows[o].year;n.getAdjustmentDateStart(r,e,a)}vm.dataTable.rows[o].coverage_amount=t.coverage_amount,vm.dataTable.rows[o].duty_amount=t.revenue_stamp_percent}},isCancellDisabled:function(t){if(!this.locked)return!0;var e=this.dataTable.rows.find((function(e){return e.reference_document_number==t.row}));return!("Cancelled"!==t.status||!e)},ClickExport:function(){console.log("ClickExport ClickExport"),console.log("ClickExport <--\x3e ",this.dataExport),axios.get(this.urlExport,{params:{dataExport:this.dataExport}}).then((function(t){})).catch((function(t){console.log(t)}))}},computed:{totalPremium:function(){var t=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(e){"Confirmed"!=e.status&&"Interface"!=e.status||(t+=+e.insurance_amount)}));var e=t.toFixed(2),a=Number(e.split(".")[0]).toLocaleString(),n=e.split(".")[1];return e.split(".").length>1?"".concat(a,".").concat(n):"".concat(t.toLocaleString(),".00")},discount:function(){var t=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(e){"Confirmed"!=e.status&&"Interface"!=e.status||(t+=+e.discount)}));var e=t.toFixed(2),a=Number(e.split(".")[0]).toLocaleString(),n=e.split(".")[1];return e.split(".").length>1?"".concat(a,".").concat(n):"".concat(t.toLocaleString(),".00")},totalDutyFee:function(){var t=this,e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"Confirmed"!=a.status&&"Interface"!=a.status||(e+="string"==typeof a.duty_amount?t.convertCurrenyToNum(a.duty_amount):+a.duty_amount)}));var a=e.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),o=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(o):"".concat(e.toLocaleString(),".00")},vat:function(){var t=this,e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"Confirmed"!=a.status&&"Interface"!=a.status||(e+="string"==typeof a.vat_amount?t.convertCurrenyToNum(a.vat_amount):+a.vat_amount)}));var a=e.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),o=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(o):"".concat(e.toLocaleString(),".00")},netAmountSum:function(){var t=this,e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"Confirmed"!=a.status&&"Interface"!=a.status||(e+="string"==typeof a.net_amount?t.convertCurrenyToNum(a.net_amount):+a.net_amount)}));var a=e.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),o=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(o):"".concat(e.toLocaleString(),".00")},tableTotal:function(){var t=this,e=null,a=0,n=0,o=0,s=0,r=0,i=[],c=[];return 0===this.dataTable.rows.length||(this.dataTable.rows.forEach((function(l){e=null,(e=i.find((function(t){return t.policy_number==l.policy_number})))?(e.insurance_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.insurance_amount?parseFloat(l.insurance_amount):0,e.discount+=("Confirmed"==l.status||"Interface"==l.status)&&l.discount?parseFloat(l.discount):0,e.duty_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.duty_amount?parseFloat(l.duty_amount):0,e.vat_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.vat_amount?"string"==typeof l.vat_amount?t.convertCurrenyToNum(l.vat_amount):l.vat_amount:0,e.net_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.net_amount?"string"==typeof l.net_amount?t.convertCurrenyToNum(l.net_amount):l.net_amount:0,e.status=l.status):(c=i.find((function(t){return t.group_name==l.group_name})))?(c.insurance_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.insurance_amount?parseFloat(l.insurance_amount):0,c.discount+=("Confirmed"==l.status||"Interface"==l.status)&&l.discount?parseFloat(l.discount):0,c.duty_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.duty_amount?parseFloat(l.duty_amount):0,c.vat_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.vat_amount?"string"==typeof l.vat_amount?t.convertCurrenyToNum(l.vat_amount):l.vat_amount:0,c.net_amount+=("Confirmed"==l.status||"Interface"==l.status)&&l.net_amount?"string"==typeof l.net_amount?t.convertCurrenyToNum(l.net_amount):l.net_amount:0,c.status=l.status):i.push({policy_number:l.policy_number,group_name:l.group_name,insurance_amount:("Confirmed"==l.status||"Interface"==l.status)&&l.insurance_amount?parseFloat(l.insurance_amount):0,discount:("Confirmed"==l.status||"Interface"==l.status)&&l.discount?parseFloat(l.discount):0,duty_amount:("Confirmed"==l.status||"Interface"==l.status)&&l.duty_amount?parseFloat(l.duty_amount):0,vat_amount:("Confirmed"==l.status||"Interface"==l.status)&&l.vat_amount?"string"==typeof l.vat_amount?t.convertCurrenyToNum(l.vat_amount):l.vat_amount:0,net_amount:("Confirmed"==l.status||"Interface"==l.status)&&l.net_amount?"string"==typeof l.net_amount?t.convertCurrenyToNum(l.net_amount):l.net_amount:0,status:l.status}),a+=("Confirmed"==l.status||"Interface"==l.status)&&l.insurance_amount?parseFloat(l.insurance_amount):0,n+=("Confirmed"==l.status||"Interface"==l.status)&&l.discount?parseFloat(l.discount):0,o+=("Confirmed"==l.status||"Interface"==l.status)&&l.duty_amount?parseFloat(l.duty_amount):0,s+=("Confirmed"==l.status||"Interface"==l.status)&&l.vat_amount?"string"==typeof l.vat_amount?t.convertCurrenyToNum(l.vat_amount):l.vat_amount:0,r+=("Confirmed"==l.status||"Interface"==l.status)&&l.net_amount?"string"==typeof l.net_amount?t.convertCurrenyToNum(l.net_amount):l.net_amount:0})),i.push({group_name:"Total",insurance_amount:a,discount:n,duty_amount:o,vat_amount:s,net_amount:r})),i}},props:["dataTable","setLabelExpenseFlag","setLabelVatRefund","formatCurrency","urlExport"],components:{lovDepartment:u,dateInput:k.Z,currencyInput:D.Z,lovCompany:S,modalAccountCode:O,lovOilType:l},mounted:function(){window.vm=this},watch:{"dataTable.rows":function(t,e){var a=this;this.dataExport=[],this.dataTable.rows.forEach((function(t){a.dataExport.push(t.ex_gas_station_id)}))}}};var W=a(93379),z=a.n(W),H=a(20806),J={insert:"head",singleton:!1};z()(H.Z,J);H.Z.locals;var K=a(44932),Q={insert:"head",singleton:!1};z()(K.Z,Q);K.Z.locals;const X=(0,c.Z)(q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"margin_top_20"},[a("div",[a("table",{staticClass:"table table-striped table_style"},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{directives:[{name:"show",rawName:"v-show",value:t.tableTotal.length>0,expression:"tableTotal.length > 0"}],staticClass:"text-nowrap"}),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4)])]),t._v(" "),a("tbody",{attrs:{id:"table_search"}},[t._l(t.tableTotal,(function(e,n){return[a("tr",{key:n,staticClass:"text-center"},[a("td",{staticClass:"text-nowrap",staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.group_name))]),t._v(" "),a("td",[t._v(t._s(t.formatCurrency(e.insurance_amount)))]),t._v(" "),a("td",[t._v(t._s(t.formatCurrency(e.discount)))]),t._v(" "),a("td",[t._v(t._s(t.formatCurrency(e.duty_amount)))]),t._v(" "),a("td",[t._v(t._s(t.formatCurrency(e.vat_amount)))]),t._v(" "),a("td",[t._v(t._s(t.formatCurrency(e.net_amount)))])])]})),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===t.tableTotal.length,expression:"tableTotal.length === 0"}],staticClass:"text-center"},[a("td",{attrs:{colspan:"99"}},[t._v("ไม่มีข้อมูล")])])],2)]),t._v(" "),a("div",{staticClass:"my-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 text-left"},[a("form",{attrs:{action:t.urlExport,target:"_bank"}},[a("input",{attrs:{type:"hidden",name:"data_table"},domProps:{value:t.dataExport}}),t._v(" "),t._m(5)])]),t._v(" "),a("div",{staticClass:"col-md-6 text-right"},[a("button",{staticClass:"btn btn-success m-1",attrs:{type:"danger"},on:{click:function(e){return t.ClickAddRow()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" เพิ่ม")])])])]),t._v(" "),a("div",[a("div",[a("el-form",{ref:"save_table_line",staticClass:"demo-dynamic form_table_line",attrs:{model:t.dataTable,rules:t.rules}},[a("div",{staticClass:"table-responsive"},[a("b-table",{staticStyle:{display:"block",overflow:"auto","max-height":"500px"},attrs:{"table-class":"table table-bordered",busy:t.isBusy,items:t.dataTable.rows,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"tbody-tr-class":t.rowClass,"primary-key":"row_id","show-empty":"",small:"",hover:"","select-mode":"single",selectable:""},on:{"update:busy":function(e){t.isBusy=e},"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("strong",[t._v("Loading...")])])]},proxy:!0},{key:"head(selected)",fn:function(e){return[t._v("\n                Select All "),a("br"),t._v(" "),a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{staticClass:"form-check-input",staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"gas_station_select_all",disabled:t.complete},on:{click:function(e){return t.clickSelectAll()}}})])]}},{key:"head(status)",fn:function(e){return[a("div",[t._v("\n                  IR Status"),a("br"),t._v("สถานะ\n                ")])]}},{key:"head(document_number)",fn:function(e){return[a("div",[t._v("\n                  Document Number"),a("br"),t._v("เลขที่เอกสาร\n                ")])]}},{key:"head(reference_document_number)",fn:function(e){return[a("div",[t._v("\n                  Reference "),a("br"),t._v("Document\n                ")])]}},{key:"head(year)",fn:function(e){return[a("div",[t._v("\n                  Year"),a("br"),t._v("ปี *\n                ")])]}},{key:"head(type_code)",fn:function(e){return[a("div",[t._v("\n                  ประเภทสถานีน้ำมัน*\n                ")])]}},{key:"head(group_name)",fn:function(e){return[a("div",[t._v("\n                  Group"),a("br"),t._v("กลุ่ม*\n                ")])]}},{key:"head(start_date)",fn:function(e){return[a("div",[t._v("\n                  Start date"),a("br"),t._v("วันที่เริ่มต้นการคิดเบี้ยประกัน *\n                ")])]}},{key:"head(end_date)",fn:function(e){return[a("div",[t._v("\n                  End date"),a("br"),t._v("วันที่สิ้นสุดการคิดเบี้ยประกัน *\n                ")])]}},{key:"head(total_days)",fn:function(e){return[a("div",[t._v("\n                  Days"),a("br"),t._v("จำนวนวัน\n                ")])]}},{key:"head(coverage_amount)",fn:function(e){return[a("div",[t._v("\n                  Coverage Amount"),a("br"),t._v("ทุนประกัน\n                ")])]}},{key:"head(insurance_amount)",fn:function(e){return[a("div",[t._v("\n                  Premium"),a("br"),t._v("ค่าเบี้ยประกัน *\n                ")])]}},{key:"head(discount)",fn:function(e){return[a("div",[t._v("\n                  Discount"),a("br"),t._v("ส่วนลด\n                ")])]}},{key:"head(duty_amount)",fn:function(e){return[a("div",[t._v("\n                  Duty fee"),a("br"),t._v("อากร\n                ")])]}},{key:"head(vat_amount)",fn:function(e){return[a("div",[t._v("\n                  Vat"),a("br"),t._v("ภาษีมูลค่าเพิ่ม\n                ")])]}},{key:"head(net_amount)",fn:function(e){return[a("div",[t._v("\n                  Net amount"),a("br"),t._v("ค่าเบี้ยประกันสุทธิ\n                ")])]}},{key:"head(vat_refund)",fn:function(e){return[a("div",[t._v("\n                  Tax Recoverable"),a("br"),t._v("ภาษีขอคืนได้\n                ")])]}},{key:"head(policy_number)",fn:function(e){return[a("div",[t._v("\n                  Policy No."),a("br"),t._v("เลขที่กรมธรรม์\n                ")])]}},{key:"head(company_id)",fn:function(e){return[a("div",[t._v("\n                  Company code"),a("br"),t._v("รหัสผู้รับประกันภัย *\n                ")])]}},{key:"head(company_name)",fn:function(e){return[a("div",[t._v("\n                  Company name"),a("br"),t._v("ผู้รับประกันภัย\n                ")])]}},{key:"head(expense_account)",fn:function(e){return[a("div",[t._v("\n                  Expense account"),a("br"),t._v("รหัสบัญชีค่าใช้จ่าย *\n                ")])]}},{key:"head(expense_account_desc)",fn:function(e){return[a("div",[t._v("\n                  Expense account description"),a("br"),t._v("บัญชีค่าใช้จ่าย\n                ")])]}},{key:"head(expense_flag)",fn:function(e){return[a("div",[t._v("\n                  สถานะการตัดค่าใช้จ่าย\n                ")])]}},{key:"head(remove)",fn:function(e){return[a("div",[t._v("\n                  ลบ\n                ")])]}},{key:"cell(selected)",fn:function(e){return[a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{class:"form-check-input "+(t.isDisabled(e.item)?"checkbox_edit_disabled":""),staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"gas_station_select"+e.item.row_id,disabled:t.isDisabled(e.item)},domProps:{value:""+e.item.row_id,checked:t.columnSelectedId.includes(e.item.row_id)},on:{click:function(a){return t.clickSelectRow(e.item.row_id,e.item)}}})])]}},{key:"cell(status)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.item.status?e.item.status:"")+"\n                ")])]}},{key:"cell(document_number)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.item.document_number?e.item.document_number:"")+"\n                ")])]}},{key:"cell(reference_document_number)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.item.reference_document_number?e.item.reference_document_number:"")+"\n                ")])]}},{key:"cell(year)",fn:function(e){return[a("el-form-item",{class:e.item.isDuplicated?"el-input--small is-error":"el-input--small",attrs:{prop:"rows."+e.index+".year",rules:t.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:e.item.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",disabled:t.isDisabled(e.item),pType:"year"},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.receivedYear.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.year,callback:function(a){t.$set(e.item,"year",a)},expression:"row.item.year"}})],1)]}},{key:"cell(type_code)",fn:function(e){return[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+e.index+".type_code",rules:t.rules.type_code}},[a("lov-oil-type",{attrs:{placeholder:"ประเภทสถานีน้ำมัน",sizeSmall:!0,disabled:t.isDisabled(e.item)},on:{oilType:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];t.receivedOilType.apply(void 0,o.concat([e.index],[e.item])),t.setDefaultDate.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.type_code,callback:function(a){t.$set(e.item,"type_code",a)},expression:"row.item.type_code"}})],1)]}},{key:"cell(group_name)",fn:function(e){return[a("el-form-item",{attrs:{prop:"rows."+e.index+".group_code",rules:t.rules.group_name}},[t._v("\n                  "+t._s(e.item.group_name?e.item.group_name:"")+"\n                ")])]}},{key:"cell(start_date)",fn:function(e){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+e.index+".start_date",rules:t.rules.start_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:e.item.start_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่เริ่มต้น",disabled:t.isDisabled(e.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.getAdjustmentDateStart.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.start_date,callback:function(a){t.$set(e.item,"start_date",a)},expression:"row.item.start_date"}})],1)]}},{key:"cell(end_date)",fn:function(e){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+e.index+".end_date",rules:t.rules.end_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"32px"},attrs:{value:e.item.end_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่สิ้นสุด",disabled:t.isDisabled(e.item)},on:{dateWasSelected:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.getAdjustmentDateEnd.apply(void 0,o.concat([e.index],[e.item.start_date],[e.item]))}},model:{value:e.item.end_date,callback:function(a){t.$set(e.item,"end_date",a)},expression:"row.item.end_date"}})],1)]}},{key:"cell(total_days)",fn:function(e){return[a("div",[t._v(t._s(e.item.total_days?e.item.total_days:""))])]}},{key:"cell(coverage_amount)",fn:function(e){return[a("el-form-item",{staticClass:"currency_right"},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:t.isDisabled(e.item),placeholder:"ทุนประกัน","empty-value":0,min:0,minus:!1,precision:2,separator:","},model:{value:e.item.coverage_amount,callback:function(a){t.$set(e.item,"coverage_amount",a)},expression:"row.item.coverage_amount"}})],1)])]}},{key:"cell(insurance_amount)",fn:function(e){return[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+e.index+".insurance_amount",rules:t.rules.insurance_amount}},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:t.isDisabled(e.item),placeholder:"ค่าเบี้ยประกัน","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.insuranceChange.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.insurance_amount,callback:function(a){t.$set(e.item,"insurance_amount",a)},expression:"row.item.insurance_amount"}})],1)])]}},{key:"cell(discount)",fn:function(e){return[a("el-form-item",{staticClass:"currency_right"},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:t.isDisabled(e.item),placeholder:"ส่วนลด","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.discountChange.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.discount,callback:function(a){t.$set(e.item,"discount",a)},expression:"row.item.discount"}})],1)])]}},{key:"cell(duty_amount)",fn:function(e){return[a("el-form-item",{staticClass:"currency_right"},[a("div",{staticClass:"el-input el-input--small"},[a("vue-numeric",{staticClass:"form-control el-input__inner input-currency text-right",staticStyle:{"min-width":"100px"},attrs:{disabled:t.isDisabled(e.item),placeholder:"อากร","empty-value":0,min:0,minus:!1,precision:2,separator:","},on:{change:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.discountChange.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.duty_amount,callback:function(a){t.$set(e.item,"duty_amount",a)},expression:"row.item.duty_amount"}})],1)])]}},{key:"cell(vat_amount)",fn:function(e){return[a("div",{staticClass:"padding_top_10"},[t._v("\n                  "+t._s(t.vatAmount(e.item))+"\n                ")])]}},{key:"cell(net_amount)",fn:function(e){return[a("div",{staticClass:"padding_top_10"},[t._v("\n                  "+t._s(t.netAmount(e.item))+"\n                ")])]}},{key:"cell(vat_refund)",fn:function(e){return[a("div",{staticClass:"padding_top_10"},[t._v("\n                  "+t._s(t.setLabelVatRefund(e.item.vat_refund))+"\n                ")])]}},{key:"cell(policy_number)",fn:function(e){return[a("el-form-item",[a("el-input",{staticClass:"el-input--small",attrs:{placeholder:"เลขที่กรมธรรม์",disabled:t.isDisabled(e.item)},model:{value:e.item.policy_number,callback:function(a){t.$set(e.item,"policy_number",a)},expression:"row.item.policy_number"}})],1)]}},{key:"cell(company_id)",fn:function(e){return[a("el-form-item",{attrs:{prop:"rows."+e.index+".company_id",rules:t.rules.company_id}},[a("lov-company",{attrs:{value:e.item.company_id,placeholder:"รหัสผู้รับประกันภัย",disabled:t.isDisabled(e.item),isSave:!t.complete},on:{company:function(a){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return t.receivedCompany.apply(void 0,o.concat([e.index],[e.item]))}},model:{value:e.item.company_id,callback:function(a){t.$set(e.item,"company_id",a)},expression:"row.item.company_id"}})],1)]}},{key:"cell(company_name)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.item.company_name?e.item.company_name:"")+"\n                ")])]}},{key:"cell(expense_account)",fn:function(e){return[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+e.index+".expense_account",rules:t.rules.expense_account}},[a("el-input",{staticClass:"readonly el-input--small",attrs:{placeholder:"รหัสบัญชี",value:e.item.expense_account,disabled:!0},model:{value:e.item.expense_account,callback:function(a){t.$set(e.item,"expense_account",a)},expression:"row.item.expense_account"}},[a("el-button",{attrs:{slot:"append","data-toggle":"modal","data-target":"#modal_account"+e.index},on:{click:function(a){return t.clickModalAccount(e.item,e.index)}},slot:"append"},[a("i",{staticClass:"fa fa-search"})])],1)],1)]}},{key:"cell(expense_account_desc)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.item.expense_account_desc?e.item.expense_account_desc:"")+"\n                ")])]}},{key:"cell(expense_flag)",fn:function(e){return[a("div",[t._v("\n                  "+t._s(t.setLabelExpenseFlag(e.item.expense_flag))+"\n                ")])]}},{key:"cell(remove)",fn:function(e){return[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"New"==e.item.status&&!t.isDisabled(e.item),expression:"row.item.status == 'New' && !isDisabled(row.item)"}]},[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return t.clickRemoveFlgAdd(e.item,e.index)}}},[a("i",{staticClass:"fa fa-times"}),t._v("\n                          ลบ\n                      ")])])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalRows>t.perPage,expression:"totalRows > perPage"}],staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"right"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),t._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),t._v(" ยืนยัน\n                  ")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.clickCancel()}}},[a("i",{staticClass:"fa fa-times"}),t._v(" ยกเลิก\n                  ")]),t._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),t._v(" รีเซต\n                  ")])])],1)]),t._v(" "),a("div",{staticClass:"col-md-6 lable_align"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],staticClass:"btn btn-primary",attrs:{type:"button",disabled:0===t.dataTable.rows.length},on:{click:function(e){return t.clickSave()}}},[a("i",{staticClass:"fa fa-save"}),t._v(" บันทึก (ล็อค)\n                  ")]),t._v(" "),t.locked?t._e():a("button",{staticClass:"btn btn-danger cursor-pointer",attrs:{type:"button",disabled:0===t.dataTable.rows.length},on:{click:function(e){return t.clickIncomplete()}}},[a("i",{staticClass:"fa fa-minus-square-o"}),t._v(" แก้ไข (ปลดล็อค)\n                  ")])])],1)])])])],1)])]),t._v(" "),a("modal-account-code",{attrs:{index:t.indexTable,rows:t.dataTable.rows,accounts:t.accountGasStations,descriptions:t.descriptionGasStations,disabled:!0,accountId:t.accountId,type_cost:t.type_cost},on:{"select-accounts":t.getDataRowSelectAccount}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[t._v("Total Premium"),a("br"),t._v("ค่าเบี้ยประกันรวม")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[t._v("Total Discount"),a("br"),t._v("ส่วนลดรวม")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[t._v("Total Duty Fee"),a("br"),t._v("อากรรวม")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[t._v("Total Vat"),a("br"),t._v("ภาษีมูลค่าเพิ่มรวม")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center"},[t._v("Total Net Amount"),a("br"),t._v("ค่าเบี้ยประกันสุทธิรวม")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-sm btn-info",attrs:{target:"_bank"}},[a("i",{staticClass:"fa fa-print"}),t._v(" Export")])}],!1,null,"45b68402",null).exports;var tt=a(67791);const et={name:"gas-stations",props:["urlExport"],data:function(){return{data:{rows:[]},loading:!1,funcs:tt.sD}},components:{IndexHeader:C,IndexTable:X},methods:{showLoading:function(t){this.loading=t},test:function(t){this.$refs.indextable.updateselectindex(t)},financial:function(t){return Number(parseFloat(t).toFixed(2))},receivedDataSearchx:function(t){this.receivedDataSearch(t),this.test(!0)},receivedDataSearchy:function(t){this.receivedDataSearch(t),this.test(!1)},receivedDataSearch:function(t){var e=this;this.data.rows=t.map((function(t){return null===t.insurance_amount?t.insurance_amount="":t.insurance_amount,null===t.discount?t.discount="":t.discount,t.duty_amount&&(t.duty_amount=e.financial(t.duty_amount)),t.vat_amount&&(t.vat_amount=e.financial(t.vat_amount)),t.net_amount&&(t.net_amount=e.financial(t.net_amount)),t.vat_refund=t.return_vat_flag,t.row_id=o()(),t}))}},mounted:function(){},created:function(){}};const at=(0,c.Z)(et,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("index-header",{on:{dataSearch:t.receivedDataSearchy,"show-loading":t.showLoading,"fetch-show-table-header":t.receivedDataSearchx}}),t._v(" "),a("index-table",{ref:"indextable",attrs:{dataTable:t.data,setLabelExpenseFlag:t.funcs.setLabelExpenseFlag,setLabelVatRefund:t.funcs.setLabelVatRefund,formatCurrency:t.funcs.formatCurrency,"url-export":t.urlExport}})],1)}),[],!1,null,null,null).exports}}]);