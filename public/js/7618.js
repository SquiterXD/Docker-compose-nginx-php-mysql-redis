(self.webpackChunk=self.webpackChunk||[]).push([[7618],{77757:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var s=a(23645),i=a.n(s)()((function(t){return t[1]}));i.push([t.id,".modal-body{padding:15px!important}.modal-dialog{height:80%!important;padding-top:10%}",""]);const r=i},24628:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var s=a(23645),i=a.n(s)()((function(t){return t[1]}));i.push([t.id,"#tableMainPDP0014{width:100%;border-collapse:separate;border-spacing:0}#tableMainPDP0014 tbody>tr>td:first-child{background:#fff;position:-webkit-sticky;position:sticky;left:0;width:-webkit-min-content;width:-moz-min-content;width:min-content;padding:2px 5px 5px;overflow-x:auto}#tableMainPDP0014 thead{position:-webkit-sticky;position:sticky;top:0;z-index:1;background:#fff}#tableMainPDP0014 tr.first{top:0;background:#fff}#tableMainPDP0014 tr.second,#tableMainPDP0014 tr.third{top:0;position:-webkit-sticky;background:#fff}.sticky-col{position:-webkit-sticky;position:sticky;left:0;background:#fff;z-index:2}.buttonRetrieveLeaves,.buttonRetrieveLeaves:disabled,.buttonRetrieveLeaves:hover{background-color:#f77d24;color:#fff}",""]);const r=i},17618:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var s=a(87757),i=a.n(s),r=a(30381),l=a.n(r),n=a(80455);function o(t,e,a,s,i,r,l){try{var n=t[r](l),o=n.value}catch(t){return void a(t)}n.done?e(o):Promise.resolve(o).then(s,i)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var r=t.apply(e,a);function l(t){o(r,s,i,l,n,"next",t)}function n(t){o(r,s,i,l,n,"throw",t)}l(void 0)}))}}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const _={components:{VueNumeric:a.n(n)()},props:["user-profile","trans-date","token","trans-btn","types","statuses","headers","formLine","h-years","salesFiscalYearNoCreateArr","salesFiscalYearNoArr","LLDYearList"],mounted:function(){},data:function(){var t;return{years:[],year:"",salesFiscal:"",salesFiscalNumber:"",salesFiscalVersion:"",salesFiscals:[],salesFiscalsVersionCreateArr:[],dialogTableVisible:!1,showTable:!1,showLine:!1,lines:[],dLines:[],trlines:[],medicinal_leaves:[],species:[],header:[],salesFiscalYearRevision:"",salesFiscalYearRevisionArr:[],salesFiscalYearNo:"",fiscalYearVision:"",fiscalYearVisionArr:[],uHeaders:[],items:[],typeSelected:"",statusSelect:"INACTIVE",speciesSelected:"",formLines:[],nameUserDefaultLogin:this.userProfile.user_name,salesFiscalYearTHCreateArr:[],salesFiscalYearTHArr:[],form:(t={year:"",lld_year:"",planning_year:"",sales_fiscal_year_no:"",sales_fiscal_year_revision:"",fiscal_year_vision:"",date_updated:"",status:"INACTIVE",date_create:""},d(t,"date_updated",""),d(t,"textarea",""),t),form_update:{tran_status:"",lines:[],tran_approval_date:""},loading:{form:!1,tempSearch:!1,create:!1,save:!1},search:{year:"",salesFiscalYearNo:"",salesFiscalYearRevision:""},isDisabled:{species:!0,type:!0,status:!0,tranApprovalDate:!0,textarea:!0,printAction:!0,retrieveLeaves:!0,lldYear:!0}}},methods:{getYears:function(){var t=this;axios.get("/pd/ajax/pdp0014/get-years").then((function(e){200==e.status&&(t.years=e.data.years)})).catch((function(t){}))},getTempSalesFiscalYearTH:function(t){var e=this;this.loading.tempSearch=!0,this.salesFiscalYearNo=t||this.salesFiscalYearNo,this.salesFiscalYearRevisionArr=[],this.fiscalYearVisionArr=[],this.year="",this.salesFiscalYearRevision="",this.fiscalYearVision="",axios.get("/pd/ajax/pdp0014/get-temp-sales-fiscal-year-TH?salesFiscalYearNo="+this.salesFiscalYearNo).then((function(t){200==t.status&&(e.salesFiscalYearTHArr=t.data.salesFiscalYearTHArr),e.loading.tempSearch=!1})).catch((function(t){e.loading.tempSearch=!1}))},getTempSalesFiscalYearRevision:function(t,e){var a=this;this.loading.tempSearch=!0,this.salesFiscalYearRevisionArr=[],this.salesFiscalYearRevision="",this.fiscalYearVisionArr=[],this.fiscalYearVision="";var s={year:t||this.year,salesFiscalYearNo:e||this.salesFiscalYearNo};axios.get("/pd/ajax/pdp0014/get-temp-sales-fiscal-year-revision",{params:s}).then((function(t){200==t.status&&(a.salesFiscalYearRevisionArr=t.data.salesFiscalYearRevision),a.loading.tempSearch=!1})).catch((function(t){a.loading.tempSearch=!1}))},getTempFiscalYearVision:function(t,e,a){var s=this;this.loading.tempSearch=!0,this.fiscalYearVisionArr=[],this.fiscalYearVision="";var i={year:t||this.year,salesFiscalYearNo:e||this.salesFiscalYearNo,salesFiscalYearRevision:a||this.salesFiscalYearRevision};axios.get("/pd/ajax/pdp0014/get-temp-fiscal-year-vision",{params:i}).then((function(t){200==t.status&&(s.fiscalYearVisionArr=t.data.fiscalYearVision),s.loading.tempSearch=!1})).catch((function(t){s.loading.tempSearch=!1}))},searchHeaders:function(){var t=this;this.uHeaders=[],this.loading.tempSearch=!0;var e={year:this.year,salesFiscalYearNo:this.salesFiscalYearNo,salesFiscalYearRevision:this.salesFiscalYearRevision,fiscalYearVision:this.fiscalYearVision};axios.get("/pd/ajax/pdp0014/search-headers",{params:e}).then((function(e){200==e.status&&(t.uHeaders=e.data.headers),t.loading.tempSearch=!1})).catch((function(e){t.loading.tempSearch=!1}))},getSalesFiscals:function(t){var e=this;this.showTable=!0,this.dialogTableVisible=!0,"get-salesFiscalYearTH"==t&&(this.salesFiscalYearTHCreateArr=[],this.search.year="",this.salesFiscalsVersionCreateArr=[],this.search.salesFiscalYearRevision=""),"get-version"==t&&(this.salesFiscalsVersionCreateArr=[],this.search.salesFiscalYearRevision=""),axios.get("/pd/ajax/pdp0014/get-sales-fiscals?action="+t+"&year="+this.search.year+"&salesFiscalYearNo="+this.search.salesFiscalYearNo+"&salesFiscalYearRevision="+this.search.salesFiscalYearRevision).then((function(a){200==a.status&&("get-salesFiscalYearTH"==t&&(e.salesFiscalYearTHCreateArr=a.data.salesFiscalYearTHCreateArr),"get-version"==t&&(e.salesFiscalsVersionCreateArr=a.data.salesFiscalsVersionCreateArr))})).catch((function(t){}))},searchSalesFiscal:function(t){var e=this;console.log("aa"),axios.get("/pd/ajax/pdp0014/get-sales-fiscals?action="+t+"&year="+this.search.year+"&salesFiscalYearNo="+this.search.salesFiscalYearNo+"&salesFiscalYearRevision="+this.search.salesFiscalYearRevision).then((function(t){200==t.status&&(e.salesFiscals=t.data.salesFiscals)})).catch((function(t){}))},selectSalesFiscal:function(t){this.form.textarea="",this.statusSelect="",this.header.tran_approval_date="",this.dialogTableVisible=!1,this.showTable=!1,this.search.salesFiscalYearNo=this.salesFiscals[t].sales_fiscal_year_no,this.getSalesFiscals("get-salesFiscalYearTH"),this.search.year=this.salesFiscals[t].sales_fiscal_year_th,this.getSalesFiscals("get-version"),this.search.salesFiscalYearRevision=this.salesFiscals[t].sales_fiscal_year_revision},insertHeader:function(){this.form.period_year=this.header.sales_fiscal_year_th,this.form.lld_year=this.header.lld_year,this.form.planning_year=this.header.sales_fiscal_year_th,this.form.sales_fiscal_year_no=this.header.sales_fiscal_year_no,this.form.sales_fiscal_year_revision=this.header.sales_fiscal_year_revision,this.form.fiscal_year_vision=this.header.fiscal_year_vision,this.form.date_updated=this.header.last_update_date,this.isDisabled.type=!1,this.isDisabled.status=!1,this.isDisabled.textarea=!1,this.isDisabled.lldYear=!1},getItems:function(t){var e=this;"tobacco_type"==t?(this.showTable=!1,this.trlines=[],axios.get("/pd/ajax/pdp0014/search-species",{params:{tobacco_type_code:this.typeSelected}}).then((function(t){if(t.data.species.length>0){if(e.speciesSelected="",e.isDisabled.species=!1,e.species=t.data.species,"1004"==e.typeSelected)return e.speciesSelected="all",e.isDisabled.species=!0,e.typeSelected&&e.speciesSelected&&e.form.fiscal_year_vision?e.isDisabled.printAction=!1:e.isDisabled.printAction=!0,e.getLines(e.header.web_h_id,"all",e.typeSelected)}else e.isDisabled.species=!0,e.speciesSelected="",e.species=[],e.isDisabled.printAction=!0})).catch((function(t){}))):this.typeSelected&&this.speciesSelected&&this.form.fiscal_year_vision?("tobacco_type"==t&&(this.speciesSelected=null),this.isDisabled.printAction=!1,this.getLines(this.header.web_h_id,this.speciesSelected,this.typeSelected)):this.isDisabled.printAction=!0},createLine:function(){var t=this;return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.form=!0,e.next=3,t.insertHeader();case 3:return t.form.sales_fiscal_year_no=t.search.salesFiscalYearNo,t.form.sales_fiscal_year_revision=t.search.salesFiscalYearRevision,t.form.year=t.search.year,e.next=8,axios.post("/pd/ajax/pdp0014/create-line",t.form).then((function(e){if("E"==e.data.result)return t.form.year="",t.search.year="",t.form.sales_fiscal_year_no="",t.search.salesFiscalYearNo="",t.form.sales_fiscal_year_revision="",t.search.salesFiscalYearRevision="",t.userProfile.user_name="",swal({title:"\nเกิดข้อผิดพลาด",text:e.data.resultMsg,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"});t.afterCallHeader(e),t.afterCallLines(e),t.loading.form=!1})).catch((function(e){t.loading.form=!1})).finally((function(e){t.loading.form=!1}));case 8:case"end":return e.stop()}}),e)})))()},checkStatus:function(t){this.form_update.tran_status=t,"APPROVED"==t&&(this.isDisabled.tranApprovalDate=!1),"INACTIVE"!=t&&""!==t||(this.isDisabled.tranApprovalDate=!0,this.header.tran_approval_date="",this.form_update.tran_approval_date="",this.form.tran_approval_date="",this.header.date="",this.$children[11].date="")},inputData:function(t,e){this.form_update.lines.push(t)},save:function(){var t=this,e=this;if("APPROVED"==this.statusSelect&&null==this.$children[11].date)return swal({title:"\n เกิดข้อผิดพลาด ",text:"กรุณาเลือก วันที่อนุมัติ",type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"});this.loading.save=!0;var a={form_update:this.form_update,textarea:this.form.textarea};axios.post("/pd/ajax/pdp0014/update-line/"+this.header.web_h_id,{params:a}).then((function(a){"E"==a.data.result?(t.loading.save=!1,swal({title:"\nเกิดข้อผิดพลาด",text:a.data.resultMsg,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก",showCancelButton:!0},(function(t){if(t){var a={tran_approval_date:e.form_update.tran_approval_date,textarea:e.form.textarea};e.loading.save=!0,axios.get("/pd/ajax/pdp0014/get-confirm-approved/"+e.header.web_h_id,{params:a}).then((function(t){"C"==t.data.result&&(e.alertSucces("สำเร็จ"),e.selectHeader(e.header.web_h_id),e.searchHeaders(),e.loading.save=!1)})).catch((function(t){}))}}))):(t.alertSucces("สำเร็จ"),t.selectHeader(t.header.web_h_id),t.searchHeaders(),t.loading.save=!1)})).catch((function(e){return t.loading.save=!1,swal({title:"\nเกิดข้อผิดพลาด",text:e,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"},(function(t){resolve(t)}))})).finally((function(e){t.loading.save=!1}))},selectHeader:function(t){var e=this;axios.get("/pd/ajax/pdp0014/select-header/"+t).then((function(t){var a=t.data.header;e.form.lld_year=a.lld_year,e.year=a.fiscal_year_th,e.header=a,e.form.tran_approval_date=a.tran_approval_date,e.form.date_create=a.creation_date,e.form.date_updated=a.last_update_date,e.statusSelect=a.tran_status,e.salesFiscalYearNo=a.sales_fiscal_year_no,e.salesFiscalYearRevision=a.sales_fiscal_year_revision,e.fiscalYearVision=a.fiscal_year_vision,e.form.textarea=a.attribute1,e.userProfile.user_name=a.name_user,e.typeSelected="",e.speciesSelected="",e.species=[],e.lines=[],e.trlines=[],e.dLines=[],e.formLines=[],e.isDisabled.species=!0,e.isDisabled.retrieveLeaves=!1,e.showLine=!1,e.getTempSalesFiscalYearTH(a.sales_fiscal_year_no),e.getTempSalesFiscalYearRevision(a.fiscal_year_th,a.sales_fiscal_year_no),e.getTempFiscalYearVision(a.fiscal_year_th,a.sales_fiscal_year_no,a.sales_fiscal_year_revision),e.checkStatus(a.tran_status)})).then((function(){e.insertHeader()})).catch((function(t){}))},getLines:function(t,e,a){var s=this;this.lines=[],this.trlines=[],this.medicinal_leaves=[],this.dLines=[],this.formLines=[],axios.get("/pd/ajax/pdp0014/get-lines/"+t+"?ingredien_species_type="+e+"&ingredien_tobacco_type="+a).then((function(t){"S"==t.data.status&&(s.afterCallLines(t),s.showLine=!0),"E"==t.data.status&&(s.showLine=!0)})).catch((function(t){return s.lines=[],s.trlines=[],s.medicinal_leaves=[],s.dLines=[],s.formLines=[],s.showLine=!1,swal({title:"\n None Found Data ",text:t,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"})}))},afterCallHeader:function(t){this.header=t.data.header,this.header_web_h_id=t.data.header.web_h_id,this.form.date_create=t.data.header.creation_date,this.form.date_updated=t.data.header.last_update_date,this.year=t.data.header.year,this.form.period_year=t.data.header.sales_fiscal_year_th,this.form.planning_year=t.data.header.sales_fiscal_year_th,this.form.lld_year=t.data.header.lld_year,this.form.sales_fiscal_year_revision=t.data.header.sales_fiscal_year_revision,this.userProfile.user_name=this.nameUserDefaultLogin},afterCallLines:function(t){this.lines=t.data.lines,this.trlines=t.data.header_table,this.medicinal_leaves=t.data.medicinalLeaves,this.dLines=t.data.dLines,this.formLines=t.data.mapLines},beforeCallLines:function(){this.lines=[],this.trlines=[],this.medicinal_leaves=[],this.dLines=[],this.formLines=[]},alertSucces:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(e){swal({title:"\nสำเร็จ",text:t,type:"success",dangerMode:!1,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"},(function(t){e(t)}))}))},sumLines:function(t){return Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).reduce((function(t,e){return t+parseFloat(e.sum_ingredien_percent_item)}),0)},sumKgLines:function(t){var e=Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t}));Object.values(this.lines);return e.reduce((function(t,e){return t+Number(e.cal_leaves_qty_use)}),0)},sumLinesCasing:function(t,e){var a=this,s=[],i=0;return s[t]=[],Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).forEach((function(r,l){s[t][i]=void 0!==a.formLines[r.item_code+r.medicinal_leaves+e]?a.formLines[r.item_code+r.medicinal_leaves+e].ingredien_percent_item:0,i++})),s[t].reduce((function(t,e){return t+parseFloat(e)}),0)},sumKgLinesCasing:function(t,e){var a=this,s=[],i=0;return s[t]=[],Object.values(this.dLines).filter((function(e){return e.medicinal_leaves==t})).forEach((function(r,l){s[t][i]=void 0!==a.formLines[r.item_code+r.medicinal_leaves+e]?a.formLines[r.item_code+r.medicinal_leaves+e].qty_use_year*(.01*a.formLines[r.item_code+r.medicinal_leaves+e].ingredien_percent_item):0,i++})),s[t].reduce((function(t,e){return t+parseFloat(e)}),0)},updateApprove:function(t){this.form_update.tran_approval_date=this.convertDate(this.$emit("dateWasSelected",t).$children[11].date)},convertDate:function(t){var e=function(t){return t<10?"0"+t:t},a=new Date(t);return[e(a.getDate()),e(a.getMonth()+1),a.getFullYear()].join("/")},calculateKM:function(t,e,a,s,i){return t.year_quantity*(i[t.item_code+a+s]?.01*i[t.item_code+a+s].ingredien_percent_item:0)},formatDate:function(t){return l()(t).add(543,"years").format("DD-MM-YYYY")},sumMonth:function(t){var e=[],a=0,s=Object.values(this.lines);return"quantity"==t?s.forEach((function(t,s){e[a]=t.quantity,a++})):"qty_lld"==t?s.forEach((function(t,s){e[a]=t.qty_lld,a++})):"year_quantity"==t?s.forEach((function(t,s){e[a]=t.year_quantity,a++})):"month_quantity"==t&&s.forEach((function(t,s){e[a]=t.month_quantity,a++})),e.reduce((function(t,e){return t+parseFloat(e)}),0)},printAction:function(){var t=this.year,e=this.salesFiscalYearNo,a=this.salesFiscalYearRevision,s=this.fiscalYearVision,i=this.typeSelected,r=this.speciesSelected,l=this.header.web_h_id;location.href="/ir/reports/get-param?salesFiscalYearTH="+t+"&salesFiscalYearNo="+e+"&salesFiscalYearRevision="+a+"&fiscalYearVision="+s+"&ingredienTobaccoType="+i+"&ingredienSpeciesType="+r+"&id="+l+"&program_code=PDR0007&function_name=PDR0007&output=pdf"},retrieveLeaves:function(){var t=this;return c(i().mark((function e(){var a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={P_LLD_YEAR:(a=t).form.lld_year},swal({title:"คุณแน่ใจไหม ?",text:"การดึงข้อมูลใหม่ อาจทำให้ข้อมูลที่เคยบันทึกอยู่สูญหาย คุณยืนยันที่จะดำเนินการต่อหรือไม่",type:"warning",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=c(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&axios.get("/pd/ajax/pdp0014/retrieve-leaves/"+a.header.web_h_id,{params:s}).then((function(t){"C"==t.data.result&&(swal({title:"\nสำเร็จ",text:t.data.resultMsg,type:"success",dangerMode:!1,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"}),a.selectHeader(a.header.web_h_id))})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()}},computed:{totalLines:function(){return Object.keys(this.lines).length-1}}};var u=a(93379),v=a.n(u),m=a(77757),h={insert:"head",singleton:!1};v()(m.Z,h);m.Z.locals;var p=a(24628),f={insert:"head",singleton:!1};v()(p.Z,f);p.Z.locals;const g=(0,a(51900).Z)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-title"},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-lg-9"},[a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-w-m btn-success",attrs:{"data-toggle":"modal","data-target":"#ModalCreate"},on:{click:t.getYears}},[a("i",{staticClass:"fa fa-plus"}),t._v(" สร้าง\n                        ")]),t._v(" "),t._m(1),t._v(" "),a("button",{staticClass:"btn btn-w-m btn-primary",attrs:{type:"submit",th:""},on:{click:t.save}},[a("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),t._v(" บันทึก\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-w-m buttonRetrieveLeaves",attrs:{type:"submit",disabled:this.isDisabled.retrieveLeaves},on:{click:t.retrieveLeaves}},[t._v("\n                            ดึงข้อมูล % ใบยาจากสูตร\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-w-m btn-info",attrs:{disabled:this.isDisabled.printAction},on:{click:t.printAction}},[a("i",{staticClass:"fa fa-print"}),t._v(" พิมพ์\n                        ")])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"ModalCreate",tabindex:"-1",role:"dialog","aria-labelledby":"ModalCreateLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"row col-12 ml-2"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-3 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" \n                                                        ปีงบประมาณอนุมัติ:\n                                                    ")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ปีงบประมาณอนุมัติ",size:"small","popper-append-to-body":!1},on:{change:function(e){return t.getSalesFiscals("get-salesFiscalYearTH")}},model:{value:t.search.salesFiscalYearNo,callback:function(e){t.$set(t.search,"salesFiscalYearNo",e)},expression:"search.salesFiscalYearNo"}},t._l(t.salesFiscalYearNoCreateArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_no,attrs:{label:t.sales_fiscal_year_no,value:t.sales_fiscal_year_no}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-3 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" \n                                                        ปีงบประมาณการจำหน่าย(ฝ่ายขาย):\n                                                    ")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ปีงบประมาณการจำหน่าย(ฝ่ายขาย)",size:"small","popper-append-to-body":!1},on:{change:function(e){return t.getSalesFiscals("get-version")}},model:{value:t.search.year,callback:function(e){t.$set(t.search,"year",e)},expression:"search.year"}},t._l(t.salesFiscalYearTHCreateArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_th,attrs:{label:t.sales_fiscal_year_th,value:t.sales_fiscal_year_th}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0 col-3 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปรับครั้งที่(ชนป.):")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticClass:"mr-2 form-control-file",attrs:{clearable:"",placeholder:"ปรับครั้งที่(ชนป.)",size:"small","popper-append-to-body":!1},model:{value:t.search.salesFiscalYearRevision,callback:function(e){t.$set(t.search,"salesFiscalYearRevision",e)},expression:"search.salesFiscalYearRevision"}},t._l(t.salesFiscalsVersionCreateArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_revision,attrs:{label:t.sales_fiscal_year_revision,value:t.sales_fiscal_year_revision}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("div",{staticClass:"input-group",staticStyle:{"padding-top":"25px"}},[a("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"button"},on:{click:function(e){return t.searchSalesFiscal("search")}}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                                                        ")])])])])])])]),t._v(" "),t.salesFiscals.length>0&t.showTable?a("div",{staticClass:"table-responsive"},[a("div",{staticStyle:{height:"250px",overflow:"scroll"}},[a("table",{staticClass:"table"},[t._m(3),t._v(" "),a("tbody",t._l(t.salesFiscals,(function(e,s){return a("tr",{key:s},[a("td",[t._v(" "+t._s(e.sales_fiscal_year_no)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(e.sales_fiscal_year_th)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(e.approve_date)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(e.sales_fiscal_year_revision)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(e.user_name)+" ")]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(e){return t.selectSalesFiscal(s)}}},[t._v("\n                                                                เลือก\n                                                        ")])])])})),0)])])]):t._e(),t._v(" "),a("div",{staticClass:"form-group row mt-4"},[a("div",{staticClass:"col-lg-12 text-center"},[a("button",{staticClass:"btn btn-primary col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createLine}},[a("i",{staticClass:"fa fa-check"}),t._v("สร้าง\n                                            ")]),t._v(" "),t._m(4)])])])])])]),t._v(" "),a("div",{staticClass:"modal inmodal fade",staticStyle:{display:"none"},attrs:{id:"ModalSearch",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[t._m(5),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.tempSearch,expression:"loading.tempSearch"}],staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณอนุมัติ:")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปีงบประมาณอนุมัติ","popper-append-to-body":!1},on:{change:function(e){return t.getTempSalesFiscalYearTH(t.salesFiscalYearNo)}},model:{value:t.salesFiscalYearNo,callback:function(e){t.salesFiscalYearNo=e},expression:"salesFiscalYearNo"}},t._l(t.salesFiscalYearNoArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_no,attrs:{label:t.sales_fiscal_year_no,value:t.sales_fiscal_year_no}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณการจำหน่าย(ฝ่ายขาย):")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปีงบประมาณการจำหน่าย(ฝ่ายขาย)","popper-append-to-body":!1},on:{change:function(e){return t.getTempSalesFiscalYearRevision(t.year,t.salesFiscalYearNo)}},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.salesFiscalYearTHArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_th,attrs:{label:t.sales_fiscal_year_th,value:t.sales_fiscal_year_th}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปรับครั้งที่(ชนป.):")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ปรับครั้งที่(ชนป.)","popper-append-to-body":!1},on:{change:function(e){return t.getTempFiscalYearVision(t.year,t.salesFiscalYearNo,t.salesFiscalYearRevision)}},model:{value:t.salesFiscalYearRevision,callback:function(e){t.salesFiscalYearRevision=e},expression:"salesFiscalYearRevision"}},t._l(t.salesFiscalYearRevisionArr,(function(t){return a("el-option",{key:t.sales_fiscal_year_revision,attrs:{label:t.sales_fiscal_year_revision,value:t.sales_fiscal_year_revision}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group col-3",staticStyle:{"padding-right":"10px"}},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่ตามประมาณการวัตถุดิบ:")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"ครั้งที่ตามประประมาณการวัตถุดิบ","popper-append-to-body":!1},model:{value:t.fiscalYearVision,callback:function(e){t.fiscalYearVision=e},expression:"fiscalYearVision"}},t._l(t.fiscalYearVisionArr,(function(t){return a("el-option",{key:t.fiscal_year_vision,attrs:{label:t.fiscal_year_vision,value:t.fiscal_year_vision}})})),1)],1)])]),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"button"},on:{click:t.searchHeaders}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                                    ")])]),t._v(" "),a("div",[a("table",{staticClass:"table mt-2"},[t._m(6),t._v(" "),a("tbody",t._l(t.uHeaders,(function(e,s){return a("tr",{key:s,staticStyle:{cursor:"pointer"},attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.selectHeader(e.web_h_id)}}},[a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.sales_fiscal_year_no)+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center",background:"none"}},[t._v("\n                                                    "+t._s(e.fiscal_year_th)+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.sales_fiscal_year_revision)+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.fiscal_year_vision)+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.user_name?e.user_name:"")+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.tran_approval_date?t.formatDate(e.tran_approval_date):"")+"\n                                                ")]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    "+t._s(e.tran_status)+"\n                                                ")])])})),0)])])])])])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.form,expression:"loading.form"}],staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ปีงบประมาณ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.period_year,expression:"form.period_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:""},domProps:{value:t.form.period_year},on:{input:function(e){e.target.composing||t.$set(t.form,"period_year",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.fiscal_year_vision,expression:"form.fiscal_year_vision"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.fiscal_year_vision},on:{input:function(e){e.target.composing||t.$set(t.form,"fiscal_year_vision",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่สร้าง\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("span",{staticClass:"remark"},[t._v(" "+t._s(t.form.date_create)+" ")])]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่แก้ไขล่าสุด\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("span",{staticClass:"remark"},[t._v(t._s(t.form.date_updated))])])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(7),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{size:"small",placeholder:"เลือก","popper-append-to-body":!1,disabled:this.isDisabled.lldYear},model:{value:t.form.lld_year,callback:function(e){t.$set(t.form,"lld_year",e)},expression:"form.lld_year"}},t._l(t.LLDYearList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.lld_year,value:t.lld_year}})})),1)],1),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประมาณยอดจำหน่ายปี\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.planning_year,expression:"form.planning_year"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.planning_year},on:{input:function(e){e.target.composing||t.$set(t.form,"planning_year",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ครั้งที่\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sales_fiscal_year_no,expression:"form.sales_fiscal_year_no"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.sales_fiscal_year_no},on:{input:function(e){e.target.composing||t.$set(t.form,"sales_fiscal_year_no",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ปรับครั้งที่ \n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-3 col-form-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sales_fiscal_year_revision,expression:"form.sales_fiscal_year_revision"}],staticClass:"form-control text-center p-0 col-12",attrs:{disabled:"",type:"text"},domProps:{value:t.form.sales_fiscal_year_revision},on:{input:function(e){e.target.composing||t.$set(t.form,"sales_fiscal_year_revision",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(8),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{size:"small",clearable:"",placeholder:"เลือก","popper-append-to-body":!1,disabled:this.isDisabled.type},on:{change:function(e){return t.getItems("tobacco_type")}},model:{value:t.typeSelected,callback:function(e){t.typeSelected=e},expression:"typeSelected"}},t._l(t.types,(function(t){return a("el-option",{key:t.ingredien_tobacco_type,attrs:{label:t.ingredien_tobacco_desc,value:t.ingredien_tobacco_type}})})),1)],1)]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            ผู้บันทึก\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("input",{staticClass:"form-control col-12",staticStyle:{width:"100%"},attrs:{disabled:"",type:"text"},domProps:{value:t.userProfile.user_name}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[t._m(9),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{clearable:"",size:"small",placeholder:"เลือก","popper-append-to-body":!1,disabled:!("1004"!=t.typeSelected&&!this.isDisabled.species)},on:{change:function(e){return t.getItems("tobacco_group")}},model:{value:t.speciesSelected,callback:function(e){t.speciesSelected=e},expression:"speciesSelected"}},t._l(t.species,(function(t,e){return a("el-option",{key:e,attrs:{label:t.tobacco_type_desc,value:t.tobacco_type_meaning}})})),1)],1)]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            วันที่อนุมัติ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","border-radius":"3px"},attrs:{name:"input_date",id:"input_date",disabled:this.isDisabled.tranApprovalDate,format:t.transDate["js-format"]},on:{dateWasSelected:t.updateApprove},model:{value:t.header.tran_approval_date,callback:function(e){t.$set(t.header,"tran_approval_date",e)},expression:"header.tran_approval_date"}})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-sm-12 row"},[a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            สถานะ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-select",{staticClass:"form-group",attrs:{clearable:"",size:"small",placeholder:"เลือก","popper-append-to-body":!1,disabled:this.isDisabled.status},on:{change:function(e){return t.checkStatus(t.statusSelect)}},model:{value:t.statusSelect,callback:function(e){t.statusSelect=e},expression:"statusSelect"}},t._l(t.statuses,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)]),t._v(" "),a("div",{staticClass:"col-lg-6 col-sm-12 form-inline"},[a("div",{staticClass:"col-lg-3 col-form-label text-right"},[t._v("\n                            หมายเหตุ\n                        ")]),t._v(" "),a("div",{staticClass:"col-lg-9 col-form-label"},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",disabled:this.isDisabled.textarea,maxlength:"150"},model:{value:t.form.textarea,callback:function(e){t.$set(t.form,"textarea",e)},expression:"form.textarea"}}),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v("\n                                *ช่องหมายเหตุ ไม่สามารถกรอกได้เกิน 150 ตัวอักษร\n                            ")])],1)])])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.save,expression:"loading.save"}],staticClass:"ibox-title p-4"},[t.showLine&0==t.lines.length?a("div",{attrs:{align:"center"}},[a("h4",[t._v(" Data Not Found. ")])]):t._e(),t._v(" "),a("div",{staticClass:"row align-items-center"},[a("div",{staticStyle:{width:"1920px",overflow:"scroll",height:"700px"}},[t.showLine&&"1004"!=t.typeSelected?a("table",{staticClass:"table",attrs:{width:"100%",id:"tableMainPDP0014"}},t._l(t.trlines,(function(e,s){return a("div",{key:s},[0==s?a("thead",[a("tr",{staticClass:"first"},[t._m(10,!0),t._v(" "),t._m(11,!0),t._v(" "),t._m(12,!0),t._v(" "),t._m(13,!0),t._v(" "),t._m(14,!0),t._v(" "),a("th",{staticClass:"w-20 text-center",attrs:{colspan:2*e.merge_tr}},[a("div",{staticClass:"tw-bg-red-300 p-2"},[t._v(" ใบยา ")])])]),t._v(" "),a("tr",{staticClass:"second"},t._l(e.medicinal_leaves,(function(e,s){return a("th",{key:s,staticClass:"text-center w-300",attrs:{colspan:"2"}},[a("div",{staticClass:"p-2 tw-bg-green-200"},[t._v(t._s(e))])])})),0),t._v(" "),a("tr",{staticClass:"third"},t._l(e.medicinal_leaves_tr,(function(e,s){return a("th",{key:s,staticClass:"text-center"},[a("div",{staticClass:"tw-bg-gray-400 p-2"},[t._v("\n                                        "+t._s(s%2==0?"%":"ก.ก.")+"\n                                    ")])])})),0)]):t._e(),t._v(" "),t._l(t.lines,(function(e,s){return a("tbody",{key:s},[a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"vertical-align":"middle"}},[t._v(" \n                                    "+t._s(e.item_desc)+" \n                                ")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.quantity}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:4,minus:!1,disabled:"",value:e.qty_lld}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.year_quantity}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.month_quantity}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(s,i){return a("td",{key:i,staticClass:"w-50"},[i%2==0?a("span",[t.formLines[e.item_code+s+t.speciesSelected]?a("div",[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:i%2!=0,value:e.month_quantity},on:{change:function(a){return t.inputData(t.formLines[e.item_code+s+t.speciesSelected],t.formLines[e.item_code+s+t.speciesSelected].ingredien_percent_item)}},model:{value:t.formLines[e.item_code+s+t.speciesSelected].ingredien_percent_item,callback:function(a){t.$set(t.formLines[e.item_code+s+t.speciesSelected],"ingredien_percent_item",a)},expression:"formLines[uLine.item_code+mlTr+speciesSelected].ingredien_percent_item"}})],1):a("div",[a("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})])]):t._e(),t._v(" "),i%2!=0?a("span",[t.formLines[e.item_code+s+t.speciesSelected]?a("div",[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.calculateKM(e,e.item_code,s,t.speciesSelected,t.formLines)}})],1):a("div",[a("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})])]):t._e()])}))],2),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ 6 เดือน ")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_sales_qty_use_six_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_lld_qty_use_six_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_year_use_six_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_month_use_six_month}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)/2}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)/2}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ทั้งปี")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_sales_qty_use_year}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_lld_qty_use_year}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_year_use_year}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_month_use_year}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ต่อเดือน")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_sales_qty_use_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_lld_qty_use_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_year_use_month}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.header.total_qty_month_use_month}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLinesCasing(e,t.speciesSelected)/12}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLinesCasing(e,t.speciesSelected)/12}})],1):t._e()])}))],2):t._e()])}))],2)})),0):t._e(),t._v(" "),t.showLine&&"1004"==t.typeSelected?a("table",{staticClass:"table",attrs:{width:"100%",id:"tableMainPDP0014"}},t._l(t.trlines,(function(e,s){return a("div",{key:s},[0==s?a("thead",[a("tr",{staticClass:"first"},[t._m(15,!0),t._v(" "),t._m(16,!0),t._v(" "),t._m(17,!0),t._v(" "),t._m(18,!0),t._v(" "),t._m(19,!0),t._v(" "),a("th",{staticClass:"w-20 text-center",attrs:{colspan:2*e.merge_tr}},[a("div",{staticClass:"tw-bg-red-300 p-2"},[t._v("ใบยา")])])]),t._v(" "),a("tr",{staticClass:"second"},t._l(e.medicinal_leaves,(function(e,s){return a("th",{key:s,staticClass:"w-300 text-center",attrs:{colspan:"2"}},[a("div",{staticClass:"p-2 tw-bg-green-200"},[t._v(" "+t._s(e)+" ")])])})),0),t._v(" "),a("tr",{staticClass:"third"},t._l(e.medicinal_leaves_tr,(function(e,s){return a("th",{key:s,staticClass:"text-center"},[a("div",{staticClass:"tw-bg-gray-400 p-2"},[t._v(" \n                                        "+t._s(s%2==0?"ต่อ 1 กก":"ก.ก.")+" \n                                    ")])])})),0)]):t._e(),t._v(" "),t._l(t.lines,(function(e,s){return a("tbody",{key:s},[a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"vertical-align":"middle"}},[t._v(" \n                                    "+t._s(e.item_desc)+" \n                                ")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.quantity}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:4,minus:!1,disabled:"",value:e.qty_lld}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.year_quantity}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:e.month_quantity}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(s,i){return a("td",{key:i,staticClass:"w-50"},[i%2==0?a("span",[t.formLines[e.item_code+s+"all"]?a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.formLines[e.item_code+s+"all"].sum_ingredien_percent_item}}):t._e(),t._v(" "),t.formLines[e.item_code+s+"all"]?t._e():a("input",{staticClass:"form-control text-right",attrs:{type:"text",disabled:!0}})],1):t._e(),t._v(" "),i%2!=0?a("span",[t.formLines[e.item_code+s+"all"]?a("vue-numeric",{staticClass:"form-control text-right",attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.formLines[e.item_code+s+"all"].cal_leaves_qty_use}}):t._e(),t._v(" "),t.formLines[e.item_code+s+"all"]?t._e():a("input",{staticClass:"form-control text-center",attrs:{disabled:"",type:"text"}})],1):t._e()])}))],2),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ 6 เดือน ")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("quantity")/2}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.sumMonth("qty_lld")/2}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("year_quantity")/2}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("month_quantity")/2}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLines(e)/2}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLines(e)/2}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ทั้งปี")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("quantity")}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.sumMonth("qty_lld")}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("year_quantity")}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("month_quantity")}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLines(e)}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLines(e)}})],1):t._e()])}))],2):t._e(),t._v(" "),t.totalLines==s?a("tr",[a("td",{staticClass:"w-150 text-right",staticStyle:{"font-weight":"bolder",backgroundColor:"#bdbdbd"}},[t._v(" รวมการใช้ต่อเดือน")]),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("quantity")/12}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:4,minus:!1,disabled:"",value:t.sumMonth("qty_lld")/12}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("year_quantity")/12}})],1),t._v(" "),a("td",{staticClass:"w-150 text-right"},[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumMonth("month_quantity")/12}})],1),t._v(" "),t._l(e.medicinal_leaves_tr,(function(e,s){return a("td",{key:s,staticClass:"w-50"},[s%2==0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumLines(e)/12}})],1):t._e(),t._v(" "),s%2!=0?a("span",[a("vue-numeric",{staticClass:"form-control text-right",staticStyle:{"font-weight":"bolder"},attrs:{separator:",",precision:3,minus:!1,disabled:"",value:t.sumKgLines(e)/12}})],1):t._e()])}))],2):t._e()])}))],2)})),0):t._e()])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3"},[a("h5",[t._v("ประมาณการใช้วัตถุดิบในคงคลัง :")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"submit","data-toggle":"modal","data-target":"#ModalSearch"}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" ค้นหา\n                        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title",attrs:{id:"ModalCreateLabel"}},[t._v("\n                                    สร้างประมาณการใช้วัตถุดิบตามประมาณยอดจำหน่าย")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v("ปีงบประมาณอนุมัติ")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("ปีงบประมาณการจำหน่าย(ฝ่ายขาย)")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("วันที่อนุมัติ")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("ปรับครั้งที่")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("ชื่อผู้สร้าง")]),t._v(" "),a("th",{staticStyle:{width:"20%"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger col-lg-2 p-2",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"fa fa-times"}),t._v("ยกเลิก\n                                            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("ประมาณการยอดจำหน่ายประจำปี")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปีงบประมาณอนุมัติ\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปีงบประมาณการจำหน่าย "),a("br"),t._v(" (ฝ่ายขาย)\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ปรับครั้งที่ "),a("br"),t._v(" (ชนป.)\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ครั้งที่ตามประมาณ "),a("br"),t._v(" การวัตถุดิบ\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    ผู้สร้าง\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    วันที่อนุมัติ\n                                                ")]),t._v(" "),a("th",{staticStyle:{"vertical-align":"middle","text-align":"center"}},[t._v("\n                                                    สถานะ\n                                                ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            อ้างอิงค่า LLD ปี "),a("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            ประเภท "),a("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3 col-form-label"},[t._v("\n                            กลุ่ม "),a("span",{staticClass:"text-danger"},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center sticky-col",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" ตราบุหรี่ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-200 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ประมาณการจำหน่ายประจำปี (ล้านมวน) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ค่า LLD (ก.ก./พันมวน) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" จำนวนที่ใช้ต่อปี (ก.ก.) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v(" จำนวนที่ใช้ต่อเดือน (ก.ก.) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center sticky-col",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ตราบุหรี่")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-200 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ประมาณการจำหน่ายประจำปี (ล้านมวน)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("ค่า LLD (ก.ก./พันมวน)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("จำนวนที่ใช้ต่อปี (ก.ก.)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"w-150 text-center",attrs:{rowspan:"3"}},[a("div",{staticClass:"h-150 p-2 tw-bg-gray-400"},[t._v("จำนวนที่ใช้ต่อเดือน (ก.ก.)")])])}],!1,null,null,null).exports}}]);