(self.webpackChunk=self.webpackChunk||[]).push([[5964],{95964:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var r=a(87757),n=a.n(r),s=a(30381),i=a.n(s);function o(t,e,a,r,n,s,i){try{var o=t[s](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,n)}const c={props:["pHeader","inventoryItemId","url"],computed:{},watch:{},data:function(){return{itemId:null!=this.inventoryItemId&&""!=this.inventoryItemId?parseInt(this.inventoryItemId):"",loading:!1,items:[]}},mounted:function(){""!==this.itemId?this.getItems({inventory_item_id:this.itemId,header:this.pHeader}):this.getItems({header:this.pHeader})},methods:{itemWasSelected:function(t){var e,a=this;return(e=n().mark((function e(){var r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=(r=a).items.filter((function(e){return e.inventory_item_id==t}))).length&&(s=s[0],r.itemId=s.item_number),r.$emit("itemWasSelected",s);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(t){o(s,r,n,i,c,"next",t)}function c(t){o(s,r,n,i,c,"throw",t)}i(void 0)}))})()},remoteMethod:function(t){""!==t?this.getItems({number:t,header:this.pHeader}):this.items=[]},getItems:function(t){var e=this,a=this;a.loading=!0,axios.get(a.url.ajax_get_item,{params:t}).then((function(t){var r=t.data.data;a.loading=!1,a.items=r.items,e.$emit("getItems",r),a.items&&a.items.forEach((function(t){a.inventoryItemId==t.inventory_item_id&&(a.itemId=t.item_number)}))}))}}};var l=a(51900);const d=(0,l.Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"รหัสสินค้าสำเร็จรูป","remote-method":t.remoteMethod,loading:t.loading},on:{change:t.itemWasSelected},model:{value:t.itemId,callback:function(e){t.itemId=e},expression:"itemId"}},t._l(t.items,(function(t,e){return a("el-option",{key:e,attrs:{label:t.display,value:parseInt(t.inventory_item_id)}})})),1)],1)}),[],!1,null,null,null).exports;function u(t,e,a,r,n,s,i){try{var o=t[s](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,n)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var s=t.apply(e,a);function i(t){u(s,r,n,i,o,"next",t)}function o(t){u(s,r,n,i,o,"throw",t)}i(void 0)}))}}var v;const m={props:["header","transBtn","url","countOpen","transDate"],data:function(){return{loading:!1,transferHeaderId:"",transferNumber:"",productDateFormat:"",transferDateFormat:"",transferList:[]}},mounted:function(){},computed:{},watch:{countOpen:(v=f(n().mark((function t(e,a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.openModal();case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},methods:{setdate:function(t,e){var a=this;return f(n().mark((function r(){var s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=a,"product_date_format"!=e){r.next=9;break}if(!t){r.next=8;break}return r.next=5,i()(t).format(s.transDate["js-format"]);case 5:s.productDateFormat=r.sent,r.next=9;break;case 8:s.productDateFormat="";case 9:if("transfer_date_format"!=e){r.next=17;break}if(!t){r.next=16;break}return r.next=13,i()(t).format(s.transDate["js-format"]);case 13:s.transferDateFormat=r.sent,r.next=17;break;case 16:s.transferDateFormat="";case 17:case"end":return r.stop()}}),r)})))()},openModal:function(){$("#modal_search").modal("show")},getTransferList:function(t){var e=this;e.loading=!0,axios.get(e.url.index,{params:t}).then((function(t){var a=t.data.data;e.loading=!1,e.transferList=a.data}))},selectTransferHeader:function(t){var e=this;return f(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:$("#modal_search").modal("hide"),e.$emit("selectTransferHeader",t);case 2:case"end":return a.stop()}}),a)})))()},searchForm:function(){var t=this;return f(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getTransferList({transfer_number:t.transferNumber,product_date_format:t.productDateFormat,transfer_date_format:t.transferDateFormat,action:"search"});case 1:case"end":return e.stop()}}),e)})))()}}};function h(t,e,a,r,n,s,i){try{var o=t[s](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,n)}function p(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var s=t.apply(e,a);function i(t){h(s,r,n,i,o,"next",t)}function o(t){h(s,r,n,i,o,"throw",t)}i(void 0)}))}}const b={components:{searchItem:d,modalSearch:(0,l.Z)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("div",{staticClass:"row col-12",staticStyle:{"padding-right":"10px","padding-left":"120px"}},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ใบส่งเลขที่ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transferNumber,expression:"transferNumber"}],staticClass:"form-control",attrs:{id:"lb-2",type:"text",name:"transfer_number"},domProps:{value:t.transferNumber},on:{input:function(e){e.target.composing||(t.transferNumber=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-3"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่ได้ผลผลิต :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือกวันที่",value:t.productDateFormat,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,r=Array(a);a--;)r[a]=arguments[a];return t.setdate.apply(void 0,r.concat(["product_date_format"]))}}})],1)]),t._v(" "),a("div",{staticClass:"col-3"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่ส่งผลผลิต :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{placeholder:"โปรดเลือกวันที่",value:t.transferDateFormat,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,r=Array(a);a--;)r[a]=arguments[a];return t.setdate.apply(void 0,r.concat(["transfer_date_format"]))}}})],1)]),t._v(" "),a("div",{staticClass:"col-3"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"text-left"},[a("button",{class:t.transBtn.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.searchForm}},[a("i",{class:t.transBtn.search.icon}),t._v("\n                                    "+t._s(t.transBtn.search.text)+"\n                                ")])])])]),t._v(" "),a("div",{staticClass:"ibox-content table-responsive m-t mb-3"},[a("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),a("tbody",t._l(t.transferList,(function(e,r){return a("tr",[a("td",[t._v(t._s(e.transfer_number))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.product_date_format))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.transfer_date_format))]),t._v(" "),a("td",[t._v(t._s(e.objective.description))]),t._v(" "),a("td",[t._v(t._s(e.status.description))]),t._v(" "),a("td",[a("button",{class:t.transBtn.detail.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(a){return t.selectTransferHeader(e)}}},[a("i",{class:t.transBtn.detail.icon}),t._v("\n                                            "+t._s(t.transBtn.detail.text)+"\n                                        ")])])])})),0)])])]),t._v(" "),t._m(2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("ค้นหารายการโอนสินค้าสำเร็จรูป")]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                         \n                    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"200px"}},[t._v("ใบส่งเลขที่")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px"}},[t._v("วันที่ได้ผลผลิต")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px"}},[t._v("วันที่ส่งผลผลิต")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("วัตถุประสงค์")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px"}},[t._v("สถานะขอเบิก")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"150px"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],!1,null,null,null).exports},props:["pUrl","weekOfYear","ptpmExCigDepartment"],computed:{},watch:{"header.transfer_objective":function(t){5!=t&&Vue.set(this.header,"attribute2","")}},data:function(){return{url:this.pUrl,data:!1,header:!1,profile:!1,master_uom:null,transBtn:{},transDate:{},lines:[],loading:{page:!1,before_mount:!1},firstLoad:!0,countOpen:0,options:"",uWeekOfYear:this.weekOfYear,header_can_transfer_old:!1}},beforeMount:function(){this.getInfo()},mounted:function(){},methods:{getItems:function(t){var e=this;return p(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.master_uom=t.uom_master;case 1:case"end":return a.stop()}}),a)})))()},show:function(t){var e=this;return p(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.header=t,e.header_can_transfer_old=e.header.can.transfer,e.getLines(!1,"show");case 3:case"end":return a.stop()}}),a)})))()},getInfo:function(){var t=this;return p(n().mark((function e(){var a,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,r=window.location.search,s=!1,a.loading.page=!0,a.loading.before_mount=!0,a.lines=[],e.next=8,axios.get(a.url.index+r).then((function(t){"S"==(s=t.data.data).status&&(s=s.info),a.loading.page=!1}));case 8:s&&(a.data=s.data,a.header=s.header,a.profile=s.profile,a.transBtn=s.transBtn,a.transDate=s.transDate,a.url=s.url,a.header.transfer_objective=null,console.log(a.weekOfYear)),a.loading.before_mount=!1,a.getLines(!1,"show");case 11:case"end":return e.stop()}}),e)})))()},setdate:function(t,e){var a=this;return p(n().mark((function r(){var s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a,r.next=3,i()(t).format(s.transDate["js-format"]);case 3:s.header[e]=r.sent;case 4:case"end":return r.stop()}}),r)})))()},addNewLine:function(){var t=this;return p(n().mark((function e(){var a,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(a=t).lines.length,e.next=4,_.clone(a.data.new_line);case 4:s=e.sent,a.$set(a.lines,r,s);case 6:case"end":return e.stop()}}),e)})))()},itemWasSelected:function(t,e){var a=this;return p(n().mark((function r(){var s,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=a,e.inventory_item_id=t.inventory_item_id,e.item_classification_code=t.item_classification_code,e.item_desc=t.item_desc,e.item_number=t.item_number,e.organization_id=t.organization_id,e.transaction_uom=t.transaction_uom,e.transaction_uom_desc=t.transaction_uom_desc,e.transaction_type_id_from=t.transaction_type_id_from,e.organization_id_from=t.organization_id_from,e.subinventory_from=t.subinventory_from,e.locator_id_from=t.locator_id_from,e.locator_code_from=t.locator_code_from,e.transaction_type_id_to=t.transaction_type_id_to,e.organization_id_to=t.organization_id_to,e.subinventory_to=t.subinventory_to,e.locator_id_to=t.locator_id_to,e.locator_code_to=t.locator_code_to,e.biweekly=t.biweekly,e.batch_id=t.batch_id,i={inventoryItemId:e.inventory_item_id},axios.get(s.url.ajax_get_uom,{params:i}).then((function(t){e.uom_list=t.data.UomList,e.transaction_uom=s.master_uom}));case 22:case"end":return r.stop()}}),r)})))()},save:function(){var t=this;return p(n().mark((function e(){var a,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,Vue.set(a.header,"attribute1",a.uWeekOfYear),e.next=4,helperAlert.showProgressConfirm("กรุณายืนยันโอนสินค้าสำเร็จรูป");case 4:if(r=e.sent,"5"!=a.header.transfer_objective){e.next=9;break}if(""!=a.header.attribute2&&void 0!==a.header.transfer_objective){e.next=9;break}return t.$message({message:"กรุณาเลือกหน่วยงาน",type:"error"}),e.abrupt("return",!1);case 9:if(!(a.lines.length>0)){e.next=18;break}if(!(_.filter(a.lines,(function(t){if(!(t.transaction_qty>0))return!0})).length>0)){e.next=14;break}return t.$message({message:"กรุณากรอกข้อมูลจำนวนในตารางให้ครบถ้วน",type:"error"}),e.abrupt("return",!1);case 14:if(!(_.filter(a.lines,(function(t){if(null==t.transaction_uom)return!0})).length>0)){e.next=18;break}return t.$message({message:"กรุณากรอกข้อมูลหน่วยนับในตารางให้ครบถ้วน",type:"error"}),e.abrupt("return",!1);case 18:if(""!=a.header.transfer_objective&&void 0!==a.header.transfer_objective){e.next=21;break}return t.$message({message:"กรุณาเลือกวัตถุประสงค์",type:"error"}),e.abrupt("return",!1);case 21:if(!r){e.next=26;break}return a.loading.page=!0,s=a.lines.filter((function(t){return 1==t.is_selected})),e.next=26,axios.post(a.url.ajax_store,{header:a.header,lines:s}).then((function(t){var e=t.data.data;"S"==e.status&&(a.header=e.header,setTimeout(p(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getLines(!1,"show");case 2:case"end":return t.stop()}}),t)}))),500)),"S"!=e.status&&swal({title:"Error !",text:e.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading.page=!1}));case 26:case"end":return e.stop()}}),e)})))()},setStatus:function(t){var e=this;return p(n().mark((function a(){var r,s,i;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e,!1,s="","confirmTransfer"==t&&(s="กรุณายืนยันโอนวัถุดิบ"),"cancelTransfer"==t&&(s="กรุณายืนยันยกเลิกโอน"),a.next=7,helperAlert.showProgressConfirm(s);case 7:if(!a.sent){a.next=14;break}return r.loading.page=!0,i=r.url.ajax_set_status,""!=r.header.transfer_header_id&&null!=r.header.transfer_header_id&&(i=i.replace("-999",r.header.transfer_header_id)),a.next=14,axios.post(i,{status:t}).then((function(t){var e=t.data.data;"S"==e.status&&(r.header.transfer_status=Number(e.transfer_status),r.header.can=e.can),"S"!=t.data.data.status&&("E"==t.data.data.status&&"Trying to get property 'wip_step' of non-object"===t.data.data.msg?swal({title:"แจ้งเตือน !",text:"ไม่สามารถทำรายการได้ เนื่องจากยังไม่มีการส่งผลผลิตมาจากหน้าเครื่องจักร",type:"error",showConfirmButton:!0}):swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0}))})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){r.loading.page=!1}));case 14:case"end":return a.stop()}}),a)})))()},setData:function(){var t=this;return p(n().mark((function e(){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=(a=t).header.transfer_header_id&&""!=a.header.transfer_header_id&&a.getLines(!1,"show"),a.firstLoad=!1;case 3:case"end":return e.stop()}}),e)})))()},indexPage:function(){this.getInfo()},getLines:function(){var t=arguments,e=this;return p(n().mark((function a(){var r,s;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return!(t.length>0&&void 0!==t[0])||t[0],r=t.length>1&&void 0!==t[1]?t[1]:"search",(s=e).header.can.transfer=s.header_can_transfer_old,!0,s.loading.page=!0,s.lines=[],a.next=10,axios.get(s.url.ajax_get_lines,{params:{header:s.header,action:r}}).then((function(t){var e=t.data.data;s.lines=e.lines,s.lines.filter((function(t){return t.is_disable&&!t.cost_valid})).length>0&&(s.header.can.transfer=!1)})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){s.loading.page=!1}));case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},selectObjectiveCode:function(t){var e=this;return p(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getLines();case 2:case"end":return t.stop()}}),t)})))()},dateWeekOfYear:function(t){var e=i()(t,"DD/MM/YYYY").isoWeek();e=e<10?"0"+i()(t,"DD/MM/YYYY").isoWeek():i()(t,"DD/MM/YYYY").isoWeek();return this.uWeekOfYear=e,e}}};const g=(0,l.Z)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.page,expression:"loading.page"}],staticClass:"ibox float-e-margins"},[t.loading.before_mount?t._e():a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-right"},[a("button",{class:t.transBtn.search.class+" btn-lg tw-w-25 ",on:{click:function(e){t.countOpen+=1}}},[a("i",{class:t.transBtn.search.icon}),t._v("\n                        "+t._s(t.transBtn.search.text)+"\n                    ")]),t._v(" "),a("button",{class:t.transBtn.create.class+" btn-lg tw-w-25 mr-2",on:{click:function(e){return e.preventDefault(),t.indexPage(e)}}},[a("i",{class:t.transBtn.create.icon}),t._v("\n                        "+t._s(t.transBtn.create.text)+"\n                    ")]),t._v(" "),a("button",{class:t.transBtn.save.class+" btn-lg tw-w-25",attrs:{disabled:!t.header.can.edit},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[a("i",{class:t.transBtn.save.icon}),t._v("\n                        "+t._s(t.transBtn.save.text)+"\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-lg",attrs:{disabled:!t.header.can.transfer},on:{click:function(e){return e.preventDefault(),t.setStatus("confirmTransfer")}}},[a("strong",[t._v("ยืนยันขอโอนวัตถุดิบ")])]),t._v(" "),a("button",{staticClass:"btn btn-w-m btn-danger btn-lg",attrs:{disabled:!t.header.can.cancel_transfer},on:{click:function(e){return e.preventDefault(),t.setStatus("cancelTransfer")}}},[a("i",{staticClass:"fa fa-times"}),t._v(" ยกเลิกการขอโอนวัตถุดิบ\n                    ")])])])]),t._v(" "),t.loading.before_mount?t._e():a("div",{staticClass:"ibox-content"},[a("modal-search",{attrs:{transDate:t.transDate,transBtn:t.transBtn,url:t.url,countOpen:t.countOpen},on:{selectTransferHeader:t.show}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 b-r"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right",attrs:{for:"lb-2"}},[t._v("ใบส่งเลขที่: ")]),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("input",{staticClass:"form-control",attrs:{id:"lb-2",type:"text",name:"transfer_number",disabled:!0},domProps:{value:t.header.transfer_number}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"input_date",id:"input_date",placeholder:"โปรดเลือกวันที่",disabled:!t.header.can.edit,value:t.header.product_date_format,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,r=Array(a);a--;)r[a]=arguments[a];return t.setdate.apply(void 0,r.concat(["product_date_format"]))}}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(1),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"input_date",id:"input_date",disabled:!t.header.can.edit,placeholder:"โปรดเลือกวันที่",value:t.header.transfer_date_format,format:t.transDate["js-format"]},on:{dateWasSelected:function(e){for(var a=arguments.length,r=Array(a);a--;)r[a]=arguments[a];return t.setdate.apply(void 0,r.concat(["transfer_date_format"]))}}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(2),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"","value-key":"transfer_objective",disabled:!t.header.can.edit,filterable:""},on:{change:t.selectObjectiveCode},model:{value:t.header.transfer_objective,callback:function(e){t.$set(t.header,"transfer_objective",e)},expression:"header.transfer_objective"}},t._l(t.data.objective_code_list,(function(t){return a("el-option",{key:JSON.stringify(t),attrs:{label:t.description,value:t.lookup_code}})})),1)],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right"},[t._v("สถานะขอเบิก: ")]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("input",{staticClass:"form-control",attrs:{type:"text",readonly:"",disabled:""},domProps:{value:function(){if(t.header.transfer_status){var e=t.data.request_status_list.find((function(e){return e.lookup_code==t.header.transfer_status}));if(e)return e.description}return null}()}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right"},[t._v("สัปดาห์: ")]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("input",{staticClass:"form-control",attrs:{type:"text",readonly:"",disabled:""},domProps:{value:t.dateWeekOfYear(t.header.product_date_format)}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right"},[t._v("หน่วยงาน  "),5==t.header.transfer_objective?a("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e(),t._v(": ")]),t._v(" "),a("div",{staticClass:"col-lg-7"},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"","value-key":"transfer_objective",disabled:5!=t.header.transfer_objective,filterable:""},model:{value:t.header.attribute2,callback:function(e){t.$set(t.header,"attribute2",e)},expression:"header.attribute2"}},t._l(t.ptpmExCigDepartment,(function(t){return a("el-option",{key:JSON.stringify(t),attrs:{label:t.description,value:t.description}})})),1)],1)])])])],1)]),t._v(" "),t.loading.before_mount?t._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.page,expression:"loading.page"}],staticClass:"ibox float-e-margins"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-right"},[a("button",{class:t.transBtn.create.class+" btn-lg tw-w-25",attrs:{disabled:!t.header.can.edit},on:{click:function(e){return e.preventDefault(),t.addNewLine(e)}}},[a("i",{class:t.transBtn.create.icon}),t._v("\n                            เพิ่มรายการ\n                        ")])])])])]),t._v(" "),a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"table-responsive m-t"},[a("table",{staticClass:"table text-nowrap table-bordered"},[t._m(3),t._v(" "),a("tbody",t._l(t.lines,(function(e,r){return t.lines.length?a("tr",[a("td",{staticClass:"align-middle text-center",attrs:{date:r}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_selected,expression:"line.is_selected"}],attrs:{type:"checkbox",disabled:!t.header.can.edit||e.is_disable},domProps:{checked:Array.isArray(e.is_selected)?t._i(e.is_selected,null)>-1:e.is_selected},on:{click:function(a){return t.selectLine(r,e)},change:function(a){var r=e.is_selected,n=a.target,s=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(e,"is_selected",r.concat([null])):i>-1&&t.$set(e,"is_selected",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(e,"is_selected",s)}}})]),t._v(" "),a("td",[e.transfer_line_id&&!t.header.can.edit?[t._v("\n                                    "+t._s(e.item_number)+"\n                                ")]:[a("div",{staticStyle:{display:"flex"}},[e.is_edit_item&&t.header.can.edit?[a("search-item",{attrs:{pHeader:t.header,inventoryItemId:e.inventory_item_id,url:t.url},on:{getItems:t.getItems,itemWasSelected:function(a){for(var r=arguments.length,n=Array(r);r--;)n[r]=arguments[r];return t.itemWasSelected.apply(void 0,n.concat([e]))}}}),t._v(" "),t.header.can.edit&&e.request_line_id?a("button",{staticClass:"btn btn-outline btn-xs mb-0",attrs:{type:"button",title:"ยกเลิกแก้ไข"},on:{click:function(t){t.preventDefault(),e.is_edit_item=!1}}},[a("i",{staticClass:"fa fa-refresh"})]):t._e()]:[a("el-input",{attrs:{placeholder:"Please input",value:e.item_number,disabled:!0}}),t._v(" "),t.header.can.edit&&e.transfer_line_id&&!e.is_disable?a("button",{staticClass:"btn btn-outline btn-xs mb-0",attrs:{type:"button",title:"แก้ไข"},on:{click:function(t){t.preventDefault(),e.is_edit_item=!0}}},[a("i",{class:t.transBtn.edit.icon})]):t._e()]],2)]],2),t._v(" "),a("td",{},[t._v("\n                                "+t._s(e.item_desc)+"\n                                "),e.cost_valid?t._e():a("div",{staticClass:"text-danger"},[a("strong",[t._v(t._s(e.cost_validate_msg))])])]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.subinventory_from))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.attribute2))]),t._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"input-group "},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.transaction_qty,expression:"line.transaction_qty",modifiers:{number:!0}}],staticClass:"form-control text-right",staticStyle:{height:"40px"},attrs:{type:"number",disabled:!t.header.can.edit||!e.inventory_item_id||e.is_disable},domProps:{value:e.transaction_qty},on:{input:function(a){a.target.composing||t.$set(e,"transaction_qty",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("td",[a("div",{staticStyle:{"padding-left":"5px"}},[a("el-select",{attrs:{placeholder:"โปรดเลือกหน่วย",disabled:!e.inventory_item_id||e.is_disable},model:{value:e.transaction_uom,callback:function(a){t.$set(e,"transaction_uom",a)},expression:"line.transaction_uom"}},t._l(e.uom_list,(function(t,e){return a("el-option",{key:e,attrs:{label:t.from_unit_of_measure,value:t.from_uom_code}})})),1)],1)])]):t._e()})),0)])]),t._v(" "),0===t.lines.length?a("div",{staticClass:"text-center"},[a("span",{staticClass:"lead"},[t._v("No Data.")])]):t._e()])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right",attrs:{for:"lb-3"}},[t._v("วันที่ได้ผลผลิต "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(": ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right"},[t._v("วันที่ส่งผลผลิต "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(": ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-lg-4 font-weight-bold col-form-label text-right"},[t._v("วัตถุประสงค์ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(": ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"10px;"}}),t._v(" "),a("th",{attrs:{width:"150px;"}},[t._v("\n                                        \n                                        \n                                รหัสสินค้าสำเร็จรูป "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("\n                                        \n                                        \n                            ")]),t._v(" "),a("th",[t._v("รายละเอียด")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px;"}},[t._v("\n                                คลังสินค้า\n                            ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100px;"}},[t._v("\n                                คลังสินค้าย่อย\n                            ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"250px;"}},[t._v("\n                                จำนวน "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"250px;"}},[t._v("\n                                หน่วยนับ "),a("span",{staticStyle:{color:"red"}},[t._v("*")])])])])}],!1,null,null,null).exports}}]);