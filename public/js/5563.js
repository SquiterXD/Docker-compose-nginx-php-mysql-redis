(self.webpackChunk=self.webpackChunk||[]).push([[5563],{25563:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var a=r(87757),o=r.n(a),n=r(30381),s=r.n(n);function i(t,e,r,a,o,n,s){try{var i=t[n](s),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(a,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var n=t.apply(e,r);function s(t){i(n,a,o,s,l,"next",t)}function l(t){i(n,a,o,s,l,"throw",t)}s(void 0)}))}}const u={props:["url","trans-date","trans-btn","module","url-ger-param","default-program-code"],data:function(){return{options:[],value:this.defaultProgramCode?this.defaultProgramCode:[],list:[],loading:!1,states:[],infos:[],programs:[],infoAttributes:[],date:{},functionName:"",functionReport:"",reportType:"pdf",errorLists:[]}},mounted:function(){this.defaultProgramCode&&this.getInfos()},methods:{remoteMethod:function(t){var e=this;return l(o().mark((function r(){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a={params:{module:[e.module],uQuery:t}},axios.get(e.urlGerParam,a).then((function(t){e.programs=t.data.programs,e.options=t.data.programs})).catch((function(t){}));case 2:case"end":return r.stop()}}),r)})))()},remote:function(t){var e=this;return l(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:""!==t?(e.loading=!0,setTimeout((function(){e.loading=!1,e.options=e.programs.filter((function(e){if(e.program_code)return e.program_code.toLowerCase().indexOf(t.toLowerCase())>-1}))}),200)):e.options=[];case 1:case"end":return r.stop()}}),r)})))()},getData:function(t){var e=this;return l(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:axios.get(e.url.getInfor).then((function(t){e.programs=t.data.programs})).then((function(){e.list=e.infos.map((function(t){return{value:"value:".concat(t.program_code),label:"label:".concat(t.program_code)}}))})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})))()},getInfos:function(){var t=this;return l(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.infoAttributes=[],t.functionName="",t.errorLists=[],axios.get(t.url.getInfoAttribute+"?program_code="+t.value).then((function(e){t.infoAttributes=e.data.reportInfor,t.functionName=e.data.functionName,t.functionReport=e.data.functionReport,t.programs=e.data.programs,t.options=e.data.programs})).then((function(){})).catch((function(t){}));case 4:case"end":return e.stop()}}),e)})))()},getYear:function(t,e){"month"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-datatime-format"])),"year"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-year-format"])),"date"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-format"]))},exportReport:function(){},checkForm:function(t){var e=this;if(this.errorLists=[],this.infoAttributes.forEach((function(t){if(1==t.required&null==t.form_value){var r="โปรดระบุ.  "+t.display_value;e.errorLists.push(r)}})),0==this.errorLists.length)return!0;t.preventDefault()},selectedList:function(t){return t.value},selectCheck:function(t,e){}}};const c=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-select",{staticClass:"col-11",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter a report ","remote-method":t.remoteMethod,clearable:""},on:{change:t.getInfos,input:function(e){return t.remoteMethod(" ")}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return r("el-option",{key:t.program_code,attrs:{label:t.program_code+" "+t.description,value:t.program_code}})})),1),t._v(" "),r("form",{attrs:{action:t.url.getParam,method:"get",target:"_blank"},on:{submit:t.checkForm}},[r("hr",{staticClass:"m-3"}),t._v(" "),t.infoAttributes.length>0?r("div",{staticClass:"form-group"},[t._l(t.infoAttributes,(function(e,a){return r("div",{key:a},["text"==e.form_type?r("div",{staticClass:"row m-2"},[r("div",{staticClass:"m-1 col-3 text-right"},[r("div",[t._v("  "+t._s(e.display_value)+" "),"1"==e.required?r("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-6"},[r("input",{staticClass:"form-control w-100 ",attrs:{type:"text",name:e.attribute_name}})])]):t._e(),t._v(" "),"date"==e.form_type?r("div",{staticClass:"row m-2"},[r("div",{staticClass:"m-1 col-3 text-right"},[r("div",[t._v("\n                            "+t._s(e.display_value)+"  "),"1"==e.required?r("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-6"},[r("datepicker-th",{staticClass:"form-control col-lg-12",staticStyle:{width:"100%","border-radius":"3px"},attrs:{id:"input_date",pType:e.date_type,format:e.format_date},on:{dateWasSelected:function(r){for(var a=arguments.length,o=Array(a);a--;)o[a]=arguments[a];return t.getYear.apply(void 0,o.concat([e]))}},model:{value:e.attribute_name[e.id],callback:function(r){t.$set(e.attribute_name,e.id,r)},expression:"infoAttribute.attribute_name[infoAttribute.id]"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form_value,expression:"infoAttribute.form_value"}],attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value},on:{input:function(r){r.target.composing||t.$set(e,"form_value",r.target.value)}}})],1)]):t._e(),t._v(" "),"select"==e.form_type?r("div",{staticClass:"row m-2"},[r("div",{staticClass:"m-1 col-3 text-right"},[r("div",[t._v(t._s(e.display_value)+" "),"1"==e.required?r("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-6"},[r("el-select",{staticClass:"w-100 text-left",attrs:{filterable:"",clearable:"","popper-append-to-body":!1},on:{change:function(r){return t.selectCheck(e.attribute_3)}},model:{value:e.form_value,callback:function(r){t.$set(e,"form_value",r)},expression:"infoAttribute.form_value"}},[t._l(e.lists,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),r("input",{attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value}})],2)],1)]):t._e(),t._v(" "),"options"==e.form_type?r("div",{staticClass:"row m-2"},[r("div",{staticClass:"m-1 col-3 text-right"},[r("div",[t._v(t._s(e.display_value)+" "),"1"==e.required?r("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-6"},[r("el-select",{staticClass:"w-100 text-left",attrs:{filterable:"",clearable:"","popper-append-to-body":!1},model:{value:e.form_value,callback:function(r){t.$set(e,"form_value",r)},expression:"infoAttribute.form_value"}},[t._l(e.lists,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),r("input",{attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value}})],2)],1)]):t._e()])})),t._v(" "),"Y"==t.functionReport.attribute_9?r("div",{staticClass:"row m-2"},[t._m(0),t._v(" "),r("div",{staticClass:"col-6"},[r("el-radio",{attrs:{label:"pdf"},model:{value:t.reportType,callback:function(e){t.reportType=e},expression:"reportType"}},[t._v(" PDF ")]),t._v(" "),r("el-radio",{attrs:{label:"excel"},model:{value:t.reportType,callback:function(e){t.reportType=e},expression:"reportType"}},[t._v(" Excel ")])],1)]):t._e(),t._v(" "),r("div",{staticClass:"row m-2"},[r("div",{staticClass:"col-12 text-center"},[t.errorLists.length>0?r("p"):t._e(),t._l(t.errorLists,(function(e,a){return r("div",{key:a,staticClass:"font-weight-bold text-danger"},[t._v("\n                            "+t._s(e)+"\n                        ")])})),t._v(" "),r("p")],2)]),t._v(" "),r("input",{attrs:{type:"hidden",name:"program_code"},domProps:{value:t.value}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"function_name"},domProps:{value:t.functionName}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"output"},domProps:{value:t.reportType}}),t._v(" "),r("div",{staticClass:"text-center"},[r("button",{class:t.transBtn.printReport.class,attrs:{type:"submit"}},[r("i",{class:t.transBtn.printReport.icon}),t._v(" "+t._s(t.transBtn.printReport.text))])])],2):t._e()])],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-1 col-3 text-right"},[r("div",[t._v(" ประเภทรายงาน "),r("span",{staticClass:"tw-text-red-400"},[t._v("* ")])])])}],!1,null,null,null).exports}}]);