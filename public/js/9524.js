(self.webpackChunk=self.webpackChunk||[]).push([[9524],{75612:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var a=r(23645),s=r.n(a)()((function(t){return t[1]}));s.push([t.id,".ct-header[data-v-2584d53d]{font-size:1.1rem;font-weight:700}.ct-table[data-v-2584d53d]{border:1px solid #ddd}.ct-table div[data-v-2584d53d]{padding:10px}.ct-table div[data-v-2584d53d]:not(:last-child){border-bottom:1px solid #ddd}.ct-table__header[data-v-2584d53d]{background:#ddd;font-weight:700}.el-table .warning-row[data-v-2584d53d]{background-color:#fdf5e6!important}.side_list[data-v-2584d53d]{height:500px;border-radius:5px;padding:20px;border:2px solid #eee}.side_list .title[data-v-2584d53d]{font-size:14px;font-weight:700;color:#909399}.side_list .show_list[data-v-2584d53d]{max-height:400px;overflow:scroll}.side_list .show_list-item[data-v-2584d53d]{width:100%;justify-content:space-between}.m-px__5[data-v-2584d53d]{margin:5px}.flex[data-v-2584d53d]{display:flex}.text-title[data-v-2584d53d]{font-size:16px;font-weight:600}.btn-info[data-v-2584d53d]{background-color:#02b0ef;border-color:#02b0ef}.btn-cancel[data-v-2584d53d]{background-color:#ec4958;border-color:#ec4958;color:#fff}.text-refresh[data-v-2584d53d]{color:#ec4958}.show_list[data-v-2584d53d]{display:flex;flex-wrap:wrap}.show_list-item[data-v-2584d53d]{cursor:pointer;display:flex;margin:5px;background-color:#f4f4f5;padding:3px 10px;color:#909399;border-color:#e9e9eb;border-radius:3px;text-align:left;align-items:center}.show_list-item[data-v-2584d53d]:hover{background-color:#ededf0}.show_list-item__close[data-v-2584d53d]{margin-left:10px}",""]);const o=s},29524:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var a=r(87757),s=r.n(a);function o(t,e,r,a,s,o,n){try{var i=t[o](n),d=i.value}catch(t){return void r(t)}i.done?e(d):Promise.resolve(d).then(a,s)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var n=t.apply(e,r);function i(t){o(n,a,s,i,d,"next",t)}function d(t){o(n,a,s,i,d,"throw",t)}i(void 0)}))}}const i={props:["product_group","product","new_products","p_cost_code","p_product_group"],data:function(){return{tableData:[],form:{loading_data:!1,show:!1,loading:!1,items:[],delItems:{}}}},mounted:function(){this.tableData=this.product,$(".slimScroll").slimScroll({height:"650px"})},methods:{store:function(){var t=this;axios.post("/ct/ajax/product_group/product-item",this.product_group).then((function(e){var r=e.data.data;t.$message({showClose:!0,message:r,type:"success"})})).catch((function(e){var r=e.response.data.data;t.$message({showClose:!0,message:r,type:"error"})}))},delLine:function(t){var e=this;return n(s().mark((function r(){var a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=e,Object.keys(a.form.delItems).length,1==t.is_delete?a.$set(a.form.delItems,t.inventory_item_id,t.inventory_item_id):Vue.delete(a.form.delItems,t.inventory_item_id);case 3:case"end":return r.stop()}}),r)})))()},cancel:function(){var t=this;return n(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.form.show=!1,t.form.items=[];case 2:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return n(s().mark((function e(){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={cost_code:(r=t).p_cost_code,product_group:r.p_product_group,items:r.form.items},r.form.loading=!0,axios.post("/ct/ajax/product_group/store-product-item",{input:a}).then(function(){var t=n(s().mark((function t(e){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("S"!=(a=e.data).status){t.next=6;break}return t.next=4,swal({title:"&nbsp;",text:"บันทึกข้อมูลสำเร็จ",type:"success",html:!0});case 4:r.form.items=[],location.reload();case 6:"S"!=a.status&&(swal({title:"Error !",text:a.message,type:"error",showConfirmButton:!0}),location.reload()),r.form.loading=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},del:function(){var t=this;return n(s().mark((function e(){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,a={cost_code:(r=t).p_cost_code,product_group:r.p_product_group,del_items:r.form.delItems},e.next=5,helperAlert.showProgressConfirm("กรุณายืนยันลบข้อมูล");case 5:e.sent&&(r.form.loading_data=!0,axios.post("/ct/ajax/product_group/del-product-item",{input:a}).then(function(){var t=n(s().mark((function t(e){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("S"!=(a=e.data).status){t.next=6;break}return t.next=4,swal({title:"&nbsp;",text:"บันทึกข้อมูลสำเร็จ",type:"success",html:!0});case 4:r.form.delItems={},location.reload();case 6:"S"!=a.status&&(swal({title:"Error !",text:a.message,type:"error",showConfirmButton:!0}),location.reload()),r.form.loading_data=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})))()}}};r(41094);const d=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-product-groups"},[r("div",{staticClass:"col-lg-12 mt-2"},[r("el-card",{staticClass:"box-card my-2"},[r("div",{staticClass:"ct-header clearfix",attrs:{slot:"header"},slot:"header"},[t._v("\n      ศูนย์ต้นทุน "+t._s(t.product_group.cost_code)+" "+t._s(t.product_group.cost_description)+" \n    ")]),t._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.form.loading_data,expression:"form.loading_data"}],staticClass:"px-4 py-2"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("div",[t._v("\n            กลุ่มผลิตภัณฑ์: "+t._s(t.product_group.product_group)+" - "+t._s(t.product_group.description)+"\n          ")]),t._v(" "),r("div",{staticClass:"mt-5"},[r("div",{staticClass:"slimScroll"},[r("table",{staticClass:"table table table-bordered"},[r("thead",[r("tr",[r("th",{attrs:{width:"10px;"}}),t._v(" "),r("th",{attrs:{width:""}},[t._v("\n                            ผลิตภัณฑ์\n                        ")])])]),t._v(" "),r("tbody",[0==t.tableData.length?r("tr",[r("td",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("ไม่พบข้อมูล")])]):t._l(t.tableData,(function(e,a){return r("tr",{key:a},[r("td",{staticClass:"align-middle text-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.is_delete,expression:"item.is_delete"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.is_delete)?t._i(e.is_delete,null)>-1:e.is_delete},on:{change:[function(r){var a=e.is_delete,s=r.target,o=!!s.checked;if(Array.isArray(a)){var n=t._i(a,null);s.checked?n<0&&t.$set(e,"is_delete",a.concat([null])):n>-1&&t.$set(e,"is_delete",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e,"is_delete",o)},function(r){return t.delLine(e)}]}})]),t._v(" "),r("td",[t._v(t._s(e.product_item_number)+" - "+t._s(e.product_item_desc))])])}))],2)])])])]),t._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.form.loading,expression:"form.loading"}],staticClass:"col-6 text text-right"},[r("div",{staticClass:"text-right"},[Object.keys(t.form.delItems).length>0?r("button",{staticClass:"btn btn-danger btn-lg ml-2 tw-w-34",attrs:{type:"button"},on:{click:function(e){return t.del()}}},[t._v("\n                  ลบผลิตภัณฑ์\n                ")]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-primary btn-lg ml-2 tw-w-34",attrs:{type:"button"},on:{click:function(e){t.form.show=!0}}},[t._v("\n                    เพิ่มผลิตภัณฑ์ใหม่\n                ")]),t._v(" "),r("button",{staticClass:"btn btn-success btn-lg ml-2 tw-w-24",attrs:{disabled:0==t.form.items.length,type:"button"},on:{click:function(e){return t.save()}}},[t._v("\n                  บันทึก\n                ")]),t._v(" "),r("a",{staticClass:"btn btn-danger ml-2 btn-lg tw-w-24",attrs:{href:"/ct/product_group"}},[t._v("\n                  ย้อนกลับ\n                ")])]),t._v(" "),r("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t.form.show?r("div",{staticClass:"row text-left"},[r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-2"},[r("label",{staticClass:"text-left text-muted tw-font-bold tw-uppercase mb-0"},[t._v("ผลิตภัณฑ์ :")]),t._v(" "),r("div",{staticClass:"input-group "},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",multiple:"",placeholder:""},model:{value:t.form.items,callback:function(e){t.$set(t.form,"items",e)},expression:"form.items"}},t._l(t.new_products,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),r("div",{staticClass:"text-center form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-3"},[r("button",{staticClass:"btn btn-white btn-lg  tw-w-24",attrs:{type:"button"},on:{click:function(e){return t.cancel()}}},[t._v("\n                          ยกเลิก\n                      ")])])]):t._e()])],1)])])])],1)])}),[],!1,null,"2584d53d",null).exports},51900:(t,e,r)=>{"use strict";function a(t,e,r,a,s,o,n,i){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=d):s&&(d=i?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:c}}r.d(e,{Z:()=>a})},41094:(t,e,r)=>{var a=r(75612);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,r(45346).Z)("4f549f38",a,!0,{})}}]);