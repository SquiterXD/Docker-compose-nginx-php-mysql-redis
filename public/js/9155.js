(self.webpackChunk=self.webpackChunk||[]).push([[9155],{59155:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var s=i(87757),a=i.n(s);function o(t,e,i,s,a,o,l){try{var c=t[o](l),r=c.value}catch(t){return void i(t)}c.done?e(r):Promise.resolve(r).then(s,a)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(s,a){var l=t.apply(e,i);function c(t){o(l,s,a,c,r,"next",t)}function r(t){o(l,s,a,c,r,"throw",t)}c(void 0)}))}}const c={props:["itemCategories","salesTypes","tastes","productTypeDomestics","productTypeExports","mainAccounts","defaultValue","old","setName"],data:function(){return{item_category:this.old.item_category?this.old.item_category:this.defaultValue?this.defaultValue.item_category:"",item_group:this.old.item_group?this.old.item_group:this.defaultValue?this.defaultValue.item_group:"",item_id:this.old.item_id?Number(this.old.item_id):this.defaultValue?Number(this.defaultValue.item_id):"",item_description:"",ecom_item_description:this.old.ecom_item_description?this.old.ecom_item_description:this.defaultValue?this.defaultValue.ecom_item_description:"",report_item_display:this.old.report_item_display?this.old.report_item_display:this.defaultValue?this.defaultValue.report_item_display:"",sales_type:this.old.sales_type?this.old.sales_type:this.defaultValue?this.defaultValue.sale_type_code:"",productTypes:[],product_type:"",screen_number:this.old.screen_number?this.old.screen_number:this.defaultValue?this.defaultValue.screen_number:"",taste_code:this.old.taste_code?this.old.taste_code:this.defaultValue?this.defaultValue.taste_code:"",main_account:this.old.main_account?this.old.main_account:this.defaultValue?this.defaultValue.main_account_code:"",sub_account:this.old.sub_account?this.old.sub_account:this.defaultValue?this.defaultValue.sub_account_code:"",filter_flag:this.old.filter_flag?this.old.filter_flag:this.defaultValue?this.defaultValue.filter_flag:"",disabledData:!0,disabledEdit:!!this.defaultValue,start_date:this.old.start_date?this.old.start_date:this.defaultValue?this.defaultValue.start_date:"",end_date:this.old.end_date?this.old.end_date:this.defaultValue?this.defaultValue.end_date:"",subAccounts:[],subLoading:!1,productTypeLoading:!0,itemGroupLoading:!1,itemLoading:!0,itemGroups:[],itemLists:[],out_of_stock:!!this.old.out_of_stock||!!this.defaultValue&&"Y"==this.defaultValue.attribute1}},mounted:function(){this.sales_type&&this.getSelectesalesType(),this.main_account&&this.getSubAccounts(),this.item_category&&(this.getItemGroups(),this.item_group&&this.getItems())},methods:{getItemGroups:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.item_category){e.next=8;break}return t.itemGroupLoading=!0,t.itemGroups=[],t.itemLists=[],e.next=6,axios.get("/om/ajax/get-item-cate",{params:{item_category:t.item_category}}).then((function(e){t.itemGroupLoading=!1,t.itemGroups=e.data})).catch((function(t){console.log(t)}));case 6:e.next=15;break;case 8:t.itemGroups=[],t.itemLists=[],t.item_group="",t.item_id="",t.item_description="",t.ecom_item_description="",t.report_item_display="";case 15:case"end":return e.stop()}}),e)})))()},getItems:function(t){var e=this;return l(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.item_group){i.next=7;break}return e.itemLoading=!1,e.itemLists=[],i.next=5,axios.get("/om/ajax/get-item",{params:{item_category:e.item_category,item_group:e.item_group,query:t}}).then((function(t){if(e.itemLists=t.data,e.selectedItem=e.itemLists.find((function(t){return t.inventory_item_id==e.item_id})),e.item_id){e.item_description=e.defaultValue?e.defaultValue.item_description:e.selectedItem?e.selectedItem.item_description:"",e.ecom_item_description=e.defaultValue?e.defaultValue.ecom_item_description:e.selectedItem?e.selectedItem.item_description:"",e.report_item_display=e.defaultValue?e.defaultValue.report_item_display:e.selectedItem?e.selectedItem.item_description:"";var i=e.selectedItem?e.selectedItem.taste_name:"";e.selectedData=e.tastes.find((function(t){return t.description==i})),e.taste_code=e.selectedData?e.selectedData.value:""}else e.item_description="",e.ecom_item_description="",e.report_item_display=""})).catch((function(t){console.log(t)}));case 5:i.next=12;break;case 7:e.itemLoading=!0,e.item_id="",e.item_description="",e.ecom_item_description="",e.report_item_display="";case 12:case"end":return i.stop()}}),i)})))()},getSelectedItem:function(){var t=this;this.selectedItem=this.itemLists.find((function(e){return e.inventory_item_id==t.item_id})),this.item_id?(this.item_description=this.defaultValue?this.defaultValue.item_description:this.selectedItem?this.selectedItem.item_description:"",this.ecom_item_description=this.defaultValue?this.defaultValue.ecom_item_description:this.selectedItem?this.selectedItem.item_description:"",this.report_item_display=this.defaultValue?this.defaultValue.report_item_display:this.selectedItem?this.selectedItem.item_description:""):(this.item_description="",this.ecom_item_description="",this.report_item_display="")},getSelectesalesType:function(){var t=this;if(this.productTypeLoading=!0,this.product_type="",this.sales_type){if("DOMESTIC"==this.sales_type){if(this.productTypes=this.productTypeDomestics,this.item_group){this.selected=this.itemGroups.find((function(e){return e.groups==t.item_group}));var e=this.selected?this.selected.description:"";e&&(this.selectedData=this.productTypes.find((function(t){return t.meaning==e})),this.product_type=this.selectedData?this.selectedData.lookup_code:"")}this.old.product_type?(this.selectedData=this.productTypes.find((function(e){return e.lookup_code==t.old.product_type})),this.product_type=this.selectedData.lookup_code):this.defaultValue&&(this.selectedData=this.productTypes.find((function(e){return e.lookup_code==t.defaultValue.product_type_code})),this.product_type=this.selectedData.lookup_code)}else{if(this.productTypes=this.productTypeExports,this.item_group){this.selected=this.itemGroups.find((function(e){return e.groups==t.item_group}));var i=this.selected?this.selected.description:"";i&&(this.selectedData=this.productTypes.find((function(t){return t.meaning==i})),this.product_type=this.selectedData?this.selectedData.lookup_code:"")}this.old.product_type?(this.selectedData=this.productTypes.find((function(e){return e.lookup_code==t.old.product_type})),this.product_type=this.selectedData.lookup_code):this.defaultValue&&(this.selectedData=this.productTypes.find((function(e){return e.lookup_code==t.defaultValue.product_type_code})),this.product_type=this.selectedData.lookup_code)}this.productTypeLoading=!1}else this.product_type=""},getSubAccounts:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.main_account||(t.subLoading=!0,t.sub_account="",t.subAccounts=[]),console.log("getSubAccounts setName -- "+t.setName),axios.get("/om/ajax/sub-accounts",{params:{main_account_id:t.main_account,set_name:t.setName}}).then((function(e){t.subLoading=!1,t.subAccounts=e.data}));case 3:case"end":return e.stop()}}),e)})))()},changeGroup:function(){this.item_id="",this.item_description="",this.ecom_item_description="",this.report_item_display="",this.sales_type="",this.product_type="",this.screen_number="",this.taste_code="",this.main_account="",this.sub_account="",this.start_date="",this.end_date="",this.getItems()},changeCategory:function(){this.item_group="",this.item_id="",this.item_description="",this.ecom_item_description="",this.report_item_display="",this.sales_type="",this.product_type="",this.screen_number="",this.taste_code="",this.main_account="",this.sub_account="",this.start_date="",this.end_date="",this.getItemGroups()},onlyNumeric:function(){this.screen_number=this.screen_number.replace(/[^0-9 .]/g,"")}}};const r=(0,i(51900).Z)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(0),t._v(" "),i("input",{attrs:{type:"hidden",name:"item_category",autocomplete:"off"},domProps:{value:t.item_category}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:this.disabledEdit},on:{change:function(e){return t.changeCategory()}},model:{value:t.item_category,callback:function(e){t.item_category=e},expression:"item_category"}},t._l(t.itemCategories,(function(t){return i("el-option",{key:t.categorys,attrs:{label:t.categorys+" : "+t.description,value:t.categorys}})})),1)],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.itemGroupLoading,expression:"itemGroupLoading"}],staticClass:"col-md-5"},[t._m(1),t._v(" "),i("input",{attrs:{type:"hidden",name:"item_group",autocomplete:"off"},domProps:{value:t.item_group}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:this.disabledEdit||this.itemGroups.length<1},on:{change:function(e){return t.changeGroup()}},model:{value:t.item_group,callback:function(e){t.item_group=e},expression:"item_group"}},t._l(t.itemGroups,(function(t){return i("el-option",{key:t.groups,attrs:{label:t.groups+" : "+t.description,value:t.groups}})})),1)],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(2),t._v(" "),i("input",{attrs:{type:"hidden",name:"item_id",autocomplete:"off"},domProps:{value:t.item_id}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"","remote-method":t.getItems,disabled:this.disabledEdit||this.itemLoading},on:{change:function(e){t.getItems(),t.getSelectedItem()}},model:{value:t.item_id,callback:function(e){t.item_id=e},expression:"item_id"}},t._l(t.itemLists,(function(t,e){return i("el-option",{key:e,attrs:{label:t.item_code+" : "+t.item_description,value:t.inventory_item_id}})})),1)],1),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" ชื่อตราผลิตภัณฑ์ ")]),t._v(" "),i("el-input",{attrs:{name:"item_description",disabled:""},model:{value:t.item_description,callback:function(e){t.item_description=e},expression:"item_description"}},[t._v(" "+t._s(t.item_description)+" ")])],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(3),t._v(" "),i("el-input",{attrs:{name:"ecom_item_description"},model:{value:t.ecom_item_description,callback:function(e){t.ecom_item_description=e},expression:"ecom_item_description"}},[t._v(" "+t._s(t.ecom_item_description)+" ")])],1),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(4),t._v(" "),i("el-input",{attrs:{name:"report_item_display"},model:{value:t.report_item_display,callback:function(e){t.report_item_display=e},expression:"report_item_display"}},[t._v(" "+t._s(t.report_item_display)+" ")])],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(5),t._v(" "),i("input",{attrs:{type:"hidden",name:"sales_type",autocomplete:"off"},domProps:{value:t.sales_type}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:""},on:{change:function(e){return t.getSelectesalesType()}},model:{value:t.sales_type,callback:function(e){t.sales_type=e},expression:"sales_type"}},t._l(t.salesTypes,(function(t){return i("el-option",{key:t.value,attrs:{label:t.description,value:t.value}})})),1)],1),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(6),t._v(" "),i("input",{attrs:{type:"hidden",name:"product_type",autocomplete:"off"},domProps:{value:t.product_type}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:this.productTypeLoading},model:{value:t.product_type,callback:function(e){t.product_type=e},expression:"product_type"}},t._l(t.productTypes,(function(t){return i("el-option",{key:t.lookup_code,attrs:{label:t.description,value:t.lookup_code}})})),1)],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" ลำดับหน้าจอ ")]),t._v(" "),i("el-input",{attrs:{name:"screen_number"},on:{input:t.onlyNumeric},model:{value:t.screen_number,callback:function(e){t.screen_number=e},expression:"screen_number"}})],1),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" รสชาติ ")]),t._v(" "),i("input",{attrs:{type:"hidden",name:"taste_code",autocomplete:"off"},domProps:{value:t.taste_code}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:""},model:{value:t.taste_code,callback:function(e){t.taste_code=e},expression:"taste_code"}},t._l(t.tastes,(function(t){return i("el-option",{key:t.value,attrs:{label:t.description,value:t.value}})})),1)],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(7),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_flag,expression:"filter_flag"}],staticClass:"ml-3",attrs:{type:"radio",name:"filter_flag",value:"Y"},domProps:{checked:t._q(t.filter_flag,"Y")},on:{change:function(e){t.filter_flag="Y"}}}),t._v(" มี\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_flag,expression:"filter_flag"}],staticClass:"ml-3",attrs:{type:"radio",name:"filter_flag",value:"N"},domProps:{checked:t._q(t.filter_flag,"N")},on:{change:function(e){t.filter_flag="N"}}}),t._v(" ไม่มี\n        ")]),t._v(" "),i("div",{staticClass:"col-md-5"})]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[t._m(8),t._v(" "),i("input",{attrs:{type:"hidden",name:"main_account",autocomplete:"off"},domProps:{value:t.main_account}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:""},on:{change:t.getSubAccounts},model:{value:t.main_account,callback:function(e){t.main_account=e},expression:"main_account"}},t._l(t.mainAccounts,(function(t){return i("el-option",{key:t.main_account,attrs:{label:t.main_account+" : "+t.description,value:t.main_account}})})),1)],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:this.subLoading,expression:"this.subLoading"}],staticClass:"col-md-5"},[t._m(9),t._v(" "),i("input",{attrs:{type:"hidden",name:"sub_account",autocomplete:"off"},domProps:{value:t.sub_account}}),t._v(" "),i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:this.subAccounts.length<1},model:{value:t.sub_account,callback:function(e){t.sub_account=e},expression:"sub_account"}},t._l(t.subAccounts,(function(t){return i("el-option",{key:t.meaning,attrs:{label:t.meaning+" : "+t.description,value:t.meaning}})})),1)],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" วันที่เริ่มต้น")]),t._v(" "),i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"วันที่เริ่มต้น",name:"start_date",format:"dd-MM-yyyy"},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" วันที่สิ้นสุด")]),t._v(" "),i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"วันที่สิ้นสุด",name:"end_date",format:"dd-MM-yyyy"},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)]),t._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-md-1"}),t._v(" "),i("div",{staticClass:"col-md-5"},[i("label",[t._v(" สินค้าหมด ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.out_of_stock,expression:"out_of_stock"}],staticClass:"ml-3",attrs:{type:"checkbox",name:"out_of_stock"},domProps:{checked:Array.isArray(t.out_of_stock)?t._i(t.out_of_stock,null)>-1:t.out_of_stock},on:{change:function(e){var i=t.out_of_stock,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.out_of_stock=i.concat([null])):o>-1&&(t.out_of_stock=i.slice(0,o).concat(i.slice(o+1)))}else t.out_of_stock=a}}})])])])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" Item Category (ประเภท) "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" Item Category (กลุ่ม) "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ตราผลิตภัณฑ์ "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ชื่อที่ปรากฏในหน้าจอ E-Commerce "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ชื่อที่ปรากฏในรายงาน "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ประเภทการขาย "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ชนิดผลิตภัณฑ์ "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" ก้นกรอง "),i("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" รหัสบัญชีหลัก "),i("span",{staticClass:"text-danger"},[t._v("(สำหรับกองรายได้และภาษี)")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[t._v(" รหัสบัญชีย่อย "),i("span",{staticClass:"text-danger"},[t._v("(สำหรับกองรายได้และภาษี)")])])}],!1,null,null,null).exports}}]);