(self.webpackChunk=self.webpackChunk||[]).push([[8348],{28348:(a,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var e=s(80455);const l={components:{VueNumeric:s.n(e)()},props:["saleClass"],data:function(){return{dateLoading:!1,loading:!1,disable_params:!1,disable_interface:!1,dateLists:[],documentNoLists:[],close_date:"",interface_status:"",group_id:""}},mounted:function(){},methods:{getDateLists:function(){var a=this;a.dateLoading=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/date-lists",{sale_class:a.saleClass}).then((function(t){a.dateLists=t.data})).catch((function(t){a.dateLoading=!1,a.showError(t.message)})).then((function(){a.dateLoading=!1}))},validate:function(){var a=this,t="",s=!1;if(a.close_date||(t+="กรุณาระบุวันที่ <br>",s=!0),s)return swal({html:!0,title:"กรุณาระบุข้อมูลให้ครบถ้วน",text:t,type:"error"}),!1;a.loading=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/validate-data",{close_date:a.close_date,sale_class:a.saleClass}).then((function(t){"S"==t.data.status?a.interface():a.showError(t.data.msg)})).catch((function(t){a.showError(t.message)})).then((function(){a.loading=!1}))},interface:function(){var a=this;a.loading=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/interface",{close_date:a.close_date,sale_class:a.saleClass}).then((function(t){a.interface_status=t.data.status,"S"==t.data.status?(a.close_date="",a.getDateLists(),a.showSuccess(t.data.msg),a.group_id=t.data.group_id):a.showError(t.data.msg)})).catch((function(t){a.showError(t.message)})).then((function(){a.loading=!1}))},showSuccess:function(a){swal("Success!",a,"success")},showError:function(a){swal("Error!",a,"error")}}};const i=(0,s(51900).Z)(l,(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}]},[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-3"}),a._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-12"},[a._m(0),a._v(" "),s("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Select",disabled:a.disable_params,loading:a.dateLoading},on:{focus:function(t){return a.getDateLists()}},model:{value:a.close_date,callback:function(t){a.close_date=t},expression:"close_date"}},a._l(a.dateLists,(function(a,t){return s("el-option",{key:t,attrs:{label:a,value:t}})})),1)],1)]),a._v(" "),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-12"},[s("label",[a._v("Group ID")]),a._v(" "),s("el-input",{staticClass:"w-100",attrs:{placeholder:"",disabled:!0},model:{value:a.group_id,callback:function(t){a.group_id=t},expression:"group_id"}})],1)]),a._v(" "),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-12"},[s("label",[a._v("หมายเหตุ")]),a._v(" "),s("el-input",{staticClass:"w-100",attrs:{placeholder:"",disabled:!0},model:{value:a.interface_status,callback:function(t){a.interface_status=t},expression:"interface_status"}})],1)]),a._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-center"},[s("button",{staticClass:"btn btn-primary mt-2 mt-md-0",attrs:{type:"button",disabled:a.disable_interface},on:{click:function(t){return a.validate()}}},[a._v(" Interface")])])])])])])}),[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("label",[a._v("วันที่ "),s("span",{staticClass:"text-danger"},[a._v("*")])])}],!1,null,null,null).exports}}]);