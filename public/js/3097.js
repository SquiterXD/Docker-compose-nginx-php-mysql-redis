(self.webpackChunk=self.webpackChunk||[]).push([[3097],{97784:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});var a=o(23645),n=o.n(a)()((function(t){return t[1]}));n.push([t.id,".sticky-col{position:-webkit-sticky;position:sticky;background-color:#f7f7f7;z-index:9999}.first-col{min-width:100px;left:0}.first-col,.second-col{width:150px;max-width:150px}.second-col{min-width:150px;left:116px}.th-row{top:0}.fo-col{left:416px}.fi-col,.fo-col{width:200px;min-width:150px;max-width:200px}.fi-col{left:566px}.t1-col{left:0}.t1-col,.t2-col{width:200px;min-width:150px;max-width:200px}.t2-col{left:566px}",""]);const i=n},13097:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>m});var a=o(87757),n=o.n(a),i=o(23570),r=o.n(i);function s(t,e,o,a,n,i,r){try{var s=t[i](r),c=s.value}catch(t){return void o(t)}s.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,o=arguments;return new Promise((function(a,n){var i=t.apply(e,o);function r(t){s(i,a,n,r,c,"next",t)}function c(t){s(i,a,n,r,c,"throw",t)}r(void 0)}))}}const l={props:["header","itemLocators","itemCategories","backUrl","data","btnTrans"],data:function(){return{flag:"",activeFlag:"Y"==this.header.active_flag,confirmActiveFlag:"",openProgamFlag:"",isDisabled:!1,cate_code:"",lines:[],linesOld:[],id:r()(),productInvHeader:this.header.header_id,subinventoryCode:this.header.subinventory_code,subinventoryDesc:this.header.subinventory_desc,groupProductId:this.header.group_product_id,loading:{locator:"",page:!1},itemLocatorsLists:this.itemLocators}},mounted:function(){var t=this;this.header.product_inv_lines.forEach((function(e){t.lines.push({id:r()(),lineId:e.line_id,cate_code:Number(e.category_code),locator:e.zone_code,delRow:!0})})),0==this.itemLocatorsLists.length&&(this.isDisabled=!0),this.header.product_inv_lines.forEach((function(e){t.linesOld.push({id:r()(),lineId:e.line_id,cate_code_old:Number(e.category_code),locator_old:e.zone_code,delRow:!0})})),"DuplicateLine"==this.data&&swal({title:"warning !",text:"มีข้อมูลซ้ำ ระดับ Line",type:"warning",showConfirmButton:!0})},methods:{checkDuplicateCategory:function(t){var e=this;this.lines.forEach((function(o,a){if(a!=t&&e.lines[t].cate_code==o.cate_code&&e.lines[t].locator==o.locator)return e.showAlert(),e.lines[t].locator="",void(e.lines[t].cate_code="")}))},checkDuplicateLocators:function(t){var e=this;this.lines.forEach((function(o,a){if(a!=t&&e.lines[t].locator==o.locator&&e.lines[t].cate_code==o.cate_code)return e.showAlert(),e.lines[t].cate_code="",void(e.lines[t].locator="")})),""!=this.lines.locator&&this.searchFunction()},showAlert:function(){swal({title:"Error !",text:"ไม่สามารถเลือกชุดข้อมูลนี้ได้ เนื่องจากมีชุดข้อมูลซ้ำ",type:"error",showConfirmButton:!0})},addLine:function(){var t=this;this.lines.push({id:r()(),lineId:"",cate_code:"",locator:"",delRow:!1}),this.$nextTick((function(){var e=t.$el.getElementsByClassName("endTable")[0];e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))},removeRow:function(t,e,o){var a={sub_group_id:o.lineId};e?swal({title:"Are you sure?",text:"You will not be able to recover this data!",type:"warning",showCancelButton:!0,confirmButtonClass:"btn btn-warning",confirmButtonText:"Confirm",closeOnConfirm:!1},(function(t){t&&axios.get("/ir/ajax/destroy",{params:a}).then((function(t){"s"===t.data.status&&(swal({title:"Deleted!",text:"Your data has been deleted.",type:"success",showConfirmButton:!1}),window.location.reload(!1))}))})):this.lines.splice(t,1)},searchFunction:function(t){var e=this;return c(n().mark((function o(){return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.loading.locator=!0,o.next=3,axios.get("/ir/ajax/get-value-set",{params:{subinventory_code:e.subinventoryCode,status:"Edit",query:t}}).then((function(t){e.itemLocatorsLists=t.data.data})).catch((function(t){})).then((function(){e.loading.locator=!1}));case 3:case"end":return o.stop()}}),o)})))()},checkActive:function(t){var e=this;return c(n().mark((function o(){var a,i,r;return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=$("#checkbox".concat(t)).is(":checked"),i={header_id:t,active_flag:a?"Y":"N"},e.loading.page=!0,r=e,o.next=6,axios.get("/ir/ajax/product-header/getDataActiveFlag",{params:i}).then((function(o){"IRM0004Close"==o.data.status&&(swal({title:"คุณต้องการเปิดใช้งานใช่ไหม?",text:"ข้อมูลหน้า IRM0004:ข้อมูลกลุ่มสินค้า มีการปิดการใช้งานอยู่ คุณต้องการเปิดการใช้งานทั้ง หน้า IRM0004 และ IRM0005 ใช่ไหม?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn btn-warning",confirmButtonText:"เปิดการใช้งาน",closeOnConfirm:!1},(function(e){e?(r.confirmActiveFlag=!0,r.openProgamFlag=o.data.status,swal.close()):$("#checkbox".concat(t)).prop("checked",!1)})),e.loading.page=!1),"twoClose"==o.data.status&&(swal({title:"คุณต้องการเปิดใช้งานใช่ไหม?",text:"ข้อมูลหน้า IRM0004:ข้อมูลกลุ่มสินค้า และ IRM0009: ข้อมูลกลุ่มย่อย มีการปิดการใช้งานอยู่ คุณต้องการเปิดการใช้งานทั้ง หน้า IRM0004 IRM0009 และ IRM0005 ใช่ไหม?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn btn-warning",confirmButtonText:"เปิดการใช้งาน",closeOnConfirm:!1},(function(e){e?(r.confirmActiveFlag=!0,r.openProgamFlag=o.data.status,swal.close()):$("#checkbox".concat(t)).prop("checked",!1)})),e.loading.page=!1),"IRM0009Close"==o.data.status&&(swal({title:"คุณต้องการเปิดใช้งานใช่ไหม?",text:"ข้อมูลหน้า IRM0009: ข้อมูลกลุ่มย่อย มีการปิดการใช้งานอยู่ คุณต้องการเปิดการใช้งานทั้ง หน้า IRM0009 และ IRM0005 ใช่ไหม?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn btn-warning",confirmButtonText:"เปิดการใช้งาน",closeOnConfirm:!1},(function(e){e?(r.confirmActiveFlag=!0,r.openProgamFlag=o.data.status,swal.close()):$("#checkbox".concat(t)).prop("checked",!1)})),e.loading.page=!1),"success"==o.data.status&&(e.loading.page=!1)}));case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}}),o)})))()}}};var d=o(93379),u=o.n(d),p=o(97784),v={insert:"head",singleton:!1};u()(p.Z,v);p.Z.locals;const m=(0,o(51900).Z)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.page,expression:"loading.page"}]},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.subinventoryDesc,expression:"subinventoryDesc"}],attrs:{type:"hidden",name:"subinventory_desc",autocomplete:"off"},domProps:{value:t.subinventoryDesc},on:{input:function(e){e.target.composing||(t.subinventoryDesc=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.subinventoryCode,expression:"subinventoryCode"}],attrs:{type:"hidden",name:"subinventory_code",autocomplete:"off"},domProps:{value:t.subinventoryCode},on:{input:function(e){e.target.composing||(t.subinventoryCode=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.productInvHeader,expression:"productInvHeader"}],attrs:{type:"hidden",name:"productInvHeader",autocomplete:"off"},domProps:{value:t.productInvHeader},on:{input:function(e){e.target.composing||(t.productInvHeader=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.groupProductId,expression:"groupProductId"}],attrs:{type:"hidden",name:"groupProductId",autocomplete:"off"},domProps:{value:t.groupProductId},on:{input:function(e){e.target.composing||(t.groupProductId=e.target.value)}}}),t._v(" "),o("div",{staticClass:"mt-2"},[o("div",{staticClass:"text-right"},[o("button",{class:t.btnTrans.add.class+" btn-sm",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addLine(e)}}},[o("i",{class:t.btnTrans.add.icon,attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.btnTrans.add.text)+" \n            ")])]),o("br"),t._v(" "),o("div",{staticClass:"table-responsive",staticStyle:{"max-height":"400px"}},[o("table",{staticClass:"table-sm",staticStyle:{position:"sticky"}},[t._m(0),t._v(" "),o("tbody",t._l(t.lines,(function(e,a){return o("tr",{key:a,class:[a==t.lines.length-1?"endTable":""],attrs:{row:e}},[o("td",{staticStyle:{"vertical-align":"middle"}},[t._v(" "+t._s(a+1)+" ")]),t._v(" "),o("td",{attrs:{id:"message"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.lineId,expression:"row.lineId"}],attrs:{type:"hidden",name:"dataGroup["+e.id+"][line_id]",autocomplete:"off"},domProps:{value:e.lineId},on:{input:function(o){o.target.composing||t.$set(e,"lineId",o.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.cate_code,expression:"row.cate_code"}],attrs:{type:"hidden",name:"dataGroup["+e.id+"][cate_codes]",autocomplete:"off"},domProps:{value:e.cate_code},on:{input:function(o){o.target.composing||t.$set(e,"cate_code",o.target.value)}}}),t._v(" "),o("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":""},on:{change:function(e){return t.checkDuplicateCategory(a)}},model:{value:e.cate_code,callback:function(o){t.$set(e,"cate_code",o)},expression:"row.cate_code"}},t._l(t.itemCategories,(function(t,e){return o("el-option",{key:e,attrs:{label:t.lookup_code+" : "+t.description,value:t.lookup_code}})})),1)],1),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.locator,expression:"row.locator"}],attrs:{type:"hidden",name:"dataGroup["+e.id+"][locators]",autocomplete:"off"},domProps:{value:e.locator},on:{input:function(o){o.target.composing||t.$set(e,"locator",o.target.value)}}}),t._v(" "),o("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.locator,expression:"loading.locator"}],staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",disabled:t.isDisabled,"remote-method":t.searchFunction},on:{change:function(e){return t.checkDuplicateLocators(a)}},model:{value:e.locator,callback:function(o){t.$set(e,"locator",o)},expression:"row.locator"}},t._l(t.itemLocatorsLists,(function(t,e){return o("el-option",{key:e,attrs:{label:t.meaning+" : "+t.description,value:t.flex_value}})})),1)],1),t._v(" "),o("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[o("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(o){return o.preventDefault(),t.removeRow(a,e.delRow,e)},change:function(o){return t.removeRowData(e,a)}}},[o("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])])})),0)])]),t._v(" "),t._l(t.linesOld,(function(e,a){return o("div",{key:a,attrs:{row:e}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.lineId,expression:"row.lineId"}],attrs:{type:"hidden",name:"dataGroupOld["+e.id+"][line_id]",autocomplete:"off"},domProps:{value:e.lineId},on:{input:function(o){o.target.composing||t.$set(e,"lineId",o.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.cate_code_old,expression:"row.cate_code_old"}],attrs:{type:"hidden",name:"dataGroupOld["+e.id+"][cate_code_old]",autocomplete:"off"},domProps:{value:e.cate_code_old},on:{input:function(o){o.target.composing||t.$set(e,"cate_code_old",o.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.locator_old,expression:"row.locator_old"}],attrs:{type:"hidden",name:"dataGroupOld["+e.id+"][locators_old]",autocomplete:"off"},domProps:{value:e.locator_old},on:{input:function(o){o.target.composing||t.$set(e,"locator_old",o.target.value)}}})])}))],2),t._v(" "),o("div",{staticClass:"row",staticStyle:{"padding-left":"15px","padding-top":"10px"}},[o("label",[t._v("Active")]),o("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.flag,expression:"flag"}],attrs:{type:"hidden",name:"activeFlag"},domProps:{value:t.flag},on:{input:function(e){e.target.composing||(t.flag=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmActiveFlag,expression:"confirmActiveFlag"}],attrs:{type:"hidden",name:"confirmActiveFlag"},domProps:{value:t.confirmActiveFlag},on:{input:function(e){e.target.composing||(t.confirmActiveFlag=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.openProgamFlag,expression:"openProgamFlag"}],attrs:{type:"hidden",name:"openProgamFlag"},domProps:{value:t.openProgamFlag},on:{input:function(e){e.target.composing||(t.openProgamFlag=e.target.value)}}}),t._v(" "),o("input",{staticStyle:{"margin-left":"10px"},attrs:{type:"checkbox",id:"checkbox"+t.header.header_id},domProps:{checked:t.header.showFlag},on:{change:function(e){return t.checkActive(t.header.header_id)}}})]),t._v(" "),o("div",{staticClass:"row clearfix text-right"},[o("div",{staticClass:"col",staticStyle:{"margin-top":"15px"}},[o("button",{class:t.btnTrans.save.class+" btn-sm",attrs:{type:"submit"}},[o("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                "+t._s(t.btnTrans.save.text)+" \n            ")]),t._v(" "),o("a",{class:t.btnTrans.cancel.class+" btn-sm",attrs:{href:t.backUrl,type:"button"}},[o("i",{class:t.btnTrans.cancel.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                "+t._s(t.btnTrans.cancel.text)+"\n            ")])])])])}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{staticClass:"sticky-col th-row",attrs:{width:"1%"}}),t._v(" "),o("th",{staticClass:"sticky-col th-row",attrs:{width:"70%"}},[t._v(" รหัสประเภท (Category Code) ")]),t._v(" "),o("th",{staticClass:"sticky-col th-row",attrs:{width:"30%"}},[t._v(" Locator ")]),t._v(" "),o("th",{staticClass:"sticky-col th-row",attrs:{width:"1%"}})])])}],!1,null,null,null).exports}}]);