(self.webpackChunk=self.webpackChunk||[]).push([[2799],{82799:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});const s={props:["defaultIssueHeader","lookupValues","user"],data:function(){var t,e;return{reason:"",allowed_status:"N",username:(null===(t=this.user)||void 0===t?void 0:t.username)||"",return_date:(null===(e=this.defaultIssueHeader)||void 0===e?void 0:e.gl_date)||"",loading:!1}},created:function(){},mounted:function(){var t=this;this.lookupValues.find((function(e){return e.meaning==t.username}))&&(this.allowed_status="Y")},methods:{returnIssue:function(){var t=this;this.loading=!0,axios.post("/inv/issue_return",{reason:this.reason,issue_header_id:this.defaultIssueHeader.issue_header_id,gl_date:this.return_date}).then((function(e){t.loading=!1,t.$notify({title:"Success",message:"Return Successfully",type:"success"}),window.location.replace("/inv/requisition_stationery/")})).catch((function(e){t.loading=!1,403==e.response.status&&t.$notify.error({title:"Error",message:e.response.data.msg,duration:4500});for(var a=t.$formatErrorMessage(e).getElementsByTagName("li"),s=0,r=a.length;s<r;s++)t.$notify.error({title:"Error",message:a[s].innerHTML,duration:4500})}))}}};const r=(0,a(51900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return"APPROVED"==t.defaultIssueHeader.issue_status&&"Y"==t.allowed_status?a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"col-md-12 text-right mt-2 p-0"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-toggle":"modal","data-target":"#returnRequest"}},[t._v("\n            Return\n        ")])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"returnRequest",tabindex:"-1",role:"dialog","aria-labelledby":"returnRequestLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label required"},[t._v("วันที่ยกเลิก")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-date-picker",{attrs:{type:"date",format:"dd/MM/yyyy",size:"small",placeholder:"Pick a day"},model:{value:t.return_date,callback:function(e){t.return_date=e},expression:"return_date"}})],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("h4",[t._v("กรุณาระบุสาเหตุการยกเลิกรายการเบิกจ่ายเครื่องเขียน")]),t._v(" "),a("div",{staticClass:"form-group row mt-3 mb-0"},[a("label",{staticClass:"col-md-4 col-form-label tw-text-xs required"},[t._v("รายละเอียดการยกเลิก")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:3},type:"textarea"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("ยกเลิก")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.returnIssue()}}},[t._v("ตกลง")])])])])])]):t._e()}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("div",{staticClass:"modal-title",attrs:{id:"returnRequestLabel"}},[a("h3",[t._v("Return Request")])]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],!1,null,null,null).exports}}]);