(self.webpackChunk=self.webpackChunk||[]).push([[5296],{45296:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var a=n(87757),o=n.n(a);function i(t,e,n,a,o,i,s){try{var r=t[i](s),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var s=t.apply(e,n);function r(t){i(s,a,o,r,l,"next",t)}function l(t){i(s,a,o,r,l,"throw",t)}r(void 0)}))}}const r={props:["transfers","itemCats","requestTypes"],data:function(){return{setupTransId:this.transfers?this.transfers.setup_trans_id:"",fromOrganization:this.transfers?this.transfers.organization_code+" : "+this.transfers.organization_name:"",oldItemCat:this.transfers?Number(this.transfers.item_cat_code):"",itemCat:this.transfers?Number(this.transfers.item_cat_code):"",oldEnableFlag:!!this.transfers&&"Y"==this.transfers.enable_flag,newEnableFlag:!!this.transfers&&"Y"==this.transfers.enable_flag,oldToOrganization:this.transfers?this.transfers.to_organization_id:"",toOrganization:"",oldSubinventoryCode:this.transfers?this.transfers.to_subinventory_code:"",toSubinventory:"",oldInventoryLocationId:this.transfers?this.transfers.to_locator_id:"",toLocations:this.transfers?this.transfers.to_locator_id:"",toOrganizationId:this.transfers?this.transfers.to_organization_id:"",itemCatId:this.transfers?this.transfers.item_cat_code:"",oldRequestType:this.transfers?this.transfers.request_type_code:"",requestType:this.transfers?this.transfers.request_type_code:"",locationsList:[],subinventoryList:[],organizationList:[],isDisabledToLocations:!0,isDisabledSubinventory:!0,isDisabledOrganization:!0,loading:{toOrganization:!1,toLocations:!1,toSubinventory:!1},firstLoad:!0}},mounted:function(){this.getOrganization(this.transfers?this.transfers.item_cat_code:"")},methods:{getOrganization:function(t){var e=this;return s(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={itemCat:t},e.loading.toOrganization=!0,e.loading.toSubinventory=!0,e.loading.toLocations=!0,n.next=6,axios.get("/pm/ajax/setup-transfer/get-organization",{params:a}).then((function(t){e.itemCat==e.itemCatId?(e.toOrganization=e.transfers?e.transfers.to_organization_id:"",e.isDisabledOrganization=!1,e.organizationList=t.data.organizationList,e.loading.toOrganization=!1,e.getSubinventory(e.transfers?e.transfers.to_organization_id:""),e.getLocations(e.transfers?e.transfers.to_subinventory_code:"",e.transfers?e.transfers.to_organization_id:"")):(e.toOrganization="",e.isDisabledOrganization=!1,e.organizationList=t.data.organizationList,e.loading.toOrganization=!1,e.toSubinventory="",e.isDisabledSubinventory=!0,e.subinventoryList=t.data.subinventoryList,e.loading.toSubinventory=!1,e.toLocations="",e.isDisabledToLocations=!0,e.loading.toLocations=!1)}));case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))()},getSubinventory:function(t){var e=this;return s(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={toOrganization:t},e.loading.toSubinventory=!0,e.loading.toLocations=!0,n.next=5,axios.get("/pm/ajax/setup-transfer/get-subinventory",{params:a}).then((function(t){""==t.data.subinventoryList?(e.toSubinventory="",e.isDisabledSubinventory=!0,e.loading.toSubinventory=!1,e.toLocations="",e.isDisabledToLocations=!0,e.loading.toLocations=!1,swal({title:"warning !",text:"Organizationนี้ ยังไม่มีคลังจัดเก็บ",type:"warning",showConfirmButton:!0})):e.toOrganization==e.toOrganizationId?(e.toSubinventory=e.transfers?e.transfers.to_subinventory_code:"",e.isDisabledSubinventory=!1,e.subinventoryList=t.data.subinventoryList,e.loading.toSubinventory=!1):(e.toSubinventory="",e.isDisabledSubinventory=!1,e.subinventoryList=t.data.subinventoryList,e.loading.toSubinventory=!1,e.toLocations="",e.isDisabledToLocations=!0,e.loading.toLocations=!1)}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},getLocations:function(t,e){var n=this;return s(o().mark((function a(){var i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i={subinventory:t,toOrganizationId:e},n.loading.toLocations=!0,a.next=4,axios.get("/pm/ajax/setup-transfer/get-locations",{params:i}).then((function(t){""==t.data.locationsList?(n.toLocations="",n.isDisabledToLocations=!0,n.loading.toLocations=!1,swal({title:"warning !",text:"คลังจัดเก็บนี้ ยังไม่มีสถานที่จัดเก็บ",type:"warning",showConfirmButton:!0})):n.firstLoad?(n.toLocations=n.transfers?n.transfers.to_locator_id:"",n.isDisabledToLocations=!1,n.locationsList=t.data.locationsList,n.loading.toLocations=!1,n.firstLoad=!1):(n.toLocations="",n.isDisabledToLocations=!1,n.locationsList=t.data.locationsList,n.loading.toLocations=!1)}));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),a)})))()}}};const l=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldRequestType,expression:"oldRequestType"}],attrs:{type:"hidden",name:"oldRequestType"},domProps:{value:t.oldRequestType},on:{input:function(e){e.target.composing||(t.oldRequestType=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requestType,expression:"requestType"}],attrs:{type:"hidden",name:"request_type"},domProps:{value:t.requestType},on:{input:function(e){e.target.composing||(t.requestType=e.target.value)}}}),t._v(" "),n("label",[t._v("ประเภทการเบิก")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-select",{staticClass:"w-100",attrs:{placeholder:"โปรดเลือก ประเภทการเบิก","reserve-keyword":"",filterable:""},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},t._l(t.requestTypes,(function(t,e){return n("el-option",{key:e,attrs:{label:t.description,value:t.lookup_code}})})),1)],1)]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.setupTransId,expression:"setupTransId"}],attrs:{type:"hidden",name:"setup_trans_id"},domProps:{value:t.setupTransId},on:{input:function(e){e.target.composing||(t.setupTransId=e.target.value)}}}),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("label",[t._v("Organization")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-input",{attrs:{disabled:!0},model:{value:t.fromOrganization,callback:function(e){t.fromOrganization=e},expression:"fromOrganization"}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldItemCat,expression:"oldItemCat"}],attrs:{type:"hidden",name:"old_item_cat"},domProps:{value:t.oldItemCat},on:{input:function(e){e.target.composing||(t.oldItemCat=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itemCat,expression:"itemCat"}],attrs:{type:"hidden",name:"item_cat"},domProps:{value:t.itemCat},on:{input:function(e){e.target.composing||(t.itemCat=e.target.value)}}}),t._v(" "),n("label",[t._v("ประเภทวัตถุดิบ")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-select",{staticClass:"w-100",attrs:{placeholder:"Select","reserve-keyword":"",filterable:""},on:{change:function(e){return t.getOrganization(t.itemCat)}},model:{value:t.itemCat,callback:function(e){t.itemCat=e},expression:"itemCat"}},t._l(t.itemCats,(function(t,e){return n("el-option",{key:e,attrs:{label:t.meaning+" : "+t.description,value:t.lookup_code}})})),1)],1)]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toOrganization,expression:"toOrganization"}],attrs:{type:"hidden",name:"toOrganization"},domProps:{value:t.toOrganization},on:{input:function(e){e.target.composing||(t.toOrganization=e.target.value)}}}),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldToOrganization,expression:"oldToOrganization"}],attrs:{type:"hidden",name:"oldToOrganization"},domProps:{value:t.oldToOrganization},on:{input:function(e){e.target.composing||(t.oldToOrganization=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toOrganization,expression:"toOrganization"}],attrs:{type:"hidden",name:"toOrganization"},domProps:{value:t.toOrganization},on:{input:function(e){e.target.composing||(t.toOrganization=e.target.value)}}}),t._v(" "),n("label",[t._v("Organization รับวัตถุดิบ")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.toOrganization,expression:"loading.toOrganization"}],staticClass:"w-100",attrs:{placeholder:"Select",disabled:t.isDisabledOrganization,"reserve-keyword":"",filterable:""},on:{change:function(e){return t.getSubinventory(t.toOrganization)}},model:{value:t.toOrganization,callback:function(e){t.toOrganization=e},expression:"toOrganization"}},t._l(t.organizationList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.organization?t.organization.organization_code+" : "+t.organization.organization_name:t.parameter.organization_code,value:t.organization_id}})})),1)],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldSubinventoryCode,expression:"oldSubinventoryCode"}],attrs:{type:"hidden",name:"oldSubinventoryCode"},domProps:{value:t.oldSubinventoryCode},on:{input:function(e){e.target.composing||(t.oldSubinventoryCode=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toSubinventory,expression:"toSubinventory"}],attrs:{type:"hidden",name:"subinventory_code"},domProps:{value:t.toSubinventory},on:{input:function(e){e.target.composing||(t.toSubinventory=e.target.value)}}}),t._v(" "),n("label",[t._v("คลังจัดเก็บ")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.toSubinventory,expression:"loading.toSubinventory"}],staticClass:"w-100",attrs:{placeholder:"โปรดเลือก คลังจัดเก็บ",disabled:t.isDisabledSubinventory,"reserve-keyword":"",filterable:""},on:{change:function(e){return t.getLocations(t.toSubinventory,t.toOrganization)}},model:{value:t.toSubinventory,callback:function(e){t.toSubinventory=e},expression:"toSubinventory"}},t._l(t.subinventoryList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.subinventory_code+" : "+t.subinventory_desc,value:t.subinventory_code}})})),1)],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldInventoryLocationId,expression:"oldInventoryLocationId"}],attrs:{type:"hidden",name:"oldInventoryLocationId"},domProps:{value:t.oldInventoryLocationId},on:{input:function(e){e.target.composing||(t.oldInventoryLocationId=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toLocations,expression:"toLocations"}],attrs:{type:"hidden",name:"inventory_location_id"},domProps:{value:t.toLocations},on:{input:function(e){e.target.composing||(t.toLocations=e.target.value)}}}),t._v(" "),n("label",[t._v("สถานที่จัดเก็บ")]),n("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.toLocations,expression:"loading.toLocations"}],staticClass:"w-100",attrs:{placeholder:"โปรดเลือก สถานที่จัดเก็บ",disabled:t.isDisabledToLocations,"reserve-keyword":"",filterable:""},model:{value:t.toLocations,callback:function(e){t.toLocations=e},expression:"toLocations"}},t._l(t.locationsList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.segment2+" : "+t.description,value:t.inventory_location_id}})})),1)],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-right":"300px","margin-left":"300px","padding-top":"15px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldEnableFlag,expression:"oldEnableFlag"}],attrs:{type:"hidden",name:"oldEnableFlag"},domProps:{value:t.oldEnableFlag},on:{input:function(e){e.target.composing||(t.oldEnableFlag=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newEnableFlag,expression:"newEnableFlag"}],attrs:{type:"hidden",name:"newEnableFlag"},domProps:{value:t.newEnableFlag},on:{input:function(e){e.target.composing||(t.newEnableFlag=e.target.value)}}}),t._v(" "),n("label",[t._v("สถานะการใช้งาน")]),t._v(" "),n("el-checkbox",{staticClass:"w-100",model:{value:t.newEnableFlag,callback:function(e){t.newEnableFlag=e},expression:"newEnableFlag"}})],1)])])}),[],!1,null,null,null).exports}}]);