(self.webpackChunk=self.webpackChunk||[]).push([[4116,7457],{25390:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var n=a(23645),s=a.n(n)()((function(t){return t[1]}));s.push([t.id,".mx-datepicker-popup{z-index:9999!important}",""]);const r=s},37457:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var n=a(87757),s=a.n(n),r=a(71170),i=(a(68737),a(30381)),o=a.n(i);function c(t,e,a,n,s,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(n,s)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(t){c(r,n,s,i,o,"next",t)}function o(t){c(r,n,s,i,o,"throw",t)}i(void 0)}))}}var u,d;const m={props:["value","name","id","inputClass","placeholder","disabledDateTo","format","pType","disabled","notBeforeDate","notAfterDate","omType"],mounted:function(){},watch:{disabledDateTo:(d=l(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o()(e,this.format).toDate();case 2:if(t.t0=t.sent,t.t1=this.date,!(t.t0>t.t1)){t.next=6;break}this.date=null;case 6:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),value:(u=l(s().mark((function t(e,a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("change value: ",e,a),this.date=e&&e?o()(e,this.format).toDate():null;case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},components:{DatePicker:r.Z},data:function(){var t=this;return{type:null!=this.pType&&""!=this.pType?this.pType:"date",date:this.value?o()(this.value,this.format).toDate():null,defaultDate:("export"==this.omType?o()().toDate():this.value)?o()(this.value,this.format).toDate():o()().add(543,"years").toDate(),lang:{formatLocale:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],weekdays:["พฤหัสบดี","ศุกร์","เสาร์","อาทิตย์","จันทร์","อังคาร","อังคาร"],weekdaysShort:["พฤหัสบดี","ศุกร์","เสาร์","อาทิตย์","จันทร์","อังคาร","อังคาร"],weekdaysMin:["พฤ.","ศ.","ส.","อา.","จ.","อ.","พ."],firstDayOfWeek:3},yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0},disabledDate:function(e){if(t.disabledDateTo)return e<o()(t.disabledDateTo,t.format).toDate()}}},methods:{dateWasSelected:function(t){this.date=t,this.$emit("dateWasSelected",t)},disabledBeforeAndAfter:function(t){return this.disabledDateTo?t<o()(this.disabledDateTo,this.format).toDate():this.notBeforeDate&&this.notAfterDate?t<o()(this.notBeforeDate,this.format).toDate()||t>o()(this.notAfterDate,this.format).toDate():this.notAfterDate?t>o()(this.notAfterDate,this.format).toDate():void 0}}};var _=a(93379),p=a.n(_),f=a(25390),h={insert:"head",singleton:!1};p()(f.Z,h);f.Z.locals;const v=(0,a(51900).Z)(m,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("date-picker",{attrs:{"input-class":[t.inputClass],"default-value":t.defaultDate,"input-attr":{name:t.name,id:t.id},placeholder:t.placeholder,lang:t.lang,type:t.type,disabled:t.disabled,"disabled-date":t.disabledBeforeAndAfter,format:t.format,"om-Type":t.omType},on:{change:t.dateWasSelected},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})}),[],!1,null,null,null).exports},34116:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var n=a(87757),s=a.n(n),r=a(80455),i=a.n(r),o=a(37457);function c(t,e,a,n,s,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(n,s)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(t){c(r,n,s,i,o,"next",t)}function o(t){c(r,n,s,i,o,"throw",t)}i(void 0)}))}}const u={components:{VueNumeric:i(),DatepickerTh:o.default},props:["customerLists","convertLists"],data:function(){return{loading:!1,loadingConsignment:!1,date:"",status:"",consignment:"",customer:"",customer_name:"",table_data:[],order_headers:[],consignment_lists:[],attach_files:[],files:[],total_unit_price:"0.00",total_actual_qty:"0.00",total_cgk_qty:"0.00",total_ptn_qty:"0.00",total_actual_amount:"0.00",disabledCreate:!1,disabledSearch:!0,disabledConfirm:!0,disabledAttach:!0,disabledConsignment:!1,disabledCustomer:!1,disabledDate:!1,readOnly:!1,state:"search"}},mounted:function(){this.getConsignments()},computed:{sortedTable:function(){return this.table_data.sort((function(t,e){return t.item_code<e.item_code?-1:t.item_code>e.item_code?1:0}))}},methods:{reset:function(){var t=this;t.state="search",t.customer_name=t.customer=t.status=t.consignment=t.date="",t.order_headers=t.table_data=[],t.total_unit_price=t.total_actual_qty=t.total_cgk_qty=t.total_ptn_qty=t.total_actual_amount="0.00",t.disabledCreate=t.disabledConsignment=t.disabledCustomer=t.disabledDate=t.readOnly=!1,t.disabledSearch=t.disabledConfirm=t.disabledAttach=!0,t.getConsignments()},create:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t).state="create",a.consignment="",a.disabledCreate=a.disabledConsignment=!0,a.disabledAttach=!1,a.disabledConfirm=!1,a.setDate(),a.status="Draft",a.readOnly=!1,1==a.customerLists.length?(a.disabledCustomer=!0,a.customer=a.customerLists[0].customer_id,a.findCustomer()):a.disabledCustomer=!1,a.table_data=[],a.total_unit_price=a.total_actual_qty=a.total_cgk_qty=a.total_ptn_qty=a.total_actual_amount="0.00";case 12:case"end":return e.stop()}}),e)})))()},search:function(){var t=this;return l(s().mark((function e(){var a,n,r,i,o,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(a=t).consignment_lists.find((function(t){return t.consignment_header_id==a.consignment})),a.attach_files=l.attach,a.table_data=[],"Draft"!=l.consignment_status){e.next=11;break}return e.next=7,a.getOrderHeaders();case 7:a.disabledCreate=a.disabledSearch=a.disabledConsignment=a.disabledCustomer=a.disabledDate=!!l,a.disabledConfirm=a.disabledDate=a.readOnly=a.disabledAttach=!l,e.next=24;break;case 11:n=0,r=0,i=0,o=0,c=0,a.readOnly=a.disabledCreate=a.disabledSearch=a.disabledConfirm=a.disabledConsignment=a.disabledCustomer=a.disabledDate=!!l,a.disabledAttach=!l,l.lines.forEach((function(t){var e=a.table_data.find((function(e){return t.item_code==e.item_code}));e?(e.actual_qty+=parseFloat(t.actual_quantity),e.cgk_qty+=parseFloat(t.actual_quantity),e.ptn_qty+=a.convertUom(t.seq_ecom.product_type_code,parseFloat(t.actual_quantity),"CGK","PTN")):a.table_data.push({item_id:t.item_id,item_code:t.item_code,item_description:t.item_description,product_type_code:t.seq_ecom.product_type_code,uom:t.uom.unit_of_measure,qty:parseFloat(t.quantity),unit_price:parseFloat(t.order_line.unit_price*t.quantity),sale_qty:parseFloat(t.previous_quantity),remain_qty:parseFloat(t.remaining_quantity),actual_qty:parseFloat(t.actual_quantity),cgk_qty:parseFloat(t.actual_quantity),ptn_qty:a.convertUom(t.seq_ecom.product_type_code,parseFloat(t.actual_quantity),"CGK","PTN")}),n+=parseFloat(t.order_line.unit_price*t.quantity),r+=parseFloat(t.actual_quantity),i+=parseFloat(t.actual_quantity),o+=a.convertUom(t.seq_ecom.product_type_code,parseFloat(t.actual_quantity),"CGK","PTN"),c+=parseFloat(t.order_line.unit_price*t.actual_quantity)})),a.total_unit_price=a.numberWithCommas(n),a.total_actual_qty=a.numberWithCommas(r),a.total_cgk_qty=a.numberWithCommas(i),a.total_ptn_qty=a.numberWithCommas(o),a.total_actual_amount=a.numberWithCommas(c);case 24:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).loading=!0,!(a.total_actual_qty<=0)){e.next=6;break}return a.showWarning("กรุณาระบุยอดฝากขาย"),a.loading=!1,e.abrupt("return");case 6:swal({title:"แจ้งเตือน",text:"ยืนยันรายการฝากขายสโมสรหรือไม่?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",cancelButtonColor:"#d33",confirmButtonText:"ยืนยัน"},function(){var t=l(s().mark((function t(e){var n,r,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=12;break}for(n=a.composeData(),r=new FormData,i=0;i<a.files.length;i++)o=a.files[i],r.append("attachment["+i+"]",o);return r.append("consignment",a.consignment),r.append("date",a.date),r.append("customer_id",a.customer),r.append("data",JSON.stringify(n)),t.next=10,axios.post("/om/consignment-bkk",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){var t=l(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("S"!=e.data.status){t.next=14;break}return a.files=[],a.consignment=e.data.consignment,t.next=5,a.getConsignments();case 5:return t.next=7,a.findConsignment();case 7:return t.next=9,a.search();case 9:return a.clearFile(),t.next=12,a.showSuccess("ยืนยันรายการฝากขายสโมสรเรียบร้อยแล้ว");case 12:t.next=16;break;case 14:return t.next=16,a.showError("ยืนยันใบรายการฝากขายสโมสรไม่ได้");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=l(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.loading=!1;case 1:case"end":return t.stop()}}),t)}))));case 10:t.next=13;break;case 12:a.loading=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})))()},composeData:function(){var t=[];return this.table_data.forEach((function(e){e.actual_qty>0&&t.push({item_id:e.item_id,actual:e.actual_qty})})),t},setDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,a=t?new Date(t):new Date,n=a.getFullYear()+543,s=a.getMonth()+1,r=a.getDate();return e.date=r+"/"+s+"/"+n},dateWasSelected:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();this.date=n+"/"+a+"/"+e},findCustomer:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).setCustomerName(),"create"!==a.state){e.next=5;break}return e.next=5,a.getOrderHeaders();case 5:case"end":return e.stop()}}),e)})))()},setCustomerName:function(){var t=this;return l(s().mark((function e(){var a,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(a=t).customerLists.find((function(t){return t.customer_id==a.customer})),a.customer_name=n?n.customer_name:"";case 3:case"end":return e.stop()}}),e)})))()},findConsignment:function(){var t=this;return l(s().mark((function e(){var a,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(a=t).consignment_lists.find((function(t){return t.consignment_header_id==a.consignment})),a.disabledSearch=!n,a.customer_name=n?n.customer_name:"",a.date=n?a.setDate(n.consignment_date):"",a.customer=n?n.order_header?n.order_header.customer.customer_id:n.customer.customer_id:"",a.status=n?n.consignment_status:"",""!=a.customer&&a.setCustomerName();case 8:case"end":return e.stop()}}),e)})))()},getOrderHeaders:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).table_data=[],a.loading=!0,e.next=5,axios.get("/om/consignment-bkk/get-order-header",{params:{customer:a.customer}}).then((function(t){a.order_headers=t.data})).catch((function(t){console.log(t)})).then(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.setCreate();case 2:a.loading=!1;case 3:case"end":return t.stop()}}),t)}))));case 5:case"end":return e.stop()}}),e)})))()},getConsignments:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).loading=!0,a.consignment_lists=[],e.next=5,axios.get("/om/consignment-bkk/get-consignment",{params:{consignment_id:a.consignment}}).then((function(t){a.consignment_lists=t.data})).catch((function(t){console.log(t)})).then((function(){a.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},searchConsignment:function(t){var e=this;return l(s().mark((function a(){var n;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(n=e).loadingConsignment=!0,n.consignment_lists=[],a.next=5,axios.get("/om/consignment-bkk/get-consignment",{params:{consignment_no:t}}).then((function(t){n.consignment_lists=t.data})).catch((function(t){console.log(t)})).then((function(){n.loadingConsignment=!1}));case 5:case"end":return a.stop()}}),a)})))()},setCreate:function(){var t=this;return l(s().mark((function e(){var a,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,0,0,0,0,(a=t).order_headers.forEach((function(t){t.lines.forEach((function(e){var s=e.approve_quantity-e.consignment_lines.reduce((function(t,e){return t+parseFloat(e.actual_quantity||0)}),0);if(s>0){var r=a.table_data.find((function(t){return e.item_code==t.item_code}));r?(r.qty+=parseFloat(e.approve_quantity),r.unit_price+=parseFloat(e.unit_price*e.approve_quantity),r.sale_qty+=parseFloat(s),r.remain_qty+=parseFloat(s),r.detail.push({order:t.order_header_id,price:parseFloat(e.unit_price),qty:parseFloat(e.approve_quantity),remain:parseFloat(s)})):a.table_data.push({item_id:e.item_id,item_code:e.item_code,item_description:e.item_description,product_type_code:e.seq_ecom.product_type_code,uom:e.uom,qty:parseFloat(e.approve_quantity),unit_price:parseFloat(e.unit_price*e.approve_quantity),sale_qty:parseFloat(s),remain_qty:parseFloat(s),actual_qty:0,cgk_qty:0,ptn_qty:0,detail:[{order:t.order_header_id,price:parseFloat(e.unit_price),qty:parseFloat(e.approve_quantity),remain:parseFloat(s)}]}),n+=parseFloat(e.unit_price*e.approve_quantity)}}))})),a.total_unit_price=a.numberWithCommas(n),a.total_actual_qty=a.numberWithCommas(0),a.total_cgk_qty=a.numberWithCommas(0),a.total_ptn_qty=a.numberWithCommas(0),a.total_actual_amount=a.numberWithCommas(0);case 12:case"end":return e.stop()}}),e)})))()},handleChange:function(t,e){var a,n=this,s=Math.round(100*n.table_data[t].cgk_qty)/100,r=Math.round(100*n.table_data[t].ptn_qty)/100,i=Math.round(100*n.table_data[t].sale_qty)/100,o=n.table_data[t].product_type_code;"CGK"==e?(a=s,r=Math.round(100*n.convertUom(o,s,"CGK","PTN"))/100):s=a=Math.round(100*n.convertUom(o,r,"PTN","CGK"))/100,a>i?(n.table_data[t].remain_qty=parseFloat(i),n.table_data[t].actual_qty=0,n.table_data[t].cgk_qty=0,n.table_data[t].ptn_qty=0,n.showWarning("จำนวนยอดขายที่ระบุมากกว่าจำนวนคงเหลือขาย")):(n.table_data[t].remain_qty=parseFloat(i-a),n.table_data[t].actual_qty=a,n.table_data[t].cgk_qty=s,n.table_data[t].ptn_qty=r),n.calTotal()},calTotal:function(){function t(t,e){return t.order<e.order?-1:t.order>e.order?1:0}var e=this,a=0,n=0,s=0,r=0;e.table_data.forEach((function(e){var i=e.actual_qty;a+=parseFloat(e.actual_qty),n+=parseFloat(e.cgk_qty),s+=parseFloat(e.ptn_qty),e.detail.sort(t),e.detail.forEach((function(t){i>0&&(i>t.remain?(r+=parseFloat(t.price*t.remain),i=parseFloat(i-t.remain)):(r+=parseFloat(t.price*i),i=parseFloat(i-i)))}))})),e.total_actual_qty=e.numberWithCommas(a),e.total_cgk_qty=e.numberWithCommas(n),e.total_ptn_qty=e.numberWithCommas(s),e.total_actual_amount=e.numberWithCommas(r)},clearFile:function(){this.attach="",this.$refs.file.value=null,$(".label-attachment").html("Choose file...")},addFile:function(){this.$refs.file.files.length&&$(".label-attachment").html(this.$refs.file.files[0].name)},addFileList:function(){this.$refs.file.files.length&&(this.files.push(this.$refs.file.files[0]),this.clearFile())},upload:function(){var t=this;return l(s().mark((function e(){var a,n,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((a=t).loading=!0,$("#attachmentModal").modal("hide"),n=new FormData,r=0;r<a.files.length;r++)i=a.files[r],n.append("attachment["+r+"]",i);for(r=0;r<a.attach_files.length;r++)o=a.attach_files[r],n.append("check_attachment["+r+"]",o.attachment_id);return n.append("consignment",a.consignment),e.next=9,axios.post("/om/consignment-bkk/attach",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){var t=l(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("E"==e.data.status){t.next=3;break}return t.next=3,a.getConsignments();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=l(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(l(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.loading=!1,e=a.consignment_lists.find((function(t){return t.consignment_header_id==a.consignment})),a.attach_files=e.attach,a.files=[],a.clearFile();case 5:case"end":return t.stop()}}),t)}))));case 9:case"end":return e.stop()}}),e)})))()},removeFileLocal:function(t){this.files.splice(t,1)},removeFileAttachment:function(t,e){var a=this;return l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.attach_files.splice(t,1);case 1:case"end":return e.stop()}}),e)})))()},showSuccess:function(t){swal("",t,"success")},showError:function(t){swal("",t,"error")},showWarning:function(t){swal("",t,"warning")},numberWithCommas:function(t){return parseFloat(t).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},displayDate:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth();return e.getDate()+"/"+(n+1)+"/"+(a+543)},getSrc:function(t){return URL.createObjectURL(t)},convertUom:function(t,e,a,n){return e*this.convertLists.find((function(e){return e.product_type_code==t&&e.from_uom==a&&e.to_uom==n})).conversion_rate}}};const d=(0,a(51900).Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-md btn-white",attrs:{type:"button"},on:{click:t.reset}},[a("i",{staticClass:"fa fa-repeat"})])]),t._v(" "),a("div",{staticClass:"col-md-9 text-right"},[a("button",{staticClass:"btn btn-md btn-success",attrs:{disabled:t.disabledCreate,type:"button",id:"buttonCreate"},on:{click:t.create}},[a("i",{staticClass:"fa fa-plus"}),t._v(" สร้าง")]),t._v(" "),a("button",{staticClass:"btn btn-md btn-white",attrs:{disabled:t.disabledSearch,type:"button",id:"buttonSearch"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v(" ค้นหา")]),t._v(" "),a("button",{staticClass:"btn btn-md btn-info",attrs:{disabled:t.disabledConfirm,type:"button",id:"buttonConfirm"},on:{click:t.save}},[a("i",{staticClass:"fa fa-check"}),t._v(" ยืนยันข้อมูล")]),t._v(" "),a("button",{staticClass:"btn btn-md btn-success",attrs:{disabled:t.disabledAttach,"data-toggle":"modal","data-target":"#attachmentModal",type:"button"}},[a("span",{staticClass:"fa fa-upload"},[t._v(" ไฟล์แนบ")])])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed"})]),t._v(" "),a("div",{staticClass:"col-xl-10 m-auto"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("เลขที่ใบฝากขายสโมสร")]),t._v(" "),a("div",[a("el-select",{staticClass:"w-100",attrs:{disabled:t.disabledConsignment,name:"consignment",clearable:"",filterable:"",remote:"","remote-method":t.searchConsignment,loading:t.loadingConsignment,placeholder:""},on:{input:t.findConsignment},model:{value:t.consignment,callback:function(e){t.consignment=e},expression:"consignment"}},t._l(t.consignment_lists,(function(e){return a("el-option",{key:e.consignment_header_id,staticStyle:{height:"auto"},attrs:{label:e.consignment_no,value:e.consignment_header_id}},[a("div",[a("b",[t._v(t._s(e.consignment_no))])]),t._v(" "),a("div",[t._v(t._s(e.consignment_no)+" : "+t._s(t.displayDate(e.consignment_date))+" : "+t._s(e.consignment_status))])])})),1)],1)])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("วันที่บันทึก")]),t._v(" "),a("div",[a("datepicker-th",{class:t.disabledDate?"w-100 bg-readonly form-control md:tw-mb-0 tw-mb-2":"w-100 form-control md:tw-mb-0 tw-mb-2",attrs:{disabled:t.disabledDate,type:"date",value:t.date,name:"date",format:"DD/MM/YYYY"},on:{dateWasSelected:t.dateWasSelected},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("Status")]),t._v(" "),a("div",[a("el-select",{staticClass:"w-100",attrs:{name:"status",disabled:!0,placeholder:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{key:"",attrs:{value:"",label:""}}),t._v(" "),a("el-option",{key:"Draft",attrs:{value:"Draft",label:"Draft"}}),t._v(" "),a("el-option",{key:"Confirm",attrs:{value:"Confirm",label:"Confirm"}}),t._v(" "),a("el-option",{key:"Cancelled",attrs:{value:"Cancelled",label:"Cancelled"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("รหัสลูกค้า")]),t._v(" "),a("div",{staticClass:"row space-5"},[a("div",{staticClass:"col-md-4"},[a("div",[a("el-select",{staticClass:"w-100",attrs:{disabled:t.disabledCustomer,name:"customer",clearable:"",filterable:"",placeholder:""},on:{input:t.findCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}},t._l(t.customerLists,(function(e){return a("el-option",{key:e.customer_id,staticStyle:{height:"auto"},attrs:{label:e.customer_number,value:e.customer_id}},[a("div",[a("b",[t._v(t._s(e.customer_number))])]),t._v(" "),a("div",[t._v(t._s(e.customer_number)+" : "+t._s(e.customer_name))])])})),1)],1)]),t._v(" "),a("div",{staticClass:"col-md-8 mt-2 mt-md-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_name,expression:"customer_name"}],staticClass:"form-control",attrs:{readonly:""},domProps:{value:t.customer_name},on:{input:function(e){e.target.composing||(t.customer_name=e.target.value)}}})])])])])])]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("hr",{staticClass:"md"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered text-center table-hover min-1000 f13"},[t._m(0),t._v(" "),a("tbody",{attrs:{id:"consignmentLines"}},[t._l(t.sortedTable,(function(e,n){return a("tr",{key:n,staticClass:"align-middle"},[a("td",[t._v("\n                            "+t._s(n+1)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                            "+t._s(e.item_code)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                            "+t._s(e.item_description)+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                            "+t._s(t.numberWithCommas(e.qty))+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                            "+t._s(t.numberWithCommas(e.unit_price))+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                            "+t._s(t.numberWithCommas(e.sale_qty))+"\n                        ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                            "+t._s(t.numberWithCommas(e.remain_qty))+"  \n                        ")]),t._v(" "),a("td",[a("vue-numeric",{staticClass:"el-input__inner text-right",attrs:{"read-only-class":"form-control bg-readonly text-right",separator:",",precision:2,"read-only":t.readOnly},on:{change:function(e){return t.handleChange(n,"CGK")}},model:{value:t.table_data[n].cgk_qty,callback:function(e){t.$set(t.table_data[n],"cgk_qty",e)},expression:"table_data[index].cgk_qty"}})],1),t._v(" "),a("td",[a("vue-numeric",{staticClass:"el-input__inner text-right",attrs:{"read-only-class":"form-control bg-readonly text-right",separator:",",precision:2,"read-only":t.readOnly},on:{change:function(e){return t.handleChange(n,"PTN")}},model:{value:t.table_data[n].ptn_qty,callback:function(e){t.$set(t.table_data[n],"ptn_qty",e)},expression:"table_data[index].ptn_qty"}})],1)])})),t._v(" "),a("tr",{staticClass:"align-middle"},[t._m(1),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.total_unit_price,expression:"total_unit_price"}],staticClass:"form-control text-right",attrs:{type:"text",readonly:"",name:"",placeholder:""},domProps:{value:t.total_unit_price},on:{input:function(e){e.target.composing||(t.total_unit_price=e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.total_cgk_qty,expression:"total_cgk_qty"}],staticClass:"form-control text-right",attrs:{type:"text",readonly:"",name:"",placeholder:""},domProps:{value:t.total_cgk_qty},on:{input:function(e){e.target.composing||(t.total_cgk_qty=e.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.total_ptn_qty,expression:"total_ptn_qty"}],staticClass:"form-control text-right",attrs:{type:"text",readonly:"",name:"",placeholder:""},domProps:{value:t.total_ptn_qty},on:{input:function(e){e.target.composing||(t.total_ptn_qty=e.target.value)}}})])]),t._v(" "),a("tr",{staticClass:"align-middle"},[t._m(3),t._v(" "),a("td",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.total_actual_amount,expression:"total_actual_amount"}],staticClass:"form-control text-right",attrs:{type:"text",readonly:"",name:"",placeholder:""},domProps:{value:t.total_actual_amount},on:{input:function(e){e.target.composing||(t.total_actual_amount=e.target.value)}}})])])],2)])])]),t._v(" "),a("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"attachmentModal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"attachment-box"},[a("div",{staticClass:"form-group d-flex mb-1"},[a("div",{staticClass:"custom-file",staticStyle:{width:"70%"}},[a("input",{ref:"file",staticClass:"custom-file-input",attrs:{type:"file",accept:".jpeg, .jpg, .bmp, .png, .pdf, .doc, .docx, .xls, .xlsx, .rar, .zip, .csv"},on:{input:function(e){return t.addFile()}}}),t._v(" "),a("label",{staticClass:"custom-file-label label-attachment",attrs:{for:"attachment"}},[t._v("Choose file...")])]),t._v(" "),a("div",{staticClass:"button"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addFileList}},[t._v("Submit")]),t._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.clearFile}},[t._v("Clear")])])]),t._v(" "),t._m(5),t._v(" "),a("ul",{staticClass:"nav files"},[t._l(t.attach_files,(function(e,n){return a("li",{key:"attach_files_"+n},[a("code",[a("a",{attrs:{href:"/"+e.path_name,target:"_blank"}},[a("i",{staticClass:"fa fa-file-pdf-o"}),t._v("  "+t._s(e.file_name))])]),t._v(" "),a("button",{staticClass:"btn btn-xs btn-remove",attrs:{type:"button"},on:{click:function(a){return t.removeFileAttachment(n,e.attachment_id)}}},[a("i",{staticClass:"fa fa-times"})])])})),t._v(" "),t._l(t.files,(function(e,n){return a("li",{key:"files_"+n},[a("code",[a("a",{attrs:{href:t.getSrc(e),target:"_blank"}},[a("i",{staticClass:"fa fa-file-pdf-o"}),t._v("  "+t._s(e.name))])]),t._v(" "),a("button",{staticClass:"btn btn-xs btn-remove",attrs:{type:"button"},on:{click:function(e){return t.removeFileLocal(n)}}},[a("i",{staticClass:"fa fa-times"})])])}))],2)])]),t._v(" "),a("div",{staticClass:"modal-footer center mt-4"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n                        ปิด\n                    ")]),t._v(" "),t.consignment?a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.upload}},[t._v("\n                        ยืนยัน\n                    ")]):a("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal",type:"submit"}},[t._v("\n                        ยืนยัน\n                    ")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"align-middle"},[a("th",{attrs:{rowspan:"2"}},[t._v("\n                            ลำดับ\n                        ")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("\n                            รหัสผลิตภัณฑ์\n                        ")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("\n                            ชื่อผลิตภัณฑ์\n                        ")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("\n                            จำนวน "),a("br"),t._v("\n                            พันมวน/ซอง\n                        ")]),t._v(" "),a("th",{staticClass:"w-160",attrs:{rowspan:"2"}},[t._v("\n                            มูลค่า (บาท)\n                        ")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("\n                            ยอดขายได้ "),a("br"),t._v("\n                            พันมวน/ซอง\n                        ")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("\n                            คงเหลือขาย "),a("br"),t._v("\n                            พันมวน/ซอง\n                        ")]),t._v(" "),a("th",{staticClass:"w-160",attrs:{colspan:"2"}},[t._v("\n                            บันทึกยอดขาย\n                        ")])]),t._v(" "),a("tr",{staticClass:"align-middle"},[a("th",{staticClass:"w-160"},[t._v("\n                            พันมวน/ซอง\n                        ")]),t._v(" "),a("th",{staticClass:"w-160"},[t._v("\n                            ห่อ\n                        ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",attrs:{colspan:"4"}},[a("strong",[t._v("รวมมูลค่า")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[a("strong",[t._v("รวมยอดขายฝาก")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",attrs:{colspan:"7"}},[a("strong",[t._v("รวมมูลค่าขายฝาก")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[t._v("Upload File")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("small",[t._v("Allow type : jpeg, bmp, png, pdf, doc, docx, xls, xlsx, rar, zip, csv and size < 2mb")])])}],!1,null,null,null).exports}}]);