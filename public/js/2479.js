(self.webpackChunk=self.webpackChunk||[]).push([[2479],{67791:(e,t,a)=>{"use strict";a.d(t,{gR:()=>s,R_:()=>i,sD:()=>r});var n=a(30381),o=a.n(n),s={formatDate:"DD/MM/YYYY",formatMonth:"MM/YYYY",formatYear:"YYYY",monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i={irp0001_table_header:[{document_number:"",status:"NEW",period_year:"2020",period_name:"Jan-20",period_from:"12/01/2020",period_to:"12/01/2020",policy_set_number:"1",policy_set_description:"POLICY SET DESCRIPTION",department_code:"DEPARTMENT CODE",department_desc:"DEPARTMENT DESC"}],irp0001_table_line:[{line_number:"1",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"INTERFACE",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"3",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"CONFIRMED",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"}],irp0010_table_header:[{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},{claim_header_id:"2",status:"INTERFACE",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"}],irp0010_form:{headers:{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},apply:{apply_company:[{company_id:55,company_name:"บริษัท เทเวศประกันภัย จำกัด (มหาชน)",claim_percent:"40",claim_amount:"140000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""},{company_id:54,company_name:"บริษัท ทิพยประกันภัย จำกัด (มหาชน)",claim_percent:"60",claim_amount:"160000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""}]}},irp0002_table_line:[{status:"NEW",line_number:"",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"111",unit_price:"2",line_amount:"222",coverage_amount:"230",calculate_days:"2",calculate_start_date:"12/01/2020",calculate_end_date:"15/01/2020"}]},r={setFirstLetterUpperCase:function(e){if(e&&null!=e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return e},setYearCE:function(e,t){var a="",n="month"===e?s.formatMonth:"date"===e?s.formatDate:"year"===e?s.formatYear:"";return t&&n?a=o()(o()(t,n).subtract(543,"years").toDate()).format(n):a},setYearBE:function(e,t){var a="",n="month"===e?s.formatMonth:"date"===e?s.formatDate:"year"===e?s.formatYear:"";return t&&n?a=o()(o()(t,n).add(543,"years").toDate()).format(n):a},showYearBE:function(e,t){var a="";if("month"===e&&t&&null!=t){var n=t.split("/"),o=+n[1]+543;return a="".concat(n[0],"/").concat(o)}if("date"===e&&t&&null!=t){var s=t.split("/"),i=+s[2]+543;return a="".concat(s[0],"/").concat(s[1],"/").concat(i)}return"year"===e&&t&&null!=t?+t+543:a},getTime:function(e){var t="";if(e&&null!=e){var a=e.split("/");return t=new Date("".concat(a[1],"/").concat(a[0],"/").concat(a[2])).getTime()}return t},calculateDate:function(e,t){var a="",n="";if(e&&t){var o=r.getTime(e),s=r.getTime(t);a=(n=Math.round(Math.abs((s-o)/864e5)))?n+1:n}return a},checkStatusInterface:function(e){return!(!e||"INTERFACE"!==e.toUpperCase())},checkStatusCancelled:function(e){return!(!e||"CANCELLED"!==e.toUpperCase())},isNullOrUndefined:function(e){return null==e?"":e},formatCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a="";if(e||0===e){a=parseFloat(e);var n=e.toString().split(".");if(void 0===n[1]){var o=parseInt(n[0]).toFixed(t).split(".")[1];return"".concat(parseInt(n[0]).toLocaleString(),".").concat(o)}if(0==a.toString().split(".")[0]){var s=a.toFixed(t).split(".")[1];return"".concat(a.toString().split(".")[0],".").concat(s)}var i=a.toFixed(t).split(".")[1],r="".concat(parseInt(n[0]).toLocaleString(),".").concat(i);return r}return a},formatfloat:function(e){return e.slice(0,e.indexOf(".")+1+2)},checkStatusConfirmed:function(e){if(e)return"CONFIRMED"===e.toUpperCase()},showPeriodNameFormat:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1])),n=a.getFullYear(),o=1===(a.getMonth()+1).toString().length?"0".concat(a.getMonth()+1):a.getMonth()+1;return"".concat(o,"/").concat(n+543)}return e},setValuePeriodNameFormat:function(e){var t="";if(e&&null!=e){var a=s.monthNameShort[e.getMonth()],n=(+e.getFullYear()-543).toString(),o=n.substr(n.length-2);t="".concat(a,"-").concat(o)}return t},checkStatusNew:function(e){if(e&&"NEW"===e.toUpperCase())return!0},calculateDateMomentTable:function(e){var t=s.formatDate,a="",n="",i="",r=e.start_calculate_date,c=e.end_calculate_date;if(r&&c){var l=helperDate.convertDate(r,t),d=helperDate.convertDate(c,t);l.then((function(s){a=o()(s,t),d.then((function(s){n=o()(s,t),i=n.diff(a,"days"),e.days=-1===Math.sign(i)?"":i+1}))}))}else e.days=""},covertFomatDateMoment:function(e,t){var a="date"===t?s.formatDate:"month"===t?s.formatMonth:"year"===t?s.formatYear:"";return e&&t?o()(e).format(a):""},setBudgetYearFromFieldStCalendar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",a=("date"===t?s.formatDate:"month"===t?s.formatMonth:"year"===t&&s.formatYear,"");if(e){var n=e.getFullYear(),i=o()({year:n,month:8,date:30}),r=o()({year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),c=r.isAfter(i)?1:0;return o()(o()({year:n+c,month:8,date:30}),s.formatDate).toDate()}return a},setLabelStatusAsset:function(e){return"Y"===e?"Active":"N"===e?"Inactive":""},setFotmatPeriodNameIsFullDate:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1]));return o()(a).format(s.formatDate)}return""},setFullDateIsDateCE:function(e){var t="";if(e){var a=o()(e).format(s.formatDate);return t=r.setYearCE("date",a)}return t},setLabelExpenseFlag:function(e){return"Y"==e?"Yes":"No"},setLabelVatRefund:function(e){return"Y"==e?"Yes":"No"},setDefaultActive:function(e){var t=$(".".concat(e)).is(":checked");$(".".concat(e)).prop("checked",!t)},setDefaultEndDateIsLastDateOfMonth:function(e){var t=s.formatDate;if(e){var a=o()(e).endOf("month");return o()(a).format(t)}return""}}},81648:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"td[data-v-ddf9909e],th[data-v-ddf9909e]{padding:.25rem}th[data-v-ddf9909e]{background:#fff;position:-webkit-sticky;position:sticky;top:0}.mouse-over[data-v-ddf9909e]:hover{background-color:#d4edda!important}",""]);const s=o},95070:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-calendar-year-input",data:function(){return{year:this.value}},props:["attrName","value","sizeSmall","placeholder"],mounted:function(){var e=this;$(document).ready((function(){console.log("ready "),$("input.year_input").datepicker({format:"yyyy",autoclose:!0,keyboardNavigation:!1,startView:"years",minViewMode:"years"}),$('input[name="'.concat(e.attrName,'"]')).on("change",(function(t){console.log("change ",t,t.target.value,$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate"));var a={value:t.target.value,getTime:$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate").getTime()};e.$emit("change-year",a)}))}))},watch:{value:function(e,t){this.year=e}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:" date "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"input-medium form-control year_input el-input__inner",attrs:{type:"text",name:e.attrName,"data-provide":"datepicker","data-date-language":"th-th",placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.year},on:{input:function(t){t.target.composing||(e.year=t.target.value)}}})])}),[],!1,null,null,null).exports},43126:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-policy-set-header-id",data:function(){return{rows:[],dataSet:[],loading:!1,result:this.value,isDisabled:void 0!==this.disabled&&this.disabled}},props:["value","name","size","placeholder","popperBody","fixTypeFr","fixTypeSc","check","disabled"],methods:{remoteMethod:function(e){this.dataSet=this.rows.filter((function(t){return t.policy_set_number.toLowerCase().indexOf(e.toLowerCase())>-1||t.policy_set_description.toLowerCase().indexOf(e.toLowerCase())>-1}))},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-set-header",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.check?t.dataSet=t.rows=a.data.filter((function(e){return e.meaning.toLowerCase()==t.check.toLowerCase()})):t.dataSet=t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.getDataRows({policy_set_header_id:"",keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},onchange:function(e){console.log("onchange ",e),this.$emit("change-lov",e)}},mounted:function(){console.log("mounted policy_set_header_id ",this.value),this.result=this.value?+this.value:this.value,this.getDataRows({policy_set_header_id:this.value,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},watch:{value:function(e,t){this.result=e?+e:e,this.getDataRows({policy_set_header_id:e,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},disabled:function(){this.isDisabled=this.disabled}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.isDisabled},on:{focus:e.onfocus,change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataSet,(function(e,t){return a("el-option",{key:t,attrs:{label:e.policy_set_number+": "+e.policy_set_description,value:e.policy_set_header_id}})})),1)],1)}),[],!1,null,null,null).exports},22773:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-lov-status-ir",data:function(){return{rows:[],loading:!1,result:this.value}},props:["value","name","size","popperBody"],methods:{getDataRows:function(){var e=this;axios.get("/ir/ajax/lov/status").then((function(t){var a=t.data;e.rows=a})).catch((function(e){swal("Error",e,"error")}))},change:function(e){this.$emit("change-lov",e)}},watch:{value:function(e,t){this.result=e}},created:function(){this.getDataRows()}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:"สถานะ",name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,size:e.size},on:{change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports},62479:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var n=a(22773);const o={name:"ir-expense-stock-asset-lov-expense-type-code",data:function(){return{rows:[],loading:!1,result:this.value}},props:["value","name","index","size","popperBody"],methods:{remoteMethod:function(e){this.getDataRows({lookup_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/exp-asset-stock-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},focus:function(){this.getDataRows({lookup_code:"",keyword:""})},change:function(e){var t=this.rows.find((function(t){return t.lookup_code===e}));t?this.$emit("change-lov",t):this.$emit("change-lov",null)}},mounted:function(){this.getDataRows({lookup_code:"",keyword:""})},watch:{value:function(e,t){this.result=e}}};var s=a(51900);const i=(0,s.Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"ประเภทของประกันภัย","remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,size:e.size},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var r=a(43126);const c={name:"ir-stock-monthly-modal-fetch",data:function(){return{fetch:{period_name:"",policy_set_header_id:"",expense_type_code:"",expense_type_meaning:"",status:""},rules:{period_name:[{required:!0,message:"กรุณาระบุเดือนปิดบัญชี",trigger:["select","change"]}],expense_type_code:[{required:!0,message:"กรุณาระบุประเภทของประกันภัย",trigger:"change"}]},years:[],budget_period_year:[],months:[],showLoading:!1}},props:["vars","setYearCE"],methods:{clickSearch:function(){var e=this;this.$refs.form_expense_stock_asset.validate((function(t){if(!t)return!1;e.getDataRows()}))},clickClear:function(){this.resetFields()},getDataRows:function(){var e=this;this.showLoading=!0;var t={program_code:"IRP0008",period_name:this.setYearCE("month",this.fetch.period_name),policy_set_header_id:this.fetch.policy_set_header_id,expense_type_code:this.fetch.expense_type_code,expense_type_meaning:this.fetch.expense_type_meaning,status:this.fetch.status};axios.get("/ir/ajax/expense-asset-stock/fetch",{params:t}).then((function(t){var a=t.data;e.showLoading=!1,e.$emit("fetch-table-header",a.data),$("#modal_expense_stock_asset").modal("hide")})).catch((function(e){swal("Error",e,"error")}))},resetFields:function(){this.$refs.form_expense_stock_asset.resetFields()},getValuePeriodName:function(e){this.fetch.period_name=e},getValueExpenseTypeCode:function(e){this.fetch.expense_type_code=e.lookup_code,this.fetch.expense_type_meaning=e.meaning},getPolicySetHeaderId:function(e){this.fetch.policy_set_header_id=e},getValueStatus:function(e){this.fetch.status=e}},components:{lovStatusIr:n.Z,lovExpenseTypeCode:i,lovPolicySetHeaderId:r.Z},created:function(){}};const l=(0,s.Z)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_expense_stock_asset",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-md"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[a("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),a("el-form",{ref:"form_expense_stock_asset",staticClass:"demo-dynamic form_table_line",attrs:{model:e.fetch,"label-width":"120px",rules:e.rules}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เดือนปิดบัญชี *")])]),e._v(" "),a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"period_name"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"period_name","p-type":"month",placeholder:"เดือนปิดบัญชี",value:e.fetch.period_name,format:e.vars.formatMonth},on:{dateWasSelected:e.getValuePeriodName}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ประเภทของประกันภัย *")])]),e._v(" "),a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"expense_type_code"}},[a("lov-expense-type-code",{attrs:{name:"expense_type_code",size:"",popperBody:!1},on:{"change-lov":e.getValueExpenseTypeCode},model:{value:e.fetch.expense_type_code,callback:function(t){e.$set(e.fetch,"expense_type_code",t)},expression:"fetch.expense_type_code"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("กรมธรรม์ชุดที่")])]),e._v(" "),a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 el_field"},[a("el-form-item",[a("lov-policy-set-header-id",{attrs:{name:"policy_set_header_id",size:"",placeholder:"กรมธรรม์ชุดที่",check:this.fetch.expense_type_meaning,popperBody:!1,fixTypeFr:"10",fixTypeSc:"20"},on:{"change-lov":e.getPolicySetHeaderId},model:{value:e.fetch.policy_set_header_id,callback:function(t){e.$set(e.fetch,"policy_set_header_id",t)},expression:"fetch.policy_set_header_id"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.clickSearch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n            ")])])])],1)])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("การดึงข้อมูล")])])}],!1,null,null,null).exports;const d={name:"ir-components-lov-month-budget-year",data:function(){return{period_name:[],months:12}},props:["value","name","placeholder","param_year"],computed:{result:{get:function(){return this.value},set:function(e){this.$emit("change-lov",e)}}},methods:{setMonths:function(e){this.period_name=[];var t=[];if(e){for(var a="",n=[],o=1;o<=this.months;o++){var s=o.toString();if(1===s.length)a="01/0".concat(s,"/").concat(e);else{var i=+s>9&&+s<=12?+e-1:e;a="01/".concat(s,"/").concat(i)}n.push(a)}!function(e){e.sort((function(e,t){return console.log("new date - ",new Date(e).getTime()-new Date(t).getTime()),new Date(e).getTime()-new Date(t).getTime()}))}(n),n.filter((function(e){var a=e.split("/");return t.push("".concat(a[1],"/").concat(a[2]))})),this.period_name=t}},change:function(e){this.$emit("change-lov",e)}},watch:{param_year:function(e,t){this.setMonths(e)}}};const u=(0,s.Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0},on:{change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.period_name,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)}),[],!1,null,null,null).exports;var m=a(95070),p=a(30381),h=a.n(p);const f={name:"ir-expense-stock-asset-search",data:function(){return{rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}],period_name:[{required:!0,message:"กรุณาระบุเดือน",trigger:"change"}],expense_type_code:[{required:!0,message:"กรุณาระบุประเภทประกันภัย",trigger:"change"}]},period_name:[],budget_period_year:[],months:[],years:[]}},props:["search","showYearBE","setYearCE","vars"],methods:{changeYear:function(e){this.search.year=e,e?this.months=this.budget_period_year.filter((function(t){if(e===t.period_year)return t})):(this.months=[],this.search.month=""),this.search.month=""},clickSearch:function(){var e=this;this.$refs.search_expense_stock_asset.validate((function(t){if(!t)return!1;e.$emit("click-search",e.search)}))},clickFetch:function(){this.$refs.modal_fetch.resetFields()},clickClear:function(){window.location.href="/ir/expense-stock-asset"},getValueStatus:function(e){this.search.status=e},getValueMonth:function(e){this.search.month=e,this.$emit("get-value-month",e)},getDataBudgetPeriodYear:function(){var e=this;axios.get("/ir/ajax/lov/budget-period-year").then((function(t){var a=t.data;e.budget_period_year=e.setPropertyPeriodYear(a.data)})).catch((function(e){swal("Error",e,"error")}))},setPropertyPeriodYear:function(e){return e.filter((function(e){return e}))},onlyUnique:function(e,t,a){return a.indexOf(e)===t},unique:function(){var e=[];return $.each(this.budget_period_year,(function(t,a){-1==$.inArray(a.period_year,e)&&e.push(a.period_year)})),e},getValueExpenseTypeCode:function(e){e?(this.search.expense_type_code=e.lookup_code,this.search.expense_type_meaning=e.meaning):(this.search.expense_type_code="",this.search.expense_type_meaning="",this.search.policy_set_header_id="")},getPolicySetHeaderId:function(e){this.search.policy_set_header_id=e},getValuePeriodFrom:function(e){var t=this.vars.formatMonth;this.search.period_name=e?h()(e).format(t):""},fetchTableHeader:function(e){this.$emit("fetch-show-table-header",e)}},components:{modalFetch:l,lovMonthBudgetYear:u,yearInput:m.Z,lovStatusIr:n.Z,lovExpenseTypeCode:i,lovPolicySetHeaderId:r.Z},watch:{budget_period_year:function(e,t){e.length>0&&(this.years=this.unique())}},created:function(){this.getDataBudgetPeriodYear()}};const v=(0,s.Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"search_expense_stock_asset",staticClass:"demo-ruleForm",attrs:{model:e.search,rules:e.rules,"label-width":"120px"}},[a("div",{staticClass:"col-lg-11"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เดือนปิดบัญชี *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"period_name"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"period_name","p-type":"month",placeholder:"เดือนปิดบัญชี",value:e.search.period_name,format:e.vars.formatMonth},on:{dateWasSelected:e.getValuePeriodFrom}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ประเภทของประกันภัย *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"expense_type_code"}},[a("lov-expense-type-code",{attrs:{name:"expense_type_code",size:""},on:{"change-lov":e.getValueExpenseTypeCode},model:{value:e.search.expense_type_code,callback:function(t){e.$set(e.search,"expense_type_code",t)},expression:"search.expense_type_code"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("กรมธรรม์ชุดที่")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-policy-set-header-id",{attrs:{name:"policy_set_header_id",size:"",placeholder:"กรมธรรม์ชุดที่",check:this.search.expense_type_meaning,fixTypeFr:"10",fixTypeSc:"20"},on:{"change-lov":e.getPolicySetHeaderId},model:{value:e.search.policy_set_header_id,callback:function(t){e.$set(e.search,"policy_set_header_id",t)},expression:"search.policy_set_header_id"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("สถานะ")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-status-ir",{attrs:{name:"status",size:""},on:{"change-lov":e.getValueStatus},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"text-right el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){return e.clickSearch()}}},[a("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา\n        ")]),e._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#modal_expense_stock_asset"},on:{click:function(t){return e.clickFetch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n        ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n        ")])])],1)]),e._v(" "),a("modal-fetch",{ref:"modal_fetch",attrs:{setYearCE:e.setYearCE,vars:e.vars},on:{"fetch-table-header":e.fetchTableHeader}})],1)}),[],!1,null,null,null).exports;const g={name:"ir-expense-stock-asset-table-total",data:function(){return{}},props:["tableTotal","formatCurrency"],methods:{setZeroWhenIsNullOrUndefined:function(e){return""===e||null==e?this.formatCurrency("0"):this.formatCurrency(e)}}};const y=(0,s.Z)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[e._m(0),e._v(" "),a("tbody",[e._l(e.tableTotal,(function(t,n){return a("tr",{directives:[{name:"show",rawName:"v-show",value:e.tableTotal.length>0,expression:"tableTotal.length > 0"}],key:n,staticClass:"text-right"},[a("td",[e._v(e._s(e.setZeroWhenIsNullOrUndefined(t.total_cover_amount)))]),e._v(" "),a("td",[e._v(e._s(e.setZeroWhenIsNullOrUndefined(t.total_insu_amount)))]),e._v(" "),a("td",[e._v(e._s(e.setZeroWhenIsNullOrUndefined(t.coverage_amount_cal)))]),e._v(" "),a("td",[e._v(e._s(e.setZeroWhenIsNullOrUndefined(t.insurance_amount_cal)))]),e._v(" "),a("td",[e._v(e._s(e.setZeroWhenIsNullOrUndefined(t.net_amount)))])])})),e._v(" "),0===e.tableTotal.length?a("tr",{staticClass:"text-center"},[a("td",{attrs:{colspan:"7"}},[e._v("ไม่มีข้อมูล")])]):e._e()],2),e._v(" "),a("tfoot")])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",{staticClass:"text-right"},[a("th",{staticStyle:{"min-width":"200px"}},[e._v("Total Amount"),a("br"),e._v("มูลค่าทุนประกันรวม")]),e._v(" "),a("th",{staticStyle:{"min-width":"200px"}},[e._v("Total Premium"),a("br"),e._v("ค่าเบี้ยประกันรวม")]),e._v(" "),a("th",{staticStyle:{"min-width":"200px"}},[e._v("มูลค่าทุนประกัน เพิ่ม/ลด รวม")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[e._v("ค่าเบี้ยประกัน เพิ่ม/ลด รวม")]),e._v(" "),a("th",{staticStyle:{"min-width":"250px"}},[e._v("Total Net Amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิต่อเดือนรวม")])])])}],!1,null,null,null).exports;function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w={name:"ir-expense-stock-asset-table-line",data:function(){return{columnSelected:[],setDataRowsNotInterface:[],complete:!0,res_rows_id:[]}},props:["setFirstLetterUpperCase","isNullOrUndefined","formatCurrency","form","expense_id","checkStatusInterface","vars","setValuePeriodNameFormat","res_list_id","checkStatusCancelled"],methods:{clickConfirm:function(){0!==this.columnSelected.length?this.columnSelected.filter((function(e){return e.status="CONFIRMED",e})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยืนยัน!","warning")},clickCancel:function(){0===this.columnSelected.length?swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยกเลิก!","warning"):this.columnSelected.filter((function(e){return e.status="CANCELLED",e}))},clickClear:function(){0!==this.columnSelected.length?this.columnSelected.filter((function(e){return e.status="NEW",e})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการรีเซต!","warning")},clickSelectAll:function(){if(this.setDataRowsNotInterface=this.form.tableLine.filter((function(e,t){if(!$('input[name="expense_stock_asset_select'.concat(t,'"]')).is(":disabled"))return e})),$('input[name="expense_stock_asset_select_all"]').is(":checked"))for(var e in this.setDataRowsNotInterface){var t=this.setDataRowsNotInterface[e];$('input[name="expense_stock_asset_select'.concat(e,"\"]:not('.checkbox_edit_disabled')")).prop("checked",!0),this.setSelectedColumn(t)}else for(var a in this.setDataRowsNotInterface){this.setDataRowsNotInterface[a];$('input[name="expense_stock_asset_select'.concat(a,'"]')).prop("checked",!1),this.columnSelected=[]}},setSelectedColumn:function(e){this.columnSelected.push(e)},clickSelectRow:function(e,t){if($('input[name="expense_stock_asset_select'.concat(e,'"]')).is(":checked"))this.setSelectedColumn(t);else{var a=this.columnSelected.indexOf(t);a>-1&&this.columnSelected.splice(a,1)}},clickIncomplete:function(){this.complete=!this.complete,this.$emit("complete",this.complete)},clickComplete:function(){var e=this,t=[];this.form.tableLine.filter((function(a){t.push(C(C({},a),{},{period_name:e.setValuePeriodNameFormat(h()(a.period_name,e.vars.formatMonth).toDate())}))}));var a={data:t,list_id:this.res_list_id};console.log("clickComplete ",a,this.form.tableLine,t),axios.post("/ir/ajax/expense-asset-stock",a).then((function(t){var a=t.data,n=a.data;console.log("res ",n),e.complete=!e.complete,swal({title:"Success",text:a.message,type:"success",timer:3e3,showConfirmButton:!1,closeOnConfirm:!1}),e.$emit("complete",e.complete),e.res_rows_id=n.rows,e.form.tableLine=e.setDocumentNumber()})).catch((function(e){swal("Error",e,"error")}))},clickRow:function(e){var t={status:this.isNullOrUndefined(e.status),expense_type_code:this.isNullOrUndefined(e.expense_type_code),policy_set_header_id:this.isNullOrUndefined(e.policy_set_header_id),department_code:this.isNullOrUndefined(e.department_code),department_name:this.isNullOrUndefined(e.department_name),group_name:this.isNullOrUndefined(e.group_name),sector_code:this.isNullOrUndefined(e.sector_code),sector_name:this.isNullOrUndefined(e.sector_name),asset_number:this.isNullOrUndefined(e.asset_number),insurance_premium:this.isNullOrUndefined(e.insurance_premium),expense_account:this.isNullOrUndefined(e.expense_account),expense_account_desc:this.isNullOrUndefined(e.expense_account_desc),prepaid_account:this.isNullOrUndefined(e.prepaid_account),prepaid_account_desc:this.isNullOrUndefined(e.prepaid_account_desc),coverage_amount:this.isNullOrUndefined(e.coverage_amount),insurance_amount:this.isNullOrUndefined(e.insurance_amount),coverage_amount_cal:this.isNullOrUndefined(e.coverage_amount_cal),insurance_amount_cal:this.isNullOrUndefined(e.insurance_amount_cal),net_amount:this.isNullOrUndefined(e.net_amount)};this.$emit("click-row",t)},setDocumentNumber:function(){var e=this;return console.log("setDocumentNumber ",this.form.tableLine,this.res_rows_id),this.form.tableLine.filter((function(t){return console.log("form ",t),e.res_rows_id.filter((function(e){console.log("res ",e,t.rowId==e.row_id),t.document_number=t.rowId==e.row_id?e.document_number:t.document_number,t.expense_id=t.rowId==e.row_id?e.expense_id:t.expense_id})),t}))},sortArrays:function(e){return _.orderBy(e,["status","document_number"],["desc","asc"])}},computed:{checkCancelAll:function(){return this.form.tableLine.every((function(e){return"cancelled"===e.status.toLowerCase()}))},checkAllInterface:function(){return this.form.tableLine.every((function(e){return console.log(e),"INTERFACE"===e.status.toUpperCase()}))}},watch:{complete:function(e,t){console.log("watch complete newVal ",e),console.log("watch complete oldVal ",t),this.$emit("complete",e),e?($("#table_line").find("input").prop("disabled",!1),$('input[name="expense_stock_asset_select_all"]').prop("disabled",!1)):($("#table_line").find("input").prop("disabled",!0),$('input[name="expense_stock_asset_select_all"]').prop("checked",!1),$('input[name="expense_stock_asset_select_all"]').prop("disabled",!0),$("#table_line").find('input[type="checkbox"]').prop("checked",!1),this.columnSelected=[]),$(".checkbox_edit_disabled").prop("disabled",!0)},document_number:function(e,t){this.form.tableLine.length>0?this.complete=!e:this.complete=!0},"form.tableLine":function(e,t){$('input[name="expense_stock_asset_select_all"]').prop("checked",!1),$("#table_line").find('input[type="checkbox"]').prop("checked",!1),this.columnSelected=[]}}};var O=a(93379),N=a.n(O),S=a(81648),k={insert:"head",singleton:!1};N()(S.Z,k);S.Z.locals;const E=(0,s.Z)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"margin_top_20"},[a("el-form",{staticClass:"demo-dynamic"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered",staticStyle:{display:"block",overflow:"auto","max-height":"500px"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"min-width":"80px"}},[e._v("\n              Select All "),a("br"),e._v(" "),a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{staticClass:"form-check-input",staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"expense_stock_asset_select_all",disabled:!(e.complete&&!e.checkAllInterface)},on:{click:function(t){return e.clickSelectAll()}}})])]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"110px"}},[e._v("IR Status"),a("br"),e._v("สถานะ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Period "),a("br"),e._v("เดือนปิดบีญชี")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"160px"}},[e._v("ประเภทของประกันภัย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"120px"}},[e._v("Policy No."),a("br"),e._v("กรมธรรม์ชุดที่")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Department Code"),a("br"),e._v("รหัสหน่วยงาน")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Department"),a("br"),e._v("หน่วยงาน")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Group"),a("br"),e._v("กลุ่ม")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"120px"}},[e._v("รหัสสังกัด")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"120px"}},[e._v("สังกัด")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"120px"}},[e._v("Asset Number"),a("br"),e._v("เลขที่สินทรัพย์")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px",width:"1%"}},[e._v("อัตราเบี้ยประกันภัย (%)")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px"}},[e._v("Expense Account Code"),a("br"),e._v("รหัสบัญชีค่าใช้จ่าย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"370px"}},[e._v("Expense Account Description"),a("br"),e._v("บัญชีค่าใช้จ่าย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px"}},[e._v("Prepaid Account Code"),a("br"),e._v("รหัสบัญชีจ่ายล่วงหน้า")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"370px"}},[e._v("Prepaid Account Description"),a("br"),e._v("บัญชีจ่ายล่วงหน้า")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Coverage Amount"),a("br"),e._v("มูลค่าทุนประกัน")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Premium"),a("br"),e._v("ค่าเบี้ยประกัน")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"160px"}},[e._v("มูลค่าทุนประกัน เพิ่ม/ลด")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("ค่าเบี้ย เพิ่ม/ลด")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"170px"}},[e._v("Net Amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิต่อเดือน")])])]),e._v(" "),a("tbody",{attrs:{id:"table_line"}},[e._l(e.form.tableLine,(function(t,n){return a("tr",{directives:[{name:"show",rawName:"v-show",value:e.form.tableLine.length>0,expression:"form.tableLine.length > 0"}],key:n,staticClass:"mouse-over"},[a("td",{staticClass:"text-center"},[a("div",{staticClass:"form-check",staticStyle:{position:"inherit"}},[a("input",{class:"form-check-input "+(e.checkStatusInterface(t.status)?"checkbox_edit_disabled":""),staticStyle:{position:"inherit"},attrs:{type:"checkbox",name:"expense_stock_asset_select"+n,disabled:!(!e.checkStatusInterface(t.status)&&e.complete)||e.checkStatusCancelled(t.status)},domProps:{value:""+n},on:{click:function(a){return e.clickSelectRow(n,t)}}})])]),e._v(" "),a("td",[e._v(e._s(e.setFirstLetterUpperCase(t.status)))]),e._v(" "),a("td",[e._v(e._s(t.period_name))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.expense_type_desc)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.policy_set_number)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.department_code)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.department_name)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.group_name)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.sector_code)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.sector_name)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.asset_number)))]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.insurance_premium)||0===e.isNullOrUndefined(t.insurance_premium)?e.formatCurrency(t.insurance_premium,5):e.isNullOrUndefined(t.insurance_premium)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.expense_account)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.expense_account_desc)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.prepaid_account)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.prepaid_account_desc)))]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.coverage_amount)||0===e.isNullOrUndefined(t.coverage_amount)?e.formatCurrency(t.coverage_amount):e.isNullOrUndefined(t.coverage_amount))+"\n            ")]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.insurance_amount)||0===e.isNullOrUndefined(t.insurance_amount)?e.formatCurrency(t.insurance_amount):e.isNullOrUndefined(t.insurance_amount))+"\n            ")]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.coverage_amount_cal)||0===e.isNullOrUndefined(t.coverage_amount_cal)?e.formatCurrency(t.coverage_amount_cal):e.isNullOrUndefined(t.coverage_amount_cal))+"\n            ")]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.insurance_amount_cal)||0===e.isNullOrUndefined(t.insurance_amount_cal)?e.formatCurrency(t.insurance_amount_cal):e.isNullOrUndefined(t.insurance_amount_cal))+"\n            ")]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n              "+e._s(e.isNullOrUndefined(t.net_amount)||0===e.isNullOrUndefined(t.net_amount)?e.formatCurrency(t.net_amount):e.isNullOrUndefined(t.net_amount))+"\n            ")])])})),e._v(" "),0===e.form.tableLine.length?a("tr",{staticClass:"mouse-over text-center"},[a("td",{attrs:{colspan:"22"}},[e._v("ไม่มีข้อมูล")])]):e._e()],2),e._v(" "),a("tfoot")])]),e._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!e.complete||e.checkAllInterface},on:{click:function(t){return e.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),e._v("\n              ยืนยัน\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:!e.complete||e.checkAllInterface},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v("\n              รีเซต\n            ")])])],1)]),e._v(" "),a("div",{staticClass:"col-md-6 lable_align"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{directives:[{name:"show",rawName:"v-show",value:e.complete,expression:"complete"}],staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.checkCancelAll||e.checkAllInterface},on:{click:function(t){return e.clickComplete()}}},[a("i",{staticClass:"fa fa-check-square-o"}),e._v(" บันทึก (ล็อค)\n            ")]),e._v(" "),e.complete?e._e():a("button",{staticClass:"btn btn-danger btn_incomplete",attrs:{type:"button",disabled:e.checkCancelAll||e.checkAllInterface},on:{click:function(t){return e.clickIncomplete()}}},[a("i",{staticClass:"fa fa-minus-square-o"}),e._v(" แก้ไข (ปลดล็อค)\n            ")])])],1)])])])],1)}),[],!1,null,"ddf9909e",null).exports;var D=a(67791);const T={name:"ir-expense-stock-asset-index",data:function(){return{form:{tableLine:[]},search:{month:"",expense_type_code:"",expense_type_meaning:"",policy_set_header_id:"",status:"",period_name:""},tableTotal:[],account_code_combine:[],expenseTypeCode:[],expense_id:"",funcs:D.sD,vars:D.gR,res_list_id:[],showLoading:!1}},methods:{getTableLine:function(){var e=this;this.showLoading=!0;var t={month:this.funcs.setYearCE("month",this.search.month),type:this.search.expense_type_code,policy_set_header_id:this.search.policy_set_header_id,status:this.search.status,period_name:this.funcs.setYearCE("month",this.search.period_name)};axios.get("/ir/ajax/expense-asset-stock",{params:t}).then((function(t){var a=t.data;e.showLoading=!1,e.res_list_id=a.list_id,e.form.tableLine=e.setPropertyTableLine(a.data),0===e.form.tableLine.length&&(e.tableTotal=[])})).catch((function(e){swal("Error",e,"error")}))},getDataSearch:function(e){this.search=e,this.getTableLine()},getDataShowTableTotal:function(e){this.tableTotal=[e]},getDaysInMonth:function(e){if(e){var t=e.split("/"),a=+t[0],n=+t[1];return new Date(n,a,0).getDate()}return""},getValueMonth:function(e){this.search.month=e},setPropertyTableLine:function(e){var t=this;return e.filter((function(e,a){var n,o,s;t.expense_id=e.expense_id,e.sector_code="ASSET001"===e.expense_type_code?e.sector_code:"ASSET001"===e.flag?e.department_code:"",e.sector_name="ASSET001"===e.expense_type_code?e.sector_name:"ASSET001"===e.flag?e.department_name:"",e.department_code=null!==(n=e.department_cost_code)&&void 0!==n?n:e.department_code,e.department_name=null!==(o=e.department_cost_desc)&&void 0!==o?o:e.department_name,e.insurance_premium=null!==(s=e.insurance_premium)&&void 0!==s?s:e.premium_rate,e.program_code="IRP0008";var i=e.insurance_amount||0===e.insurance_amount?+e.insurance_amount:0,r=e.insurance_amount_cal||0===e.insurance_amount_cal?+e.insurance_amount_cal:0;return e.net_amount=i+r,e.rowId=a,e}))},getAccountCodeCombine:function(){var e=this;axios.get("/ir/ajax/lov/account-code-combine",{params:{account_id:"",keyword:""}}).then((function(t){var a=t.data;e.account_code_combine=a.data})).catch((function(e){swal("Error",e,"error")}))},getAccountIdSetDesc:function(e,t,a,n,o){return this.account_code_combine.filter((function(o){if(e[t]&&o.account_id&&+e[t]==+o.account_id)return e[a]=o.account_combine,e[n]=o.account_combine_desc,e})),e},calCoverageAmount:function(e,t){return"STOCK001"===e.flag?e.coverage_amount_cal=t.coverage_amount:"ASSET001"===e.flag&&(e.coverage_amount_cal=t.insurance_amount*t.dayOfMonth/t.qtyDaysRemain),e},calInsuranceAmount:function(e,t){return"STOCK001"===e.flag?e.insurance_amount_cal=t.insurance_amount:"ASSET001"===e.flag&&(e.insurance_amount_cal=.08*t.coverage_amount*t.dayOfMonth/t.qtyDaysRemain),e},calNetAmount:function(e,t){return"STOCK001"===e.flag?e.net_amount=t.net_amount:"ASSET001"===e.flag&&(e.net_amount=t.net_amount*t.dayOfMonth/t.qtyDaysRemain),e},getExpenseTypeCode:function(){var e=this;return this.form.tableLine.filter((function(t){e.expenseTypeCode.filter((function(e){if(t.flag===e.lookup_code)return t.expense_type_code=e.lookup_code,t.expense_type_desc=e.description,t}))}))},getDataExpenseType:function(){var e=this;axios.get("/ir/ajax/lov/exp-asset-stock-type",{params:{lookup_code:"",keyword:""}}).then((function(t){var a=t.data;e.expenseTypeCode=a.data})).catch((function(e){swal("Error",e,"error")}))},calTableTotal:function(){var e,t,a,n,o;e=this.form.tableLine.reduce((function(e,t){return""===t.coverage_amount||null===t.coverage_amount||void 0===t.coverage_amount?e+0:e+parseFloat(t.coverage_amount)}),0),t=this.form.tableLine.reduce((function(e,t){return""===t.insurance_amount||null===t.insurance_amount||void 0===t.insurance_amount?e+0:e+parseFloat(t.insurance_amount)}),0),a=this.form.tableLine.reduce((function(e,t){return""===t.coverage_amount_cal||null===t.coverage_amount_cal||void 0===t.coverage_amount_cal?e+0:e+parseFloat(t.coverage_amount_cal)}),0),n=this.form.tableLine.reduce((function(e,t){return""===t.insurance_amount_cal||null===t.insurance_amount_cal||void 0===t.insurance_amount_cal?e+0:e+parseFloat(t.insurance_amount_cal)}),0),o=this.form.tableLine.reduce((function(e,t){return""===t.net_amount||null===t.net_amount||void 0===t.net_amount?e+0:e+parseFloat(t.net_amount)}),0),this.tableTotal=[{total_cover_amount:e,total_insu_amount:t,coverage_amount_cal:a,insurance_amount_cal:n,net_amount:o}]},fetchShowTableHeader:function(e){var t=this;this.showLoading=!0,this.form.tableLine=this.setPropertyTableLine(e),0===this.form.tableLine.length&&(this.tableTotal=[]),setTimeout((function(){t.showLoading=!1}),2e3)}},components:{"expense-search":v,"expense-table-total":y,"expense-table-line":E},watch:{"search.month":function(e,t){e&&this.getDaysInMonth(e)},"form.tableLine":function(e,t){e.length>0?(this.getExpenseTypeCode(),this.calTableTotal()):this.tableTotal=[]}},created:function(){this.getAccountCodeCombine(),this.getDataExpenseType()}};const I=(0,s.Z)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[a("expense-search",{attrs:{search:e.search,showYearBE:e.funcs.showYearBE,setYearCE:e.funcs.setYearCE,vars:e.vars},on:{"click-search":e.getDataSearch,"get-value-month":e.getValueMonth,"fetch-show-table-header":e.fetchShowTableHeader}}),e._v(" "),a("expense-table-total",{attrs:{tableTotal:e.tableTotal,formatCurrency:e.funcs.formatCurrency}}),e._v(" "),a("expense-table-line",{attrs:{setFirstLetterUpperCase:e.funcs.setFirstLetterUpperCase,isNullOrUndefined:e.funcs.isNullOrUndefined,formatCurrency:e.funcs.formatCurrency,form:e.form,expense_id:e.expense_id,checkStatusInterface:e.funcs.checkStatusInterface,checkStatusCancelled:e.funcs.checkStatusCancelled,vars:e.vars,setValuePeriodNameFormat:e.funcs.setValuePeriodNameFormat,res_list_id:e.res_list_id}})],1)}),[],!1,null,null,null).exports},51900:(e,t,a)=>{"use strict";function n(e,t,a,n,o,s,i,r){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):o&&(c=r?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}a.d(t,{Z:()=>n})}}]);