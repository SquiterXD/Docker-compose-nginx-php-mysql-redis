(self.webpackChunk=self.webpackChunk||[]).push([[1974],{22385:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-dropdown-active-flag",data:function(){return{result:this.value,rows:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}]}},props:["value","placeholder","name","disabled","size","popperBody"],methods:{onchange:function(e){this.$emit("change-dropdown",e)}},watch:{value:function(e,t){this.result=e}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0,disabled:e.disabled,size:e.size,"popper-append-to-body":e.popperBody},on:{change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)}),[],!1,null,null,null).exports},22377:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-dropdown-return-vat-flag",data:function(){return{result:this.value,rows:[{label:"ขอคืนภาษีได้",value:"Y"},{label:"ขอคืนภาษีไม่ได้",value:"N"}]}},props:["value","placeholder","name","disabled","size","popperBody"],methods:{onchange:function(e){this.$emit("change-dropdown",e)}},watch:{value:function(e,t){this.result=e}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0,disabled:e.disabled,size:e.size,"popper-append-to-body":e.popperBody},on:{change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)}),[],!1,null,null,null).exports},12101:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(87757),o=a.n(n);function s(e,t,a,n,o,s,l){try{var i=e[s](l),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var l=e.apply(t,a);function i(e){s(l,n,o,i,c,"next",e)}function c(e){s(l,n,o,i,c,"throw",e)}i(void 0)}))}}var i;const c={props:["setName","setData","placeholder"],data:function(){return{options:[],value:"",loading:!1}},mounted:function(){this.value=this.setData,this.getValueSetList(this.value),this.changeInput()},watch:{setData:function(){this.value=this.setData,this.getValueSetList(this.value),this.options=this.setOptions},setOptions:(i=l(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.options=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},methods:{getValueSetList:function(e){var t=this;return l(o().mark((function a(){return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,axios.get("/ir/ajax/vehicles/getlookupData",{params:{flex_value_set_name:t.setName,flex_value_set_data:t.value,query:e}}).then((function(e){t.options=e.data,t.changeInput()})).catch((function(e){console.log(e)})).then((function(){t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},changeInput:function(){var e=this,t="",a="";this.options.find((function(n){n.meaning==e.value&&(t=n.meaning,a=n.description)})),this.$emit("getLocation",{name:this.setName,value:this.value,value_code:t,value_name:a})}}};const r=(0,a(51900).Z)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:e.placeholder,"remote-method":e.getValueSetList,loading:e.loading,size:"large"},on:{change:e.changeInput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+" : "+e.description,value:e.meaning}})})),1)],1)}),[],!1,null,null,null).exports},99075:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-settings-vehicle-lov-insurance-type",data:function(){return{rows:[],loading:!1,result:this.value,first:!0}},props:["value","name","placeholder","size","popperBody","disabled","data"],methods:{remoteMethod:function(e){this.getDataRows({keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/renew-type-irm0007",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.result||this.getDataRows({keyword:""})},onchange:function(e){var t={code:"",desc:"",id:""};if(e){for(var a in this.rows){var n=this.rows[a];n.lookup_code==e&&(t.code=n.lookup_code,t.desc=n.description,t.id=n.meaning)}this.result=e,this.getDataRows({keyword:t.desc})}else t.code="",t.desc="",t.id="",this.result=e;this.$emit("change-lov",t)},onclick:function(){0===this.rows.length&&this.getDataRows({keyword:this.data.insurance_type_desc})},onblur:function(){var e=this;this.rows.filter((function(t){t.lookup_code!=e.result&&(e.result="")}))}},mounted:function(){this.getDataRows({keyword:""})},watch:{value:function(e,t){this.result=e,this.first&&(this.getDataRows({keyword:this.data.insurance_type_desc}),this.first=!1)},result:function(e,t){if(!e){var a={code:e,desc:"",id:""};this.$emit("change-lov",a)}}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange,focus:e.onfocus,blur:e.onblur},nativeOn:{click:function(t){return e.onclick()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.lookup_code+" : "+e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports},60035:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-settings-vehicle-lov-search",data:function(){return{rows:[],loading:!1,code:"",desc:"",result:this.value}},props:["url","value","placeholder","attrName","propCode","propDesc","propCodeDisp","propDescDisp","disabled"],computed:{setProperty:function(){var e={};return e[this.propDesc]=this.desc,e}},methods:{remoteMethod:function(e){this.code="",this.desc=e,this.getDataRows(this.setProperty)},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/".concat(this.url),{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},focus:function(){this.code="",this.desc="",this.getDataRows(this.setProperty)},change:function(e){this.$emit("change-lov",e)}},mounted:function(){this.code="",this.desc="",this.getDataRows(this.setProperty)},watch:{value:function(e,t){e&&(this.result=e)}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.attrName,clearable:!0,disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(t,n){return a("el-option",{key:n,attrs:{label:t[e.propDescDisp],value:t[e.propCodeDisp]}})})),1)],1)}),[],!1,null,null,null).exports},32854:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-settings-vehicle-lov-vehicle-type",data:function(){return{rows:[],loading:!1,result:this.value,first:!0}},props:["value","name","placeholder","size","popperBody","disabled"],methods:{remoteMethod:function(e){this.getDataRows({keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/vehicles-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.result||this.getDataRows({keyword:""})},onchange:function(e){var t={code:"",desc:"",id:""};if(e){for(var a in this.rows){var n=this.rows[a];n.vehicle_type_code==e&&(t.code=n.vehicle_type_code,t.desc=n.vehicle_type_name,t.id="")}this.result=e,this.getDataRows({keyword:""})}else t.code="",t.desc="",t.id="",this.result=e;this.$emit("change-lov",t)},onclick:function(){0===this.rows.length&&this.getDataRows({keyword:""})},onblur:function(){var e=this;this.rows.filter((function(t){t.vehicle_type_code!=e.result&&(e.result="")}))}},mounted:function(){this.getDataRows({keyword:""})},watch:{value:function(e,t){this.result=e,this.first&&(this.getDataRows({keyword:""}),this.first=!1)},result:function(e,t){if(!e){var a={code:e,desc:"",id:""};this.$emit("change-lov",a)}}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange,focus:e.onfocus,blur:e.onblur},nativeOn:{click:function(t){return e.onclick()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.vehicle_type_name,value:e.vehicle_type_code}})})),1)],1)}),[],!1,null,null,null).exports},1974:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(60035),o=a(32854),s=a(99075),l=a(22377),i=a(22385),c=a(12101);const r={name:"ir-settings-vehicle-search",data:function(){return{license_plates:[],loading:!1,create:{license_plate:"",policy_set_header_id:"",group_code:"",vehicle_type_code:"",vehicle_brand_code:"",vehicle_cc:"",engine_number:"",tank_number:"",return_vat_flag:!0,vat_percent:"",revenue_stamp_percent:"",insurance_type_code:"",asset_number:"",account_id:"",account_description:"",active_flag:!0,vehicle_id:""}}},props:["search","btnTrans"],methods:{clickSearch:function(){this.$emit("click-search",this.search)},clickCancel:function(){this.search.license_plate="",this.search.vehicle_type_code="",this.search.insurance_type_code="",this.search.return_vat_flag="",this.search.active_flag="",this.search.location_code="",window.location.href="/ir/settings/vehicle"},remoteMethod:function(e){this.getDataRows({license_plate:e})},focus:function(){this.getDataRows({license_plate:""})},change:function(e){this.$emit("change-lov",e)},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/license-plate",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.license_plates=a.data})).catch((function(e){swal("Error",e,"error")}))},getDataVehicleType:function(e){this.search.vehicle_type_code=e},getValueVehicleType:function(e){this.search.vehicle_type_code=e.code},getValueInsuranceType:function(e){this.search.insurance_type_code=e.code},getValueReturnVatFlag:function(e){this.search.return_vat_flag=e},getValueActiveFlag:function(e){this.search.active_flag=e},getLocation:function(e){this.search.location_code=e.value_code}},components:{lovSearch:n.Z,lovVehicleType:o.Z,dropdownReturnVatFlag:l.Z,dropdownActiveFlag:i.Z,lovInsuranceType:s.Z,LocationInputValue:c.Z},mounted:function(){this.getDataRows({license_plate:""})}};const u=(0,a(51900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"ระบุทะเบียนรถ","remote-method":e.remoteMethod,loading:e.loading,clearable:!0},on:{change:e.change,focus:e.focus},model:{value:e.search.license_plate,callback:function(t){e.$set(e.search,"license_plate",t)},expression:"search.license_plate"}},e._l(e.license_plates,(function(e,t){return a("el-option",{key:t,attrs:{label:e.license_plate,value:e.license_plate}})})),1)],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12"},[a("lov-vehicle-type",{attrs:{name:"vehicle_type_code",placeholder:"ระบุประเภทรถ",size:"",popperBody:!0,disabled:!1},on:{"change-lov":e.getValueVehicleType},model:{value:e.search.vehicle_type_code,callback:function(t){e.$set(e.search,"vehicle_type_code",t)},expression:"search.vehicle_type_code"}})],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 "},[a("lov-insurance-type",{attrs:{name:"insurance_type_code",placeholder:"ระบุประเภทประกันภัย",size:"",popperBody:!0,disabled:!1},on:{"change-lov":e.getValueInsuranceType},model:{value:e.search.insurance_type_code,callback:function(t){e.$set(e.search,"insurance_type_code",t)},expression:"search.insurance_type_code"}})],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("location-input-value",{attrs:{"set-name":"FA_LOCATION","set-data":e.search.location_code,placeholder:"รหัสสถานที่"},on:{getLocation:e.getLocation}})],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("dropdown-return-vat-flag",{attrs:{placeholder:"ขอคืนภาษี",name:"return_vat_flag",disabled:!1,size:"",popperBody:!0},on:{"change-dropdown":e.getValueReturnVatFlag},model:{value:e.search.return_vat_flag,callback:function(t){e.$set(e.search,"return_vat_flag",t)},expression:"search.return_vat_flag"}})],1),e._v(" "),a("div",{staticClass:"col-lg-2 col-sm-2 padding_12 el_field"},[a("dropdown-active-flag",{attrs:{placeholder:"Status",name:"active_flag",disabled:!1,size:"",popperBody:!0},on:{"change-dropdown":e.getValueActiveFlag},model:{value:e.search.active_flag,callback:function(t){e.$set(e.search,"active_flag",t)},expression:"search.active_flag"}})],1)]),e._v(" "),a("div",{staticClass:"row text-right mt-3"},[a("div",{staticClass:"offset-md-9 col-md-3 col-sm-12 padding_12",staticStyle:{"margin-top":"auto","margin-bottom":"auto"}},[a("button",{class:e.btnTrans.reset.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.clickCancel()}}},[a("i",{class:e.btnTrans.reset.icon}),e._v("\n        "+e._s(e.btnTrans.reset.text)+"\n      ")])])])])}),[],!1,null,null,null).exports}}]);