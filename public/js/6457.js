(self.webpackChunk=self.webpackChunk||[]).push([[6457],{25791:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});var s=a(23645),l=a.n(s)()((function(t){return t[1]}));l.push([t.id,"#PPP0006 .xxxx{margin-left:10px}",""]);const n=l},86457:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var s=a(87757),l=a.n(s);function n(t,e,a,s,l,n,r){try{var i=t[n](r),o=i.value}catch(t){return void a(t)}i.done?e(o):Promise.resolve(o).then(s,l)}const r={props:["budgetYears","pBiweekly","search","productTypes","btnTrans","url"],data:function(){return{budget_year:this.search?this.search.budget_year:"",biweekly:this.search?String(this.search.biweekly):"",status:"Active",statusLists:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],biWeeklyLists:[],loading:!1,b_loading:!1,html:""}},mounted:function(){this.budget_year&&this.getBiWeekly()},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.biweekly?this.setError("biweekly"):this.resetError("biweekly")},deep:!0}},methods:{openModal:function(){$("#modal_search").modal("show")},searchForm:function(){var t,e=this;return(t=l().mark((function t(){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).loading=!0,t.next=4,axios.get(a.url.ajax_follow_ups_search,{params:{budget_year:a.budget_year,biweekly:a.biweekly}}).then((function(t){a.html=t.data.data.html})).catch((function(t){a.html="";var e=t.response.data;alert(e.message)})).then((function(){a.loading=!1}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,l){var r=t.apply(e,a);function i(t){n(r,s,l,i,o,"next",t)}function o(t){n(r,s,l,i,o,"throw",t)}i(void 0)}))})()},getBiWeekly:function(){var t=this;this.search||(this.biweekly="",this.month="",this.times=""),this.biWeeklyLists=this.pBiweekly.filter((function(e){return e.thai_year.indexOf(t.budget_year)>-1}))}}};var i=a(51900);const o=(0,i.Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n        "+t._s(t.btnTrans.search.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:t.budget_year}}),t._v(" "),a("el-select",{attrs:{size:"large",placeholder:"ปีงบประมาณ",clearable:"",filterable:"","popper-append-to-body":!1},on:{change:t.getBiWeekly},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}},t._l(t.budgetYears,(function(t,e){return a("el-option",{key:e,attrs:{label:t.thai_year,value:t.thai_year}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปักษ์ที่ :")]),t._v(" "),a("div",{},[a("input",{attrs:{type:"hidden",name:"search[biweekly]"},domProps:{value:t.biweekly}}),t._v(" "),t.budget_year?a("el-select",{attrs:{clearable:"",size:"large",placeholder:"ปักษ์",filterable:"","v-loading":t.b_loading,"popper-append-to-body":!1},model:{value:t.biweekly,callback:function(e){t.biweekly=e},expression:"biweekly"}},t._l(t.biWeeklyLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly}})})),1):a("el-select",{attrs:{clearable:"",size:"large",placeholder:"ปักษ์",disabled:""},model:{value:t.biweekly,callback:function(e){t.biweekly=e},expression:"biweekly"}},t._l(t.biWeeklyLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_biweekly"}})],1)]),t._v(" "),a("div",{staticClass:"form-group text-right  pr-2 mb-0 col-lg-2 col-md-10 col-sm-12 col-xs-12"},[a("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"text-left"},[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.searchForm}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n                                    "+t._s(t.btnTrans.search.text)+"\n                                ")])])])]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.html)}})]),t._v(" "),t._m(1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("ค้นหาแผนประมาณการผลิต")]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                         \n                    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],!1,null,null,null).exports;function c(t,e,a,s,l,n,r){try{var i=t[n](r),o=i.value}catch(t){return void a(t)}i.done?e(o):Promise.resolve(o).then(s,l)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(s,l){var n=t.apply(e,a);function r(t){c(n,s,l,r,i,"next",t)}function i(t){c(n,s,l,r,i,"throw",t)}r(void 0)}))}}const u={props:["followUp","btnTrans","canEdit","url","data"],data:function(){return{statusLists:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],oldNote:this.followUp.note,product:this.followUp.products[0],note:this.followUp.note,loading:!1}},methods:{updateNoteForm:function(){var t=this;return d(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t,swal({title:"อัพเดทหมายเหตุ",text:"ยืนยันอัพเดทหมายเหตุ ?",html:!0,showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=d(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&a.update();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return d(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,(a=t).loading=!0,e.next=5,axios.patch(a.url.ajax_update_note).then((function(t){"S"==t.data.data.status&&(!0,swal({title:"อัพเดทหมายเหตุ",text:'<span style="font-size: 16px; text-align: left;"> อัพเดทหมายเหตุเรียบร้อย </span>',type:"success",html:!0}),a.oldNote=a.note),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()}},watch:{},computed:{showSaveNote:function(){return this.note!=this.oldNote}}};const p=(0,i.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("form",{attrs:{id:"production-plan-form",action:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 b-r"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("dl",{staticClass:"row mb-0"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.followUp.pp_bi_weekly.thai_year)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(1),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.followUp.pp_bi_weekly.biweekly)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(2),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.data.approve_no)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(3),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.followUp.pp_bi_weekly.thai_combine_date)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(4),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.data.adjust_no)+"\n                                    ")]):t._e()])])])]),t._v(" "),a("div",{staticClass:"col-lg-6",attrs:{id:"cluster_info"}},[a("dl",{staticClass:"row mb-0"},[t._m(5),t._v(" "),a("div",{staticClass:"col-sm-7 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.product?t.product.previous_date_format:"")+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(6),t._v(" "),a("div",{staticClass:"col-sm-7 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.product?t.product.as_of_date_format:"")+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(7),t._v(" "),a("div",{staticClass:"col-sm-7 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.followUp.day_for_sale)+" วัน\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(8),t._v(" "),a("div",{staticClass:"col-sm-7 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.product?t.product.remain_sale_day:0)+" วัน\n                                    ")]):t._e()])])])])])]),t._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dl",{staticClass:"row mb-0"},[t._m(9),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.followUp?a("div",[t._v("\n                                        "+t._s(t.followUp.sysdate_format)+"\n                                    ")]):t._e()])])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ปีงบประมาณ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ปักษ์ที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ครั้งที่อนุมัติ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ประจำวันที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ปรับครั้งที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-5  pl-0 text-sm-right"},[a("dt",[t._v("\n                                    วันที่ผลิต:\n                                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-5  pl-0 text-sm-right"},[a("dt",[t._v("\n                                    คงคลังเช้า ณ วันที่:\n                                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-5  pl-0 text-sm-right"},[a("dt",[t._v("\n                                    จำนวนวันขาย:\n                                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-5  pl-0 text-sm-right"},[a("dt",[t._v("\n                                    คงเหลือวันขาย:\n                                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",{attrs:{title:""}},[t._v("วันที่ปัจจุบัน:")])])}],!1,null,null,null).exports;var v=a(30381),_=a.n(v);function m(t,e,a,s,l,n,r){try{var i=t[n](r),o=i.value}catch(t){return void a(t)}i.done?e(o):Promise.resolve(o).then(s,l)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(s,l){var n=t.apply(e,a);function r(t){m(n,s,l,r,i,"next",t)}function i(t){m(n,s,l,r,i,"throw",t)}r(void 0)}))}}var b,h;const w={components:{ModalSearch:o,HeaderDetail:p},props:["followUp","modalSearchInput","colorCode","url","btnTrans","pData","token"],data:function(){return{data:this.pData,loading:!1,selTabName:"tab1",html:{tab1:"",tab2:""},canEdit:!1,canApprove:!1,cuurDate:_()().format("DD/MM/YYYY"),productType:this.pData.default_input.product_type}},mounted:function(){this.getData()},computed:{product_type:function(){this.getData()}},watch:{product_type:(h=f(l().mark((function t(e,a){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",data.default_input.product_type);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return h.apply(this,arguments)}),selTabName:(b=f(l().mark((function t(e,a){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getData();case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return b.apply(this,arguments)})},methods:{getData:function(){var t=this;return f(l().mark((function e(){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=t).selTabName&&""!=a.selTabName){e.next=3;break}return e.abrupt("return");case 3:if(a.followUp&&a.selTabName){e.next=5;break}return e.abrupt("return");case 5:return a.loading=!0,s={follow_main_id:a.followUp.follow_main_id,tab_name:a.selTabName,product_type:a.data.default_input.product_type},e.next=9,axios.get(a.url.ajax_follow_ups_get_data,{params:s}).then((function(t){var e=t.data.data;a.html[a.selTabName]=e.html})).catch((function(t){console.log("error");var e=t.response.data;alert(e.message)})).then((function(){a.loading=!1}));case 9:$((function(){$('[data-toggle="tooltip"]').tooltip({placement:"top"})}));case 10:case"end":return e.stop()}}),e)})))()},printPPR0004:function(){var t=this;return f(l().mark((function e(){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t,a=$("#ppp0006-tab1"),s=a.serialize(),console.log(s);case 4:case"end":return e.stop()}}),e)})))()}}};a(64646);const g=(0,i.Z)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"PPP0006"}},[t._m(0),t._v(" "),a("div",{staticClass:"card border-primary mb-3 mt-3"},[a("div",{staticClass:"card-body"},[a("header-detail",{attrs:{url:t.url,btnTrans:t.btnTrans,followUp:t.followUp,data:t.data}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 b-r"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dl",{staticClass:"row mb-0"},[t._m(1),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("div",[a("el-radio-group",{attrs:{size:"small"},model:{value:t.data.default_input.product_type,callback:function(e){t.$set(t.data.default_input,"product_type",e)},expression:"data.default_input.product_type"}},[t._l(t.data.product_types,(function(e,s){return[a("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:e.lookup_code,border:""},on:{click:t.getData}},[t._v("\n                                                "+t._s(e.meaning)+"\n                                            ")])]})),t._v(" "),a("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:"all",border:""},on:{click:t.getData}},[t._v("\n                                                แสดงทุกประเภท\n                                            ")])],2)],1)])])])])])])],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tabs-container"},[a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#tab1"},on:{click:function(e){t.selTabName="tab1"}}},[t._v("\n                    คงคลังกองผลิตภัณฑ์\n                ")])]),t._v(" "),a("li",[a("a",{staticClass:"nav-link ",attrs:{"data-toggle":"tab",href:"#tab2"},on:{click:function(e){t.selTabName="tab2"}}},[t._v("\n                    คาดการณ์คงคลังล่วงหน้า\n                ")])])]),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane active",attrs:{role:"tabpanel",id:"tab1"}},[a("div",{staticClass:"panel-body"},[a("form",{attrs:{id:"ppp0006-tab1",action:t.url.get_report_follow_ups_ppr0004,method:"post",target:"_blank"}},[a("input",{attrs:{type:"hidden",name:"product_type"},domProps:{value:t.data.default_input.product_type}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.token}}),t._v(" "),a("div",{staticClass:"text-right"},[t.followUp?a("button",{class:t.btnTrans.print.class+" btn-lg tw-w-25",attrs:{type:"submit"}},[a("i",{class:t.btnTrans.print.icon}),t._v("\n                                "+t._s(t.btnTrans.print.text)+"\n                            ")]):t._e()]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.html.tab1)}})])])]),t._v(" "),a("div",{staticClass:"tab-pane ",attrs:{role:"tabpanel",id:"tab2"}},[a("div",{staticClass:"panel-body"},[a("div",{domProps:{innerHTML:t._s(t.html.tab2)}})])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ibox float-e-margins mb-2"},[e("div",{staticClass:"col-12 text-right mt-1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-2 pl-0 text-sm-right"},[a("dt",[t._v("ประมาณการผลิต:")])])}],!1,null,null,null).exports},64646:(t,e,a)=>{var s=a(25791);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(45346).Z)("32950650",s,!0,{})}}]);