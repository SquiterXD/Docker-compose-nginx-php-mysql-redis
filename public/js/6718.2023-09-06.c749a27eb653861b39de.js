(self.webpackChunk=self.webpackChunk||[]).push([[6718],{70445:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(23645),l=a.n(i)()((function(e){return e[1]}));l.push([e.id,".el-select-dropdown{z-index:9999!important}",""]);const s=l},56718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var i=a(87757),l=a.n(i);function s(e,t,a,i,l,s,o){try{var n=e[s](o),d=n.value}catch(e){return void a(e)}n.done?t(d):Promise.resolve(d).then(i,l)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(i,l){var o=e.apply(t,a);function n(e){s(o,i,l,n,d,"next",e)}function d(e){s(o,i,l,n,d,"throw",e)}n(void 0)}))}}const n={props:["items","oprns","machineTypes","defaultValue","users","routings","wipSteps","user","ingredientSteps","formulaTypes","wipStepHeaders","periodYears"],data:function(){return{default_inventory_item_id:this.defaultValue.inventory_item_id?this.defaultValue.inventory_item_id:"",default_item_desc:"",default_folmula_type:this.defaultValue.folmula_type?Number(this.defaultValue.folmula_type):"",default_qty:this.defaultValue.qty?this.numberWithCommas(this.defaultValue.qty):"",default_uom:this.defaultValue.uom?this.defaultValue.uom:"",default_version:this.defaultValue.version?this.defaultValue.version:"",default_wip_step:this.defaultValue.wip?Number(this.defaultValue.wip):"",default_machine:this.defaultValue.machine?Number(this.defaultValue.machine):"",default_period_year:this.defaultValue.period_year?this.defaultValue.period_year:"",inventory_item_id:this.defaultValue.inventory_item_id?this.defaultValue.inventory_item_id:"",item_desc:"",folmula_type:this.defaultValue.folmula_type?Number(this.defaultValue.folmula_type):"",qty:this.defaultValue.qty?this.numberWithCommas(this.defaultValue.qty):"",uom:this.defaultValue.uom?this.defaultValue.uom:"",version:this.defaultValue.version?this.defaultValue.version:"",wip_step:this.defaultValue.wip?Number(this.defaultValue.wip):"",machine:this.defaultValue.machine?Number(this.defaultValue.machine):"",period_year:"",organization_code:this.defaultValue.organization?this.defaultValue.organization.organization_code:"",machineDisabled:!0,loadingWipStep:!this.defaultValue||!this.defaultValue.wip,loadingMachine:!this.defaultValue||!this.defaultValue.machine,machineLists:[],loadingBudgetYear:!0,wip_step_desc:this.defaultValue.wip_step_desc?this.defaultValue.wip_step_desc:"",uom_desc:this.defaultValue.uom_desc?this.defaultValue.uom_desc:"",folmulaTypeOptions:[{value:"สูตรใช้จริง",label:"สูตรใช้จริง"},{value:"สูตรมาตรฐาน",label:"สูตรมาตรฐาน"},{value:"สูตรทดลอง",label:"สูตรทดลอง"}],disableInput:{wip_step:!1,machine:!1}}},watch:{folmula_type:function(e){this.disableInputFunc()}},mounted:function(){var e=this;this.default_inventory_item_id&&(this.selectedData=this.items.find((function(t){t.inventory_item_id==e.default_inventory_item_id&&(e.default_item_desc=t.item_desc,e.item_desc=t.item_desc)}))),setTimeout((function(){$(e.$refs.inventory_item_id.$el).find("input").val($(e.$refs.inventory_item_id.$el).find("input").val().split(" : ")[0])}),100),this.defaultValue.folmula_type&&(this.selectedData=this.formulaTypes.find((function(t){return t.lookup_code==e.folmula_type})),"สูตรใช้จริง"==this.selectedData.description&&(this.machineDisabled=!1),"สูตรมาตรฐาน"==this.selectedData.description&&(this.loadingBudgetYear=!1,this.period_year=this.defaultValue.creation_year)),1==this.folmula_type&&("MG6"!=this.org_code&&"MPG"!=this.org_code&&"M05"!=this.org_code||(this.loadingWipStep=!1)),this.wip_step&&this.getMachineType(),this.getVersion()},methods:{numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},handleItemChange:function(){var e=this;setTimeout((function(){$(e.$refs.inventory_item_id.$el).find("input").val($(e.$refs.inventory_item_id.$el).find("input").val().split(" : ")[0])}),100)},getItemDesc:function(){var e=this;this.inventory_item_id?this.selectedData=this.items.find((function(t){t.inventory_item_id==e.inventory_item_id&&(e.item_desc=t.item_desc)})):this.item_desc=""},getVersion:function(){var e=this;return o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.version="",axios.get("/pm/ajax/get-version",{params:{inventory_item_id:e.inventory_item_id,folmula_type:e.folmula_type,wip_step:e.wip_step,machine:e.machine,period_year:e.period_year}}).then((function(t){e.inventory_item_id||e.folmula_type||e.defaultValue.wip||e.machine?e.version=t.data:e.version=""})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})))()},getMachineType:function(e){var t=this;return o(l().mark((function a(){return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.wip_step||(t.machine=""),t.selectedData=t.formulaTypes.find((function(e){return e.lookup_code==t.folmula_type})),"สูตรใช้จริง"==t.selectedData.description?axios.get("/pm/ajax/get-machine-type",{params:{wip_step:t.wip_step,org_code:t.organization_code,query:e}}).then((function(e){t.machineLists=e.data,t.loadingMachine=!1})).catch((function(e){console.log(e)})):(t.loadingMachine=!0,t.machine="");case 3:case"end":return a.stop()}}),a)})))()},disableInputFunc:function(){var e=this;return o(l().mark((function t(){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:1==(a=e).folmula_type?(a.disableInput.wip_step=!1,a.disableInput.machine=!1,a.getWipStep()):(a.disableInput.wip_step=!0,a.disableInput.machine=!0,a.wip_step="",a.machine="");case 2:case"end":return t.stop()}}),t)})))()},getWipStep:function(){var e=this;return o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loadingWipStep=!0,1==e.folmula_type?"MG6"!=e.organization_code&&"MPG"!=e.organization_code&&"M05"!=e.organization_code||(e.loadingWipStep=!1):e.wip_step="",e.folmula_type&&(e.selectedData=e.formulaTypes.find((function(t){return t.lookup_code==e.folmula_type})),"สูตรมาตรฐาน"==e.selectedData.description?(e.loadingBudgetYear=!1,e.period_year=e.defaultValue.creation_year):(e.loadingBudgetYear=!0,e.period_year="",e.budget_start_date="",e.budget_end_date="")),e.getMachineType();case 4:case"end":return t.stop()}}),t)})))()},checkInvoiceFlag:function(){var e=this;return o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getVersion();case 1:case"end":return t.stop()}}),t)})))()}}};a(47232);const d=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("h5",[e._v("ต้นแบบ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("label",[e._v(" รหัสสินค้า ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:"",placeholder:""},model:{value:e.default_inventory_item_id,callback:function(t){e.default_inventory_item_id=t},expression:"default_inventory_item_id"}},e._l(e.items,(function(e){return a("el-option",{key:e.inventory_item_id,attrs:{label:e.item_number,value:e.inventory_item_id}})})),1)],1),e._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{attrs:{disabled:""},model:{value:e.default_item_desc,callback:function(t){e.default_item_desc=t},expression:"default_item_desc"}})],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[e._v(" ประเภทสูตร ")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:"",placeholder:""},model:{value:e.default_folmula_type,callback:function(t){e.default_folmula_type=t},expression:"default_folmula_type"}},e._l(e.formulaTypes,(function(e){return a("el-option",{key:e.lookup_code,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("label",[e._v(" จำนวนผลผลิต ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("el-input",{attrs:{disabled:""},model:{value:e.default_qty,callback:function(t){e.default_qty=t},expression:"default_qty"}})],1),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-input",{attrs:{disabled:""},model:{value:e.uom_desc,callback:function(t){e.uom_desc=t},expression:"uom_desc"}})],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[e._v(" Version ")]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.default_version,callback:function(t){e.default_version=t},expression:"default_version"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("label",[e._v(" ขั้นตอนการทำงาน ")]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.wip_step_desc,callback:function(t){e.wip_step_desc=t},expression:"wip_step_desc"}})],1),e._v(" "),a("div",{staticClass:"col-md-4"},[a("label",[e._v(" ปีงบประมาณ ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"default_period_year",autocomplete:"off"},domProps:{value:e.default_period_year}}),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:"",placeholder:""},model:{value:e.default_period_year,callback:function(t){e.default_period_year=t},expression:"default_period_year"}},e._l(e.periodYears,(function(e,t){return a("el-option",{key:t,attrs:{label:e.year_thai,value:e.year_thai}})})),1)],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[e._v(" ประเภทเครื่องจักร ")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{disabled:e.disableInput.default_machine,filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:"",placeholder:""},model:{value:e.default_machine,callback:function(t){e.default_machine=t},expression:"default_machine"}},e._l(e.machineTypes,(function(e){return a("el-option",{key:e.lookup_code,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)])]),e._v(" "),a("hr"),e._v(" "),a("div",[a("h5",[e._v("คัดลอก")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("label",[e._v(" รหัสสินค้า ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("input",{attrs:{type:"hidden",name:"inventory_item_id",autocomplete:"off"},domProps:{value:e.inventory_item_id}}),e._v(" "),a("el-select",{ref:"inventory_item_id",staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:""},on:{change:function(t){e.getItemDesc(),e.getVersion(),e.handleItemChange()}},model:{value:e.inventory_item_id,callback:function(t){e.inventory_item_id=t},expression:"inventory_item_id"}},e._l(e.items,(function(e){return a("el-option",{key:e.inventory_item_id,attrs:{label:e.item_number+" : "+e.item_desc,value:e.inventory_item_id}})})),1)],1),e._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{attrs:{disabled:""},model:{value:e.item_desc,callback:function(t){e.item_desc=t},expression:"item_desc"}})],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[e._v(" ประเภทสูตร ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"folmula_type",autocomplete:"off"},domProps:{value:e.folmula_type}}),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",disabled:1==e.defaultValue.folmula_type||"MG6"==this.organization_code||"M05"==this.organization_code,"reserve-keyword":"",clearable:"",placeholder:""},on:{change:function(t){e.getVersion(),e.getWipStep()}},model:{value:e.folmula_type,callback:function(t){e.folmula_type=t},expression:"folmula_type"}},e._l(e.formulaTypes,(function(e){return a("el-option",{key:e.lookup_code,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("label",[e._v(" จำนวนผลผลิต ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("el-input",{attrs:{disabled:""},model:{value:e.qty,callback:function(t){e.qty=t},expression:"qty"}})],1),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-input",{attrs:{disabled:""},model:{value:e.uom_desc,callback:function(t){e.uom_desc=t},expression:"uom_desc"}})],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[e._v(" Version ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"version",autocomplete:"off"},domProps:{value:e.version}}),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-1"}),e._v(" "),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("label",[e._v(" ขั้นตอนการทำงาน ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"wip_step",autocomplete:"off"},domProps:{value:e.wip_step}}),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.wip_step_desc,callback:function(t){e.wip_step_desc=t},expression:"wip_step_desc"}})],1),e._v(" "),a("div",{staticClass:"col-md-4"},[a("label",[e._v(" ปีงบประมาณ ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"period_year",autocomplete:"off"},domProps:{value:e.period_year}}),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:e.loadingBudgetYear,placeholder:""},on:{change:function(t){return e.checkInvoiceFlag()}},model:{value:e.period_year,callback:function(t){e.period_year=t},expression:"period_year"}},e._l(e.periodYears,(function(e,t){return a("el-option",{key:t,attrs:{label:e.year_thai,value:e.year_thai}})})),1)],1)])]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("input",{attrs:{type:"hidden",name:"machine",autocomplete:"off"},domProps:{value:e.machine}}),e._v(" "),a("label",[e._v(" ประเภทเครื่องจักร ")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"machine",autocomplete:"off"},domProps:{value:e.machine}}),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:e.loadingMachine||e.disableInput.machine||"M06"==e.organization_code,placeholder:""},on:{change:function(t){return e.getVersion()}},model:{value:e.machine,callback:function(t){e.machine=t},expression:"machine"}},e._l(e.machineLists,(function(e){return a("el-option",{key:e.lookup_code,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)])])])}),[],!1,null,null,null).exports},47232:(e,t,a)=>{var i=a(70445);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("f93995da",i,!0,{})}}]);