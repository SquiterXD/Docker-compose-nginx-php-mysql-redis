(self.webpackChunk=self.webpackChunk||[]).push([[5690],{5690:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(87757),s=a.n(r),o=a(30381),c=a.n(o);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a,r,s,o,c){try{var n=e[o](c),l=n.value}catch(e){return void a(e)}n.done?t(l):Promise.resolve(l).then(r,s)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var o=e.apply(t,a);function c(e){i(o,r,s,c,n,"next",e)}function n(e){i(o,r,s,c,n,"throw",e)}c(void 0)}))}}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f={props:["claimStatusList","headersList","customerList","btnTrans"],mounted:function(){this.datatable=$("#datatable").dataTable({searching:!1,ordering:!1,responsive:!0})},data:function(){var e;return m(e={form_search:{customerNumber:"",customerCompany:"",claimNumber:"",claimDate:"",statusClaim:"",headerList:[]},lineList:[],loading:!1,table:!1,disenable:{checkStatusDisenable:"",checkStatusEnable:""}},"loading",!1),m(e,"customersList",this.customerList),m(e,"datatable",""),e},methods:{getCustomerCompany:function(e){var t=this;this.customerList.forEach((function(a){a.customer_id==e&&(t.form_search.customerCompany=a.customer_id?a.customer_id:""),e||(t.form_search.customerCompany="")}))},getSearch:function(){var e=this;return u(s().mark((function t(){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).datatable.fnDestroy(),e.loading=!0,t.next=5,axios.post("ajax/approval-claim/get-search",l({},a.form_search)).then((function(t){e.lineList=t.data.headerList}));case 5:a.datatable=$("#datatable").dataTable({searching:!1,ordering:!1,responsive:!0}),a.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},getDateFormatted:function(e){return c()(e).format("DD/MM/YYYY")},onDateFromWasSelected:function(e){var t=this;return u(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.form_search.claimDate=t.getDateFormatted(e);case 2:case"end":return a.stop()}}),a)})))()},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){t.loading=!1,t.customersList=t.customerList.filter((function(t){return t.customer_name.toLowerCase().indexOf(e.toLowerCase())>-1||t.customer_number.toLowerCase().indexOf(e.toLowerCase())>-1}))}),200)):this.customersList=this.customerList}}};const b=(0,a(51900).Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"row col-md-12"},[a("div",{staticClass:"col-xl-6 m-auto"},[a("h3",{staticClass:"black mb-3"},[e._v("ค้นหารายการที่ต้องการ")]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[e._v("รหัสร้านค้า")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{placeholder:"รหัสร้านค้า",clearable:"",filterable:"",remote:"","remote-method":e.remoteMethod,loading:e.loading},on:{change:function(t){return e.getCustomerCompany(e.form_search.customerNumber)}},model:{value:e.form_search.customerNumber,callback:function(t){e.$set(e.form_search,"customerNumber",t)},expression:"form_search.customerNumber"}},e._l(e.customersList,(function(t,r){return a("el-option",{key:r,staticStyle:{height:"60px"},attrs:{label:t.customer_number,value:t.customer_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.customer_number))]),a("br"),e._v(" "),a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"14px"}},[e._v(e._s(t.customer_name))])])})),1)],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[e._v("ชื่อร้านค้า")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{placeholder:"ชื่อร้านค้า",disabled:""},model:{value:e.form_search.customerCompany,callback:function(t){e.$set(e.form_search,"customerCompany",t)},expression:"form_search.customerCompany"}},e._l(e.customerList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.customer_name,value:e.customer_id}})})),1)],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[e._v("เลขที่ใบแจ้งเคลมสินค้า")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{placeholder:"เลขที่ใบแจ้งเคลมสินค้า",clearable:"",filterable:""},model:{value:e.form_search.claimNumber,callback:function(t){e.$set(e.form_search,"claimNumber",t)},expression:"form_search.claimNumber"}},e._l(e.headersList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.claim_number,value:e.claim_number}})})),1)],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[e._v("วันที่แจ้งเคลมสินค้า")]),e._v(" "),a("datepicker-th",{staticClass:"w-100 form-control md:tw-mb-0 tw-mb-2",attrs:{placeholder:"วันที่แจ้งเคลมสินค้า",format:"DD/MM/YYYY"},on:{dateWasSelected:e.onDateFromWasSelected},model:{value:e.form_search.claimDate,callback:function(t){e.$set(e.form_search,"claimDate",t)},expression:"form_search.claimDate"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[e._v("สถานะ")]),e._v(" "),a("el-select",{staticClass:"w-100",attrs:{placeholder:"สถานะ",clearable:""},model:{value:e.form_search.statusClaim,callback:function(t){e.$set(e.form_search,"statusClaim",t)},expression:"form_search.statusClaim"}},e._l(e.claimStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning,value:e.lookup_code}})})),1)],1),e._v(" "),a("div",{staticClass:"form-buttons no-border",staticStyle:{"text-align":"center"}},[a("button",{class:e.btnTrans.search.class,staticStyle:{height:"52px",width:"222px"},attrs:{type:"button"},on:{click:function(t){return e.getSearch()}}},[a("i",{class:e.btnTrans.search.icon}),e._v("\n                "+e._s(e.btnTrans.search.text)+"\n            ")])])]),e._v(" "),a("approval-claim-table",{attrs:{lineList:e.lineList,checkStatus:e.disenable.checkStatusDisenable,checkStatusEnable:e.disenable.checkStatusEnable,btnTrans:e.btnTrans}})],1)}),[],!1,null,null,null).exports}}]);