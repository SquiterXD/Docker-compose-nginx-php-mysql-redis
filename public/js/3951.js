(self.webpackChunk=self.webpackChunk||[]).push([[3951],{33951:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>c});var t=i(87757),n=i.n(t);function l(e,a,i,t,n,l,d){try{var s=e[l](d),c=s.value}catch(e){return void i(e)}s.done?a(c):Promise.resolve(c).then(t,n)}function d(e){return function(){var a=this,i=arguments;return new Promise((function(t,n){var d=e.apply(a,i);function s(e){l(d,t,n,s,c,"next",e)}function c(e){l(d,t,n,s,c,"throw",e)}s(void 0)}))}}const s={props:["medicinalLeafTypesH","transDate","transBtn","currentDateTH"],data:function(){return{medicinalLeafH:"",medicinalLeafHOld:"",medicinalLeafL:"",medicinalLeafLOld:"",medicinalItem:"",medicinalLeafTypesL:[],medicinalLeafItems:[],historyList:[],historyGroupByList:[],loading:{medicinalLeafL:!1,medicinalItem:!1,table:!1},isDisabled:{medicinalLeafL:!0,medicinalItem:!0},isValidate:{medicinalLeafH:!1,medicinalLeafL:!1,medicinalItem:!1},lastNumberSeq:""}},mounted:function(){},methods:{getMedicinalLeafTypesL:function(e){var a=this;return d(n().mark((function i(){var t;return n().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a.loading.medicinalLeafL=!0,a.loading.medicinalItem=!0,t={medicinalLeafTypesH:e},i.next=5,axios.get("/pd/ajax/history-instead-grades/get-medicinal-leaf-types-l",{params:t}).then((function(i){a.medicinalLeafTypesL=i.data.medicinalLeafTypesL,a.medicinalLeafHOld!=e&&(a.medicinalLeafL="",a.medicinalItem=""),0!=a.medicinalLeafTypesL.length?(a.medicinalLeafHOld=e,a.medicinalLeafL=a.medicinalLeafL?a.medicinalLeafL:"",a.loading.medicinalLeafL=!1,a.isDisabled.medicinalLeafL=!1,a.medicinalItem=a.medicinalItem&&a.medicinalLeafL==a.medicinalLeafLOld?a.medicinalItem:"",a.loading.medicinalItem=!1,a.isDisabled.medicinalItem=!a.medicinalItem,a.$children[3].isDisabledBtnAddLine=!0,a.$children[3].isDisabledBtnSave=!0):(a.medicinalLeafL="",a.loading.medicinalLeafL=!1,a.isDisabled.medicinalLeafL=!0,a.medicinalItem="",a.loading.medicinalItem=!1,a.isDisabled.medicinalItem=!0,a.$children[3].isDisabledBtnAddLine=!0,a.$children[3].isDisabledBtnSave=!0)}));case 5:return i.abrupt("return",i.sent);case 6:case"end":return i.stop()}}),i)})))()},getMedicinalLeafItemV:function(e,a){var i=this;return d(n().mark((function t(){var l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.loading.medicinalItem=!0,l={medicinalLeafTypesH:e,medicinalLeafTypesL:a},t.next=4,axios.get("/pd/ajax/history-instead-grades/get-medicinal-leaf-item-v",{params:l}).then((function(e){i.medicinalLeafItems=e.data.medicinalLeafItemV,0!=i.medicinalLeafItems.length?(i.medicinalItem=i.medicinalItem&&i.medicinalLeafL==i.medicinalLeafLOld?i.medicinalItem:"",i.loading.medicinalItem=!1,i.isDisabled.medicinalItem=!1,i.medicinalLeafLOld=i.medicinalLeafL,i.$children[3].isDisabledBtnAddLine=!0,i.$children[3].isDisabledBtnSave=!0):(i.medicinalItem="",i.loading.medicinalItem=!1,i.isDisabled.medicinalItem=!0,i.$children[3].isDisabledBtnAddLine=!0,i.$children[3].isDisabledBtnSave=!0)}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()},getMedicinalItem:function(e,a,i){var t=this;return d(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""==i&&(t.$children[3].isDisabledBtnAddLine=!0,t.$children[3].isDisabledBtnSave=!0,t.historyList=[]);case 1:case"end":return e.stop()}}),e)})))()},search:function(e,a,i){var t=this;return d(n().mark((function l(){var d,s;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((d=t).medicinalLeafH){n.next=6;break}return d.isValidate.medicinalLeafH=!0,n.abrupt("return");case 6:d.isValidate.medicinalLeafH=!1;case 7:if(d.medicinalLeafL||0!=d.isDisabled.medicinalLeafL){n.next=12;break}return d.isValidate.medicinalLeafL=!0,n.abrupt("return");case 12:d.isValidate.medicinalLeafL=!1;case 13:if(d.medicinalItem||0!=d.isDisabled.medicinalItem){n.next=18;break}return d.isValidate.medicinalItem=!0,n.abrupt("return");case 18:d.isValidate.medicinalItem=!1;case 19:if(1!=t.isValidate.medicinalLeafH||1!=t.isValidate.medicinalLeafL){n.next=21;break}return n.abrupt("return");case 21:return s={medicinalLeafH:e,medicinalLeafL:a,medicinalItem:i},t.medicinalItem=t.medicinalItem?t.medicinalItem:"",t.loading.table=!0,n.next=26,axios.get("/pd/ajax/history-instead-grades/search",{params:s}).then((function(e){t.historyList=e.data.historyList,t.historyGroupByList=e.data.historyGroupByList,t.lastNumberSeq=e.data.lastNumberSeq,t.loading.table=!1,t.$children[3].isDisabledBtnAddLine=!1,t.$children[3].isDisabledBtnSave=!1}));case 26:case"end":return n.stop()}}),l)})))()}}};const c=(0,i(51900).Z)(s,(function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",[i("div",{staticClass:"ibox"},[i("div",{staticClass:"ibox-content"},[i("div",{staticClass:"text-right"},[i("div",{staticClass:"text-right",staticStyle:{"padding-top":"5px"}},[i("button",{staticClass:"btn btn-light",on:{click:function(a){return a.preventDefault(),e.search(e.medicinalLeafH,e.medicinalLeafL,e.medicinalItem)}}},[i("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),e._v(" ค้นหา \n                    ")]),e._v(" "),i("a",{staticClass:"btn btn-danger",attrs:{type:"button",href:"/pd/history-instead-grades"}},[e._v("\n                        ล้างค่า\n                    ")])])]),e._v(" "),i("div",{staticClass:"row",staticStyle:{"padding-top":"20px"}},[i("div",{staticClass:"col-md-4"},[i("label",[e._v("ประเภทใบยา")]),i("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),i("el-select",{staticClass:"w-100",attrs:{placeholder:"เลือกประเภทใบยา",clearable:"",filterable:"","reserve-keyword":""},on:{change:function(a){return e.getMedicinalLeafTypesL(e.medicinalLeafH)}},model:{value:e.medicinalLeafH,callback:function(a){e.medicinalLeafH=a},expression:"medicinalLeafH"}},e._l(e.medicinalLeafTypesH,(function(e,a){return i("el-option",{key:a,attrs:{label:e.category_code_1+" : "+e.category_desc_1,value:e.category_code_1+"."+e.category_desc_1}})})),1),e._v(" "),this.isValidate.medicinalLeafH?i("div",[i("span",{staticClass:"form-text m-b-none text-danger"},[e._v("\n                            "+e._s("กรุณาเลือกประเภทใบยา")+"\n                        ")])]):e._e()],1),e._v(" "),i("div",{staticClass:"col-md-4"},[i("label",[e._v("ชนิดใบยา")]),i("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.medicinalLeafL,expression:"loading.medicinalLeafL"}],staticClass:"w-100",attrs:{placeholder:"เลือกชนิดใบยา",clearable:"",filterable:"","reserve-keyword":"",disabled:e.isDisabled.medicinalLeafL},on:{change:function(a){return e.getMedicinalLeafItemV(e.medicinalLeafH,e.medicinalLeafL)}},model:{value:e.medicinalLeafL,callback:function(a){e.medicinalLeafL=a},expression:"medicinalLeafL"}},e._l(e.medicinalLeafTypesL,(function(e,a){return i("el-option",{key:a,attrs:{label:e.category_code_2+" : "+e.category_desc_2,value:e.category_code_2+"."+e.category_desc_2}})})),1),e._v(" "),this.isValidate.medicinalLeafL?i("div",[i("span",{staticClass:"form-text m-b-none text-danger"},[e._v("\n                            "+e._s("กรุณาเลือกชนิดใบยา")+"\n                        ")])]):e._e()],1),e._v(" "),i("div",{staticClass:"col-md-4"},[i("label",[e._v("กลุ่มใบยา")]),i("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.medicinalItem,expression:"loading.medicinalItem"}],staticClass:"w-100",attrs:{placeholder:"เลือกกลุ่มใบยา",clearable:"",filterable:"","reserve-keyword":"",disabled:e.isDisabled.medicinalItem},on:{change:function(a){return e.getMedicinalItem(e.medicinalLeafH,e.medicinalLeafL,e.medicinalItem)}},model:{value:e.medicinalItem,callback:function(a){e.medicinalItem=a},expression:"medicinalItem"}},e._l(e.medicinalLeafItems,(function(e,a){return i("el-option",{key:a,attrs:{label:e.medicinal_leaf_group,value:e.medicinal_leaf_group}})})),1),e._v(" "),this.isValidate.medicinalItem?i("div",[i("span",{staticClass:"form-text m-b-none text-danger"},[e._v("\n                            "+e._s("กรุณาเลือกกลุ่มใบยา")+"\n                        ")])]):e._e()],1)])])]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.table,expression:"loading.table"}]},[i("history-instead-grades-table",{attrs:{transDate:e.transDate,historyList:e.historyList,transBtn:e.transBtn,lastNumberSeq:e.lastNumberSeq,currentDateTH:e.currentDateTH,historyGroupByList:e.historyGroupByList}})],1)])}),[],!1,null,null,null).exports}}]);