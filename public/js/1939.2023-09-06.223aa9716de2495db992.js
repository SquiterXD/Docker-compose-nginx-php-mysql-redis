(self.webpackChunk=self.webpackChunk||[]).push([[1939],{41939:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var s=a(87757),o=a.n(s);function i(t,e,a,s,o,i,n){try{var c=t[i](n),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(s,o)}const n={props:["checkPoints","workList","btnTrans"],data:function(){return{location_desc:this.checkPoints?this.checkPoints[0].location_desc:"",locator_desc:this.checkPoints?this.checkPoints[0].locator_desc:"",group_code:this.checkPoints?this.checkPoints[0].qm_group:"",enable_flag:"Y"==this.checkPoints[0].enabled_flag,filesUploadList:[],organization_id:this.checkPoints?this.checkPoints[0].organization_id:"",subinventory_code:this.checkPoints?this.checkPoints[0].subinventory_code:"",warehouse_code:this.checkPoints?this.checkPoints[0].building_code:"",location_code:this.checkPoints?this.checkPoints[0].location_code:"",limitImage:this.checkPoints?this.checkPoints[0].limitImage:0,validate:{location_desc:!1,locator_desc:!1,group_code:!1}}},mounted:function(){},methods:{handleRemove:function(t,e){this.filesUploadList.splice(t,1)},handlePreview:function(t){},handleExceed:function(t,e){swal({title:"คำเตือน !",text:"ไม่สามารถอัปโหลดรูปภาพเนื่องจากเกินจำนวนของรูปภาพสูงสุดของรูปภาพ",type:"warning",showConfirmButton:!0})},beforeRemove:function(t,e){return this.$confirm("ยกเลิกการอัปโหลดไฟล์รูปภาพ ".concat(t.name," ใช่หรือไม่ ?"))},onChange:function(t,e){this.filesUploadList=e},save:function(){var t,e=this;return(t=o().mark((function t(){var a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e,s=new FormData,a.location_desc){t.next=7;break}return a.validate.location_desc=!0,t.abrupt("return");case 7:a.validate.location_desc=!1;case 8:if(a.locator_desc){t.next=13;break}return a.validate.locator_desc=!0,t.abrupt("return");case 13:a.validate.locator_desc=!1;case 14:if(a.group_code){t.next=19;break}return a.validate.group_code=!0,t.abrupt("return");case 19:a.validate.group_code=!1;case 20:return s.append("organization_id",a.organization_id),s.append("subinventory_code",a.subinventory_code),s.append("warehouse_code",a.warehouse_code),s.append("location_code",a.location_code),s.append("location_desc",a.location_desc),s.append("locator_desc",a.locator_desc),s.append("group_code",a.group_code),s.append("enable_flag",a.enable_flag),a.filesUploadList.forEach((function(t,e){s.append("files[]",a.filesUploadList[e].raw)})),t.abrupt("return",axios.post("/qm/settings/check-points-tobacco-leaf/update",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){"SUCCESS"==t.data.status?(swal({title:"Success !",text:"ทำการเปลี่ยนข้อมูลเรียบร้อยแล้ว",type:"success",showConfirmButton:!0}),setTimeout((function(){window.location.href="/qm/settings/check-points-tobacco-leaf"}),3e3)):swal({title:"Error !",text:t.data.err_msg,type:"error",showConfirmButton:!0})})));case 30:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,o){var n=t.apply(e,a);function c(t){i(n,s,o,c,l,"next",t)}function l(t){i(n,s,o,c,l,"throw",t)}c(void 0)}))})()}}};const c=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("ชื่อจุดตรวจสอบ")]),a("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อจุดตรวจสอบ",disabled:!0},model:{value:t.location_desc,callback:function(e){t.location_desc=e},expression:"location_desc"}}),t._v(" "),this.validate.location_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณากรอก ชื่อจุดตรวจสอบ")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("รายละเอียดจุดตรวจสอบ")]),t._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อจุดตรวจสอบ"},model:{value:t.locator_desc,callback:function(e){t.locator_desc=e},expression:"locator_desc"}}),t._v(" "),this.validate.locator_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณากรอก รายละเอียดจุดตรวจสอบ")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("กลุ่มงาน")]),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{clearable:"",filterable:"",placeholder:"เลือกกลุ่มงาน"},model:{value:t.group_code,callback:function(e){t.group_code=e},expression:"group_code"}},t._l(t.workList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning,value:t.meaning}})})),1),t._v(" "),this.validate.group_code?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณาเลือก กลุ่มงาน")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("สถานะการใช้งาน")]),t._v(" "),a("el-checkbox",{staticClass:"w-100",model:{value:t.enable_flag,callback:function(e){t.enable_flag=e},expression:"enable_flag"}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px","padding-bottom":"15px"}},[a("label",[t._v("รูปภาพประกอบ")]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{accept:"image/*",action:"http://web-service.test/qm/settings/check-points-tobacco-leaf/update","on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"auto-upload":!1,"on-change":t.onChange,limit:t.limitImage,"on-exceed":t.handleExceed,"file-list":t.filesUploadList,multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("เพิ่มรูปภาพ")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("สามารถเพิ่มได้อีก "+t._s(t.limitImage)+" รูป สูงสุดไม่เกิน 5 รูป")])],1)],1)])])]),t._v(" "),a("div",{staticClass:"col-12 mt-3"},[a("hr"),t._v(" "),a("div",{staticClass:"row clearfix m-t-lg text-right"},[a("div",{staticClass:"col-sm-12"},[a("button",{class:t.btnTrans.save.class,attrs:{type:"submit"},on:{click:t.save}},[a("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v("  \n                        "+t._s(t.btnTrans.save.text)+"\n                ")]),t._v(" "),a("a",{class:t.btnTrans.cancel.class,attrs:{href:"/qm/settings/check-points-tobacco-leaf",type:"button"}},[a("i",{class:t.btnTrans.cancel.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                    "+t._s(t.btnTrans.cancel.text)+"\n                ")])])])])])}),[],!1,null,null,null).exports}}]);