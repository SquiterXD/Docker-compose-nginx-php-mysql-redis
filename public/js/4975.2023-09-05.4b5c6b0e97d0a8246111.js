(self.webpackChunk=self.webpackChunk||[]).push([[4975],{47327:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var i=s(23645),a=s.n(i)()((function(t){return t[1]}));a.push([t.id,".error-message[data-v-41df1b5e]{display:flex;color:#ec4958;margin-top:5px}.error-message strong[data-v-41df1b5e]{margin-right:5px}",""]);const l=a},74975:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>_});var i=s(87757),a=s.n(i);function l(t,e,s,i,a,l,o){try{var r=t[l](o),n=r.value}catch(t){return void s(t)}r.done?e(n):Promise.resolve(n).then(i,a)}const o={props:["policyLists","defaultValue","urlSave","urlReset"],data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),isEdit:!!this.defaultValue,form:{policy_set_header_id:"",policy_set_description:"",asset_id:"",asset_name:""},rules:{policy_set_header_id:[{required:!0,message:"กรุณาระบุ กรมธรรม์",trigger:"blur"}],asset_id:[{required:!0,message:"กรุณาระบุ รหัสทรัพย์สิน",trigger:"blur"}]},assetList:[],assetDisable:!0}},mounted:function(){this.defaultValue&&(this.form.policy_set_header_id=this.defaultValue.policy_set_header_id,this.form.asset_id=Number(this.defaultValue.asset_id),this.getPolicyDetail(),this.getAssetList(this.form.asset_id))},methods:{getAssetList:function(t){var e,s=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.form.policy_set_header_id){e.next=6;break}return s.assetList=[],e.next=4,axios.get("/ir/ajax/rounding-asset/get-asset",{params:{query:t,policy_set_header_id:s.form.policy_set_header_id,asset_id:s.form.asset_id}}).then((function(t){s.assetDisable=!1,s.assetList=t.data}));case 4:e.next=9;break;case 6:s.assetList=[],s.form.asset_id="",s.assetDisable=!0;case 9:s.form.asset_id&&s.getAssetDetail();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,s=arguments;return new Promise((function(i,a){var o=e.apply(t,s);function r(t){l(o,i,a,r,n,"next",t)}function n(t){l(o,i,a,r,n,"throw",t)}r(void 0)}))})()},getPolicyDetail:function(){var t=this;if(this.form.policy_set_description="",this.form.policy_set_header_id){var e=this.policyLists.find((function(e){return e.policy_set_header_id==t.form.policy_set_header_id}));this.form.policy_set_description=e.policy_set_description}},getAssetDetail:function(){var t=this;if(this.form.asset_name="",console.log("getAssetDetail <--\x3e  ",this.form.asset_id),this.form.asset_id){console.log("getAssetDetail <--\x3e  ",this.assetList);var e=this.assetList.find((function(e){return e.asset_id==t.form.asset_id}));this.form.asset_name=e?e.description:""}},clickSave:function(){this.isEdit?this.clickUpdate():this.clickCreate()},clickCreate:function(){var t=this;this.$refs.save_data.validate((function(e){if(e){var s={form:t.form};axios.post("/ir/settings/rounding-asset",s).then((function(t){swal({title:"Success",text:"บันทึกข้อมูลเรียบร้อยแล้ว",type:"success",showConfirmButton:!0},(function(t){window.location.href="/ir/settings/rounding-asset"}))})).catch((function(t){swal({title:"Warning",text:"ไม่สามารถบันทึกข้อมูลได้ เนื่องจากมีข้อผิดพลาด",type:"warning",showCancelButton:!1})})).then((function(){t.loading=!1}))}}))},clickUpdate:function(){var t=this;this.$refs.save_data.validate((function(e){if(e){var s={form:t.form};axios.put(t.urlSave,s).then((function(t){swal({title:"Success",text:"บันทึกข้อมูลเรียบร้อยแล้ว",type:"success",showConfirmButton:!0},(function(t){window.location.href="/ir/settings/rounding-asset"}))})).catch((function(t){swal({title:"Warning",text:"ไม่สามารถบันทึกข้อมูลได้ เนื่องจากมีข้อผิดพลาด",type:"warning",showCancelButton:!1})})).then((function(){t.loading=!1}))}}))},clickCancel:function(){window.location.href="/ir/settings/rounding-asset"}}};var r=s(93379),n=s.n(r),c=s(47327),d={insert:"head",singleton:!1};n()(c.Z,d);c.Z.locals;const _=(0,s(51900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"submitForm"}},[s("el-form",{ref:"save_data",staticClass:"demo-dynamic form_table_line",attrs:{model:t.form,"label-width":"120px"}},[s("div",[s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-4 col-form-label lable_align"},[s("strong",[t._v("กรมธรรม์ชุดที่ (Policy No)"),s("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[s("el-form-item",{attrs:{prop:"policy_set_header_id",rules:t.rules.policy_set_header_id}},[s("input",{attrs:{type:"hidden",name:"policy_set_header_id"},domProps:{value:t.form.policy_set_header_id}}),t._v(" "),s("el-select",{attrs:{placeholder:"กรมธรรม์",remote:"",clearable:"",filterable:"",disabled:t.isEdit},on:{change:function(e){t.getPolicyDetail(),t.getAssetList()}},model:{value:t.form.policy_set_header_id,callback:function(e){t.$set(t.form,"policy_set_header_id",e)},expression:"form.policy_set_header_id"}},t._l(t.policyLists,(function(e,i){return s("el-option",{key:i,attrs:{label:e.policy_set_number,value:e.policy_set_header_id}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.policy_set_number))]),t._v(" "),s("span",{staticStyle:{float:"left"}},[t._v(" : "+t._s(e.policy_set_description))])])})),1)],1)],1)]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-4 col-form-label lable_align"},[s("strong",[t._v("คำอธิบายกรมธรรม์ชุดที่ (Policy Description)")])]),t._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[s("el-form-item",[s("el-input",{ref:"policy_set_description",attrs:{type:"text",name:"policy_set_description",placeholder:"คำอธิบายกรมธรรม์",autocomplete:"off",disabled:""},model:{value:t.form.policy_set_description,callback:function(e){t.$set(t.form,"policy_set_description",e)},expression:"form.policy_set_description"}})],1)],1)]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-4 col-form-label lable_align"},[s("strong",[t._v("รหัสทรัพย์สิน (Asset Number)"),s("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[s("el-form-item",{attrs:{prop:"asset_id",rules:t.rules.asset_id}},[s("input",{attrs:{type:"hidden",name:"asset_id"},domProps:{value:t.form.asset_id}}),t._v(" "),s("el-select",{attrs:{placeholder:"รหัสทรัพย์สิน",remote:"",clearable:"",filterable:"",disabled:t.assetDisable,"remote-method":t.getAssetList},on:{change:function(e){t.getAssetList(t.form.asset_id),t.getAssetDetail()}},model:{value:t.form.asset_id,callback:function(e){t.$set(t.form,"asset_id",e)},expression:"form.asset_id"}},t._l(t.assetList,(function(e,i){return s("el-option",{key:i,attrs:{label:e.asset_number,value:e.asset_id}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.asset_number))]),t._v(" "),s("span",{staticStyle:{float:"left"}},[t._v(" : "+t._s(e.description))])])})),1)],1)],1)]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-4 col-form-label lable_align"},[s("strong",[t._v("คำอธิบายรหัสทรัพย์สิน (Asset Description)")])]),t._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[s("el-form-item",[s("el-input",{ref:"asset_name",attrs:{type:"text",name:"asset_name",placeholder:"คำอธิบายรหัสทรัพย์สิน",autocomplete:"off",disabled:""},model:{value:t.form.asset_name,callback:function(e){t.$set(t.form,"asset_name",e)},expression:"form.asset_name"}})],1)],1)]),t._v(" "),s("div",{staticClass:"row mt-2"},[s("div",{staticClass:"col-12 text-right"},[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:t.clickSave}},[s("i",{staticClass:"fa fa-save"}),t._v(" บันทึก\n                    ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button"},on:{click:t.clickCancel}},[t._v("\n                        ยกเลิก\n                    ")])])])])])],1)}),[],!1,null,"41df1b5e",null).exports}}]);