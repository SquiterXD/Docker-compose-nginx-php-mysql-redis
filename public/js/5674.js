(self.webpackChunk=self.webpackChunk||[]).push([[5674],{25674:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var r=a(87757),o=a.n(r),n=a(30381),s=a.n(n);function i(t,e,a,r,o,n,s){try{var i=t[n](s),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,o)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){i(n,r,o,s,l,"next",t)}function l(t){i(n,r,o,s,l,"throw",t)}s(void 0)}))}}const u={props:["url","trans-date","trans-btn","module","url-ger-param","default-program-code"],data:function(){return{options:[],value:this.defaultProgramCode?this.defaultProgramCode:[],list:[],loading:!1,states:[],infos:[],programs:[],infoAttributes:[],date:{},functionName:"",reportType:"pdf",errorLists:[]}},mounted:function(){this.defaultProgramCode&&this.getInfos()},methods:{remoteMethod:function(t){var e=this;return l(o().mark((function a(){var r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={params:{module:[e.module],uQuery:t}},axios.get(e.urlGerParam,r).then((function(t){e.programs=t.data.programs,e.options=t.data.programs})).catch((function(t){}));case 2:case"end":return a.stop()}}),a)})))()},remote:function(t){var e=this;return l(o().mark((function a(){return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:""!==t?(e.loading=!0,setTimeout((function(){e.loading=!1,e.options=e.programs.filter((function(e){if(e.program_code)return e.program_code.toLowerCase().indexOf(t.toLowerCase())>-1}))}),200)):e.options=[];case 1:case"end":return a.stop()}}),a)})))()},getData:function(t){var e=this;return l(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:axios.get(e.url.getInfor).then((function(t){e.programs=t.data.programs})).then((function(){e.list=e.infos.map((function(t){return{value:"value:".concat(t.program_code),label:"label:".concat(t.program_code)}}))})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})))()},getInfos:function(){var t=this;return l(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.infoAttributes=[],t.functionName="",t.errorLists=[],axios.get(t.url.getInfoAttribute+"?program_code="+t.value).then((function(e){t.infoAttributes=e.data.reportInfor,t.functionName=e.data.functionName,t.programs=e.data.programs,t.options=e.data.programs})).then((function(){})).catch((function(t){}));case 4:case"end":return e.stop()}}),e)})))()},getYear:function(t,e){"month"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-datatime-format"])),"year"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-year-format"])),"date"==e.date_type&&(e.form_value=s()(t).add(-543,"years").format(this.transDate["js-format"]))},exportReport:function(){},checkForm:function(t){var e=this;if(this.errorLists=[],this.infoAttributes.forEach((function(t){if(1==t.required&null==t.form_value){var a="โปรดระบุ.  "+t.display_value;e.errorLists.push(a)}})),0==this.errorLists.length)return!0;t.preventDefault()},selectedList:function(t){return t.value},selectCheck:function(t,e){}}};const c=(0,a(51900).Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{staticClass:"col-11",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter a report ","remote-method":t.remoteMethod,clearable:""},on:{change:t.getInfos,input:function(e){return t.remoteMethod(" ")}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.program_code,attrs:{label:t.program_code+" "+t.description,value:t.program_code}})})),1),t._v(" "),a("form",{attrs:{action:t.url.getParam,method:"get",target:"_blank"},on:{submit:t.checkForm}},[a("hr",{staticClass:"m-3"}),t._v(" "),t.infoAttributes.length>0?a("div",{staticClass:"form-group"},[t._l(t.infoAttributes,(function(e,r){return a("div",{key:r},["text"==e.form_type?a("div",{staticClass:"row m-2"},[a("div",{staticClass:"m-1 col-3 text-right"},[a("div",[t._v("  "+t._s(e.display_value)+" "),"1"==e.required?a("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("input",{staticClass:"form-control w-100 ",attrs:{type:"text",name:e.attribute_name}})])]):t._e(),t._v(" "),"date"==e.form_type?a("div",{staticClass:"row m-2"},[a("div",{staticClass:"m-1 col-3 text-right"},[a("div",[t._v("\n                            "+t._s(e.display_value)+"  "),"1"==e.required?a("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("datepicker-th",{staticClass:"form-control col-lg-12",staticStyle:{width:"100%","border-radius":"3px"},attrs:{id:"input_date",pType:e.date_type,format:e.format_date},on:{dateWasSelected:function(a){for(var r=arguments.length,o=Array(r);r--;)o[r]=arguments[r];return t.getYear.apply(void 0,o.concat([e]))}},model:{value:e.attribute_name[e.id],callback:function(a){t.$set(e.attribute_name,e.id,a)},expression:"infoAttribute.attribute_name[infoAttribute.id]"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form_value,expression:"infoAttribute.form_value"}],attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value},on:{input:function(a){a.target.composing||t.$set(e,"form_value",a.target.value)}}})],1)]):t._e(),t._v(" "),"select"==e.form_type?a("div",{staticClass:"row m-2"},[a("div",{staticClass:"m-1 col-3 text-right"},[a("div",[t._v(t._s(e.display_value)+" "),"1"==e.required?a("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("el-select",{staticClass:"w-100 text-left",attrs:{filterable:"",clearable:"","popper-append-to-body":!1},on:{change:function(a){return t.selectCheck(e.attribute_3)}},model:{value:e.form_value,callback:function(a){t.$set(e,"form_value",a)},expression:"infoAttribute.form_value"}},[t._l(e.lists,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("input",{attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value}})],2)],1)]):t._e(),t._v(" "),"options"==e.form_type?a("div",{staticClass:"row m-2"},[a("div",{staticClass:"m-1 col-3 text-right"},[a("div",[t._v(t._s(e.display_value)+" "),"1"==e.required?a("span",{staticClass:"tw-text-red-400"},[t._v("* ")]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("el-select",{staticClass:"w-100 text-left",attrs:{filterable:"",clearable:"","popper-append-to-body":!1},model:{value:e.form_value,callback:function(a){t.$set(e,"form_value",a)},expression:"infoAttribute.form_value"}},[t._l(e.lists,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("input",{attrs:{type:"hidden",name:e.attribute_name},domProps:{value:e.form_value}})],2)],1)]):t._e()])})),t._v(" "),a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-12 text-center"},[t.errorLists.length>0?a("p"):t._e(),t._l(t.errorLists,(function(e,r){return a("div",{key:r,staticClass:"font-weight-bold text-danger"},[t._v("\n                            "+t._s(e)+"\n                        ")])})),t._v(" "),a("p")],2)]),t._v(" "),a("input",{attrs:{type:"hidden",name:"program_code"},domProps:{value:t.value}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"function_name"},domProps:{value:t.functionName}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"output"},domProps:{value:t.reportType}}),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{class:t.transBtn.printReport.class,attrs:{type:"submit"}},[a("i",{class:t.transBtn.printReport.icon}),t._v(" "+t._s(t.transBtn.printReport.text))])])],2):t._e()])],1)}),[],!1,null,null,null).exports}}]);