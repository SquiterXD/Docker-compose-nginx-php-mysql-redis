(self.webpackChunk=self.webpackChunk||[]).push([[7154],{24946:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,".sticky-col{position:sticky;background-color:#e7eaec;z-index:9999}.first-col{min-width:100px;left:0}.first-col,.second-col{width:150px;max-width:150px}.second-col{min-width:150px;left:116px}.th-col{width:250px;min-width:150px;max-width:250px;left:266px}.fo-col{left:416px}.fi-col,.fo-col{width:200px;min-width:150px;max-width:200px}.fi-col{left:566px}.t1-col{left:0}.t1-col,.t2-col{width:200px;min-width:150px;max-width:200px}.t2-col{left:566px}",""]);const s=i},46275:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,"div.el-dialog__body{padding:5px 50px;color:#000;font-size:15px}",""]);const s=i},79851:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}.ibox .label,.nav .label{font-size:12px}",""]);const s=i},8702:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});const n={props:["dateRangeDetail"],data:function(){return{}},mounted:function(){}};const i=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",[t._v(" "+t._s(t.dateRangeDetail)+" ")])])}),[],!1,null,null,null).exports},27225:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});const n={props:["total","unit"],data:function(){return{}}};const i=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"tw-font-bold"},[t._v(" \n        กำลังการผลิตรวมทั้งปักษ์ : "+t._s(t._f("number2Digit")(t.total))+" "+t._s(t.unit)+"\n    ")])])}),[],!1,null,null,null).exports},5717:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(80455);const i={components:{VueNumeric:a.n(n)()},props:["editFlag","line","lineMachineEdit"],data:function(){var t;return{oldEamMachine:null!==(t=this.line.machine_eamperformance)&&void 0!==t?t:0}},mounted:function(){},watch:{editFlag:function(t){0==t&&(this.line.machine_eamperformance=Number(this.oldEamMachine))}},methods:{changeEfficiencyMachineByLine:function(){var t=this,e=Number(t.line.machine_speed)*(Number(t.line.machine_eamperformance)/100);t.line.efficiency_machine_per_min=e,Vue.set(t.lineMachineEdit,t.line.machine_name,Number(t.line.machine_eamperformance))}}};const s=(0,a(51900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.editFlag?a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,min:0,max:100},on:{change:function(e){return t.changeEfficiencyMachineByLine()},blur:function(e){return t.changeEfficiencyMachineByLine()}},model:{value:t.line.machine_eamperformance,callback:function(e){t.$set(t.line,"machine_eamperformance",e)},expression:"line.machine_eamperformance"}}):a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,disabled:""},model:{value:t.line.machine_eamperformance,callback:function(e){t.$set(t.line,"machine_eamperformance",e)},expression:"line.machine_eamperformance"}})],1)}),[],!1,null,null,null).exports},97154:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>O});var n=a(87757),i=a.n(n),s=a(30381),r=a.n(s),c=a(23570),l=a.n(c),o=a(5717);function d(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}const u={props:["omSalesForecast","pSaleForecasts","versionLists","totalDayForOmSale","omMonth","url"],data:function(){return{forecast_qty:0,forecast_million_qty:0,loading:!1,saleForecasts:this.pSaleForecasts?this.pSaleForecasts:[],version_no:this.pSaleForecasts[0]?this.pSaleForecasts[0].version:0}},mounted:function(){},computed:{totalForecast:function(){var t=this,e=0,a=0;t.pSaleForecasts.length&&t.saleForecasts.filter((function(t){e+=Number(t.forecast_qty),a+=Number(t.forecast_million_qty)})),t.forecast_qty=e,t.forecast_million_qty=a}},watch:{totalForecast:function(t){return t}},methods:{openModal:function(){$("#modal-om-sales").modal("show")},changeVersion:function(){var t,e=this;return(t=i().mark((function t(){var a,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).loading=!0,n={version:a.version_no,budget_year:a.saleForecasts[0].budget_year,month_no:a.saleForecasts[0].month_no},t.next=5,axios.post(a.url.get_sales_forecast_version,{params:n}).then((function(t){a.loading=!1,console.log(t.data),"S"==t.data.status?(a.saleForecasts=[],a.saleForecasts=t.data.saleForecasts):swal({title:'<span class="mt-2"> มีข้อผิดพลาด </span>',text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0})}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){d(s,n,i,r,c,"next",t)}function c(t){d(s,n,i,r,c,"throw",t)}r(void 0)}))})()}}};a(5521);var m=a(51900);const h=(0,m.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{staticClass:"btn btn-info btn-md",staticStyle:{"padding-left":"7px"},on:{click:t.openModal}},[a("i",{staticClass:"fa fa-eye"}),t._v(" รายละเอียดประมาณการจำหน่าย\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-om-sales",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"980px"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-body text-left"},[t.pSaleForecasts.length<=0?[t._m(1)]:[a("div",{staticClass:"row col-12",staticStyle:{"font-size":"15px"}},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-4 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" เดือน : ")]),t._v(" "),a("span",[t._v(" "+t._s(t.omMonth)+" ")])]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2 text-left"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่ : ")]),t._v(" "),a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"ครั้งที่",size:"small","popper-append-to-body":!1},on:{change:t.changeVersion},model:{value:t.version_no,callback:function(e){t.version_no=e},expression:"version_no"}},t._l(t.versionLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.version,value:t.version}})})),1)],1),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-4 col-sm-6 col-xs-6 mt-2 text-left"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" จำนวนวันขาย : ")]),t._v(" "),a("span",[t._v("\n                                    "+t._s(t.totalDayForOmSale)+" วัน\n                                ")])]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-4 col-sm-6 col-xs-6 mt-2 text-left"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่อนุมัติ : ")]),t._v(" "),a("span",[t._v("\n                                    "+t._s(t.saleForecasts?t.saleForecasts[0].approve_date_format:"")+"\n                                ")])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed"}),t._v(" "),a("table",{staticClass:"table table-bordered"},[t._m(2),t._v(" "),a("tbody",[t.saleForecasts.length<=0?[t._m(3)]:[t._l(t.saleForecasts,(function(e,n){return a("tr",[a("td",{staticClass:"text-center"},[a("div",[t._v(" "+t._s(n+1)+" ")])]),t._v(" "),a("td",{staticClass:"text-left"},[a("div",[t._v(" "+t._s(e.item_code)+" ")])]),t._v(" "),a("td",{staticClass:"text-left"},[a("div",[t._v(" "+t._s(e.item_description)+" ")])]),t._v(" "),a("td",{staticClass:"text-right"},[a("div",[t._v("\n                                                "+t._s(t._f("number3Digit")(e.forecast_qty))+"\n                                            ")])]),t._v(" "),a("td",{staticClass:"text-right"},[a("div",[t._v("\n                                                "+t._s(t._f("number3Digit")(e.forecast_million_qty))+"\n                                            ")])])])})),t._v(" "),a("tr",[a("th",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("รวมประมาณจำหน่าย")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                            "+t._s(t._f("number3Digit")(t.forecast_qty))+"\n                                        ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                            "+t._s(t._f("number3Digit")(t.forecast_million_qty))+"\n                                        ")])])]],2)])]],2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"24px","font-weight":"400"}},[t._v("\n                        รายละเอียดประมาณการจำหน่าย\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 text-center"},[a("h2",[t._v(" ไม่พบข้อมูลประมาณการจำหน่าย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"3%"}},[a("div",[t._v(" ลำดับ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"8%"}},[a("div",[t._v(" รหัสบุหรี่ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"20%"}},[a("div",[t._v(" ตราบุหรี่ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" ประมาณการจำหน่าย"),a("br"),t._v("(พันมวน) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" ประมาณการจำหน่าย"),a("br"),t._v("(ล้านมวน) ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"5"}},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])])}],!1,null,null,null).exports;function p(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}const f={props:["index","attribute","header","machineGroups","machineDesc","dateFormat","listMachineLines","ppMonthly"],data:function(){return{loading:!1,valid:!0,machineLine:this.attribute,machineGroup:this.attribute.machine_group,machineDescription:this.attribute.machine_desc,enable:this.attribute.is_enable,inputDateFrom:"",inputDateTo:"",currentDate:"",biweeklyDateFrom:"",biweeklyDateTo:"",isDisableSelDate:!1,disable_flag:!1,errors:{machine_group:!1,machine_desc:!1},machineDescLists:[]}},mounted:function(){this.getDateByBiWeekly()},watch:{errors:{handler:function(t){t.machine_group?this.setError("machine_group"):this.resetError("machine_group"),t.machine_desc?this.setError("machine_desc"):this.resetError("machine_desc")},deep:!0}},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},selMachineGroup:function(){var t=this;t.machineLine.machine_group=t.machineGroup,t.machineDescription="",t.machineDescLists=t.machineDesc.filter((function(e){return e.machine_group==t.machineGroup}))},selMachineDesc:function(){var t=this;$("#machine-downtime-form");t.valid=!0;t.errors.machine_desc=!1,t.machineDescription&&t.inputDateFrom&&t.index>=1&&t.listMachineLines.filter((function(e,a){if(console.log(a,t.index),a!=t.index&&e.machine_desc==t.machineDescription){var n=r()(t.listMachineLines[t.index].start_date).format("YYYY-MM-DD");n=t.changeThToEn(n);var i=r()(t.listMachineLines[a].end_date).format("YYYY-MM-DD");n<=(i=t.changeThToEn(i))&&(t.inputDateFrom="",t.inputDateTo="")}})),t.valid&&(t.machineLine.machine_desc=t.machineDescription)},remove:function(t){this.$emit("removeRow",t)},dateWasSelectedFrom:function(t){var e=this,a=$("#machine-downtime-form");e.errors.start_date=!1,$(a).find("div[id='el_explode_start_date"+e.index+"']").html(""),e.inputDateFrom=e.machineLine.start_date=t?r()(t).format(e.dateFormat):"",e.machineDescription&&e.inputDateFrom&&e.index>=1&&e.listMachineLines.filter((function(t,a){if(a!=e.index&&t.machine_desc==e.machineDescription){var n=r()(e.listMachineLines[e.index].start_date).format("YYYY-MM-DD");n=e.changeThToEn(n);var i=r()(e.listMachineLines[a].start_date).format("YYYY-MM-DD");i=e.changeThToEn(i);var s=r()(e.listMachineLines[a].end_date).format("YYYY-MM-DD");s=e.changeThToEn(s),console.log(n+"---"+i+"---"+s),n>=i&&n<=s&&(e.inputDateFrom=e.machineLine.start_date=null,e.inputDateTo=e.machineLine.end_date=null,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;"> รายละเอียดขอบเขต: '+t.machine_desc+" นี้มีการระบุช่วงวันที่นี้แล้ว กรุณาตรวจสอบ </span>",type:"warning",html:!0}))}}))},dateWasSelectedTo:function(t){var e=this,a=$("#machine-downtime-form");e.errors.end_date=!1,$(a).find("div[id='el_explode_end_date"+e.index+"']").html(""),e.inputDateTo=e.machineLine.end_date=t?r()(t).format(e.dateFormat):"",e.machineDescription&&e.inputDateFrom&&e.index>=1&&e.listMachineLines.filter((function(t,a){if(a!=e.index&&t.machine_desc==e.machineDescription){var n=r()(e.listMachineLines[e.index].end_date).format("YYYY-MM-DD");n=e.changeThToEn(n);var i=r()(e.listMachineLines[a].start_date).format("YYYY-MM-DD");i=e.changeThToEn(i);var s=r()(e.listMachineLines[a].end_date).format("YYYY-MM-DD");s=e.changeThToEn(s),console.log(n+"---"+i+"---"+s),n>=i&&n<=s&&(e.inputDateTo=e.machineLine.end_date=null,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;"> รายละเอียดขอบเขต: '+t.machine_desc+" นี้มีการระบุช่วงวันที่นี้แล้ว กรุณาตรวจสอบ </span>",type:"warning",html:!0}))}}))},getDateByBiWeekly:function(){var t,e=this;return(t=i().mark((function t(){var a,n,s,c,l,o,d,u,m,h,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(a=e).ppMonthly.start_date,s=a.ppMonthly.end_date,c=""!=a.machineLine.start_date?r()(a.machineLine.start_date).format("YYYY-MM-DD"):a.ppMonthly.start_date,l=""!=a.machineLine.end_date?r()(a.machineLine.end_date).format("YYYY-MM-DD"):a.ppMonthly.end_date,o=r()().format("YYYY-MM-DD"),t.next=8,helperDate.parseToDateTh(o,"YYYY-MM-DD");case 8:return d=t.sent,t.next=11,helperDate.parseToDateTh(n,"YYYY-MM-DD");case 11:return u=t.sent,t.next=14,helperDate.parseToDateTh(s,"YYYY-MM-DD");case 14:return m=t.sent,t.next=17,helperDate.parseToDateTh(c,"YYYY-MM-DD");case 17:return h=t.sent,t.next=20,helperDate.parseToDateTh(l,"YYYY-MM-DD");case 20:p=t.sent,a.currentDate=r()(d).format(a.dateFormat),a.biweeklyDateFrom=r()(u).format(a.dateFormat),a.biweeklyDateTo=r()(m).format(a.dateFormat),h=r()(h).format(a.dateFormat),p=r()(p).format(a.dateFormat),u=r()(u).format(a.dateFormat),m=r()(m).format(a.dateFormat),a.inputDateTo=a.machineLine.end_date=m,""!=a.machineLine.start_date&&""!=a.machineLine.end_date?(a.inputDateFrom=a.machineLine.start_date=h,a.inputDateTo=a.machineLine.end_date=p):r()(a.currentDate).format("YYYY-MM-DD")>=r()(u).format("YYYY-MM-DD")&&r()(a.currentDate).format("YYYY-MM-DD")>=r()(m).format("YYYY-MM-DD")?a.inputDateFrom=a.machineLine.start_date=u:r()(a.currentDate).format("YYYY-MM-DD")>=r()(u).format("YYYY-MM-DD")?a.inputDateFrom=a.machineLine.start_date=a.currentDate:a.inputDateFrom=a.machineLine.start_date=u;case 30:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){p(s,n,i,r,c,"next",t)}function c(t){p(s,n,i,r,c,"throw",t)}r(void 0)}))})()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},changeThToEn:function(t){var e=r()(t,"YYYY-MM-DD");return e.subtract(543,"years"),e.format("YYYY-MM-DD")}}};a(2790);function _(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}function v(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){_(s,n,i,r,c,"next",t)}function c(t){_(s,n,i,r,c,"throw",t)}r(void 0)}))}}const g={components:{MachineList:(0,m.Z)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center"},[t._v(" "+t._s(t.index+1)+" ")]),t._v(" "),a("td",{staticStyle:{"padding-bottom":"2px","padding-top":"2px"},attrs:{width:"100px"}},[a("div",[a("el-select",{ref:"machine_group",staticClass:"w-100",attrs:{name:"machine_group[]",size:"large",placeholder:"ขอบเขตเครื่องจักร",clearable:"",filterable:"",remote:"",disabled:t.enable,"popper-append-to-body":!1},on:{change:t.selMachineGroup},model:{value:t.machineGroup,callback:function(e){t.machineGroup=e},expression:"machineGroup"}},t._l(t.machineGroups,(function(t){return a("el-option",{key:t.machine_group,attrs:{label:t.machine_group_description,value:t.machine_group}})})),1)],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_machine_group"+t.index}})]),t._v(" "),a("td",{staticStyle:{"padding-bottom":"2px","padding-top":"2px"},attrs:{width:"100px"}},[a("div",[t.attribute.machine_group?a("el-select",{ref:"machine_desc",staticClass:"w-100",attrs:{name:"machine_desc[]",size:"large",placeholder:"รายละเอียดเครื่องจักร",clearable:"",filterable:"",remote:"",disabled:t.enable,"popper-append-to-body":!1},on:{change:t.selMachineDesc},model:{value:t.machineDescription,callback:function(e){t.machineDescription=e},expression:"machineDescription"}},t._l(t.machineDescLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.machine_description,value:t.machine_description}})})),1):a("el-select",{ref:"machine_desc",staticClass:"w-100",attrs:{name:"machine_desc[]",size:"large",placeholder:"รายละเอียดเครื่องจักร",disabled:""},model:{value:t.machineDescription,callback:function(e){t.machineDescription=e},expression:"machineDescription"}},t._l(t.machineDescLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.machine_description,value:t.machine_description}})})),1)],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_machine_desc"+t.index}})]),t._v(" "),a("td",[a("div",{staticClass:"input-group"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"start_date",id:"start_date",placeholder:"โปรดเลือกวันที่",value:t.inputDateFrom,format:"DD-MMM-YYYY",disabled:t.isDisableSelDate},on:{dateWasSelected:t.dateWasSelectedFrom},model:{value:t.inputDateFrom,callback:function(e){t.inputDateFrom=e},expression:"inputDateFrom"}})],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_start_date"+t.index}})]),t._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"input-group"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{name:"end_date",id:"end_date",placeholder:"โปรดเลือกวันที่",value:t.inputDateTo,format:"DD-MMM-YYYY",disabled:t.isDisableSelDate,"disabled-date-to":t.inputDateFrom},on:{dateWasSelected:t.dateWasSelectedTo},model:{value:t.inputDateTo,callback:function(e){t.inputDateTo=e},expression:"inputDateTo"}})],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_end_date"+t.index}})]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"btn btn-md btn-danger",on:{click:function(e){return e.preventDefault(),t.remove(t.machineLine)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])}),[],!1,null,null,null).exports},props:["header","machineGroups","machineDesc","btnTrans","dateFormat","url","machineDtLines","ppMonthly","validAction"],data:function(){return{loading:!1,isDisableReduceBtn:!1,machineLines:[],msgDate:{current_date:"",start_date:"",end_date:""},checkDate:{current_date:"",start_date:"",end_date:""},removeMachineDt:[]}},mounted:function(){this.getDateByYearly(),this.machineDtLines&&this.filterMachineLine()},methods:{openModal:function(){this.validAction?swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}):$("#modal-downtime-machine").modal("show")},addMachineLine:function(){this.machineLines.push({id:l()(),line_no:"",machine_group:"",machine_desc:"",start_date:"",end_date:"",is_enable:!1})},filterMachineLine:function(){var t=this;this.machineDtLines.filter((function(e){t.machineLines.push({id:l()(),line_no:e.line_no,machine_group:e.machine_group,machine_desc:e.machine_description,start_date:e.start_date,end_date:e.end_date,is_enable:!0})}))},removeLine:function(t){this.machineLines=this.machineLines.filter((function(e){return e.id!=t.id})),this.removeMachineDt.push(t)},cancel:function(){var t=this;return v(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.machineLines=[],t.machineDtLines&&t.filterMachineLine();case 2:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return v(i().mark((function e(){var a,n,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,$("#machine-downtime-form"),n=!0,s="",a.loading=!0,a.machineLines.length>0&&a.machineLines.filter((function(t,e){var i=e+1,c=a.changeTh(r()(t.start_date).format("YYYY-MM-DD")),l=a.changeTh(r()(t.end_date).format("YYYY-MM-DD"));""==t.machine_group||null==t.machine_group?(n=!1,a.loading=!1,s="กรุณาเลือกขอบเขตเครื่องจักร ของรายการที่ "+i,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0})):""==t.machine_desc||null==t.machine_desc?(n=!1,a.loading=!1,s="กรุณาเลือกรายละเอียดเครื่องจักร ของรายการที่ "+i,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0})):""==t.start_date||null==t.start_date?(n=!1,a.loading=!1,s="กรุณาเลือกวันที่เริ่ม ของรายการที่ "+i,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0})):""==t.end_date||null==t.end_date?(n=!1,a.loading=!1,s="กรุณาเลือกวันที่สิ้นสุด ของรายการที่ "+i,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0})):c<a.checkDate.start_date||c>a.checkDate.end_date||l<a.checkDate.start_date||l>a.checkDate.end_date?(s="รายการที่ "+i+" ช่วงวันที่ที่เลือกไม่อยู่ในช่วงวันที่ของปักษ์ <br> ควรระบุในช่วงวันที่ "+a.msgDate.start_date+" ถึง "+a.msgDate.end_date,n=!1,a.loading=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0})):(c<a.checkDate.current_date||l<a.checkDate.current_date)&&(s="รายการที่ "+i+" ไม่สามารถเลือกช่วงวันที่ย้อนหลังได้ <br> ควรระบุในช่วงวันที่ "+a.msgDate.current_date+" ถึง "+a.msgDate.end_date,n=!1,a.loading=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+s+"</span>",type:"error",html:!0}))})),n){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.create();case 10:"S"==(c=e.sent).status?(swal({title:"ปรับลดกำลังการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ทำการปรับลดกำลังการผลิตเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=c.redirect_show_page}),500)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+c.msg+"</span>",type:"error",html:!0});case 12:case"end":return e.stop()}}),e)})))()},create:function(){var t=this;return v(i().mark((function e(){var a,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={status:"",msg:""},s={header:(a=t).header,machineLines:a.machineLines,removeMachineDt:a.removeMachineDt},e.next=5,axios.post(a.url.machine_downtime,s).then((function(t){n.status=t.data.status,n.msg=t.data.msg,n.redirect_show_page=t.data.redirect_show_page})).catch((function(t){var e=t.response.data.data;n.status="E",n.msg=e})).then((function(){a.loading=!1}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()},getDateByYearly:function(){var t=this;return v(i().mark((function e(){var a,n,s,c,l,o,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(a=t).ppMonthly.start_date,s=a.ppMonthly.end_date,c=r()().format("YYYY-MM-DD"),e.next=6,helperDate.parseToDateTh(c,"YYYY-MM-DD");case 6:return l=e.sent,e.next=9,helperDate.parseToDateTh(n,"YYYY-MM-DD");case 9:return o=e.sent,e.next=12,helperDate.parseToDateTh(s,"YYYY-MM-DD");case 12:d=e.sent,a.msgDate.current_date=r()(l).format(a.dateFormat),a.msgDate.start_date=r()(o).format(a.dateFormat),a.msgDate.end_date=r()(d).format(a.dateFormat),a.checkDate.current_date=c,a.checkDate.start_date=r()(n).format("YYYY-MM-DD"),a.checkDate.end_date=r()(s).format("YYYY-MM-DD"),(a.checkDate.current_date<=a.checkDate.start_date||a.checkDate.current_date>=a.checkDate.start_date)&&a.checkDate.current_date<=a.checkDate.end_date&&(a.isDisableReduceBtn=!0);case 20:case"end":return e.stop()}}),e)})))()},changeTh:function(t){var e=r()(t,"YYYY-MM-DD");if(e.isValid())return e.subtract(543,"years"),console.log(e.format("YYYY-MM-DD")),e.format("YYYY-MM-DD")}}};const y=(0,m.Z)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.isDisableReduceBtn?a("button",{staticClass:"btn btn-warning btn-md",staticStyle:{"padding-left":"7px"},on:{click:t.openModal}},[a("i",{staticClass:"fa fa-minus-circle"}),t._v(" ปรับลดกำลังการผลิต\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-downtime-machine",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"980px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"24px","font-weight":"400"}},[t._v("\n                        แผนการลดกำลังการผลิต\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return e.preventDefault(),t.cancel()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])]),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",{attrs:{id:"machine-downtime-form"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.machineLines,(function(e,n){return a("MachineList",{key:e.id,attrs:{attribute:e,index:n,header:t.header,"pp-monthly":t.ppMonthly,"machine-groups":t.machineGroups,"machine-desc":t.machineDesc,"date-format":t.dateFormat,"list-machine-lines":t.machineLines},on:{removeRow:t.removeLine}})})),1)]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-block btn-primary",attrs:{type:"button"},on:{click:t.addMachineLine}},[a("i",{staticClass:"fa fa-plus-square"}),t._v("  เพิ่มรายการ\n                            ")])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[t.machineLines?a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submit()}}},[t._v("\n                        ตกลง\n                    ")]):a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"}},[t._v("\n                        ตกลง\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return e.preventDefault(),t.cancel()}}},[t._v(" ยกเลิก ")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"2%"}},[t._v(" ลำดับ ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"20%"}},[t._v(" ขอบเขตเครื่องจักร ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"30%"}},[t._v(" รายละเอียดเครื่องจักร ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"20%"}},[t._v(" วันที่เริ่มต้น ")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"20%"}},[t._v(" วันที่สิ้นสุด ")]),t._v(" "),a("th",{attrs:{width:"2%"}})])])}],!1,null,null,null).exports;var x=a(8702),b=a(27225);function w(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}const D={props:["holidaysHtml","lastUpdate","budgetYear","url"],data:function(){return{loading:!1,holHtml:this.holidaysHtml,lastDate:this.lastUpdate}},mounted:function(){},methods:{openModal:function(){$("#modal-holiday").modal("show")},refreshHoliday:function(){var t,e=this;return(t=i().mark((function t(){var a,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).loading=!0,n={budget_year:a.budgetYear},t.next=5,axios.post(a.url.refresh_holiday,{params:n}).then((function(t){a.loading=!1,"S"==t.data.status?(a.holHtml=[],a.holHtml=t.data.holidaysHtml):swal({title:'<span class="mt-2"> มีข้อผิดพลาด </span>',text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0})}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){w(s,n,i,r,c,"next",t)}function c(t){w(s,n,i,r,c,"throw",t)}r(void 0)}))})()}}};const C=(0,m.Z)(D,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{staticClass:"btn btn-info btn-md",staticStyle:{"padding-left":"7px"},on:{click:t.openModal}},[a("i",{staticClass:"fa fa-eye"}),t._v(" วันหยุดประจำปีงบประมาณ\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-holiday",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"980px"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-body text-left"},[t.holHtml?[a("div",{staticClass:"row col-12",staticStyle:{"font-size":"15px"}},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-4 col-sm-6 col-xs-6 mt-3 text-center"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" อัพเดตข้อมูลล่าสุดวันที่ : ")]),t._v(" "),a("span",[t._v(" "+t._s(t.lastDate)+" ")])]),t._v(" "),a("div",{staticClass:"form-group pr-2 mb-0 col-lg-3 col-md-4 col-sm-6 col-xs-6 mt-2"},[a("button",{staticClass:"btn btn-white btn-md",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.refreshHoliday(e)}}},[a("i",{staticClass:"fa fa-undo"}),t._v(" รีเฟรชข้อมูล ")])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed"})]:t._e(),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.holHtml)}})],2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"24px","font-weight":"400"}},[t._v("\n                        วันหยุดประจำปีงบประมาณ\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])])}],!1,null,null,null).exports;var k=a(80455),M=a.n(k);const Y={components:{VueNumeric:M()},props:["period","workingHour","pWorkingDays"],data:function(){return{oldWorkingDays:"",workingDays:this.pWorkingDays,value:this.pWorkingDays[this.period+"|"+this.workingHour]}},mounted:function(){this.value=this.workingDays[this.period+"|"+this.workingHour]},methods:{changeDays:function(){var t=this;Vue.set(t.workingDays,t.period+"|"+t.workingHour,Number(t.value))}}};function S(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}const F={components:{WorkingDays:(0,m.Z)(Y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"working_days",minus:!1,min:0,max:99,autocomplete:"off"},on:{change:function(e){return t.changeDays()},blur:function(e){return t.changeDays()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}),[],!1,null,null,null).exports,VueNumeric:M()},props:["header","yearlyOverview","omSaleForcastOverview","btnTrans","workingHour","url","onhandYear","pWorkingDays"],data:function(){return{loading:!1,effMachine:{},workingDays:this.pWorkingDays?this.pWorkingDays:{},totalEffMachine:{},totalEffByMonth:{},value:this.onhandYear?this.onhandYear:100}},mounted:function(){},watch:{calWorkingDays:function(t){return t},calTotalEffMonth:function(t){return t}},computed:{calWorkingDays:function(){var t=this;Object.keys(t.yearlyOverview).filter((function(e){var a=0;t.workingHour.filter((function(n,i){var s,r=null!==(s=t.workingDays[e+"|"+n.lookup_code])&&void 0!==s?s:0;a+=r*t.effMachine[e+"|"+n.lookup_code],t.workingHour.length==i+1&&(a-=t.omSaleForcastOverview[e][0]+t.yearlyOverview[e][0].eam_dt_eff_product)})),Vue.set(t.totalEffMachine,e,Number(a).toFixed(2))}))},calTotalEffMonth:function(){var t=this;Object.keys(t.yearlyOverview).filter((function(e,a){var n=0;n=1==e?t.value+Number(t.totalEffMachine[e])-Number(t.omSaleForcastOverview[e][0]):Number(t.totalEffByMonth[a])+Number(t.totalEffMachine[e])-Number(t.omSaleForcastOverview[e][0]),Vue.set(t.totalEffByMonth,e,Number(n).toFixed(2))}))}},methods:{openModal:function(){$("#modal-machine-overview").modal("show")},calEffMachine:function(t,e,a,n){var i;return i=Number(a)*(Number(e)-1)*60/1e6*(Number(n)/100),0!=t&&Vue.set(this.effMachine,t+"|"+e,Number(i).toFixed(2)),i},submit:function(){var t,e=this;return(t=i().mark((function t(){var a,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,$("#machine-overview-form"),a.loading=!0,n={header:a.header,onhandYear:a.value,workingDays:a.workingDays,totalEffMachine:a.totalEffMachine,totalEffByMonth:a.totalEffByMonth},t.next=7,axios.post(a.url.machine_overview_p01,n).then((function(t){"S"==t.data.status?swal({title:"ปรับลดกำลังการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ทำการบันทึกการคำนวณภาพรวมการผลิตทั้งปีงบประมาณเรียบร้อยแล้ว </span>',type:"success",html:!0}):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"error",html:!0})})).catch((function(t){var e=t.response.data.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+e+"</span>",type:"error",html:!0})})).then((function(){a.loading=!1}));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){S(s,n,i,r,c,"next",t)}function c(t){S(s,n,i,r,c,"throw",t)}r(void 0)}))})()}}};const T=(0,m.Z)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{staticClass:"btn btn-info btn-md",staticStyle:{"padding-left":"7px"},on:{click:t.openModal}},[a("i",{staticClass:"fa fa-bar-chart-o"}),t._v(" ภาพรวมการผลิตทั้งปีงบประมาณ\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-machine-overview",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",{attrs:{id:"machine-overview-form"}},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-4 col-xs-4 mt-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" สั่งผลิต  : ")]),t._v(" "+t._s(t.header.efficiency_product)+"% \n                            ")]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-1 col-md-1 col-sm-1 col-xs-1 mt-2"},[a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"onhand_year",minus:!1,min:0,max:100,autocomplete:"off"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),t._v(" "),a("div",{staticClass:"table-responsive mt-3"},[a("table",{staticClass:"table table-bordered "},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"12%"}},[t._v(" เดือน ")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"border-right":"3px solid #ddd"},attrs:{colspan:t.workingHour.length,width:"10%"}},[t._v("\n                                            กำลังผลิต (ล้านมวน)\n                                        ")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"border-right":"3px solid #ddd"},attrs:{colspan:t.workingHour.length,width:"10%"}},[t._v("\n                                            สั่งผลิต (ล้านมวน)\n                                        ")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"border-right":"3px solid #ddd"},attrs:{colspan:t.workingHour.length,width:"18%"}},[t._v("\n                                            จำนวนวันทำงาน (วัน)\n                                        ")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6)]),t._v(" "),a("tr",[t._l(t.workingHour,(function(e,n){return[a("th",{staticClass:"text-center",style:t.workingHour.length==n+1?"border-right: 3px solid #ddd":""},[t._v("\n                                                "+t._s(e.meaning)+"\n                                            ")])]})),t._v(" "),t._l(t.workingHour,(function(e,n){return[a("th",{staticClass:"text-center",style:t.workingHour.length==n+1?"border-right: 3px solid #ddd":""},[t._v("\n                                                "+t._s(e.meaning)+"\n                                            ")])]})),t._v(" "),t._l(t.workingHour,(function(e,n){return[a("th",{staticClass:"text-center",style:t.workingHour.length==n+1?"border-right: 3px solid #ddd":""},[t._v("\n                                                "+t._s(e.meaning)+"\n                                            ")])]}))],2)]),t._v(" "),a("tbody",[t._l(t.yearlyOverview,(function(e,n){return t._l(e,(function(e){return a("tr",[a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.month)+" ")]),t._v(" "),t._l(t.workingHour,(function(n,i){return[a("td",{staticClass:"text-right",style:t.workingHour.length==i+1?"border-right: 3px solid #ddd":""},[t._v("\n                                                    "+t._s(t._f("number2Digit")(t.calEffMachine(0,n.attribute1,e.efficiency_machine_per_min,100)))+"\n                                                ")])]})),t._v(" "),t._l(t.workingHour,(function(i,s){return[a("td",{staticClass:"text-right",style:t.workingHour.length==s+1?"border-right: 3px solid #ddd":""},[t._v("\n                                                    "+t._s(t._f("number2Digit")(t.calEffMachine(n,i.attribute1,e.efficiency_machine_per_min,t.header.efficiency_product)))+"\n                                                ")])]})),t._v(" "),t._l(t.workingHour,(function(e,i){return[a("td",{staticClass:"text-right",style:t.workingHour.length==i+1?"border-right: 3px solid #ddd":""},[a("WorkingDays",{attrs:{period:n,workingHour:e.attribute1,pWorkingDays:t.workingDays}})],1)]})),t._v(" "),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("number2Digit")(e.eam_pm_eff_product))+" ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("number2Digit")(e.eam_dt_eff_product))+" ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("number2Digit")(t.totalEffMachine[n]))+" ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("number2Digit")(t.omSaleForcastOverview[n][0]))+" ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("number2Digit")(t.totalEffByMonth[n]))+" ")])],2)}))}))],2)])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("\n                        บันทึก\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"24px","font-weight":"400"}},[t._v("\n                        คำนวณภาพรวมการผลิตทั้งปีงบประมาณ\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-4 col-xs-4 mt-2 text-right"},[a("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" คงคลังต้นปีงบประมาณ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"10%"}},[t._v(" ผลผลิตช่วง PM "),a("br"),t._v("(ล้านมวน) ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"10%"}},[t._v(" ผลผลิตช่วง DT "),a("br"),t._v("(ล้านมวน) ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"10%"}},[t._v(" รวมสั่งผลิต "),a("br"),t._v("(ล้านมวน) ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"10%"}},[t._v(" ประมาณการจำหน่าย "),a("br"),t._v("(ล้านมวน) ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"12%"}},[t._v(" คงคลังสิ้นเดือน "),a("br"),t._v("(ล้านมวน) ")])}],!1,null,null,null).exports;function E(t,e,a,n,i,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(n,i)}function P(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){E(s,n,i,r,c,"next",t)}function c(t){E(s,n,i,r,c,"throw",t)}r(void 0)}))}}var L,H;const z={components:{EffMachine:o.Z,OMSalesForecast:h,MachineDowntime:y,DateRangeDetail:x.Z,EfficiencyDetail:b.Z,VueNumeric:M(),ModalHol:C,ModalOverview:T},props:["pHeader","pDefaultInput","pSearchInput","monthDetails","pEditFlag","pShowFlag","pUrl","budgetYear","productType","pEfficiencyMachinePercent","pEfficiencyProductPercent","btnTrans","pDateFormat","search"],data:function(){return{header:this.pHeader,url:this.pUrl,edit_flag:!1,show_flag:this.pShowFlag,loading:!1,valid_action:!1,loadingHtml:"",monthLists:[],month:this.search&&Object.keys(this.search).includes("month")?String(this.search.month):this.pDefaultInput.current_month,month_detail:"",efficiency_machine:this.pEfficiencyMachinePercent,efficiency_product:this.pEfficiencyProductPercent,lines:[],resPlanDate:[],efficiencyProducts:[],efficiencyFullProducts:[],machineMaintenances:[],machineDowntimes:[],holidays:[],working_hour:[],summary:[],summaryProduct:[],totalMachineAll:0,totalProductAll:0,totalOmSalesForecast:0,totalProductArr:{},lineMachineEdit:{},workingHourEdit:{},unit:"",machineLines:[],sel_machine:"",sel_month:"",html:"",machineGroups:[],machineDesc:[],machineDtLines:[],ppMonthly:[],adjustHoliday:"",saleForecasts:[],checkDate:{current_date:"",start_date:"",end_date:""},note_description:"",totalFullProductArr:{},isControlDisable:!1,isCurrBiweekly:!1,efficiencyDayFormula:"",efficiencyMachineFormula:"",per_unit:"",precentHtml:"",percentCreate:"",holidaysHtml:"",lastUpdate:"",versions:"",totalDayForOmSale:0,omMonth:"",messageCheckPMHtml:"",messageCheckMachineHtml:"",yearlyOverview:"",omSaleForcastOverview:"",workingH:"",onhandYear:"",workingDays:""}},mounted:function(){this.header&&(this.getUnitProductType(),this.getMonth(),this.selMonth())},computed:{summaryEfficiencyMachineGroup:function(){var t=[];Object.values(this.lines).reduce((function(e,a){return a.filter((function(a){e[a.machine_group]||(e[a.machine_group]={machine_group:a.machine_group,efficiency_machine_per_min:0},t.push(e[a.machine_group])),e[a.machine_group].efficiency_machine_per_min+=Number(a.efficiency_machine_per_min)})),e}),{}),this.summary=t},totalEfficiencyProduct:function(){var t=this;Object.values(t.lines).filter((function(e){Object.values(e).filter((function(e){t.resPlanDate.filter((function(a){var n,i,s=Number(e.efficiency_machine_per_min)*(Number(a.working_hour)-1)*60,r=Number(s)*(Number(t.efficiency_product)/100)/1e6,c=r<=0?0:r;"Y"!=t.machineDowntimes[a.res_plan_date_display][e.machine_name]&&"Y"!=t.machineMaintenances[a.res_plan_date_display][e.machine_name]||(c*=0),n=Math.floor(100*Number(c))/100,t.efficiencyProducts[a.res_plan_date_display][e.machine_name]=n;var l=1*Number(s)/1e6,o=l<=0?0:l;"Y"!=t.machineDowntimes[a.res_plan_date_display][e.machine_name]&&"Y"!=t.machineMaintenances[a.res_plan_date_display][e.machine_name]||(o*=0),i=Math.floor(100*Number(o))/100,t.efficiencyFullProducts[a.res_plan_date_display][e.machine_name]=i}))}))}))},summaryEfficiencyProduct:function(){var t=this,e=[];Object.keys(t.efficiencyProducts).reduce((function(a,n){return Object.values(t.lines).filter((function(i){Object.values(i).filter((function(i){a[n]||(a[n]={plan_date:n,total:0},e.push(a[n])),"Y"==t.machineMaintenances[n][i.machine_name]||"Y"==t.machineDowntimes[n][i.machine_name]?a[n].total+=0:a[n].total+=Number(t.efficiencyProducts[n][i.machine_name])}))})),a}),{}),t.summaryProduct=e},summaryTotalEfficiencyProductAll:function(){var t=0;this.summaryProduct.filter((function(e){t+=Number(e.total)})),this.totalProductAll=t},summaryTotalEfficiencyMachineAll:function(){var t=0;this.summary.filter((function(e){t+=Number(e.efficiency_machine_per_min)})),this.totalMachineAll=t},summaryOmSaleForcastTotal:function(){var t=0;this.saleForecasts.filter((function(e){t+=Number(e.forecast_million_qty)})),this.totalOmSalesForecast=t}},watch:{summaryEfficiencyMachineGroup:function(t){return t},totalEfficiencyProduct:function(t){return t},summaryEfficiencyProduct:function(t){return t},summaryTotalEfficiencyProductAll:function(t){return t},summaryTotalEfficiencyMachineAll:function(t){return t},summaryOmSaleForcastTotal:function(t){return t},pEditFlag:(H=P(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.edit_flag=e;case 1:case"end":return t.stop()}}),t,this)}))),function(t){return H.apply(this,arguments)}),pShowFlag:(L=P(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.show_flag=e;case 1:case"end":return t.stop()}}),t,this)}))),function(t){return L.apply(this,arguments)})},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},covertName:function(t){return this.lines[t][0].machine_group_description},getMonth:function(){""==this.budgetYear&&(this.month=""),this.monthLists=this.pSearchInput.months},selMonth:function(){var t=this;null!=this.month?(this.monthDetails.filter((function(e){e.period_num==t.month&&(t.sel_month=e.thai_month,t.month_detail=e.thai_full_date)})),this.getMachineDetail()):this.month_detail=""},getMachineDetail:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).valid=!0,a.lines=[],a.resPlanDate=[],a.efficiencyProducts=[],a.eamPerformanceMachines=[],a.machineMaintenances=[],a.machineDowntimes=[],a.holidays=[],a.working_hour=[],a.loadingHtml=' <div class="m-t-lg m-b-lg">                            <div class="text-center sk-spinner sk-spinner-wave">                                <div class="sk-rect1"></div>                                <div class="sk-rect2"></div>                                <div class="sk-rect3"></div>                                <div class="sk-rect4"></div>                                <div class="sk-rect5"></div>                            </div>                        </div>',e.next=13,axios.post(a.url.get_machine_detail,{budget_year:a.budgetYear,month:a.month,product_type:a.productType}).then((function(e){console.log(e.data),"S"==e.data.status&&(a.header=e.data.header,a.lines=e.data.lines,a.month=e.data.month,a.resPlanDate=e.data.resPlanDate,a.efficiencyProducts=e.data.efficiencyProducts,a.eamPerformanceMachines=e.data.eamPerformanceMachines,a.machineMaintenances=e.data.machineMaintenances,a.machineDowntimes=e.data.machineDowntimes,a.holidays=e.data.holidays,a.html=e.data.html,a.machineGroups=e.data.machineGroups,a.machineDesc=e.data.machineName,a.ppMonthly=e.data.ppMonthly,a.machineDtLines=e.data.machineDtLines,a.efficiencyFullProducts=e.data.efficiencyFullProducts,a.adjustHoliday=e.data.adjustHoliday,a.saleForecasts=e.data.saleForecasts,a.getWorkingHour(e.data.workingHour),a.precentHtml=e.data.precentHtml,a.percentCreate=e.data.percentCreate,a.holidaysHtml=e.data.holidaysHtml,a.lastUpdate=e.data.lastUpdateFormat,a.versions=e.data.versions,a.totalDayForOmSale=e.data.totalDayForOmSale,a.omMonth=e.data.omMonth,a.url=e.data.url,a.yearlyOverview=e.data.yearlyOverview,a.omSaleForcastOverview=e.data.omSaleForcastOverview,a.workingH=e.data.workingH,a.onhandYear=e.data.onhandYear,a.workingDays=e.data.workingDays,a.adjustHoliday&&100==a.percentCreate&&swal({title:"ปรับเปลี่ยนวันหยุดประจำปี",text:'<span style="font-size: 16px; text-align: left;"> มีการปรับเปลี่ยนวันหยุดประจำปี โปรดตรวจสอบ</span>',type:"warning",html:!0}),t.getDateByYearly(),!a.isControlDisable&&a.isCurrBiweekly&&100==a.percentCreate&&(a.checkPMConfirm(),a.checkMachineDetail()))})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.message+"</span>",type:"warning",html:!0})})).then((function(){a.loadingHtml="",a.valid=!1}));case 13:case"end":return e.stop()}}),e)})))()},changeEfficiencyMachineByLine:function(t,e){var a=this,n=Number(a.lines[t][e].machine_speed)*(Number(a.lines[t][e].machine_eamperformance)/100);a.resPlanDate.filter((function(i){var s=Number(n)*(Number(i.working_hour)-1)*60,r=Number(s)*(Number(a.efficiency_product)/100)/1e6,c=r<=0?0:r;Object.values(a.efficiencyProducts[i.res_plan_date_display]).filter((function(n,s){a.efficiencyProducts[i.res_plan_date_display][a.lines[t][e].machine_name]=Math.floor(100*Number(c))/100}))})),a.lines[t][e].efficiency_machine_per_min=n,Vue.set(a.lineMachineEdit,a.lines[t][e].machine_name,Number(a.lines[t][e].machine_eamperformance))},updateDataEfficiencyMachineByLine:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=t.valid=!0,e.next=3,t.updateMachineLineTransactions();case 3:"S"==(a=e.sent).status?(swal({title:"เปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> ทำการเปลี่ยนแปลงวันที่แพลนและประสิทธิภาพเครื่องจักรเรียบร้อยแล้ว </span>',type:"success",html:!0}),t.loading=t.valid=!1,window.setTimeout((function(){window.location.href=a.redirect_show_page}),2e3)):"W"==a.status?(t.edit_flag=!1,swal({title:"เปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> ไม่มีการเปลี่ยนแปลงข้อมูล </span>',type:"info",html:!0})):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+a.msg+"</span>",type:"warning",html:!0});case 5:case"end":return e.stop()}}),e)})))()},updateMachineLineTransactions:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,axios.post("/planning/machine-yearly/"+t.header.res_plan_h_id+"/update-lines",{lineMachines:t.lineMachineEdit,workingHours:t.workingHourEdit,note:t.note_description}).then((function(t){a=t.data})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:e.message,type:"error"})})).then((function(){t.loading=t.valid=!1}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},updateDataEfficiencyProduct:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.valid_action){e.next=3;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 3:return t.loading=t.valid=!0,e.next=6,t.updateMachineTransactions({efficiency_product:t.efficiency_product,machine_eamperformance:null,budget_year:t.search.budget_year,product_type:t.search.product_type,period_num:t.month});case 6:"S"==(a=e.sent).status?(swal({title:"เปลี่ยนแปลงสั่งผลิต (%)",text:'<span style="font-size: 16px; text-align: left;"> ทำการเปลี่ยนแปลงสั่งผลิตเรียบร้อยแล้ว </span>',type:"success",html:!0}),t.loading=t.valid=!1,window.setTimeout((function(){window.location.reload()}),2e3)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+a.msg+"</span>",type:"warning",html:!0});case 8:case"end":return e.stop()}}),e)})))()},updateDataEfficiencyMachine:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.valid_action){e.next=3;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 3:return t.loading=t.valid=!0,e.next=6,t.updateMachineTransactions({efficiency_product:null,machine_eamperformance:t.efficiency_machine,budget_year:t.search.budget_year,product_type:t.search.product_type,period_num:t.month});case 6:"S"==(a=e.sent).status?(swal({title:"เปลี่ยนแปลงประสิทธิภาพเครื่องจักร (%)",text:'<span style="font-size: 16px; text-align: left;"> ทำการเปลี่ยนแปลงประสิทธิภาพเครื่องจักรเรียบร้อยแล้ว </span>',type:"success",html:!0}),t.loading=t.valid=!1,window.setTimeout((function(){window.location.reload()}),2e3)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+a.msg+"</span>",type:"warning",html:!0});case 8:case"end":return e.stop()}}),e)})))()},updateMachineTransactions:function(t){var e=this;return P(i().mark((function a(){var n;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=[],a.next=3,axios.post("/planning/machine-yearly/"+e.header.res_plan_h_id+"/update",t).then((function(t){n=t.data})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:e.message,type:"error"})})).then((function(){e.loading=e.valid=!1}));case 3:return a.abrupt("return",n);case 4:case"end":return a.stop()}}),a)})))()},getUnitProductType:function(){this.header&&("71"==this.header.product_type||"78"==this.header.product_type?(this.unit="ล้านมวน",this.per_unit="มวน"):(this.unit="ล้านชิ้น",this.per_unit="ชิ้น"),this.efficiencyDayFormula="กำลังผลิตเครื่องจักรรายวัน = ผลผลิตตามประสิทธิภาพต่อนาที("+this.per_unit+")*[(จำนวนชั่วโมงการทำงานแต่ละวัน - 1 ชั่วโมงเซตอัพเครื่องจักร) * 60 นาที]",this.efficiencyMachineFormula="ความเร็วเครื่องจักรต่อนาที("+this.per_unit+") * ประสิทธิภาพเครื่องจักร(%)")},getWorkingHour:function(t){var e=this;t.filter((function(t){e.working_hour.push({attribute1:Number(t.attribute1),lookup_code:t.lookup_code,meaning:t.meaning})}))},checkUpdatePlanPM:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t).valid_action){e.next=4;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 4:swal({html:!0,title:"เปลี่ยนแปลงแผนซ่อมบำรุง",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดตการเปลี่ยนแปลงแผนซ่อมบำรุง ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},(function(t){t&&a.updatePlanPM(),a.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},updatePlanPM:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).loading=a.valid=!0,e.next=4,axios.post(a.url.update_plan_pm,{budget_year:a.budgetYear,month:a.month,product_type:a.productType}).then((function(t){swal({title:"เปลี่ยนแปลงแผนซ่อมบำรุง",text:'<span style="font-size: 16px; text-align: left;"> อัพเดตการเปลี่ยนแปลงแผนซ่อมบำรุงภายในเดือน '+a.sel_month+" เรียบร้อยแล้ว </span>",type:"success",html:!0}),window.setTimeout((function(){window.location.href=t.data.redirect_show_page}),500)})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+e.message+"</span>",type:"error",html:!0})})).then((function(){a.loading=a.valid=!0}));case 4:case"end":return e.stop()}}),e)})))()},selMachine:function(t){},getDateByYearly:function(){var t=this;return P(i().mark((function e(){var a,n,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(a=t).ppMonthly.start_date,s=a.ppMonthly.end_date,c=r()().format("YYYY-MM-DD"),e.next=6,helperDate.parseToDateTh(c,"YYYY-MM-DD");case 6:return e.sent,e.next=9,helperDate.parseToDateTh(n,"YYYY-MM-DD");case 9:return e.sent,e.next=12,helperDate.parseToDateTh(s,"YYYY-MM-DD");case 12:e.sent,a.checkDate.current_date=c,a.checkDate.start_date=r()(n).format("YYYY-MM-DD"),a.checkDate.end_date=r()(s).format("YYYY-MM-DD"),a.isControlDisable=!1,a.isCurrBiweekly=!1,a.checkDate.current_date>a.checkDate.start_date&&a.checkDate.current_date>a.checkDate.end_date&&(a.isControlDisable=!0),(a.checkDate.current_date>=a.checkDate.start_date&&a.checkDate.current_date<=a.checkDate.end_date||a.checkDate.current_date<a.checkDate.start_date&&a.checkDate.current_date<a.checkDate.end_date)&&(a.isCurrBiweekly=!0);case 20:case"end":return e.stop()}}),e)})))()},editProcess:function(t){var e=this;e.valid_action=t,e.note_description=this.header.note_description,e.$emit("updateEditFlag",t)},checkUpdateMachine:function(){var t=this;return P(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t).valid_action){e.next=4;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 4:a.loading=!0,swal({html:!0,title:"อัพเดตรายละเอียดเครื่องจักร",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดตรายละเอียดเครื่องจักร ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},(function(t){t&&a.updateMachine(),a.loading=!1}));case 6:case"end":return e.stop()}}),e)})))()},updateMachine:function(){var t=this;return P(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={budget_year:(a=t).header.budget_year,month:a.header.period_num},e.next=4,axios.post(a.url.update_machine_p01,{params:n}).then((function(t){var e=!0;if("S"==t.data.status)a.loading=!1,swal({title:"อัพเดตรายละเอียดเครื่องจักร",text:'<span style="font-size: 16px; text-align: left;"> อัพเดตรายละเอียดเครื่องจักรเรียบร้อย </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.reload()}),500);else if(e=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0}),!e)return})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 4:case"end":return e.stop()}}),e)})))()},checkPMConfirm:function(){var t=this;return P(i().mark((function e(){var a,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,s={month:(a=t).month},e.next=5,axios.get(a.url.check_pm_confirm_p01,{params:s}).then((function(t){if(a.loading=!1,"S"==t.data.status)a.messageCheckPMHtml=t.data.msg;else if(n=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0}),!n)return})).catch((function(t){a.loading=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},checkMachineDetail:function(){var t=this;return P(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,n=!0,e.next=4,axios.get(a.url.check_machine_detail_p01).then((function(t){if(a.loading=!1,"S"==t.data.status)a.messageCheckMachineHtml=t.data.msg;else if(n=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0}),!n)return})).catch((function(t){a.loading=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 4:case"end":return e.stop()}}),e)})))()}}};a(78822);const O=(0,m.Z)(z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show_flag&&t.header?a("div",{staticClass:"row col-lg-12 m-2 pl-1"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" เดือน ")]),t._v(" "),a("div",[a("el-select",{ref:"month",attrs:{size:"medium",placeholder:"เดือน",filterable:"",disabled:t.valid_action},on:{change:t.selMonth},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.monthLists,(function(t,e){return a("el-option",{key:e,attrs:{label:t.thai_month,value:t.period_num}})})),1)],1)]),t._v(" "),t.month_detail&&t.header?a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ประจำวันที่ ")]),t._v(" "),a("div",{staticClass:"p-1",staticStyle:{"font-size":"14px"}},[a("date-range-detail",{attrs:{"date-range-detail":t.month_detail}})],1)]):t._e()]):t._e(),t._v(" "),t.show_flag?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"hr-line-dashed"}),t._v(" "),""!=t.loadingHtml?[a("div",{domProps:{innerHTML:t._s(t.loadingHtml)}})]:""!=t.precentHtml&&t.percentCreate<100?[a("span",{domProps:{innerHTML:t._s(t.precentHtml)}})]:t._e(),t._v(" "),Object.values(t.lines).length>0&&100==t.percentCreate?[a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-lg-5 col-md-5 col-sm-4 col-xs-4 mt-2 pl-2"},[a("div",{staticClass:"tw-font-bold tw-uppercase mb-1"},[a("h2",{staticClass:"tw-font-bold"},[t._v(" \n                            กำลังผลิตรวมทั้งเดือน : "+t._s(t._f("number2Digit")(t.totalProductAll))+" "+t._s(t.unit)+"\n                        ")])]),t._v(" "),a("div",{staticClass:"tw-font-bold tw-uppercase mt-3"},[a("h3",{staticStyle:{color:"#898686"}},[t._v("\n                            ประมาณกำลังผลิตหักประมาณการจำหน่าย : "+t._s(t._f("number2Digit")(t.totalProductAll-t.totalOmSalesForecast))+" "+t._s(t.unit)+"\n                        ")])])]),t._v(" "),a("div",{staticClass:"col-lg-7 col-md-7 col-sm-4 col-xs-4 mt-2 text-right"},[a("div",{staticClass:"col-12"},[t.header?[a("div",{staticClass:"text-right"},[Object.values(t.lines).length>0&&100==t.percentCreate&&"KK"!=t.header.product_type?a("ModalOverview",{attrs:{header:t.header,yearlyOverview:t.yearlyOverview,omSaleForcastOverview:t.omSaleForcastOverview,workingHour:t.workingH,onhandYear:t.onhandYear,pWorkingDays:t.workingDays,url:t.url,btnTrans:t.btnTrans}}):t._e(),t._v(" "),Object.values(t.lines).length>0&&100==t.percentCreate?a("ModalHol",{attrs:{holidaysHtml:t.holidaysHtml,lastUpdate:t.lastUpdate,budgetYear:t.header.budget_year,url:t.url}}):t._e(),t._v(" "),"KK"!=t.header.product_type?a("OMSalesForecast",{attrs:{omSalesForecast:t.html,pSaleForecasts:t.saleForecasts,versionLists:t.versions,totalDayForOmSale:t.totalDayForOmSale,omMonth:t.omMonth,url:t.url}}):t._e()],1),t._v(" "),a("div",{staticClass:"text-right"},[!t.isControlDisable&&t.isCurrBiweekly?a("button",{staticClass:"btn btn-warning btn-md",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.checkUpdateMachine(e)}}},[a("i",{staticClass:"fa fa-calendar"}),t._v(" อัปเดตรายละเอียดเครื่องจักร\n                                ")]):t._e(),t._v(" "),!t.isControlDisable&&t.isCurrBiweekly?a("button",{staticClass:"btn btn-warning btn-md",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.checkUpdatePlanPM(e)}}},[a("i",{staticClass:"fa fa-calendar"}),t._v(" อัปเดตแผนซ่อมบำรุง\n                                ")]):t._e(),t._v(" "),!t.isControlDisable&&t.isCurrBiweekly?a("machine-downtime",{attrs:{header:t.header,"machine-groups":t.machineGroups,"machine-desc":t.machineDesc,"btn-trans":t.btnTrans,"date-format":t.pDateFormat,"machine-dt-lines":t.machineDtLines,"pp-monthly":t.ppMonthly,url:t.url,"valid-action":t.valid_action}}):t._e()],1),t._v(" "),t.messageCheckMachineHtml&&!t.isControlDisable&&t.isCurrBiweekly?a("div",[a("h4",{staticClass:"text-danger mt-3"},[a("div",{domProps:{innerHTML:t._s(t.messageCheckMachineHtml)}})])]):t._e(),t._v(" "),t.messageCheckPMHtml&&!t.isControlDisable&&t.isCurrBiweekly?a("div",[a("h4",{staticClass:"text-danger mt-3"},[a("div",{domProps:{innerHTML:t._s(t.messageCheckPMHtml)}})])]):t._e()]:t._e()],2)])]),t._v(" "),t.messageCheckMachineHtml?t._e():[a("div",{staticClass:"row m-2"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-3 col-sm-4 col-xs-4 mt-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ประสิทธิภาพเครื่องจักร(%) ")]),t._v(" "),a("div",{},[a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"search[efficiency_machine]",separator:",",precision:2,minus:!1,min:0,max:100,disabled:t.isControlDisable||!t.isCurrBiweekly},model:{value:t.efficiency_machine,callback:function(e){t.efficiency_machine=e},expression:"efficiency_machine"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-4 col-sm-4 col-xs-4",staticStyle:{"margin-top":"32px"}},[!t.isControlDisable&&t.isCurrBiweekly?a("button",{staticClass:"btn btn-success btn-sm text-left",on:{click:function(e){return e.preventDefault(),t.updateDataEfficiencyMachine(e)}}},[t._v("\n                            ยืนยันเปลี่ยนแปลงประสิทธิภาพเครื่องจักร (%)\n                        ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-4 col-xs-4 mt-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" สั่งผลิต(%) ")]),t._v(" "),a("div",{},[a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"search[efficiency_product]",separator:",",precision:2,minus:!1,min:0,max:100,disabled:t.isControlDisable||!t.isCurrBiweekly},model:{value:t.efficiency_product,callback:function(e){t.efficiency_product=e},expression:"efficiency_product"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-4 col-xs-4",staticStyle:{"margin-top":"32px"}},[!t.isControlDisable&&t.isCurrBiweekly?a("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return e.preventDefault(),t.updateDataEfficiencyProduct(e)}}},[t._v(" \n                            ยืนยันเปลี่ยนแปลงสั่งผลิต (%)\n                        ")]):t._e()])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[t._m(0),t._v(" "),t.header?a("div",{staticClass:"col-md-4 text-right"},[t.edit_flag||t.isControlDisable||!t.isCurrBiweekly?t._e():a("button",{class:t.btnTrans.edit.class+" btn-lg tw-w-25",on:{click:function(e){return t.editProcess(t.edit_flag=!t.edit_flag)}}},[a("i",{class:t.btnTrans.edit.icon}),t._v(" "+t._s(t.btnTrans.edit.text)+"\n                        ")]),t._v(" "),t.edit_flag?a("button",{class:t.btnTrans.save.class+" btn-lg tw-w-25",on:{click:function(e){return e.preventDefault(),t.updateDataEfficiencyMachineByLine()}}},[a("i",{class:t.btnTrans.save.icon}),t._v(" "+t._s(t.btnTrans.save.text)+"\n                        ")]):t._e(),t._v(" "),t.edit_flag?a("button",{class:t.btnTrans.cancel.class+" btn-lg tw-w-25",on:{click:function(e){return t.editProcess(t.edit_flag=!t.edit_flag)}}},[a("i",{class:t.btnTrans.cancel.icon}),t._v(" "+t._s(t.btnTrans.cancel.text)+"\n                        ")]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"hr-line-dashed m-1"}),t._v(" "),a("div",{staticClass:"row col-12"},[a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2"},[a("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" หมายเหตุ ")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"หมายเหตุ",maxlength:"250","show-word-limit":"",disabled:!t.edit_flag},model:{value:t.note_description,callback:function(e){t.note_description=e},expression:"note_description"}})],1)])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)]),t._v(" "),a("div",{staticClass:"hr-line-dashed m-1"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover",staticStyle:{position:"sticky"}},[a("thead",[a("tr",[t._m(4),t._v(" "),t._m(5),t._v(" "),a("th",{staticClass:"text-center sticky-col th-col",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ความเร็วเครื่องจักรต่อนาที("+t._s(t.per_unit)+") ")])]),t._v(" "),t._m(6),t._v(" "),a("th",{staticClass:"text-center sticky-col fi-col",staticStyle:{"vertical-align":"middle"},attrs:{title:t.efficiencyMachineFormula}},[a("div",[t._v(" ผลผลิตตามประสิทธิภาพต่อนาที "),a("br"),t._v(" ("+t._s(t.per_unit)+") ")])]),t._v(" "),t._l(t.resPlanDate,(function(e,n){return[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",{staticClass:"mb-2"},[a("small",{staticClass:"mb-2 tw-font-bold",staticStyle:{color:"#000"}},[a("span",{staticClass:"label",staticStyle:{"padding-bottom":"1px","padding-top":"1px","font-size":"10px"}},[t._v("\n                                                    "+t._s(n+1)+" "+t._s(e.day_of_week)+"\n                                                ")]),t._v(" "),a("br"),t._v("\n                                                "+t._s(e.res_plan_date_display)+" "),a("br")])]),t._v(" "),a("working-hour-component",{attrs:{"p-plan-date":e,"p-working-hour":t.working_hour,"p-working-hour-edit":t.workingHourEdit,"p-edit-flag":t.edit_flag,"p-check-date":t.checkDate}})],1)]})),t._v(" "),t._m(7)],2)]),t._v(" "),a("tbody",[t.lines.length<=0?[t._m(8)]:[t._l(t.lines,(function(e,n){return[a("tr",[a("td",{staticClass:"text-left sticky-col first-col",attrs:{rowspan:e.length+1}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t.covertName(n))+" ")])])]),t._l(e,(function(e,n){return a("tr",[a("td",{staticClass:"text-left sticky-col second-col",style:t.sel_machine==e.machine_name?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"150px"}},[t._v(" "+t._s(e.machine_description)+" ")])]),t._v(" "),a("td",{staticClass:"text-right sticky-col th-col",style:t.sel_machine==e.machine_name?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"100%"}},[t._v(" "+t._s(t.decimal(e.machine_speed))+" ")])]),t._v(" "),a("td",{staticClass:"text-center sticky-col fo-col",style:t.sel_machine==e.machine_name?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("eff-machine",{attrs:{"edit-flag":t.edit_flag,line:e,"line-machine-edit":t.lineMachineEdit}})],1),t._v(" "),a("td",{staticClass:"text-right sticky-col fi-col",style:t.sel_machine==e.machine_name?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"100%"}},[t._v(" "+t._s(t.decimal(e.efficiency_machine_per_min))+" ")])]),t._v(" "),t._l(t.resPlanDate,(function(n,i){return[t._l(t.efficiencyFullProducts,(function(i,s){return["Y"==t.machineDowntimes[n.res_plan_date_display][e.machine_name]&&n.res_plan_date_display==s?[a("td",{staticClass:"text-right",staticStyle:{"background-color":"#e02b1e"},attrs:{title:t.efficiencyDayFormula},on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"70px"}},[t._v(" 0.00 ")])])]:"Y"==t.machineMaintenances[n.res_plan_date_display][e.machine_name]&&n.res_plan_date_display==s?[a("td",{staticClass:"text-right",staticStyle:{"background-color":"#ffc107"},attrs:{title:t.efficiencyDayFormula},on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"70px"}},[t._v(" 0.00 ")])])]:"Y"==n.holiday_flag&&n.res_plan_date_display==s?[a("td",{staticClass:"text-right",staticStyle:{"background-color":"#cccccc"},attrs:{title:t.efficiencyDayFormula},on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"70px"}},[t._v(" \n                                                                "+t._s(t._f("number2Digit")(i[e.machine_name]))+"\n                                                            ")])])]:"P"==n.holiday_flag&&n.res_plan_date_display==s?[a("td",{staticClass:"text-right",staticStyle:{"background-color":"#878788"},attrs:{title:t.efficiencyDayFormula},on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"70px"}},[t._v(" \n                                                                "+t._s(t._f("number2Digit")(i[e.machine_name]))+"\n                                                            ")])])]:"Y"!=n.holiday_flag&&n.res_plan_date_display==s&&"Y"!=t.machineDowntimes[n.res_plan_date_display][e.machine_name]&&"Y"!=t.machineMaintenances[n.res_plan_date_display][e.machine_name]?[a("td",{staticClass:"text-right",style:t.sel_machine==e.machine_name?"background-color: #9AD9DB;":"",attrs:{title:t.efficiencyDayFormula},on:{click:function(a){return t.selMachine(e.machine_name)}}},[a("div",{staticStyle:{width:"70px"}},[t._v(" \n                                                                "+t._s(t._f("number2Digit")(i[e.machine_name]))+"\n                                                            ")])])]:t._e()]}))]})),t._v(" "),a("td",{style:t.sel_machine==e.machine_name?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selMachine(e.machine_name)}}})],2)})),t._v(" "),a("tr",[t._m(9,!0),t._v(" "),a("td",{staticClass:"text-right sticky-col t2-col",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[t._l(t.summary,(function(e){return[n==e.machine_group?[a("span",{staticClass:"tw-font-bold"},[t._v(" "+t._s(t._f("number2Digit")(e.efficiency_machine_per_min))+" ")])]:t._e()]}))],2),t._v(" "),t._l(t.resPlanDate,(function(e,i){return[("Y"==e.holiday_flag||e.holiday_flag,a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold",staticStyle:{width:"70px"}},[a("efficiency-product-component",{attrs:{"p-efficiency-products":t.efficiencyFullProducts,"p-lines":t.lines,"p-plan-date":e,"p-machine-group":n,"p-total-product-arr":t.totalFullProductArr,"p-machine-maintenances":t.machineMaintenances,"p-machine-downtimes":t.machineDowntimes}})],1)]))]})),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"70px"}},[a("summary-efficiency-product-by-group",{attrs:{"p-machine-group":n,"p-total-product-arr":t.totalFullProductArr,"p-res-plan-date":t.resPlanDate}})],1)])],2),t._v(" "),a("tr",[t._m(10,!0),t._v(" "),a("td",{staticClass:"text-right sticky-col t2-col",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[t._l(t.summary,(function(e){return[n==e.machine_group?[a("span",{staticClass:"tw-font-bold"},[t._v(" "+t._s(t._f("number2Digit")(e.efficiency_machine_per_min))+" ")])]:t._e()]}))],2),t._v(" "),t._l(t.resPlanDate,(function(e,i){return[(e.holiday_flag,a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold",staticStyle:{width:"70px"}},[a("efficiency-product-component",{attrs:{"p-efficiency-products":t.efficiencyProducts,"p-lines":t.lines,"p-plan-date":e,"p-machine-group":n,"p-total-product-arr":t.totalProductArr,"p-machine-maintenances":t.machineMaintenances,"p-machine-downtimes":t.machineDowntimes}})],1)]))]})),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"70px"}},[a("summary-efficiency-product-by-group",{attrs:{"p-machine-group":n,"p-total-product-arr":t.totalProductArr,"p-res-plan-date":t.resPlanDate}})],1)])],2)]})),t._v(" "),a("tr",[t._m(11),t._v(" "),a("td",{staticClass:"text-right sticky-col t2-col",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right"},[t._v(" "+t._s(t._f("number2Digit")(t.totalMachineAll))+" ")])]),t._v(" "),t._l(t.resPlanDate,(function(e,n){return[t._l(t.summaryProduct,(function(n){return[0==e.working_hour&&n.plan_date==e.res_plan_date_display?[a("td",{staticClass:"tw-font-bold text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticStyle:{width:"70px"}},[t._v(" 0.00 ")])])]:t._e(),t._v(" "),0!=e.working_hour&&n.plan_date==e.res_plan_date_display?[a("td",{staticClass:"tw-font-bold text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticStyle:{width:"70px"}},[t._v(" \n                                                        "+t._s(t._f("number2Digit")(n.total))+"\n                                                    ")])])]:t._e()]}))]})),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"70px"}},[t._v(" "+t._s(t._f("number2Digit")(t.totalProductAll))+" ")])])],2)]],2)])])]]:Object.values(t.lines).length<0&&""==t.loadingHtml?[t._m(12)]:t._e()],2):t._e()])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-8"},[a("h2",{staticClass:"tw-font-bold"},[t._v(" Machine Detail ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2 p-1"},[a("div",[a("i",{staticClass:"fa fa-square fa-2x",staticStyle:{color:"#ffc107"}}),t._v("   แผนซ่อมบำรุงเครื่องจักร ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2 p-1"},[a("div",[a("i",{staticClass:"fa fa-square fa-2x",staticStyle:{color:"#e02b1e"}}),t._v("   ปรับลดกำลังการผลิต ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-1 p-1"},[a("div",[a("i",{staticClass:"fa fa-square fa-2x",staticStyle:{color:"#cccccc"}}),t._v("   วันหยุด ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center sticky-col first-col",staticStyle:{"vertical-align":"middle","border-bottom":"0px"}},[a("div",[t._v(" ขอบเขตเครื่องจักร ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center sticky-col second-col",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" รายละเอียดเครื่องจักร ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center sticky-col fo-col",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ประสิทธิภาพเครื่องจักร(%) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" รวมกำลังผลิต ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"6"}},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right sticky-col t1-col",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"4"}},[a("strong",[t._v(" รวม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right sticky-col t1-col",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"4"}},[a("strong",[t._v(" รวมผลผลิตที่คาดว่าจะได้ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right sticky-col t1-col",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"4"}},[a("strong",[t._v(" รวมกำลังผลิตแต่ละวัน ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])}],!1,null,null,null).exports},78822:(t,e,a)=>{var n=a(24946);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,a(45346).Z)("720ed48f",n,!0,{})},2790:(t,e,a)=>{var n=a(46275);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,a(45346).Z)("75a42cce",n,!0,{})},5521:(t,e,a)=>{var n=a(79851);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,a(45346).Z)("14cd6953",n,!0,{})}}]);