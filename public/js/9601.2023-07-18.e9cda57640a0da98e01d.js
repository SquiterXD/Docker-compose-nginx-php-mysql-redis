(self.webpackChunk=self.webpackChunk||[]).push([[9601],{99601:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var s=a(87757),o=a.n(s);function n(t,e,a,s,o,n,l){try{var i=t[n](l),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(s,o)}const l={props:["workList","oldInput","btnTrans"],data:function(){return{location_desc:this.oldInput.location_desc?this.oldInput.location_desc:"",locator_desc:this.oldInput.locator_desc?this.oldInput.locator_desc:"",group_code:this.oldInput.group_code?this.oldInput.group_code:"",enable_flag:"true"!=this.oldInput.enable_flag||"true"==this.oldInput.enable_flag,fileList:[],validate:{location_desc:!1,locator_desc:!1,group_code:!1}}},mounted:function(){},methods:{handleRemove:function(t,e){this.fileList.splice(t,1)},handlePreview:function(t){},handleExceed:function(t,e){},beforeRemove:function(t,e){return this.$confirm("ยกเลิกการอัปโหลดไฟล์รูปภาพ ".concat(t.name," ใช่หรือไม่ ?"))},onchange:function(t,e){this.fileList=e},save:function(){var t,e=this;return(t=o().mark((function t(){var a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e,s=new FormData,a.location_desc){t.next=7;break}return a.validate.location_desc=!0,t.abrupt("return");case 7:a.validate.location_desc=!1;case 8:if(a.locator_desc){t.next=13;break}return a.validate.locator_desc=!0,t.abrupt("return");case 13:a.validate.locator_desc=!1;case 14:if(a.group_code){t.next=19;break}return a.validate.group_code=!0,t.abrupt("return");case 19:a.validate.group_code=!1;case 20:return s.append("location_desc",a.location_desc),s.append("locator_desc",a.locator_desc),s.append("group_code",a.group_code),s.append("enable_flag",a.enable_flag),a.fileList.forEach((function(t,e){s.append("files[]",a.fileList[e].raw)})),t.abrupt("return",axios.post("/qm/settings/check-points-tobacco-leaf/store",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t.data),"SUCCESS"==t.data.status?(swal({title:"บันทึกสำเร็จ !",text:"ทำการเพิ่มรายการเรียบร้อยแล้ว",type:"success",showConfirmButton:!0}),setTimeout((function(){window.location.href="/qm/settings/check-points-tobacco-leaf"}),3e3)):swal({title:"เกิดข้อผิดพลาด !",text:t.data.err_msg,type:"error",showConfirmButton:!0}),"Duplicate"==t.data.status&&swal({title:"เกิดข้อผิดพลาด !",text:t.data.data,type:"error",showConfirmButton:!0})})));case 26:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,o){var l=t.apply(e,a);function i(t){n(l,s,o,i,c,"next",t)}function c(t){n(l,s,o,i,c,"throw",t)}i(void 0)}))})()}}};const i=(0,a(51900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("ชื่อจุดตรวจสอบ")]),a("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อจุดตรวจสอบ"},model:{value:t.location_desc,callback:function(e){t.location_desc=e},expression:"location_desc"}}),t._v(" "),this.validate.location_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณากรอก ชื่อจุดตรวจสอบ")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("รายละเอียดจุดตรวจสอบ")]),a("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),a("el-input",{attrs:{placeholder:"กรอกรายละเอียดจุดตรวจสอบ"},model:{value:t.locator_desc,callback:function(e){t.locator_desc=e},expression:"locator_desc"}}),t._v(" "),this.validate.locator_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณากรอก รายละเอียดจุดตรวจสอบ")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("กลุ่มงาน")]),a("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{clearable:"",filterable:"",placeholder:"เลือกกลุ่มงาน"},model:{value:t.group_code,callback:function(e){t.group_code=e},expression:"group_code"}},t._l(t.workList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.meaning,value:t.meaning}})})),1),t._v(" "),this.validate.group_code?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[t._v("กรุณาเลือก กลุ่มงาน")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[t._v("สถานะการใช้งาน")]),t._v(" "),a("el-checkbox",{staticClass:"w-100",model:{value:t.enable_flag,callback:function(e){t.enable_flag=e},expression:"enable_flag"}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px","padding-bottom":"15px"}},[a("label",[t._v("รูปภาพประกอบ")]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://web-service.test/qm/settings/check-points/store","on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"auto-upload":!1,multiple:"","on-change":t.onchange,limit:5,"on-exceed":t.handleExceed,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("เพิ่มรูปภาพ")])],1)],1)])])]),t._v(" "),a("div",{staticClass:"col-12 mt-3"},[a("hr"),t._v(" "),a("div",{staticClass:"row clearfix m-t-lg text-right"},[a("div",{staticClass:"col-sm-12"},[a("button",{class:t.btnTrans.save.class,attrs:{type:"submit"},on:{click:t.save}},[a("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v("  \n                        "+t._s(t.btnTrans.save.text)+"\n                ")]),t._v(" "),a("a",{class:t.btnTrans.cancel.class,attrs:{href:"/qm/settings/check-points-tobacco-leaf",type:"button"}},[a("i",{class:t.btnTrans.cancel.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                    "+t._s(t.btnTrans.cancel.text)+"\n                ")])])])])])}),[],!1,null,null,null).exports}}]);