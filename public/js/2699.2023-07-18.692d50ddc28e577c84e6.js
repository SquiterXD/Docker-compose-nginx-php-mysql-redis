(self.webpackChunk=self.webpackChunk||[]).push([[2699],{34860:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var r=a(23645),o=a.n(r)()((function(t){return t[1]}));o.push([t.id,".ct-header[data-v-ba6d69fe]{font-size:1.1rem;font-weight:700}.ct-table[data-v-ba6d69fe]{border:1px solid #ddd}.ct-table div[data-v-ba6d69fe]{padding:10px}.ct-table div[data-v-ba6d69fe]:not(:last-child){border-bottom:1px solid #ddd}.ct-table__header[data-v-ba6d69fe]{background:#ddd;font-weight:700}.el-table .warning-row[data-v-ba6d69fe]{background-color:#fdf5e6!important}.side_list[data-v-ba6d69fe]{height:500px;border-radius:5px;padding:20px;border:2px solid #eee}.side_list .title[data-v-ba6d69fe]{font-size:14px;font-weight:700;color:#909399}.side_list .show_list[data-v-ba6d69fe]{max-height:400px;overflow:scroll}.side_list .show_list-item[data-v-ba6d69fe]{width:100%;justify-content:space-between}.m-px__5[data-v-ba6d69fe]{margin:5px}.flex[data-v-ba6d69fe]{display:flex}.text-title[data-v-ba6d69fe]{font-size:16px;font-weight:600}.btn-info[data-v-ba6d69fe]{background-color:#02b0ef;border-color:#02b0ef}.btn-cancel[data-v-ba6d69fe]{background-color:#ec4958;border-color:#ec4958;color:#fff}.text-refresh[data-v-ba6d69fe]{color:#ec4958}.show_list[data-v-ba6d69fe]{display:flex;flex-wrap:wrap}.show_list-item[data-v-ba6d69fe]{cursor:pointer;display:flex;margin:5px;background-color:#f4f4f5;padding:3px 10px;color:#909399;border-color:#e9e9eb;border-radius:3px;text-align:left;align-items:center}.show_list-item[data-v-ba6d69fe]:hover{background-color:#ededf0}.show_list-item__close[data-v-ba6d69fe]{margin-left:10px}",""]);const s=o},42699:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var r=a(87757),o=a.n(r);function s(t,e,a,r,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function i(t){s(n,r,o,i,c,"next",t)}function c(t){s(n,r,o,i,c,"throw",t)}i(void 0)}))}}const i={props:["product_group","product","new_products","p_cost_code","p_product_group"],data:function(){return{tableData:[],loading:!1,itemCostingV:[],form:{loading_data:!1,show:!1,loading:!1,items:[],delItems:{}}}},mounted:function(){this.itemCostingV=this.new_products,this.tableData=this.product,$(".slimScroll").slimScroll({height:"650px"})},methods:{remoteMethod:function(t){var e=this;t&&(console.log("query",t),this.loading=!0,axios.get("/ct/ajax/product_group/item_costing?search=".concat(t)).then((function(t){var a=t.data.data;console.log(a),e.itemCostingV=a})).catch((function(t){})).then((function(){e.loading=!1})))},store:function(){var t=this;axios.post("/ct/ajax/product_group/product-item",this.product_group).then((function(e){var a=e.data.data;t.$message({showClose:!0,message:a,type:"success"})})).catch((function(e){var a=e.response.data.data;t.$message({showClose:!0,message:a,type:"error"})}))},delLine:function(t){var e=this;return n(o().mark((function a(){var r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=e,Object.keys(r.form.delItems).length,1==t.is_delete?r.$set(r.form.delItems,t.inventory_item_id,t.inventory_item_id):Vue.delete(r.form.delItems,t.inventory_item_id);case 3:case"end":return a.stop()}}),a)})))()},cancel:function(){var t=this;return n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.form.show=!1,t.form.items=[];case 2:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return n(o().mark((function e(){var a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={cost_code:(a=t).p_cost_code,product_group:a.p_product_group,items:a.form.items},a.form.loading=!0,axios.post("/ct/ajax/product_group/store-product-item",{input:r}).then(function(){var t=n(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("S"!=(r=e.data).status){t.next=6;break}return t.next=4,swal({title:"&nbsp;",text:"บันทึกข้อมูลสำเร็จ",type:"success",html:!0});case 4:a.form.items=[],location.reload();case 6:"S"!=r.status&&(swal({title:"Error !",text:r.message,type:"error",showConfirmButton:!0}),location.reload()),a.form.loading=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},del:function(){var t=this;return n(o().mark((function e(){var a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,r={cost_code:(a=t).p_cost_code,product_group:a.p_product_group,del_items:a.form.delItems},e.next=5,helperAlert.showProgressConfirm("กรุณายืนยันลบข้อมูล");case 5:e.sent&&(a.form.loading_data=!0,axios.post("/ct/ajax/product_group/del-product-item",{input:r}).then(function(){var t=n(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("S"!=(r=e.data).status){t.next=6;break}return t.next=4,swal({title:"&nbsp;",text:"บันทึกข้อมูลสำเร็จ",type:"success",html:!0});case 4:a.form.delItems={},location.reload();case 6:"S"!=r.status&&(swal({title:"Error !",text:r.message,type:"error",showConfirmButton:!0}),location.reload()),a.form.loading_data=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})))()}}};var c=a(93379),l=a.n(c),d=a(34860),u={insert:"head",singleton:!1};l()(d.Z,u);d.Z.locals;const p=(0,a(51900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-product-groups"},[a("div",{staticClass:"col-lg-12 mt-2"},[a("el-card",{staticClass:"box-card my-2"},[a("div",{staticClass:"ct-header clearfix",attrs:{slot:"header"},slot:"header"},[t._v("\n      ศูนย์ต้นทุน "+t._s(t.product_group.cost_code)+" "+t._s(t.product_group.cost_description)+" \n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.form.loading_data,expression:"form.loading_data"}],staticClass:"px-4 py-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",[t._v("\n            กลุ่มผลิตภัณฑ์: "+t._s(t.product_group.product_group)+" - "+t._s(t.product_group.description)+"\n          ")]),t._v(" "),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"slimScroll"},[a("table",{staticClass:"table table table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{width:"10px;"}}),t._v(" "),a("th",{attrs:{width:""}},[t._v("\n                            ผลิตภัณฑ์\n                        ")])])]),t._v(" "),a("tbody",[0==t.tableData.length?a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("ไม่พบข้อมูล")])]):t._l(t.tableData,(function(e,r){return a("tr",{key:r},[a("td",{staticClass:"align-middle text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_delete,expression:"item.is_delete"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.is_delete)?t._i(e.is_delete,null)>-1:e.is_delete},on:{change:[function(a){var r=e.is_delete,o=a.target,s=!!o.checked;if(Array.isArray(r)){var n=t._i(r,null);o.checked?n<0&&t.$set(e,"is_delete",r.concat([null])):n>-1&&t.$set(e,"is_delete",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(e,"is_delete",s)},function(a){return t.delLine(e)}]}})]),t._v(" "),a("td",[t._v(t._s(e.product_item_number)+" - "+t._s(e.product_item_desc))])])}))],2)])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.form.loading,expression:"form.loading"}],staticClass:"col-6 text text-right"},[a("div",{staticClass:"text-right"},[Object.keys(t.form.delItems).length>0?a("button",{staticClass:"btn btn-danger btn-lg ml-2 tw-w-34",attrs:{type:"button"},on:{click:function(e){return t.del()}}},[t._v("\n                  ลบผลิตภัณฑ์\n                ")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-primary btn-lg ml-2 tw-w-34",attrs:{type:"button"},on:{click:function(e){t.form.show=!0}}},[t._v("\n                    เพิ่มผลิตภัณฑ์ใหม่\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-lg ml-2 tw-w-24",attrs:{disabled:0==t.form.items.length,type:"button"},on:{click:function(e){return t.save()}}},[t._v("\n                  บันทึก\n                ")]),t._v(" "),a("a",{staticClass:"btn btn-danger ml-2 btn-lg tw-w-24",attrs:{href:"/ct/product_group"}},[t._v("\n                  ย้อนกลับ\n                ")])]),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t.form.show?a("div",{staticClass:"row text-left"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-2"},[a("label",{staticClass:"text-left text-muted tw-font-bold tw-uppercase mb-0"},[t._v("ผลิตภัณฑ์ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",multiple:"",placeholder:"",remote:"","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.form.items,callback:function(e){t.$set(t.form,"items",e)},expression:"form.items"}},t._l(t.itemCostingV,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,debounce:3e3}})})),1)],1)]),t._v(" "),a("div",{staticClass:"text-center form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-3"},[a("button",{staticClass:"btn btn-white btn-lg  tw-w-24",attrs:{type:"button"},on:{click:function(e){return t.cancel()}}},[t._v("\n                          ยกเลิก\n                      ")])])]):t._e()])],1)])])])],1)])}),[],!1,null,"ba6d69fe",null).exports}}]);