(self.webpackChunk=self.webpackChunk||[]).push([[3887],{13887:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var i=a(87757),n=a.n(i),s=a(71170),r=(a(68737),a(30381)),c=a.n(r),l=a(9669),o=a.n(l);function d(t,e,a,i,n,s,r){try{var c=t[s](r),l=c.value}catch(t){return void a(t)}c.done?e(l):Promise.resolve(l).then(i,n)}function m(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function r(t){d(s,i,n,r,c,"next",t)}function c(t){d(s,i,n,r,c,"throw",t)}r(void 0)}))}}var _=a(92077);const u={props:{date_trans:{},reset_filter:{},getProductLists:{},item:{type:Object},auth:{type:Object},btn_trans:{type:Object},url_ajax:{type:Object},machine_relations:{},item_cat:{}},data:function(){return{time1:c()().add(543,"years").format(),time2:c()().add(543,"years").format(),el:{machine_relations:{},item_cat:{}},options:[],typeOrder:"",items:[]}},components:{DatePicker:s.Z},computed:{nowDate:function(){return c()().add(543,"years").format(this.date_trans)}},mounted:function(){console.log(this.date_trans),this.initialize()},methods:{getTypeOrder:function(){var t=this;return m(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().post(t.url_ajax.getTypeOrder).then((function(e){t.options=e.data}));case 2:case"end":return e.stop()}}),e)})))()},confirmOrder:function(t){var e=this;return m(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:swal({title:"แจ้งเตือน",text:"ต้องการทำการยืนยันข้อมูลหรือไม่?",type:"warning",showCancelButton:!0,confirmButtonText:"ยืนยัน"},(function(a){a&&(console.log(t),o().post(e.url_ajax.raw_material_report_update_flag,t).then((function(t){return t.data})).then((function(t){console.log(t)})).catch((function(t){})),e.initialize())}));case 1:case"end":return a.stop()}}),a)})))()},initialize:function(){var t=this;return m(n().mark((function e(){var a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={auth:t.auth,machine_relations:t.el.machine_relations,item_cat:t.el.item_cat,time1:t.time1,time2:t.time2},i=t.url_ajax.raw_material_report_index,e.next=4,o().post(i,a).then((function(t){return t.data})).then((function(e){t.items=e.data}));case 4:case"end":return e.stop()}}),e)})))()},resetPopUp:function(){this.el={machine_relations:{},item_cat:{}},this.time1=c()().add(543,"years").format(),this.time2=c()().add(543,"years").format(),this.initialize()},closeModal:function(){$(".bd-search-modal-lg").modal("hide")},handleFilterBtn:function(){this.initialize()},selectDateTime:function(t){this.time1=c()(t).format()},selectDateTime2:function(t){this.time2=c()(t).format()},changeQtyCalc:function(t){return _(Math.ceil(parseFloat(t))).format("0,0")}}};const v=(0,a(51900).Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[t._v("วันที่")]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:t.nowDate,format:t.date_trans,placeholder:"โปรดเลือกวันที่"},on:{dateWasSelected:t.selectDateTime}})],1),t._v(" "),a("div",{staticClass:"col-md-3"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:t.nowDate,format:t.date_trans,placeholder:"โปรดเลือกวันที่"},on:{dateWasSelected:t.selectDateTime2}})],1)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"align-items":"center","margin-top":"5px"}},[a("div",{staticClass:"col-md-2"},[t._v("ประเภทวัตถุดิบ")]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("v-select",{attrs:{options:t.item_cat,label:"item_cat_segment2_desc"},model:{value:t.el.item_cat,callback:function(e){t.$set(t.el,"item_cat",e)},expression:"el.item_cat"}})],1)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"align-items":"center","margin-bottom":"15px","margin-top":"5px"}},[a("div",{staticClass:"col-md-2"},[t._v("หมายเลขเครื่อง")]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("v-select",{attrs:{options:t.machine_relations,label:"machine_set",items:t.items},model:{value:t.el.machine_relations,callback:function(e){t.$set(t.el,"machine_relations",e)},expression:"el.machine_relations"}})],1)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"align-items":"center","margin-bottom":"15px"}},[a("button",{class:t.btn_trans.create.class,attrs:{type:"button"},on:{click:t.handleFilterBtn}},[a("i",{class:t.btn_trans.search.icon}),t._v("\n              ค้นหา\n            ")]),t._v("\n             \n            "),a("button",{class:t.btn_trans.reset.class,attrs:{type:"button"},on:{click:t.resetPopUp}},[a("i",{class:t.btn_trans.reset.icon}),t._v("\n              "+t._s(t.btn_trans.reset.text)+"\n            ")])])])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"ibox"},[t._m(0),t._v(" "),a("div",{staticClass:"ibox-content table-responsive"},[a("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),a("tbody",t._l(t.items,(function(e){return a("tr",{key:e.ptpm_raw_mtl_id,class:0==e.flag?"tw-bg-red-50":"tw-bg-green-50"},[a("td",{staticClass:"col-readonly"},[t._v("\n                  "+t._s(e.item_cat)+"\n                  "),0==e.flag?a("a",{attrs:{href:"#"},on:{click:function(a){return t.confirmOrder(e)}}},[a("small",[t._v("ยืนยัน")])]):t._e()]),t._v(" "),a("td",{staticClass:"col-readonly",attrs:{align:"center"}},[t._v("\n                  "+t._s(e.machine_set)+"\n                ")]),t._v(" "),a("td",{staticClass:"col-readonly",attrs:{align:"center"}},[t._v("\n                  "+t._s(e.ingradiant)+"\n                ")]),t._v(" "),a("td",{staticClass:"col-readonly",attrs:{align:"center"}},[t._v(t._s(e.date))]),t._v(" "),a("td",{staticClass:"col-readonly",attrs:{align:"center"}},[t._v(t._s(e.time))])])})),0)])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ibox-title"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-sm-12 col-lg-4 align-middle"},[a("h4",[t._v("รายการร้องขอวัตถุดิบ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{attrs:{align:"center"}},[a("th",{staticStyle:{"min-width":"311px"}},[t._v("ประเภทวัตถุดิบ")]),t._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[t._v("หมายเลขเครื่อง")]),t._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[t._v("ตราบุหรี่")]),t._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[t._v("วันที่")]),t._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[t._v("เวลา")])])])}],!1,null,null,null).exports}}]);