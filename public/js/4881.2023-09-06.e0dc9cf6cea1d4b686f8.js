(self.webpackChunk=self.webpackChunk||[]).push([[4881],{51546:(t,e,n)=>{"use strict";function i(t){return new Promise((function(e){swal({title:t,type:"warning",dangerMode:!0,showCancelButton:!0,closeOnCancel:!0,cancelButtonText:"ยกเลิก",showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ยืนยัน"},(function(t){e(t)}))}))}function a(){return new Promise((function(t){swal({title:"\nคุณแน่ใจไหม?",text:"มีการเปลี่ยนแปลงข้อมูลโดยที่ยังไม่ได้บันทึก คุณต้องการดำเนินการต่อหรือไม่",type:"warning",dangerMode:!0,showCancelButton:!0,closeOnCancel:!0,cancelButtonText:"ยกเลิก",showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ดำเนินการต่อ",allowClickOutside:!0,closeOnClickOutside:!0},(function(e){t(e)}))}))}function o(t){var e='<div style="text-align:left;">ข้อมูลที่คุณใส่ไม่ถูกต้องหรือไม่ครบถ้วน กรุณาตรวจสอบข้อมูลและลองใหม่อีกครั้ง<br/><br/></div>';return e+='<div style="text-align:left;color:red">',e+="<ul>",t.forEach((function(t){e+="<li>".concat(t,"<br/></li>")})),e+="</ul>",e+="</div>",new Promise((function(t){swal({title:"\nเกิดข้อผิดพลาด",text:e,type:"error",html:!0,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ตกลง"},(function(e){t(e)}))}))}function s(){return console.debug("showLoadingDialog"),new Promise((function(t){swal({title:'\n                    <div class="sk-spinner sk-spinner-wave mb-4">\n                        <div class="sk-rect1"></div>\n                        <div class="sk-rect2"></div>\n                        <div class="sk-rect3"></div>\n                        <div class="sk-rect4"></div>\n                        <div class="sk-rect5"></div>\n                    </div>\n                    กำลังดำเนินการ\n                    ',html:!0,showConfirmButton:!1,closeOnConfirm:!1},(function(e){t(e)}))}))}function l(){return new Promise((function(t){swal({title:"\nสำเร็จ",text:"บันทึกข้อมูลเรียบร้อย",type:"success",dangerMode:!1,showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"},(function(e){t(e)}))}))}function r(){return new Promise((function(t){swal({title:"\nมีข้อผิดพลาด",text:"มีข้อผิดพลาดเกิดขึ้น ไม่สามารถบันทึกข้อมูลได้ กรุณาลองใหม่อีกครั้ง\n",type:"error",showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"},(function(e){t(e)}))}))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"มีข้อผิดพลาดเกิดขึ้น กรุณาลองใหม่อีกครั้ง\n";return new Promise((function(e){swal({title:"\nเกิดข้อผิดพลาด",text:t,type:"error",showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ปิด"},(function(t){e(t)}))}))}function u(t){return new Promise((function(e){swal({title:"\nคุณต้องการลบข้อมูลที่ถูกเลือกทั้งหมด ".concat(t," แถวใช่หรือไม่?"),type:"warning",dangerMode:!0,showCancelButton:!0,closeOnCancel:!0,cancelButtonText:"ยกเลิก",showConfirmButton:!0,closeOnConfirm:!0,confirmButtonText:"ยืนยัน"},(function(t){e(t)}))}))}n.d(e,{Y6:()=>i,HR:()=>a,BT:()=>o,ZD:()=>s,xK:()=>l,YM:()=>r,qV:()=>c,gC:()=>u})},9467:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var i=n(23645),a=n.n(i)()((function(t){return t[1]}));a.push([t.id,"td[data-v-4c70c2b2],th[data-v-4c70c2b2]{vertical-align:middle!important;text-align:center}",""]);const o=a},54881:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var i=n(51546);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const s={props:["lookups","department_code"],mounted:function(){},data:function(){return{thai_year:(new Date).getFullYear()+543,thai_month:"",biweekly:"",display_date:"",start_date:"",end_date:"",rows:"",desc:"",qty:"",unit:""}},computed:{yearList:function(){return a(new Set(Array.from(this.lookups,(function(t){return t.thai_year}))))},monthList:function(){var t=this,e=this.lookups.filter((function(e){return e.thai_year==t.thai_year}));return a(new Set(Array.from(e,(function(t){return t.thai_month}))))},biweeklyList:function(){var t=this,e=this.lookups.filter((function(e){return e.thai_year==t.thai_year&&e.thai_month.includes(t.thai_month)}));return a(new Set(Array.from(e,(function(t){return t.biweekly}))))}},methods:{onChangeYear:function(){this.thai_month="",this.biweekly="",this.display_date=""},onChangeMonth:function(){this.biweekly="",this.display_date=""},onChangeBiWeekly:function(){var t=this,e=this.lookups.filter((function(e){return e.thai_year==t.thai_year&&e.thai_month.includes(t.thai_month)&&e.biweekly==t.biweekly}))[0];this.start_date=e.start_date.split(" ")[0],this.end_date=e.end_date.split(" ")[0],this.display_date=e.start_date.split(" ")[0].split("-")[2]+"-"+e.end_date.split(" ")[0].split("-")[2]+" "+e.thai_month.trim()+" "+e.thai_year,(0,i.ZD)(),axios.get("/api/pm/0018/",{params:{start_date:this.start_date,end_date:this.end_date,department_code:this.department_code}}).then((function(e){200==e.status&&(swal.close(),t.rows=e.data.rows),console.log(e)})).catch((function(t){swal.close(),console.log(t)}))},onClickDtl:function(t){var e=this.rows[t];this.desc=e.item_desc,this.qty=e.quantity,this.unit=e.primary_unit_of_measure}}};n(55179);const l=(0,n(51900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"ibox"},[t._m(0),t._v(" "),n("div",{staticClass:"ibox-content"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-lg-3 col-form-label"},[t._v("แผนการผลิตประจำปีงบประมาณ:")]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("el-select",{attrs:{filterable:"",remote:"",placeholder:"เลือกปีงบประมาณ"},on:{change:function(e){return t.onChangeYear()}},model:{value:t.thai_year,callback:function(e){t.thai_year=e},expression:"thai_year"}},t._l(t.yearList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-lg-3 col-form-label"},[t._v("ประจำเดือน:")]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("el-select",{attrs:{filterable:"",remote:"",placeholder:"เลือกเดือน"},on:{change:function(e){return t.onChangeMonth()}},model:{value:t.thai_month,callback:function(e){t.thai_month=e},expression:"thai_month"}},t._l(t.monthList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-lg-3 col-form-label"},[t._v("ปักษ์ที่:")]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("el-select",{attrs:{filterable:"",remote:"",placeholder:"เลือกปักษ์"},on:{change:function(e){return t.onChangeBiWeekly()}},model:{value:t.biweekly,callback:function(e){t.biweekly=e},expression:"biweekly"}},t._l(t.biweeklyList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-lg-3 col-form-label"},[t._v("วันที่:")]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.display_date,expression:"display_date"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.display_date},on:{input:function(e){e.target.composing||(t.display_date=e.target.value)}}})])])])])])])])]),t._v(" "),n("div",{staticClass:"ibox"},[n("div",{staticClass:"ibox-content"},[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),t.rows.length?n("tbody",t._l(t.rows,(function(e,i){return n("tr",[n("td",[t._v(t._s(e.batch_no))]),t._v(" "),n("td",[t._v(t._s(e.blend_no))]),t._v(" "),n("td",[t._v(t._s(e.plan_qty))]),t._v(" "),n("td",[t._v(t._s(e.dtl_um))]),t._v(" "),n("td",[n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-w-m btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-form",disabled:!e.item_desc},on:{click:function(e){return e.preventDefault(),t.onClickDtl(i)}}},[n("i",{staticClass:"fa fa-file-text-o"}),t._v(" รายละเอียด")])])]),t._v(" "),n("td",[t._v(t._s(e.description))])])})),0):n("tbody",[t._m(2)])])]),t._v(" "),n("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-form","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog",staticStyle:{top:"30%"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("h3",{staticClass:"m-t-none m-b"},[t._v("แสดงรายละเอียดในแต่ละ Blend")]),t._v(" "),n("form",{attrs:{role:"form"}},[n("table",{staticClass:"table table-bordered"},[t._m(3),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(t._s(t.desc))]),t._v(" "),n("td",[t._v(t._s(t.qty))]),t._v(" "),n("td",[t._v(t._s(t.unit))])])])])])])])])])])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ibox-title"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-sm-12 col-lg-4 align-middle"},[n("h5",[t._v("คำสั่งผลิตยาเส้นปรุงประจำปักษ์")])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticStyle:{"min-width":"150px"}},[t._v("Job Number")]),t._v(" "),n("th",{staticStyle:{"min-width":"150px"}},[t._v("Blend No.")]),t._v(" "),n("th",[t._v("ปริมาณที่ต้องผลิต")]),t._v(" "),n("th",[t._v("หน่วยนับ")]),t._v(" "),n("th",{staticStyle:{"min-width":"150px"}}),t._v(" "),n("th",[t._v("ประเภทคำสั่งการผลิต")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{attrs:{colspan:"6"}},[t._v("ไม่พบข้อมูล")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("ตราบุหรี่")]),t._v(" "),n("th",[t._v("จำนวน")]),t._v(" "),n("th",[t._v("หน่วย")])])])}],!1,null,"4c70c2b2",null).exports},55179:(t,e,n)=>{var i=n(9467);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,n(45346).Z)("600b5a29",i,!0,{})}}]);