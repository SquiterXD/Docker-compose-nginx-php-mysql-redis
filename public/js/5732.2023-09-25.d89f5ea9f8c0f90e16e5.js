(self.webpackChunk=self.webpackChunk||[]).push([[5732],{35732:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(87757),a=r.n(s);function i(t,e,r,s,a,i,c){try{var n=t[i](c),d=n.value}catch(t){return void r(t)}n.done?e(d):Promise.resolve(d).then(s,a)}const c={props:["productTypes","budgetYears","defaultInput","searchInput","search","header","pUrl","monthDetails","btnTrans","dateFormat"],data:function(){return{budget_year:this.search?this.search.budget_year:this.defaultInput.current_year,efficiency_machine:this.header?this.header.efficiency_machine:"",efficiency_product:this.header?this.header.efficiency_product:this.defaultInput.efficiency_product,product_type:this.search?this.search.product_type:this.defaultInput.product_type,url:this.pUrl,month_lists:[],loading:!1,m_loading:!1,b_loading:!1,errors:{budget_year:!1},edit_flag:!1,show_flag:!0,valid_action:!1,set_budget_year:this.search?this.search.budget_year:this.defaultInput.current_year,set_product_type:this.search?this.search.product_type:this.defaultInput.product_type,creator:this.header&&this.header.updated_by?this.header.updated_by.name:this.header&&this.header.created_by?this.header.created_by.name:null}},mounted:function(){},computed:{monthLists:function(){return this.month_lists},efficiencyMachine:function(){return this.efficiency_machine},efficiencyProduct:function(){return this.efficiency_product}},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year")},deep:!0}},methods:{changeSearch:function(){var t=this;t.edit_flag="",t.show_flag=!0,t.set_product_type==t.product_type&&t.set_budget_year==t.budget_year||(t.edit_flag=!1,t.show_flag=!1)},submit:function(){var t,e=this;return(t=a().mark((function t(){var r,s,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=$("#machine-form")).serialize(),s=!0,i="",e.errors.budget_year=!1,e.errors.month=!1,$(r).find("div[id='el_explode_budget_year']").html(""),""==e.budget_year&&(e.errors.budget_year=!0,s=!1,i="กรุณาเลือกปีงบประมาณ",$(r).find("div[id='el_explode_budget_year']").html(i)),s){t.next=10;break}return t.abrupt("return");case 10:e.loading=!0,r.submit();case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(s,a){var c=t.apply(e,r);function n(t){i(c,s,a,n,d,"next",t)}function d(t){i(c,s,a,n,d,"throw",t)}n(void 0)}))})()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},checkSearchCondition:function(){var t=this;if(t.valid_action)return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),t.budget_year=t.set_budget_year,void(t.product_type=t.set_product_type);t.edit_flag="",t.show_flag=!0,(t.set_budget_year!=t.budget_year||t.set_budget_year==t.budget_year&&t.set_product_type!=t.product_type)&&(t.edit_flag=!1,t.show_flag=!1)},updateEditFlag:function(t){this.valid_action=t}}};const n=(0,r(51900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ibox float-e-margins mb-2"},[r("div",{staticClass:"row col-12 mb-2"},[t._m(0),t._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2 text-right"},[r("button",{staticClass:"btn btn-white btn-lg",on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[r("i",{staticClass:"fa fa-search"}),t._v(" ค้นหา\n                ")]),t._v(" "),r("a",{staticClass:"btn btn-white btn-lg",attrs:{href:t.url.submit_p01}},[t._v("ล้าง")])])]),t._v(" "),r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-8 b-r"},[r("form",{attrs:{id:"machine-form",action:t.url.submit_p01}},[r("div",{staticClass:"row"},[r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-4 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ ")]),t._v(" "),r("div",{staticClass:"input-group "},[r("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:t.budget_year}}),t._v(" "),r("el-select",{ref:"budget_year",attrs:{size:"medium",placeholder:"ปีงบประมาณ",filterable:""},on:{change:t.checkSearchCondition},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}},t._l(t.budgetYears,(function(t,e){return r("el-option",{key:e,attrs:{label:t.thai_year,value:t.thai_year}})})),1)],1),t._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-10 col-md-10 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ประมาณกำลังการผลิต ")]),t._v(" "),r("div",[r("input",{attrs:{type:"hidden",name:"search[product_type]"},domProps:{value:t.product_type}}),t._v(" "),r("el-radio-group",{attrs:{size:"small"},on:{change:function(e){return t.checkSearchCondition()}},model:{value:t.product_type,callback:function(e){t.product_type=e},expression:"product_type"}},[t._l(t.productTypes,(function(e,s){return[r("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:e.lookup_code,border:""}},[t._v("\n                                                    "+t._s(e.meaning)+"\n                                                ")])]}))],2)],1)])])])]),t._v(" "),r("div",{staticClass:"col-4"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("dl",{staticClass:"row mb-1"},[t._m(1),t._v(" "),r("div",{staticClass:"col-sm-6 text-sm-left"},[r("dd",{staticClass:"mb-1"},[t.header&&t.show_flag?r("div",[t._v("\n                                                "+t._s(t.header.created_at_format)+"\n                                            ")]):t._e()])])]),t._v(" "),r("dl",{staticClass:"row mb-1"},[t._m(2),t._v(" "),r("div",{staticClass:"col-sm-6 text-sm-left"},[r("dd",{staticClass:"mb-1"},[t.header&&t.show_flag?r("div",[t._v("\n                                                "+t._s(t.header.updated_at_format?t.header.updated_at_format:t.header.created_at_format)+"\n                                            ")]):t._e()])])]),t._v(" "),r("dl",{staticClass:"row mb-1"},[t._m(3),t._v(" "),r("div",{staticClass:"col-sm-6 text-sm-left"},[r("dd",{staticClass:"mb-1"},[t.header&&t.show_flag?r("div",[t._v("\n                                                "+t._s(t.creator)+"\n                                            ")]):t._e()])])])])])])])])]),t._v(" "),t.search?[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("lines-machine-yearly-component",{attrs:{"p-efficiency-machine-percent":t.efficiency_machine,"p-efficiency-product-percent":t.efficiency_product,"p-header":t.header,"p-default-input":t.defaultInput,"p-search-input":t.searchInput,"p-edit-flag":t.edit_flag,"p-show-flag":t.show_flag,"month-details":t.monthDetails,"budget-year":t.budget_year,"product-type":t.product_type,pUrl:t.url,"p-date-format":t.dateFormat,"btn-trans":t.btnTrans,search:t.search},on:{updateEditFlag:t.updateEditFlag}})],1)])]:t._e()],2)])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2"},[r("h3",[t._v(" ประมาณการกำลังผลิตประจำปี ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-6 text-sm-right"},[r("dt",[t._v("วันที่สร้าง:")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-6 text-sm-right"},[r("dt",{attrs:{title:""}},[t._v("วันที่แก้ไขล่าสุด:")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-6 text-sm-right"},[r("dt",[t._v("ผู้บันทึก:")])])}],!1,null,null,null).exports}}]);