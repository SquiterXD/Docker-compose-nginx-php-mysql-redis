(self.webpackChunk=self.webpackChunk||[]).push([[5194],{67791:(e,t,a)=>{"use strict";a.d(t,{gR:()=>r,R_:()=>i,sD:()=>l});var n=a(30381),s=a.n(n),r={formatDate:"DD/MM/YYYY",formatMonth:"MM/YYYY",formatYear:"YYYY",monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i={irp0001_table_header:[{document_number:"",status:"NEW",period_year:"2020",period_name:"Jan-20",period_from:"12/01/2020",period_to:"12/01/2020",policy_set_number:"1",policy_set_description:"POLICY SET DESCRIPTION",department_code:"DEPARTMENT CODE",department_desc:"DEPARTMENT DESC"}],irp0001_table_line:[{line_number:"1",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"INTERFACE",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"3",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"CONFIRMED",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"}],irp0010_table_header:[{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},{claim_header_id:"2",status:"INTERFACE",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"}],irp0010_form:{headers:{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},apply:{apply_company:[{company_id:55,company_name:"บริษัท เทเวศประกันภัย จำกัด (มหาชน)",claim_percent:"40",claim_amount:"140000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""},{company_id:54,company_name:"บริษัท ทิพยประกันภัย จำกัด (มหาชน)",claim_percent:"60",claim_amount:"160000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""}]}},irp0002_table_line:[{status:"NEW",line_number:"",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"111",unit_price:"2",line_amount:"222",coverage_amount:"230",calculate_days:"2",calculate_start_date:"12/01/2020",calculate_end_date:"15/01/2020"}]},l={setFirstLetterUpperCase:function(e){if(e&&null!=e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return e},setYearCE:function(e,t){var a="",n="month"===e?r.formatMonth:"date"===e?r.formatDate:"year"===e?r.formatYear:"";return t&&n?a=s()(s()(t,n).subtract(543,"years").toDate()).format(n):a},setYearBE:function(e,t){var a="",n="month"===e?r.formatMonth:"date"===e?r.formatDate:"year"===e?r.formatYear:"";return t&&n?a=s()(s()(t,n).add(543,"years").toDate()).format(n):a},showYearBE:function(e,t){var a="";if("month"===e&&t&&null!=t){var n=t.split("/"),s=+n[1]+543;return a="".concat(n[0],"/").concat(s)}if("date"===e&&t&&null!=t){var r=t.split("/"),i=+r[2]+543;return a="".concat(r[0],"/").concat(r[1],"/").concat(i)}return"year"===e&&t&&null!=t?+t+543:a},getTime:function(e){var t="";if(e&&null!=e){var a=e.split("/");return t=new Date("".concat(a[1],"/").concat(a[0],"/").concat(a[2])).getTime()}return t},calculateDate:function(e,t){var a="",n="";if(e&&t){var s=l.getTime(e),r=l.getTime(t);a=(n=Math.round(Math.abs((r-s)/864e5)))?n+1:n}return a},checkStatusInterface:function(e){return!(!e||"INTERFACE"!==e.toUpperCase())},checkStatusCancelled:function(e){return!(!e||"CANCELLED"!==e.toUpperCase())},isNullOrUndefined:function(e){return null==e?"":e},formatCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a="";if(e||0===e){a=parseFloat(e);var n=e.toString().split(".");if(void 0===n[1]){var s=parseInt(n[0]).toFixed(t).split(".")[1];return"".concat(parseInt(n[0]).toLocaleString(),".").concat(s)}if(0==a.toString().split(".")[0]){var r=a.toFixed(t).split(".")[1];return"".concat(a.toString().split(".")[0],".").concat(r)}var i=a.toFixed(t).split(".")[1],l="".concat(parseInt(n[0]).toLocaleString(),".").concat(i);return l}return a},formatfloat:function(e){return e.slice(0,e.indexOf(".")+1+2)},checkStatusConfirmed:function(e){if(e)return"CONFIRMED"===e.toUpperCase()},showPeriodNameFormat:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1])),n=a.getFullYear(),s=1===(a.getMonth()+1).toString().length?"0".concat(a.getMonth()+1):a.getMonth()+1;return"".concat(s,"/").concat(n+543)}return e},setValuePeriodNameFormat:function(e){var t="";if(e&&null!=e){var a=r.monthNameShort[e.getMonth()],n=(+e.getFullYear()-543).toString(),s=n.substr(n.length-2);t="".concat(a,"-").concat(s)}return t},checkStatusNew:function(e){if(e&&"NEW"===e.toUpperCase())return!0},calculateDateMomentTable:function(e){var t=r.formatDate,a="",n="",i="",l=e.start_calculate_date,o=e.end_calculate_date;if(l&&o){var c=helperDate.convertDate(l,t),d=helperDate.convertDate(o,t);c.then((function(r){a=s()(r,t),d.then((function(r){n=s()(r,t),i=n.diff(a,"days"),e.days=-1===Math.sign(i)?"":i+1}))}))}else e.days=""},covertFomatDateMoment:function(e,t){var a="date"===t?r.formatDate:"month"===t?r.formatMonth:"year"===t?r.formatYear:"";return e&&t?s()(e).format(a):""},setBudgetYearFromFieldStCalendar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",a=("date"===t?r.formatDate:"month"===t?r.formatMonth:"year"===t&&r.formatYear,"");if(e){var n=e.getFullYear(),i=s()({year:n,month:8,date:30}),l=s()({year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),o=l.isAfter(i)?1:0;return s()(s()({year:n+o,month:8,date:30}),r.formatDate).toDate()}return a},setLabelStatusAsset:function(e){return"Y"===e?"Active":"N"===e?"Inactive":""},setFotmatPeriodNameIsFullDate:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1]));return s()(a).format(r.formatDate)}return""},setFullDateIsDateCE:function(e){var t="";if(e){var a=s()(e).format(r.formatDate);return t=l.setYearCE("date",a)}return t},setLabelExpenseFlag:function(e){return"Y"==e?"Yes":"No"},setLabelVatRefund:function(e){return"Y"==e?"Yes":"No"},setDefaultActive:function(e){var t=$(".".concat(e)).is(":checked");$(".".concat(e)).prop("checked",!t)},setDefaultEndDateIsLastDateOfMonth:function(e){var t=r.formatDate;if(e){var a=s()(e).endOf("month");return s()(a).format(t)}return""}}},6725:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(23645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,".el-select-dropdown{z-index:9999!important}",""]);const r=s},34698:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(23645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,"td[data-v-0e05d5ca],th[data-v-0e05d5ca]{padding:.25rem}th[data-v-0e05d5ca]{background:#fff;position:-webkit-sticky;position:sticky;top:0}.highlight[data-v-0e05d5ca]{cursor:pointer;background-color:#d4edda}.mouse-over[data-v-0e05d5ca]:hover{background-color:#d4edda!important}",""]);const r=s},19258:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(23645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,".text-right[data-v-dee02e12]{text-align:right}",""]);const r=s},35194:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>le});var n=a(87757),s=a.n(n);const r={name:"car-renew-type",data:function(){return{loading:!1,data:this.value,renewTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","disabled","sizeSmall"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/renew-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.renewTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){},changeRenewType:function(e){this.$emit("renewType",e)}},watch:{value:function(e){this.data=e}},created:function(){this.getLovGasStationType()}};var i=a(51900);const l=(0,i.Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,loading:e.loading,placeholder:"ประเภทการต่ออายุ",disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeRenewType},nativeOn:{click:function(t){return e.click()}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.renewTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:""+e.description,value:e.description}})})),1)],1)}),[],!1,null,null,null).exports;const o={props:["placeholder","attrName","setData"],data:function(){return{rows:[],loading:!1,value:""}},mounted:function(){this.value=this.setData,this.getDataRows(this.value)},watch:{setData:function(){this.value=this.setData,this.getDataRows(this.value)},errors:{handler:function(e){console.log(e),e.department_code?this.setError("department_code"):this.resetError("department_code")},deep:!0}},methods:{getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:{keyword:e}}).then((function(e){var a=e.data.data;t.rows=a,t.loading=!1})).catch((function(e){swal("มีข้อผิดพลาด",e,"error")}))},onChange:function(e){this.$emit("change-lov",{department_code:e})},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""}}};const c=(0,i.Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{ref:"department_code",staticStyle:{width:"100%"},attrs:{placeholder:e.placeholder,"remote-method":e.getDataRows,loading:e.loading,remote:"",clearable:"",filterable:""},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.department_code+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports;const d={name:"car-lov-group",data:function(){return{loading:!1,result:this.value,list:[]}},props:["value","popperBody"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/group-code",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getLovGasStationType()},handleChange:function(e){this.$emit("groupType",e)}},watch:{value:function(e){this.result=e}}};const u=(0,i.Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:"กลุ่ม",loading:e.loading,"popper-append-to-body":e.popperBody},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.meaning,value:e.group_code}})})),1)],1)}),[],!1,null,null,null).exports;const m={name:"car-lov-assets",props:["value","placeholder","disabled","sizeSmall"],data:function(){return{loading:!1,result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large"}},methods:{getAssetStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/asset-status",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getAssetStatus()},handleChange:function(e){this.$emit("assetStaus",e)}},watch:{value:function(e){this.result=e}}};const _=(0,i.Z)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,remote:"",clearable:!0,loading:e.loading,filterable:"",size:e.sizeDefault,disabled:e.disabled},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.flex_value_meaning}})})),1)],1)}),[],!1,null,null,null).exports;const p={name:"gas-station-lov-status",data:function(){return{loading:!1,result:this.value,list:[]}},props:["value","placeholder"],methods:{getLovStatus:function(){var e=this;e.loading=!0,axios.get("/ir/ajax/lov/status").then((function(t){var a=t.data;e.loading=!1,e.list=a})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getLovStatus()},handleChange:function(e){this.$emit("status",e)}}};const v=(0,i.Z)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:"large",placeholder:e.placeholder,loading:e.loading},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.meaning,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;const f={name:"car-lov-vehicles",data:function(){return{result:this.value,list:[],sizeDefault:this.sizeSmall?"small":"large",loading:!1}},props:["value","popperBody","sizeSmall","disabled","paramsQuery"],methods:{getLovVehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""};this.loading=!0;var t=this;axios.get("/ir/ajax/lov/vehicle-license-plate",{params:e}).then((function(e){var a=e.data;t.list=a.data,t.loading=!1})).catch((function(e){swal("Error",e,"error")}))},click:function(e){e.target.value?this.getLovVehicles({keyword:e.target.value}):this.getLovVehicles(this.paramasQuery)},handleChange:function(e){var t=this.list.find((function(t){return t.license_plate===e}));this.$emit("vehicle",t)},onclick:function(){this.getLovVehicles({renew_type:""})}},watch:{value:function(e){this.result=e},"paramsQuery.license_plate":function(e){this.getLovVehicles(this.paramsQuery),this.paramsQuery.renew_type?this.getLovVehicles(this.paramsQuery):this.getLovVehicles({renew_type:""})},"paramsQuery.renew_type":function(e){this.getLovVehicles(this.paramsQuery)},"paramsQuery.group":function(e){this.getLovVehicles(this.paramsQuery)}}};const h=(0,i.Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,placeholder:"ทะเบียนรถยนต์",disabled:e.disabled,"popper-append-to-body":e.popperBody,loading:e.loading},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.license_plate,value:e.license_plate}})})),1)],1)}),[],!1,null,null,null).exports;var g=a(95070);const b={name:"car-renew-type",data:function(){return{loading:!1,data:this.value,renewTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","disabled","sizeSmall"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/renew-type",{params:e}).then((function(e){var a=e.data;console.log("--renew-type---",a),t.loading=!1,t.renewTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){},changeRenewType:function(e){this.$emit("renewType",e)}},watch:{value:function(e){this.data=e}},created:function(){this.getLovGasStationType()}};(0,i.Z)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,loading:e.loading,placeholder:"ประเภทการต่ออายุ",disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeRenewType},nativeOn:{click:function(t){return e.click()}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.renewTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:""+e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var y=a(30381),w=a.n(y);const C={name:"ir-stock-yearly-modal-fetch",data:function(){return{fetch:{year:"2565",renew_type:"",group:"",vehicle:"",department_from:"",department_to:"",date_from:"",date_to:"",status_asset:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}]},dateFormat:"YYYY",showLoading:!1}},props:["paramsQueryLicensePlate"],methods:{clickSearch:function(){var e=this;console.log("--clicksearch--",this.fetch),this.$refs.cars_modal.validate((function(t){if(!t)return!1;e.getDataRows()}))},clickClear:function(){this.resetFields()},getDataRows:function(){var e=this,t=this;t.showLoading=!0;var a={year:t.fetch.year,renew_type:t.fetch.renew_type,group_code:t.fetch.group,license_plate:t.fetch.vehicle,department_from:t.fetch.department_from,department_to:t.fetch.department_to,asset_status:t.fetch.status_asset,date_from:t.fetch.date_from,date_to:t.fetch.date_to};console.log("--params--",a),axios.get("/ir/ajax/cars/fetch",{params:a}).then((function(a){var n=a.data;t.showLoading=!1,e.$emit("fetch-table-header",n.data),$("#modal_stock_yearly_fetch").modal("hide")})).catch((function(e){swal({title:"Error",text:e,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})}))},resetFields:function(){this.$refs.cars_modal.resetFields()},receivedDatefrom:function(e){e?(this.fetch.date_from=w()(e).format("DD/MM/YYYY"),this.$refs.cars_modal.fields.find((function(e){return"date_from"==e.prop})).clearValidate()):(this.fetch.date_from="",this.$refs.cars_modal.validateField("date_from"))},receivedDateto:function(e){e?(this.fetch.date_to=w()(e).format("DD/MM/YYYY"),this.$refs.cars_modal.fields.find((function(e){return"date_to"==e.prop})).clearValidate()):(this.fetch.date_to="",this.$refs.cars_modal.validateField("date_to"))},receivedYear:function(e){var t=this;e?(t.fetch.year=w()(e).format(t.dateFormat),this.$refs.cars_modal.fields.find((function(e){return"year"==e.prop})).clearValidate()):(t.fetch.year="",this.$refs.cars_modal.validateField("year"))},receivedRenewType:function(e){var t=this;console.log("--receivedRenewType--\x3e",e),e?(t.fetch.renew_type=e,t.paramsQueryLicensePlate.renew_type=e):(t.fetch.renew_type="",t.paramsQueryLicensePlate.renew_type="")},receivedGroupType:function(e){var t=this;e?(t.fetch.group=e,t.paramsQueryLicensePlate.group=e):(t.fetch.group="",t.paramsQueryLicensePlate.group="")},receivedLicensePlate:function(e){console.log("---receivedLicensePlate---\x3e",e),this.fetch.vehicle=e?e.license_plate:""},receivedStartDepartment:function(e){this.fetch.department_from=e?e.department_code:""},receivedEndDepartment:function(e){this.fetch.department_to=e?e.department_code:""}},components:{lovRenewTypedesc:l,lovGroup:u,lovVehicle:h,lovDepartment:c}};const x=(0,i.Z)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_stock_yearly_fetch",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[e._m(0),e._v(" "),a("el-form",{ref:"cars_modal",attrs:{model:e.fetch,rules:e.rules}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ปี *")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"year",rules:e.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.year,name:"input_year",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year",popperBody:!1},on:{dateWasSelected:function(t){return e.receivedYear.apply(void 0,arguments)}},model:{value:e.fetch.year,callback:function(t){e.$set(e.fetch,"year",t)},expression:"fetch.year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ประเภทการต่ออายุ")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"renew_type",attrs:{prop:"renew_type"}},[a("lov-renew-typedesc",{attrs:{value:e.fetch.renew_type,name:"renew_type",sizeSmall:!1,popperBody:!1},on:{renewType:e.receivedRenewType},model:{value:e.fetch.renew_type,callback:function(t){e.$set(e.fetch,"renew_type",t)},expression:"fetch.renew_type"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("กลุ่ม")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"group",attrs:{prop:"group"}},[a("lov-group",{attrs:{value:e.fetch.group,name:"group",popperBody:!1},on:{groupType:e.receivedGroupType},model:{value:e.fetch.group,callback:function(t){e.$set(e.fetch,"group",t)},expression:"fetch.group"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ทะเบียนรถยนต์")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"vehicle",attrs:{prop:"vehicle"}},[a("lov-vehicle",{attrs:{value:e.fetch.vehicle,name:"vehicle",popperBody:!1,paramsQuery:e.paramsQueryLicensePlate},on:{vehicle:e.receivedLicensePlate},model:{value:e.fetch.vehicle,callback:function(t){e.$set(e.fetch,"vehicle",t)},expression:"fetch.vehicle"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่รหัสหน่วยงาน")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_from",attrs:{prop:"department_from"}},[a("lov-department",{attrs:{value:e.fetch.department_from,placeholder:"ตั้งแต่รหัสหน่วยงาน",name:"department_from",sizeSmall:!1,popperBody:!1},on:{department:e.receivedStartDepartment},model:{value:e.fetch.department_from,callback:function(t){e.$set(e.fetch,"department_from",t)},expression:"fetch.department_from"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"department_to",attrs:{prop:"department_to"}},[a("lov-department",{attrs:{value:e.fetch.department_to,placeholder:"ถึง",sizeSmall:!1,name:"department_to",popperBody:!1},on:{department:e.receivedEndDepartment},model:{value:e.fetch.department_to,callback:function(t){e.$set(e.fetch,"department_to",t)},expression:"fetch.department_to"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่วันที่สิ้นอายุประกัน")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"date_from",attrs:{prop:"date_from"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.date_from,format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่",pType:"date",popperBody:!1},on:{dateWasSelected:e.receivedDatefrom},model:{value:e.fetch.date_from,callback:function(t){e.$set(e.fetch,"date_from",t)},expression:"fetch.date_from"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-5 col-md-6 el_field"},[a("el-form-item",{ref:"dete_to",attrs:{prop:"date_to"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.fetch.date_to,format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่",pType:"date",popperBody:!1},on:{dateWasSelected:e.receivedDateto},model:{value:e.fetch.date_to,callback:function(t){e.$set(e.fetch,"date_to",t)},expression:"fetch.date_to"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.clickSearch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n           ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n           ")])])])],1)])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("การดึงข้อมูล")])])}],!1,null,null,null).exports;function S(e,t,a,n,s,r,i){try{var l=e[r](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,s)}const T={components:{lovRenewTypedesc:l,lovDepartment:c,lovGroup:u,lovAssetStatus:_,lovStatus:v,lovVehicle:h,yearInput:g.Z,modalFetch:x},name:"index-header-gas-station",data:function(){return{header:{year:"",renew_type:"",group_code:"",license_plate:"",department_from:"",department_to:"",status:""},oilTypeList:[],groupCodeList:[],statusList:[],loading:!1,dateFormat:"YYYY",showLoading:!1}},props:["paramsQueryLicensePlate"],methods:{receivedRenewType:function(e){this.header.renew_type=e||""},receivedGroupType:function(e){this.header.group_code=e||""},receivedLicensePlate:function(e){this.header.license_plate=e?e.license_plate:""},receivedStartDepartment:function(e){this.header.department_from=e.department_code},receivedEndDepartment:function(e){this.header.department_to=e.department_code},receivedStatus:function(e){this.header.status=e||""},Search:function(){var e=this;e.loading=!0,e.$refs.searchCars.validate((function(t){if(!t)return!1;e.getCars()}))},Cancel:function(){window.location.reload()},getStYear:function(e){this.header.year=e.value},getCars:function(){var e=this,t=this;this.showLoading=!0,axios.get("/ir/ajax/cars",{params:t.header}).then(function(){var a,n=(a=s().mark((function a(n){var r;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.data,console.log(r.data),e.showLoading=!1,t.loading=!1,a.next=6,e.$emit("dataSearch",[]);case 6:return a.next=8,e.$emit("dataSearch",r.data);case 8:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,s){var r=a.apply(e,t);function i(e){S(r,n,s,i,l,"next",e)}function l(e){S(r,n,s,i,l,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()).catch((function(e){t.loading=!1,swal({title:"Error",text:e,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})}))},receivedYear:function(e){var t=this;t.header.year=e&&"Invalid date"!=w()(e).format(t.dateFormat)?w()(e).format(t.dateFormat):""},receivedAssetStatus:function(e){this.header.status_asset=e||""},clickFetch:function(){this.$refs.modal_fetch.resetFields(),this.$emit("set-params-license-plate",{renew_type:null,license_plate:null,group:null})},fetchTableHeader:function(e){this.$emit("fetch-show-table-header",e.data)}},mounted:function(){}};const N=(0,i.Z)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"mt-3"},[a("el-form",{ref:"searchCars",attrs:{model:e.header,loading:e.loading}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ปี")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",{attrs:{prop:"year"}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%"},attrs:{value:e.header.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",pType:"year"},on:{dateWasSelected:function(t){return e.receivedYear.apply(void 0,arguments)}},model:{value:e.header.year,callback:function(t){e.$set(e.header,"year",t)},expression:"header.year"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ประเภทการต่ออายุประกันภัย")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",{attrs:{prop:"renew_type"}},[a("lov-renew-typedesc",{on:{renewType:e.receivedRenewType},model:{value:e.header.renew_type,callback:function(t){e.$set(e.header,"renew_type",t)},expression:"header.renew_type"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("กลุ่ม")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-group",{on:{groupType:e.receivedGroupType},model:{value:e.header.group_code,callback:function(t){e.$set(e.header,"group_code",t)},expression:"header.group_code"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ทะเบียนรถยนต์")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-vehicle",{on:{vehicle:e.receivedLicensePlate},model:{value:e.header.license_plate,callback:function(t){e.$set(e.header,"license_plate",t)},expression:"header.license_plate"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ตั้งแต่รหัสหน่วยงาน")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ตั้งแต่รหัสหน่วยงาน",attrName:"department_from","set-data":e.header.start_department},on:{"change-lov":e.receivedStartDepartment}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ถึงรหัสหน่วยงาน",attrName:"department_to","set-data":e.header.end_department},on:{"change-lov":e.receivedEndDepartment}})],1)],1)])]),e._v(" "),a("div",{staticClass:"col-xl-7 col-lg-7 col-md-8 col-sm-12 col-xs-12 offset-md-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-5 col-md-4 col-sm-12 col-xs-12 col-form-label lable_align"},[a("strong",[e._v("สถานะ")])]),e._v(" "),a("div",{staticClass:"col-lg-7 col-md-8 col-sm-12 col-xs-12 align-item-center"},[a("el-form-item",[a("lov-status",{attrs:{placeholder:"สถานะ"},on:{status:e.receivedStatus},model:{value:e.header.status,callback:function(t){e.$set(e.header,"status",t)},expression:"header.status"}})],1)],1)])])]),e._v(" "),a("div",{staticClass:"row align-items-center justify-content-end d-flex mr-2"},[a("button",{staticClass:"btn btn-default m-1",attrs:{type:"button"},on:{click:function(t){return e.Search()}}},[a("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา")]),e._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#modal_stock_yearly_fetch"},on:{click:function(t){return e.clickFetch()}}},[a("i",{staticClass:"fa fa-database"}),e._v(" ดึงข้อมูล\n      ")]),e._v(" "),a("button",{staticClass:"btn btn-warning m-1",attrs:{type:"button"},on:{click:function(t){return e.Cancel()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต")])])]),e._v(" "),a("modal-fetch",{ref:"modal_fetch",attrs:{paramsQueryLicensePlate:e.paramsQueryLicensePlate},on:{"fetch-table-header":e.fetchTableHeader}})],1)}),[],!1,null,null,null).exports;function k(e,t,a,n,s,r,i){try{var l=e[r](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,s)}const D={props:["setName","setData","setParent","error","defaultValueSetName","setOptions"],data:function(){return{options:[],value:"",loading:!1}},mounted:function(){this.value=this.setData,this.getValueSetList(this.value),this.changeCoa()},watch:{setData:function(){this.value=this.setData,this.getValueSetList(this.value),this.options=this.setOptions},error:function(){var e=this.$refs.input.$refs.reference.$refs.input;e.style="",!this.error||""!==this.value&&null!==this.value||(e.style="border: 1px solid red;")}},methods:{getValueSetList:function(e){var t,a=this;return(t=s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/ir/ajax/vehicles/get-coa",{params:{flex_value_set_name:a.setName,flex_value_set_data:a.value,flex_value_parent:a.setParent,query:e}}).then((function(e){a.options=e.data})).catch((function(e){console.log(e)})).then((function(){a.loading=!1}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(e){k(r,n,s,i,l,"next",e)}function l(e){k(r,n,s,i,l,"throw",e)}i(void 0)}))})()},changeCoa:function(){this.setName==this.defaultValueSetName.segment1&&this.$emit("coa",{name:this.setName,segment1:this.value}),this.setName==this.defaultValueSetName.segment2&&this.$emit("coa",{name:this.setName,segment2:this.value}),this.setName==this.defaultValueSetName.segment3&&this.$emit("coa",{name:this.setName,segment3:this.value}),this.setName==this.defaultValueSetName.segment4&&this.$emit("coa",{name:this.setName,segment4:this.value}),this.setName==this.defaultValueSetName.segment5&&this.$emit("coa",{name:this.setName,segment5:this.value}),this.setName==this.defaultValueSetName.segment6&&this.$emit("coa",{name:this.setName,segment6:this.value}),this.setName==this.defaultValueSetName.segment7&&this.$emit("coa",{name:this.setName,segment7:this.value}),this.setName==this.defaultValueSetName.segment8&&this.$emit("coa",{name:this.setName,segment8:this.value}),this.setName==this.defaultValueSetName.segment9&&this.$emit("coa",{name:this.setName,segment9:this.value}),this.setName==this.defaultValueSetName.segment10&&this.$emit("coa",{name:this.setName,segment10:this.value}),this.setName==this.defaultValueSetName.segment11&&this.$emit("coa",{name:this.setName,segment11:this.value}),this.setName==this.defaultValueSetName.segment12&&this.$emit("coa",{name:this.setName,segment12:this.value})}}};var E=a(93379),O=a.n(E),V=a(6725),L={insert:"head",singleton:!1};O()(V.Z,L);V.Z.locals;function A(e,t,a,n,s,r,i){try{var l=e[r](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,s)}const I={components:{coaComponent:(0,i.Z)(D,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{ref:"input",staticClass:"w-100 el-select-input-segment",staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Please enter a value","remote-method":e.getValueSetList,loading:e.loading,size:"small"},on:{change:e.changeCoa},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.flex_value+" : "+e.description,value:e.flex_value}})})),1)],1)}),[],!1,null,null,null).exports,lovTypeCost:a(8921).Z},props:["coa","typeCost","defaultValueSetName","disabled","index"],data:function(){return{loading:!1,segment1:"",segment2:"",segment3:"",segment4:"",segment5:"",segment6:"",segment7:"",segment8:"",segment9:"",segment10:"",segment11:"",segment12:"",account:"",description:"",coaEnter:"",errors:{segmentOverride:!1,segment1:!1,segment2:!1,segment3:!1,segment4:!1,segment5:!1,segment6:!1,segment7:!1,segment8:!1,segment9:!1,segment10:!1,segment11:!1,segment12:!1},type_cost:this.typeCost,type_cost_id:""}},computed:{coaVehicle:function(){this.account=this.account?this.account:this.coa,this.getCoaVehicle()}},watch:{errors:{handler:function(e){e.segmentOverride?this.setError("segmentOverride"):this.resetError("segmentOverride")},deep:!0},coaVehicle:function(e){return e}},methods:{decimal:function(e){return Number(e).toLocaleString(void 0,{minimumFractionDigits:2})},getCoaVehicle:function(){var e=this;if(e.account){var t=e.account.split(".");return e.segment1=t[0],e.segment2=t[1],e.segment3=t[2],e.segment4=t[3],e.segment5=t[4],e.segment6=t[5],e.segment7=t[6],e.segment8=t[7],e.segment9=t[8],e.segment10=t[9],e.segment11=t[10],void(e.segment12=t[11])}},calEncumbrance:function(e,t){var a=0;this.encumbrances.length>0&&this.encumbrances.filter((function(e){e.period_name==t&&(a=e.encumbrance_amount)}));var n=Number(e)+Number(a);return Number(n).toLocaleString(void 0,{minimumFractionDigits:2})},calAvaliable:function(e,t){var a=0;this.encumbrances.length>0&&this.encumbrances.filter((function(e){e.period_name==t&&(a=e.encumbrance_amount)}));var n=Number(e)-Number(a);return Number(n).toLocaleString(void 0,{minimumFractionDigits:2})},encumbranceTotal:function(e,t){var a=Number(e)+Number(t);return Number(a).toLocaleString(void 0,{minimumFractionDigits:2})},avaliableTotal:function(e,t){var a=Number(e)-Number(t);return Number(a).toLocaleString(void 0,{minimumFractionDigits:2})},changeAdjPeriod:function(){this.adj_period=w()(this.adj_period).format("YYYY")},selAdjPeriod:function(){0==this.adj_flag&&(this.period=w()().format("MMM-YY"))},updateCoa:function(e){e.name==this.defaultValueSetName.segment1&&(this.segment1=e.segment1),e.name==this.defaultValueSetName.segment2&&(this.segment2=e.segment2),e.name==this.defaultValueSetName.segment3&&(this.segment3=e.segment3),e.name==this.defaultValueSetName.segment4&&(this.segment4=e.segment4),e.name==this.defaultValueSetName.segment5&&(this.segment5=e.segment5),e.name==this.defaultValueSetName.segment6&&(this.segment6=e.segment6),e.name==this.defaultValueSetName.segment7&&(this.segment7=e.segment7),e.name==this.defaultValueSetName.segment8&&(this.segment8=e.segment8),e.name==this.defaultValueSetName.segment9&&(this.segment9=e.segment9),e.name==this.defaultValueSetName.segment10&&(this.segment10=e.segment10),e.name==this.defaultValueSetName.segment11&&(this.segment11=e.segment11),e.name==this.defaultValueSetName.segment12&&(this.segment12=e.segment12)},accountConfirm:function(){var e,t=this;return(e=s().mark((function e(){var a,n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,$("#tb-segment-override"),n=$("#modal_account".concat(a.index)),i=!0,a.errors.segment1=!1,a.errors.segment2=!1,a.errors.segment3=!1,a.errors.segment4=!1,a.errors.segment5=!1,a.errors.segment6=!1,a.errors.segment7=!1,a.errors.segment8=!1,a.errors.segment9=!1,a.errors.segment10=!1,a.errors.segment11=!1,a.errors.segment12=!1,a.errors.segmentOverride=!1,$(n).find("div[id='el_explode_acc_1']").html(""),$(n).find("div[id='el_explode_acc_2']").html(""),$(n).find("div[id='el_explode_acc_3']").html(""),$(n).find("div[id='el_explode_acc_4']").html(""),$(n).find("div[id='el_explode_acc_5']").html(""),$(n).find("div[id='el_explode_acc_6']").html(""),$(n).find("div[id='el_explode_acc_7']").html(""),$(n).find("div[id='el_explode_acc_8']").html(""),$(n).find("div[id='el_explode_acc_9']").html(""),$(n).find("div[id='el_explode_acc_10']").html(""),$(n).find("div[id='el_explode_acc_11']").html(""),$(n).find("div[id='el_explode_acc_12']").html(""),$(n).find("div[id='el_explode_segment']").html(""),""!=a.segment1&&null!=a.segment1||(a.errors.segment1=!0,i=!1,r="กรุณาระบุ Company",$(n).find("div[id='el_explode_acc_1']").html(r)),""!=a.segment2&&null!=a.segment2||(a.errors.segment2=!0,i=!1,r="กรุณาระบุ EVM",$(n).find("div[id='el_explode_acc_2']").html(r)),""!=a.segment3&&null!=a.segment3||(a.errors.segment3=!0,i=!1,r="กรุณาระบุ Department",$(n).find("div[id='el_explode_acc_3']").html(r)),""!=a.segment4&&null!=a.segment4||(a.errors.segment4=!0,i=!1,r="กรุณาระบุ Cost Center",$(n).find("div[id='el_explode_acc_4']").html(r)),""!=a.segment5&&null!=a.segment5||(a.errors.segment5=!0,i=!1,r="กรุณาระบุ Budget Year",$(n).find("div[id='el_explode_acc_5']").html(r)),""!=a.segment6&&null!=a.segment6||(a.errors.segment6=!0,i=!1,r="กรุณาระบุ Budget Type",$(n).find("div[id='el_explode_acc_6']").html(r)),""!=a.segment7&&null!=a.segment7||(a.errors.segment7=!0,i=!1,r="กรุณาระบุ Budget Detail",$(n).find("div[id='el_explode_acc_7']").html(r)),""!=a.segment8&&null!=a.segment8||(a.errors.segment8=!0,i=!1,r="กรุณาระบุ Budget Reason",$(n).find("div[id='el_explode_acc_8']").html(r)),""!=a.segment9&&null!=a.segment9||(a.errors.segment9=!0,i=!1,r="กรุณาระบุ Main Account",$(n).find("div[id='el_explode_acc_9']").html(r)),""!=a.segment10&&null!=a.segment10||(a.errors.segment10=!0,i=!1,r="กรุณาระบุ Sub Account",$(n).find("div[id='el_explode_acc_10']").html(r)),""!=a.segment11&&null!=a.segment11||(a.errors.segment11=!0,i=!1,r="กรุณาระบุ Reserved1",$(n).find("div[id='el_explode_acc_11']").html(r)),""!=a.segment12&&null!=a.segment12||(a.errors.segment12=!0,i=!1,r="กรุณาระบุ Reserved2",$(n).find("div[id='el_explode_acc_12']").html(r)),i){e.next=44;break}return e.abrupt("return");case 44:return""!=a.segment1&&null!=a.segment1||""!=a.segment2&&null!=a.segment2||""!=a.segment3&&null!=a.segment3||""!=a.segment4&&null!=a.segment4||""!=a.segment5&&null!=a.segment5||""!=a.segment6&&null!=a.segment6||""!=a.segment7&&null!=a.segment7||""!=a.segment8&&null!=a.segment8||""!=a.segment9&&null!=a.segment9||""!=a.segment10&&null!=a.segment10||""!=a.segment11&&null!=a.segment11||""!=a.segment12&&null!=a.segment12?a.account=a.segment1+"."+a.segment2+"."+a.segment3+"."+a.segment4+"."+a.segment5+"."+a.segment6+"."+a.segment7+"."+a.segment8+"."+a.segment9+"."+a.segment10+"."+a.segment11+"."+a.segment12:a.account="",e.next=47,axios.get("/ir/ajax/vehicles/get-coa-desc",{params:{coa:a.account}}).then((function(e){console.log(e.data.desc),a.description=e.data.desc})).catch((function(e){console.log(e)}));case 47:a.$emit("resCoa",{type_cost_id:a.type_cost_id,code_combine:a.account,description:a.description,index:a.index}),$("#modal_account".concat(a.index)).modal("hide");case 49:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){A(r,n,s,i,l,"next",e)}function l(e){A(r,n,s,i,l,"throw",e)}i(void 0)}))})()},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""},enterAccSegment:function(){var e=$("#modal_account".concat(vm.index));if(this.errors.segmentOverride=!1,$(e).find("div[id='el_explode_segment']").html(""),this.account=this.coaEnter,this.coaEnter){var t=this.coaEnter.split(".");this.segment1=t[0],this.segment2=t[1],this.segment3=t[2],this.segment4=t[3],this.segment5=t[4],this.segment6=t[5],this.segment7=t[6],this.segment8=t[7],this.segment9=t[8],this.segment10=t[9],this.segment11=t[10],this.segment12=t[11]}},clearAccSegment:function(){var e=$("#modal_account".concat(vm.index));this.errors.segmentOverride=!1,$(e).find("div[id='el_explode_segment']").html(""),this.account_="",this.account_to="",this.coaEnter="",this.segment1="",this.segment2="",this.segment3="",this.segment4="",this.segment5="",this.segment6="",this.segment7="",this.segment8="",this.segment9="",this.segment10="",this.segment11="",this.segment12=""},getValueAccount:function(e){this.account=e.account,this.description=e.description,this.type_cost=e.type_cost,this.type_cost_id=e.type_cost_id,this.getCoaVehicle()}}};const R=(0,i.Z)(I,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{prop:"account_number"}},[a("div",{staticStyle:{"padding-top":"3px"}},[a("el-input",{staticClass:"readonly",attrs:{placeholder:"รหัสบัญชี",size:"small",name:"account_number"},model:{value:e.coa,callback:function(t){e.coa=t},expression:"coa"}},[a("el-button",{attrs:{slot:"append","data-toggle":"modal","data-target":"#modal_account"+e.index},slot:"append"},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_account"+e.index,"aria-hidden":"true","data-backdrop":"static","aria-labelledby":"myModalLabel"}},[a("div",{staticClass:"modal-dialog modal-md"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body pb-0"},[a("h3",{staticClass:"text-left mb-3 tw-text-grey-darknes"},[e._v(" ข้อมูลรหัสบัญชี (Account Mapping) ")]),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"row text-center"},[a("div",{staticClass:"col-lg-8 col-md-8 col-sm-6 col-xs-6 mt-2"},[a("el-input",{ref:"segmentOverride",staticStyle:{width:"100%"},attrs:{name:"search[segment_override]",placeholder:"Chart of Accounts",size:"small",autocomplete:"off"},model:{value:e.coaEnter,callback:function(t){e.coaEnter=t},expression:"coaEnter"}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_segment"}})],1),e._v(" "),a("div",{staticClass:"col-lg-4 col-md-4 col-sm-2 col-xs-2 mt-2"},[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.enterAccSegment(t)}}},[e._v(" ดำเนินการ ")]),e._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(t){return t.preventDefault(),e.clearAccSegment(t)}}},[e._v(" รีเซ็ต ")])])]),e._v(" "),a("div",{staticClass:"hr-line-dashed"}),e._v(" "),a("div",{staticClass:"row mt-2"},[a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" ประเภทค่าใช้จ่าย ")]),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("lov-type-cost",{attrs:{placeholder:"ประเภทค่าใช้จ่าย",popperBody:!1,name:"type_cost",disabled:e.disabled},on:{"split-account":e.getValueAccount},model:{value:e.type_cost_id,callback:function(t){e.type_cost_id=t},expression:"type_cost_id"}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_type_cost"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment1",attrs:{"set-name":e.defaultValueSetName.segment1,"set-data":e.segment1,placeholder:"Company","default-value-set-name":e.defaultValueSetName,error:e.errors.segment1},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_1"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(1),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment2",attrs:{"set-name":e.defaultValueSetName.segment2,"set-data":e.segment2,placeholder:"EVM","default-value-set-name":e.defaultValueSetName,error:e.errors.segment2},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_2"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(2),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment3",attrs:{"set-name":e.defaultValueSetName.segment3,"set-data":e.segment3,placeholder:"Department","default-value-set-name":e.defaultValueSetName,error:e.errors.segment3},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_3"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(3),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment4",attrs:{"set-name":e.defaultValueSetName.segment4,"set-data":e.segment4,"set-parent":e.segment3,placeholder:"Cost Center","default-value-set-name":e.defaultValueSetName,error:e.errors.segment4},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_4"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(4),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment5",attrs:{"set-name":e.defaultValueSetName.segment5,"set-data":e.segment5,placeholder:"BUDGET YEAR","default-value-set-name":e.defaultValueSetName,error:e.errors.segment5},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_5"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(5),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment6",attrs:{"set-name":e.defaultValueSetName.segment6,"set-data":e.segment6,placeholder:"BUDGET TYPE","default-value-set-name":e.defaultValueSetName,error:e.errors.segment6},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_6"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(6),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment7",attrs:{"set-name":e.defaultValueSetName.segment7,"set-data":e.segment7,"set-parent":e.segment6,placeholder:"BUDGET DETAIL","default-value-set-name":e.defaultValueSetName,error:e.errors.segment7},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_7"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(7),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment8",attrs:{"set-name":e.defaultValueSetName.segment8,"set-data":e.segment8,placeholder:"BUDGET REASON","default-value-set-name":e.defaultValueSetName,error:e.errors.segment8},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_8"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(8),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment9",attrs:{"set-name":e.defaultValueSetName.segment9,"set-data":e.segment9,placeholder:"MAIN ACCOUNT","default-value-set-name":e.defaultValueSetName,error:e.errors.segment9},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_9"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(9),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment10",attrs:{"set-name":e.defaultValueSetName.segment10,"set-data":e.segment10,"set-parent":e.segment9,placeholder:"SUB ACCOUNT","default-value-set-name":e.defaultValueSetName,error:e.errors.segment10},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_10"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(10),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment11",attrs:{"set-name":e.defaultValueSetName.segment11,"set-data":e.segment11,placeholder:"RESERVED 1","default-value-set-name":e.defaultValueSetName,error:e.errors.segment11},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_11"}})],1)]),e._v(" "),a("div",{staticClass:"row mt-2"},[e._m(11),e._v(" "),a("div",{staticClass:"col-md-8 el_field"},[a("coa-component",{ref:"segment12",attrs:{"set-name":e.defaultValueSetName.segment12,"set-data":e.segment12,placeholder:"RESERVED 2","default-value-set-name":e.defaultValueSetName,error:e.errors.segment12},on:{coa:e.updateCoa}}),e._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_acc_12"}})],1)])]),e._v(" "),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"private",void 0,t.key,void 0)?null:e.accountConfirm(t)}}},[a("i",{staticClass:"fa fa-check"}),e._v(" ตกลง\n                    ")]),e._v(" "),e._m(12)])])])])],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" COMPANY "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" EVM "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" DEPARTMENT "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" COST CENTER "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" BUDGET YEAR "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" BUDGET TYPE "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" BUDGET DETAIL "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" BUDGET REASON "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" MAIN ACCOUNT "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" SUB ACCOUNT "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" RESERVED1 "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"col-md-4 col-form-label lable_align"},[e._v(" RESERVED2 "),a("span",{staticClass:"text-danger"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n                    ")])}],!1,null,null,null).exports;var Y=a(21341),F=a(62783);const M={name:"gas-station-lov-company",data:function(){return{loading:!1,result:this.value?parseInt(this.value):"",list:[]}},props:["value","placeholder","disabled","size","isSave"],methods:{getCompany:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/companies",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.list=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){this.getCompany()},handleChange:function(e){var t="",a="",n="";if(e)for(var s in this.list){var r=this.list[s];r.company_id===+e&&(t=r.company_number,a=r.company_name,n=e)}else t="",a="",n="";var i={code:t,desc:a,id:n};this.$emit("company",i)}},watch:{value:function(e){this.result=e?+e:e}}};const P=(0,i.Z)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,remote:"",clearable:!0,loading:e.loading,filterable:"",size:"small",disabled:e.disabled},on:{change:e.handleChange},nativeOn:{click:function(t){return e.click()}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_number+": "+e.company_name,value:e.company_id}})})),1)],1)}),[],!1,null,null,null).exports;const z={name:"car-renew-type",data:function(){return{loading:!1,data:this.value,renewTypeList:[],sizeDefault:this.sizeSmall?"small":"large"}},props:["value","popperBody","disabled","sizeSmall"],methods:{getLovGasStationType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""},t=this;t.loading=!0,axios.get("/ir/ajax/lov/renew-type",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.renewTypeList=a.data})).catch((function(e){swal("Error",e,"error")}))},click:function(){},changeRenewType:function(e){this.$emit("renewType",e)}},watch:{value:function(e){this.data=e}},created:function(){this.getLovGasStationType()}};const B=(0,i.Z)(z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",clearable:!0,size:e.sizeDefault,loading:e.loading,placeholder:"ประเภทการต่ออายุ",disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeRenewType},nativeOn:{click:function(t){return e.click()}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.renewTypeList,(function(e){return a("el-option",{key:e.rn,attrs:{label:e.lookup_code+":"+e.description,value:e.lookup_code+":"+e.meaning}})})),1)],1)}),[],!1,null,null,null).exports;function U(e,t,a,n,s,r,i){try{var l=e[r](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,s)}function Z(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){U(r,n,s,i,l,"next",e)}function l(e){U(r,n,s,i,l,"throw",e)}i(void 0)}))}}var j;const q={props:["setName","setData","placeholder","disabled","index"],data:function(){return{options:[],value:"",loading:!1}},mounted:function(){this.value=this.setData,this.getValueSetList(this.value),this.changeInput()},watch:{setData:function(){this.value=this.setData,this.getValueSetList(this.value),this.options=this.setOptions},setOptions:(j=Z(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.options=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},methods:{getValueSetList:function(e){var t=this;return Z(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,axios.get("/ir/ajax/vehicles/getlookupData",{params:{flex_value_set_name:t.setName,flex_value_set_data:t.value,query:e}}).then((function(e){t.options=e.data,t.changeInput()})).catch((function(e){console.log(e)})).then((function(){t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},changeInput:function(){var e=this,t="",a="";this.value,this.options.find((function(n){n.meaning==e.value&&(t=n.meaning,a=n.description)})),this.$emit("getLocation",{name:this.setName,value:this.value,value_code:t,value_name:a,index:this.index})}}};const G=(0,i.Z)(q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:e.placeholder,"remote-method":e.getValueSetList,loading:e.loading,size:"large",disabled:e.disabled},on:{change:function(t){e.changeInput(),e.getValueSetList()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(t,n){return a("el-option",{key:n,attrs:{label:t.meaning,value:t.meaning}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.meaning))]),e._v(" "),a("span",{staticStyle:{float:"left",color:"#8492a6"}},[e._v(" : "+e._s(t.description))])])})),1)],1)}),[],!1,null,null,null).exports;const Q={name:"ir-components-lov-receivable",data:function(){return{receivables:[],loading:!1,result:this.value}},props:["placeholder","name","value","disabled","size","popperBody"],methods:{remoteMethodReceivable:function(e){this.getReceivables({value:"",keyword:e})},getReceivables:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/receivable-charge",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.receivables=a})).catch((function(e){swal("Error",e,"error")}))},focusReceivable:function(e){this.getReceivables({value:"",keyword:""})},changeReceivable:function(e){var t={code:"",id:"",desc:""};if(e)for(var a in this.receivables){var n=this.receivables[a];n.description===e&&(t.desc=e,t.code=n.meaning,t.id="")}else t.code="",t.id="",t.desc="";this.$emit("change-lov",t)}},mounted:function(){this.getReceivables({value:"",keyword:""})},watch:{value:function(e,t){this.result=e}}};const W=(0,i.Z)(Q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethodReceivable,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,disabled:e.disabled,"popper-append-to-body":e.popperBody},on:{change:e.changeReceivable,focus:e.focusReceivable},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.receivables,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.description}})})),1)],1)}),[],!1,null,null,null).exports;var X=a(75943);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(e,t,a,n,s,r,i){try{var l=e[r](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,s)}function ee(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){K(r,n,s,i,l,"next",e)}function l(e){K(r,n,s,i,l,"throw",e)}i(void 0)}))}}const te={name:"index-table-cars",data:function(){return{dateFormat:"DD/MM/YYYY",complete:!0,locked:!1,rowselect:-1,columnSelected:[],indexTable:0,accountCars:{company:"",evm:"",department:"",cost_center:"",budget_year:"",budget_type:"",budget_detail:"",budget_reason:"",main_account:"",sub_account:"",reserved1:"",reserved2:""},descriptionCars:{company:"",evm:"",department:"",cost_center:"",budget_year:"",budget_type:"",budget_detail:"",budget_reason:"",main_account:"",sub_account:"",reserved1:"",reserved2:""},rules:{year:[{required:!0,message:"กรุณาระบุปี",trigger:"blur"}],license_plate:[{required:!0,message:"กรุณาระบุทะเบียนรถยนต์",trigger:"blur"}],department_code:[{required:!0,message:"กรุณาระบุรหัสหน่วยงาน",trigger:"blur"}],location_code:[{required:!0,message:"กรุณาระบุรหัสสถานที่",trigger:"blur"}],asset_status:[{required:!0,message:"กรุณาระบุประเภทสถานะทรัพย์สิน",trigger:"blur"}],renew_type_code:[{required:!0,message:"กรุณาระบุประเภทการต่ออายุ",trigger:"blur"}],start_date:[{required:!0,message:"กรุณาระบุวันที่เริ่มต้น",trigger:"blur"}],end_date:[{required:!0,message:"กรุณาระบุวันที่สิ้นสุด",trigger:"blur"}],group_code:[{required:!0,message:"กรุณาระบุกลุ่ม",trigger:"blur"}],insurance_amount:[{required:!0,message:"กรุณาระบุค่าเบี้ยประกัน",trigger:"blur"}],expense_account:[{required:!0,message:"กรุณาระบุรหัสค่าใช้จ่าย",trigger:"blur"}]},paramsQueryLicensePlate:{renew_type:"",license_plate:"",group:""},accountId:"",type_cost:"",receivables:[],net_amount:0,result_receivable:[]}},methods:{updateselectindex:function(e){this.locked=e},selectRow:function(e){this.rowselect=e},clickSelectRow:function(e,t){if($('input[name="cars_select'.concat(e,'"]')).is(":checked"))this.setSelectedColumn(t);else{var a=this.columnSelected.indexOf(t);a>-1&&this.columnSelected.splice(a,1)}},receivedYear:function(e,t){var a=this;e?(a.dataTable.rows[t].year="Invalid date"!=w()(e).format("YYYY")?w()(e).format("YYYY"):"",this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".year")})).clearValidate(),this.duplicatedCheck(a.dataTable.rows[t],t)):(a.dataTable.rows[t].year="",this.$refs.save_table_line.validateField("rows.".concat(t,".year")))},warningday367:function(){swal({title:"Warning",text:"วันที่สิ้นสุดที่คิดค่าเบี้ยประกัน มากกว่าหรือน้อยกว่า 1 ปี ต้องการทำรายการต่อหรือไม่ ?",type:"warning"})},getAdjustmentDateStart:function(e,t){var a=this;return ee(s().mark((function n(){var r,i,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a,null!==e){n.next=7;break}r.dataTable.rows[t].start_date="",r.dataTable.rows[t].start_timer="",r.$refs.save_table_line.validateField("rows.".concat(t,".start_date")),n.next=16;break;case 7:return r.dataTable.rows[t].start_date=w()(e).format(r.dateFormat),n.next=10,r.parseToDate(e);case 10:i=n.sent,r.dataTable.rows[t].start_timer=i,r.dataTable.rows[t].end_timer=w()(i,"DD/MM/YYYY").add(1,"years").toDate(),r.dataTable.rows[t].end_date=w()(e).add(1,"years").format(r.dateFormat),r.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),r.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 16:r.dataTable.rows[t].start_timer&&r.dataTable.rows[t].end_timer&&(r.dataTable.rows[t].total_days=Math.floor(Math.abs(r.dataTable.rows[t].start_timer-r.dataTable.rows[t].end_timer)/864e5),l=r.getyeardays(r.dataTable.rows[t].start_date),(r.dataTable.rows[t].total_days>l||r.dataTable.rows[t].total_days<l)&&r.warningday367());case 17:case"end":return n.stop()}}),n)})))()},getyeardays:function(e){if(e){var t=e.split("/"),a=t[0],n=t[1],s=+t[2]-543,r=new Date(n+"/"+a+"/"+s),i=new Date(n+"/"+a+"/"+s),l=new Date(i.setFullYear(i.getFullYear()+1)),o=Math.abs(l-r);return Math.ceil(o/864e5)}return 0},getAdjustmentDateEnd:function(e,t,a){var n=this;return ee(s().mark((function r(){var i,l,o,c,d;return s().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(i=new Date(a.split("/")[1]+"/"+a.split("/")[0]+"/"+a.split("/")[2]),l=n,null!==e){s.next=8;break}l.dataTable.rows[t].end_date="",l.dataTable.rows[t].end_timer="",n.$refs.save_table_line.validateField("rows.".concat(t,".end_date")),s.next=14;break;case 8:return l.dataTable.rows[t].end_date=w()(e).format(l.dateFormat),s.next=11,l.parseToDate(e);case 11:o=s.sent,l.dataTable.rows[t].end_timer=w()(o,"DD/MM/YYYY").toDate(),n.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 14:if(null!==i){s.next=20;break}l.dataTable.rows[t].start_date="",l.dataTable.rows[t].start_timer="",l.$refs.save_table_line.validateField("rows.".concat(t,".start_date")),s.next=27;break;case 20:return l.dataTable.rows[t].start_date=w()(i).format(l.dateFormat),s.next=23,l.parseToDate(i);case 23:c=s.sent,l.dataTable.rows[t].start_timer=c,l.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".start_date")})).clearValidate(),l.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".end_date")})).clearValidate();case 27:l.dataTable.rows[t].start_timer&&l.dataTable.rows[t].end_timer&&(l.dataTable.rows[t].total_days=Math.floor(Math.abs(l.dataTable.rows[t].start_timer-l.dataTable.rows[t].end_timer)/864e5),d=l.getyeardays(l.dataTable.rows[t].start_date),(l.dataTable.rows[t].total_days>d||l.dataTable.rows[t].total_days<d)&&l.warningday367());case 28:case"end":return s.stop()}}),r)})))()},getDataRowSelectAccount:function(e){this.dataTable.rows=e},clickSelectAll:function(){if(this.setDataRowsNotInterface=this.dataTable.rows.filter((function(e,t){if(!$('input[name="cars_select'.concat(t,'"]')).is(":disabled"))return e.index=t,e})),$('input[name="cars_select_all"]').is(":checked"))for(var e in this.setDataRowsNotInterface){var t=this.setDataRowsNotInterface[e];$('input[name="cars_select'.concat(t.index,"\"]:not('.checkbox_edit_disabled')")).prop("checked",!0),this.setSelectedColumn(t)}else for(var a in this.setDataRowsNotInterface){var n=this.setDataRowsNotInterface[a];$('input[name="cars_select'.concat(n.index,'"]')).prop("checked",!1),this.columnSelected=[]}},getValueAssetStatus:function(e,t){this.form.tableLine[t].asset_status=e},receivedLicensePlate:function(e,t){console.log(e);var a=this;if(e){var n=e.account_description.split("."),s=n[2]+"."+n[8]+"."+n[9];a.dataTable.rows[t].license_plate=e.license_plate,a.dataTable.rows[t].renew_type_code=e.renew_type_code,a.dataTable.rows[t].group_name=e.group_desc,a.dataTable.rows[t].group_code=e.group_code,a.dataTable.rows[t].vat_refund="Y"===e.vat_refund?"Yes":"No",a.dataTable.rows[t].car_type=e.car_type,a.dataTable.rows[t].car_type_code=e.car_type_code,a.dataTable.rows[t].asset_number=e.asset_number,a.dataTable.rows[t].asset_id=e.asset_id,a.dataTable.rows[t].vat_percent=e.vat_percent,a.dataTable.rows[t].car_brand=e.car_brand,a.dataTable.rows[t].car_cc=e.vehicle_cc,a.dataTable.rows[t].engine_number=e.engine_number,a.dataTable.rows[t].tank_number=e.tank_number,a.dataTable.rows[t].policy_set_header_id=e.policy_set_header_id,a.dataTable.rows[t].department_code=e.department_code,a.dataTable.rows[t].department_name=e.department_desc,a.dataTable.rows[t].revenue_stamp_percent=e.revenue_stamp_percent,a.dataTable.rows[t].expense_account_id=e.account_id,a.dataTable.rows[t].expense_account_desc=s,a.dataTable.rows[t].expense_account=e.account_number,a.dataTable.rows[t].location_code=e.location_code,a.dataTable.rows[t].location_description=e.location_description,a.dataTable.rows[t].car_brand=e.vehicle_brand_name,a.dataTable.rows[t].car_brand_code=e.vehicle_brand_code,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".license_plate")})).clearValidate(),this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".renew_type_code")})).clearValidate(),a.duplicatedCheck(a.dataTable.rows[t],t)}else a.dataTable.rows[t].license_plate="",a.dataTable.rows[t].renew_type_code="",a.dataTable.rows[t].group_name="",a.dataTable.rows[t].group_code="",a.dataTable.rows[t].vat_refund="",a.dataTable.rows[t].car_type="",a.dataTable.rows[t].car_type_code="",a.dataTable.rows[t].asset_number="",a.dataTable.rows[t].asset_id="",a.dataTable.rows[t].vat_percent="",a.dataTable.rows[t].car_brand="",a.dataTable.rows[t].car_cc="",a.dataTable.rows[t].engine_number="",a.dataTable.rows[t].tank_number="",a.dataTable.rows[t].policy_set_header_id="",a.dataTable.rows[t].department_code="",a.dataTable.rows[t].department_name="",a.dataTable.rows[t].revenue_stamp_percent="",a.dataTable.rows[t].expense_account_id="",a.dataTable.rows[t].expense_account_desc="",a.dataTable.rows[t].expense_account="",this.$refs.save_table_line.validateField("rows.".concat(t,".license_plate")),this.$refs.save_table_line.validateField("rows.".concat(t,".renew_type_code"));this.accountId=e.expense_account_id?e.expense_account_id:""},receivedCompany:function(e,t){var a=this;a.dataTable.rows[t].company_number=e.code,a.dataTable.rows[t].company_name=e.desc,a.dataTable.rows[t].company_id=e.id,e?(a.dataTable.rows[t].company_number=e.code,a.dataTable.rows[t].company_name=e.desc,a.dataTable.rows[t].company_id=e.id,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".company_id")})).clearValidate()):(a.dataTable.rows[t].company_number="",a.dataTable.rows[t].company_name="",a.dataTable.rows[t].company_id="",this.$refs.save_table_line.validateField("rows.".concat(t,".company_id")))},receivedRenewType:function(e,t){var a=this;if(e){var n=e.split(":");a.dataTable.rows[t].renew_type_code=n[0],a.dataTable.rows[t].renew_type=n[1],this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".renew_type_code")})).clearValidate(),a.duplicatedCheck(a.dataTable.rows[t],t)}else a.dataTable.rows[t].renew_type_code="",this.$refs.save_table_line.validateField("rows.".concat(t,".renew_type_code"))},clickModalAccount:function(e,t){var a=this;if(a.indexTable=t,null!==e.expense_account&&void 0!==e.expense_account){var n=e.expense_account.split("."),s=e.expense_account_desc.split("."),r=0,i=0;if(e.expense_account_desc)for(var l in a.accountCars)a.accountCars[l]=n[r],r++;if(e.expense_account_desc)for(var o in a.descriptionCars)a.descriptionCars[o]=s[i],i++;this.accountId=e.expense_account_id,this.type_cost=e.type_cost}},setSelectedColumn:function(e){this.columnSelected.push(e)},receivedDepartment:function(e,t){var a=this;e?(a.dataTable.rows[t].department_name=e.description,a.dataTable.rows[t].department_code=e.value,this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".department_code")})).clearValidate()):(a.dataTable.rows[t].department_name="",a.dataTable.rows[t].department_code="",this.$refs.save_table_line.validateField("rows.".concat(t,".department_code")))},clickConfirm:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="Confirmed",$('input[name="cars_select'.concat(t,'"]')).prop("checked",!1),e})),e.columnSelected=[],void e.setReceivables())})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยืนยัน!","warning")},clickCancel:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="Cancelled",$('input[name="cars_select'.concat(t,'"]')).prop("checked",!1),e})),e.columnSelected=[],void e.setReceivables())})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการยกเลิก!","warning")},clickClear:function(){var e=this;0!==this.columnSelected.length?this.$refs.save_table_line.validate((function(t){return!!t&&(e.columnSelected.filter((function(e,t){return e.status="New",$('input[name="cars_select'.concat(t,'"]')).prop("checked",!1),e})),e.columnSelected=[],void e.setReceivables())})):swal("Warning","กรุณาเลือกข้อมูลที่ต้องการรีเซต!","warning")},clickSave:function(){var e=this;this.$refs.save_table_line.validate((function(t){t&&(e.setComplete(),e.locked=!e.locked)}))},clickComplete:function(){var e=this;this.$refs.save_table_line.validate((function(t){t&&e.setComplete()}))},setComplete:function(){this.dataTable.rows.every((function(e){return e.flgAdd}))?this.checkDuplicateField()?swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"}):(this.dataTable.rows.forEach((function(e){e.isDuplicated=!1})),this.saveCars()):this.dataTable.rows.find((function(e){return e.isDuplicated}))?swal({title:"Warning",text:"ไม่สามารถ Save รายการซ้ำได้",type:"warning"}):this.saveCars()},saveCars:function(){var e=this,t={data:this.dataTable.rows.map((function(e,t){return e.row_id||(e.row_id=t),e}))};axios.post("/ir/ajax/cars",t).then((function(t){e.complete=!1,e.dataTable.rows.map((function(e,a){return delete e.flgAdd,$('input[name="cars_select'.concat(a,'"]')).prop("checked",!1),e.car_id=t.data.data[e.row_id].car_id,e.document_number=t.data.data[e.row_id].document_number,e})),e.columnSelected=[],e.$nextTick((function(){swal({title:"Success",text:"บันทึกสำเร็จ",timer:3e3,type:"success",showCancelButton:!1,showConfirmButton:!1})}))})).catch((function(e){400===e.response.data.status?swal({title:"Warning",text:e.response.data.message,type:"warning"}):swal({title:"Error",text:e.response.data.message,type:"error"})}))},clickIncomplete:function(){this.complete=!0,this.locked=!0},validateinsurance_amount:function(e){var t=this;t.dataTable.rows[e].insurance_amount<t.dataTable.rows[e].discount&&(swal({title:"Warning",text:"ส่วนลดเบี้ยประกัน ต้องน้อยกว่าเท่ากับ เบี้ยประกัน",type:"warning"}),this.$nextTick((function(){t.dataTable.rows[e].discount=0})))},insuranceChange:function(e,t){this.validateinsurance_amount(t),e?this.$refs.save_table_line.fields.find((function(e){return e.prop=="rows.".concat(t,".insurance_amount")})).clearValidate():(this.dataTable.rows[t].insurance_amount="",this.$refs.save_table_line.validateField("rows.".concat(t,".insurance_amount")))},discountChange:function(e,t){this.validateinsurance_amount(t),this.dataTable.rows[t].discount=e||0},ClickAddRow:function(){var e=this,t=this;axios.get("/ir/ajax/lov/period-year").then((function(a){var n,s=(H(n={policy_set_header_id:null,car_type:null,car_id:null,asset_status:"Y",document_number:null,renew_type_code:null,renew_type:null,start_date:null,end_date:null,total_days:null,department_code:null,department_name:null,license_plate:null,location_code:null,group_code:null,group_name:null,duty_amount:null,insurance_amount:"",discount:0,revenue_stamp_percent:null,vat_amount:null,net_amount:null,vat_refund:null,car_type_code:null,status:"New",policy_number:null,company_id:null,company_name:null,asset_id:null,asset_number:null,expense_account:null,expense_account_id:null,expense_account_desc:null,car_brand:null,car_brand_code:null,car_cc:null,engine_number:null,tank_number:null,line_type:null,year:a.data.data.period_year.toString(),vat_percent:null,flgAdd:!0,isDuplicated:!1,expense_flag:"N",type_cost:"",receivable_name:""},"revenue_stamp_percent",0),H(n,"vat_percent",7),n);e.locked=!0,t.dataTable.rows.push(s),e.$nextTick((function(){var t=e.$el.getElementsByClassName("endTable")[0];t&&t.scrollIntoView()}))})).catch((function(e){swal("Error",e,"error")}))},clickRemoveFlgAdd:function(e){this.dataTable.rows.splice(e,1)},checkDuplicateField:function(){var e=!1,t=this.dataTable.rows;return t.length>1?t.forEach((function(a,n){t.find((function(e,t){return n!==t&&a.year===e.year&&a.renew_type_code===e.renew_type_code&&a.license_plate===e.license_plate&&"Cancelled"!==a.status&&"Cancelled"!==e.status}))&&(e=!0)})):e=t[0].isDuplicated&&"Cancelled"!==t[0].status,e},dutyAmount:function(e){var t=parseFloat((e.insurance_amount-+e.discount)*+e.revenue_stamp_percent/100).toFixed(2),a=parseInt(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return e.duty_amount="".concat(a,".").concat(n),"".concat(a,".").concat(n)},vatAmount:function(e){var t=parseFloat((e.insurance_amount-+e.discount+this.convertCurrenyToNum(e.duty_amount))*+e.vat_percent/100).toFixed(2),a=parseInt(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return e.vat_amount="".concat(a,".").concat(n),"".concat(a,".").concat(n)},netAmount:function(e){var t=parseFloat(e.insurance_amount-+e.discount+this.convertCurrenyToNum(e.duty_amount)+this.convertCurrenyToNum(e.vat_amount)).toFixed(2),a=parseInt(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return e.net_amount="".concat(a,".").concat(n),"".concat(a,".").concat(n)},convertCurrenyToNum:function(e){return Number(e.replace(/[^0-9.-]+/g,""))},duplicatedCheck:function(e,t){var a=this,n={data:{rows:a.dataTable.rows,year:e.year,renew_type_code:e.renew_type_code,license_plate:e.license_plate,row_id:t}};e.year&&e.renew_type_code&&e.license_plate&&axios.post("/ir/ajax/cars/duplicate-check",n).then((function(e){a.dataTable.rows[t].isDuplicated=!1})).catch((function(n){400===n.response.data.status?(a.dataTable.rows[t].isDuplicated=!0,swal({title:"Warning",text:"ไม่สามารถเลือกรายการซ้ำได้",type:"warning"}),a.$nextTick((function(){e.renew_type_code=""}))):swal({title:"Error",text:n.response.data.message,type:"error"})}))},isDisabled:function(e){return!this.locked||!(!e||"Confirmed"!==e.status||"Y"!=!e.expense_flag)},parseToDate:function(){var e=arguments;return ee(s().mark((function t(){var a,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:null,n=e.length>1&&void 0!==e[1]?e[1]:"DD/MM/YYYY",null!=a){t.next=4;break}return t.abrupt("return",w()().toDate());case 4:return t.abrupt("return",w()(a,n).subtract(543,"years").toDate());case 5:case"end":return t.stop()}}),t)})))()},getValueReceivable:function(e,t){this.dataTable.rows[t].receivable_name=e.desc,this.dataTable.rows[t].receivable_code=e.code},setReceivables:function(){var e=this;this.receivables=[],this.rows,this.dataTable.rows.filter((function(t){e.checkStatusConfirmed(t.status)&&t.receivable_name&&e.receivables.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t))}));var t=[],a=this;this.receivables.reduce((function(e,n){e[n.receivable_code]||(e[n.receivable_code]={receivable_code:n.receivable_code,net_amount:0,receivable_name:n.receivable_name},t.push(e[n.receivable_code]));var s="string"==typeof n.net_amount&&n.net_amount?a.convertCurrenyToNum(n.net_amount):n.net_amount;return e[n.receivable_code].net_amount+=s,e}),{}),this.result_receivable=t},getLocation:function(e){this.dataTable.rows[e.index].location_code=e.value,this.dataTable.rows[e.index].location_description=e.value_name},getCoa:function(e){console.log(e),this.accountId=e.type_cost_id,this.dataTable.rows[e.index].expense_account=e.code_combine;var t=e.code_combine.split(".");this.accountCars.company=t[0],this.accountCars.evm=t[1],this.accountCars.department=t[2],this.accountCars.cost_center=t[3],this.accountCars.budget_year=t[4],this.accountCars.budget_type=t[5],this.accountCars.budget_detail=t[6],this.accountCars.budget_reason=t[7],this.accountCars.main_account=t[8],this.accountCars.sub_account=t[9],this.accountCars.reserved1=t[10],this.accountCars.reserved2=t[11];var a=e.description.split("."),n=a[2]+"."+a[8]+"."+a[9];this.dataTable.rows[e.index].expense_account_desc=n,this.descriptionCars.company=a[0],this.descriptionCars.evm=a[1],this.descriptionCars.department=a[2],this.descriptionCars.cost_center=a[3],this.descriptionCars.budget_year=a[4],this.descriptionCars.budget_type=a[5],this.descriptionCars.budget_detail=a[6],this.descriptionCars.budget_reason=a[7],this.descriptionCars.main_account=a[8],this.descriptionCars.sub_account=a[9],this.descriptionCars.reserved1=a[10],this.descriptionCars.reserved2=a[11]}},props:["dataTable","defaultValueSetName","setLabelExpenseFlag","formatCurrency","isNullOrUndefined","checkStatusConfirmed","setLabelStatusAsset"],components:{modalAccountCode:R,dateInput:Y.Z,currencyInput:F.Z,lovCompany:P,lovRenewType:B,lovDepartment:c,lovVehicle:h,lovAssetStatus:_,lovReceivable:W,dropdownStatusAsset:X.Z,lovLocation:G},computed:{totalPremium:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"CONFIRMED"!=t.status&&"INTERFACE"!=t.status||(e+=+t.insurance_amount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},discount:function(){var e=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(t){"CONFIRMED"!=t.status&&"INTERFACE"!=t.status||(e+=+t.discount)}));var t=e.toFixed(2),a=Number(t.split(".")[0]).toLocaleString(),n=t.split(".")[1];return t.split(".").length>1?"".concat(a,".").concat(n):"".concat(e.toLocaleString(),".00")},totalDutyFee:function(){var e=this,t=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"CONFIRMED"!=a.status&&"INTERFACE"!=a.status||(t+="string"==typeof a.duty_amount?e.convertCurrenyToNum(a.duty_amount):+a.duty_amount)}));var a=t.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),s=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(s):"".concat(t.toLocaleString(),".00")},vat:function(){var e=this,t=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"CONFIRMED"!=a.status&&"INTERFACE"!=a.status||(t+="string"==typeof a.vat_amount?e.convertCurrenyToNum(a.vat_amount):+a.vat_amount)}));var a=t.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),s=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(s):"".concat(t.toLocaleString(),".00")},netAmountSum:function(){var e=this,t=0;this.dataTable.rows.length>0&&this.dataTable.rows.map((function(a){"CONFIRMED"!=a.status&&"INTERFACE"!=a.status||(t+="string"==typeof a.net_amount?e.convertCurrenyToNum(a.net_amount):+a.net_amount)}));var a=t.toFixed(2),n=Number(a.split(".")[0]).toLocaleString(),s=a.split(".")[1];return a.split(".").length>1?"".concat(n,".").concat(s):"".concat(t.toLocaleString(),".00")},totalRecInsuAmount:function(){return this.result_receivable.reduce((function(e,t){return""===t.net_amount?e+0:e+parseFloat(t.net_amount)}),0)}},watch:{complete:function(e,t){e?($("#table_edit").find("input").prop("disabled",!1),$('input[name="asset_increase_select_all"]').prop("disabled",!1)):($("#table_edit").find("input").prop("disabled",!0),$('input[name="asset_increase_select_all"]').prop("checked",!1),$('input[name="asset_increase_select_all"]').prop("disabled",!0),$("#table_edit").find('input[type="checkbox"]').prop("checked",!1),this.columnSelected=[])},"dataTable.rows":function(e,t){this.setReceivables()}},mounted:function(){window.vm=this}};var ae=a(34698),ne={insert:"head",singleton:!1};O()(ae.Z,ne);ae.Z.locals;const se=(0,i.Z)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"margin_top_20"},[a("div",{staticClass:"table-responsive table_style_scroll"},[a("div",[a("table",{staticClass:"table table-striped table_style table_index_year col-6"},[e._m(0),e._v(" "),a("tbody",{attrs:{id:"table_search"}},[e.dataTable.rows.length>0?a("tr",{staticClass:"text-right"},[a("td",[e._v(e._s(e.totalPremium))]),e._v(" "),a("td",[e._v(e._s(e.discount))]),e._v(" "),a("td",[e._v(e._s(e.totalDutyFee))]),e._v(" "),a("td",[e._v(e._s(e.vat))]),e._v(" "),a("td",[e._v(e._s(e.netAmountSum))]),e._v(" "),a("td",[e._v(e._s(e.formatCurrency(e.totalRecInsuAmount)))])]):e._e(),e._v(" "),e._l(e.result_receivable,(function(t,n){return a("tr",{directives:[{name:"show",rawName:"v-show",value:e.result_receivable.length>0&&e.dataTable.rows.length>0,expression:"result_receivable.length > 0 && dataTable.rows.length > 0"}],key:"rec_"+n,staticClass:"text-right"},[a("td",{attrs:{colspan:"5"}},[e._v("\n              "+e._s(e.isNullOrUndefined(t.receivable_name))+"\n            ")]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.net_amount)||0===e.isNullOrUndefined(t.net_amount)?e.formatCurrency(t.net_amount):e.isNullOrUndefined(t.net_amount)))])])})),e._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===e.dataTable.rows.length,expression:"dataTable.rows.length === 0"}],staticClass:"text-center w-100"},[a("td",{attrs:{colspan:"6"}},[e._v("ไม่มีข้อมูล")])])],2),e._v(" "),a("tfoot")])])]),e._v(" "),a("div",{staticClass:"my-5"},[a("div",{staticClass:"col justify-content-end  padding_12 d-flex"},[a("button",{staticClass:"btn btn-success m-1",attrs:{type:"danger"},on:{click:function(t){return e.ClickAddRow()}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" เพิ่ม")])])]),e._v(" "),a("div",{},[a("div",[a("el-form",{ref:"save_table_line",staticClass:"demo-dynamic form_table_line",attrs:{model:e.dataTable,"label-width":"120px",rules:e.rules}},[a("div",{},[a("table",{staticClass:"table table-bordered table_style table_index_year_y",staticStyle:{display:"block",overflow:"auto","max-height":"500px"}},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{staticStyle:{"min-width":"110px","z-index":"1"}},[e._v("\n                Select All "),a("br"),e._v(" "),a("input",{staticClass:"form-check-input",staticStyle:{"margin-left":"-0.4rem"},attrs:{type:"checkbox",name:"cars_select_all"},on:{click:function(t){return e.clickSelectAll()}}})]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("IR status"),a("br"),e._v("สถานะ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Document number"),a("br"),e._v("เลขที่เอกสาร")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px","z-index":"1"}},[e._v("Year"),a("br"),e._v("ปี*")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("License plate"),a("br"),e._v("ทะเบียนรถยนต์*")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px","z-index":"1"}},[e._v("Renew type"),a("br"),e._v("ประเภทการต่ออายุ *")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("Start date"),a("br"),e._v("วันที่เริ่มต้นการคิดเบี้ยประกัน *")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("End date"),a("br"),e._v("วันที่สิ้นสุดการคิดเบี้ยประกัน *")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[e._v("Days"),a("br"),e._v("จำนวนวัน")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"125px","z-index":"1"}},[e._v("Premium"),a("br"),e._v("ค่าเบี้ยประกัน *")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"125px","z-index":"1"}},[e._v("Discount"),a("br"),e._v("ส่วนลด")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"125px"}},[e._v("Duty fee"),a("br"),e._v("อากร")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"125px"}},[e._v("Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่ม")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"125px"}},[e._v("Net amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Tax recoverable"),a("br"),e._v("ภาษีขอคืนได้")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px"}},[e._v("เรียกเก็บ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Car type"),a("br"),e._v("ประเภทรถยนต์")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("Policy no."),a("br"),e._v("เลขที่กรมธรรม์")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("Company code"),a("br"),e._v("รหัสผู้รับประกันภัย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Company name"),a("br"),e._v("ผู้รับประกันภัย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Asset number"),a("br"),e._v("เลขที่สินทรัพย์")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("Group"),a("br"),e._v("กลุ่ม *")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px","z-index":"1"}},[e._v("Location Code"),a("br"),e._v("รหัสสถานที่*")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"200px"}},[e._v("Location"),a("br"),e._v("สถานที่")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"250px","z-index":"1"}},[e._v("Expense account"),a("br"),e._v("รหัสบัญชีค่าใช้จ่าย *")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"250px"}},[e._v("Expense account description"),a("br"),e._v("บัญชีค่าใช้จ่าย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Brand"),a("br"),e._v("ยี่ห้อ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("CC."),a("br"),e._v("ซีซี รถ")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"}},[e._v("Engine number"),a("br"),e._v("หมายเลขเครื่องยนต์")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"235px"}},[e._v("Vehicle identification Number"),a("br"),e._v("หมายเลขตัวถัง")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"160px"}},[e._v("สถานะการตัดค่าใช้จ่าย")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"110px","z-index":"1"}},[e._v("ลบ")])])]),e._v(" "),a("tbody",{attrs:{id:"table_search"}},[e._l(e.dataTable.rows,(function(t,n){return a("tr",{key:n,staticClass:"text-center mouse-over",class:[n==e.dataTable.rows.length-1?"endTable cursor-pointer":"cursor-not-allowed",n==e.rowselect?" highlight ":""],attrs:{"v-if":e.dataTable.rows.length>0},on:{click:function(t){return e.selectRow(n)}}},[a("td",{staticClass:"text-center",staticStyle:{position:"relative","min-width":"110px"}},[a("div",{staticClass:"padding_top_10"},[a("input",{class:"form-check-input "+(e.isDisabled(t)?"checkbox_edit_disabled":""),staticStyle:{"margin-left":"-0.4rem"},attrs:{type:"checkbox",name:"cars_select"+n,disabled:e.isDisabled(t)},domProps:{value:""+n},on:{click:function(a){return e.clickSelectRow(n,t)}}})])]),e._v(" "),a("td",{staticStyle:{"min-width":"110px"}},[a("div",{staticClass:"padding_top_10 text-left"},[e._v("\n                  "+e._s(t.status?t.status:"")+"\n                ")])]),e._v(" "),a("td",[a("div",{staticClass:"padding_top_10 text-left"},[e._v(e._s(t.document_number?t.document_number:""))])]),e._v(" "),a("td",{staticClass:"text-center el_field"},[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+n+".year",rules:e.rules.year}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"30px"},attrs:{value:t.year,name:"input_date",id:"input_date",placeholder:"โปรดเลือกปี",disabled:e.isDisabled(t),pType:"year"},on:{dateWasSelected:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.receivedYear.apply(void 0,s.concat([n]))}},model:{value:t.year,callback:function(a){e.$set(t,"year",a)},expression:"data.year"}})],1)],1),e._v(" "),a("td",{staticClass:"text-left el_field"},[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+n+".license_plate",rules:e.rules.license_plate}},[a("lov-vehicle",{attrs:{value:t.license_plate,name:"license_plate",placeholder:"ทะเบียนรถยนต์",sizeSmall:!0,disabled:e.isDisabled(t),paramsQuery:e.paramsQueryLicensePlate},on:{vehicle:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.receivedLicensePlate.apply(void 0,s.concat([n]))}},model:{value:t.license_plate,callback:function(a){e.$set(t,"license_plate",a)},expression:"data.license_plate"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field text-left"},[a("el-form-item",{attrs:{prop:"rows."+n+".renew_type_code",rules:e.rules.renew_type_code}},[a("lov-renew-type",{attrs:{value:t.renew_typex,name:"renew_type_code",placeholder:"ประเภทการต่ออายุ",sizeSmall:!0,disabled:e.isDisabled(t)},on:{renewType:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.receivedRenewType.apply(void 0,s.concat([n]))}},model:{value:t.renew_typex,callback:function(a){e.$set(t,"renew_typex",a)},expression:"data.renew_typex"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field text-left"},[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+n+".start_date",rules:e.rules.start_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"30px"},attrs:{value:t.start_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่เริ่มต้น",disabled:e.isDisabled(t)},on:{dateWasSelected:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.getAdjustmentDateStart.apply(void 0,s.concat([n]))}},model:{value:t.start_date,callback:function(a){e.$set(t,"start_date",a)},expression:"data.start_date"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field text-left"},[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+n+".end_date",rules:e.rules.end_date}},[a("datepicker-th",{staticClass:"el-input__inner md:tw-mb-0 tw-mb-2",staticStyle:{width:"100%","line-height":"30px"},attrs:{value:t.end_date,name:"input_date",id:"input_date",format:"DD/MM/YYYY",placeholder:"โปรดเลือกวันที่สิ้นสุด",disabled:e.isDisabled(t)},on:{dateWasSelected:function(a){for(var s=arguments.length,r=Array(s);s--;)r[s]=arguments[s];return e.getAdjustmentDateEnd.apply(void 0,r.concat([n],[t.start_date]))}},model:{value:t.end_date,callback:function(a){e.$set(t,"end_date",a)},expression:"data.end_date"}})],1)],1),e._v(" "),a("td",{staticClass:"text-center"},[a("div",{staticClass:"padding_top_10 text-center"},[e._v(e._s(t.total_days?t.total_days:""))])]),e._v(" "),a("td",{staticClass:"el_field text-right"},[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+n+".insurance_amount",rules:e.rules.insurance_amount}},[a("currency-input",{staticStyle:{"min-width":"100px"},attrs:{placeholder:"ค่าเบี้ยประกัน",sizeSmall:!0,disabled:e.isDisabled(t)},on:{input:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.insuranceChange.apply(void 0,s.concat([n]))}},model:{value:t.insurance_amount,callback:function(a){e.$set(t,"insurance_amount",a)},expression:"data.insurance_amount"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field  text-right"},[a("el-form-item",{staticClass:"currency_right"},[a("currency-input",{attrs:{placeholder:"ส่วนลด",sizeSmall:!0,disabled:e.isDisabled(t)},on:{input:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.discountChange.apply(void 0,s.concat([n]))}},model:{value:t.discount,callback:function(a){e.$set(t,"discount",a)},expression:"data.discount"}})],1)],1),e._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(e.dutyAmount(t))+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(e.vatAmount(t))+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(e.netAmount(t))+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.vat_refund?t.vat_refund:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"el_field_table"},[a("el-form-item",[a("lov-receivable",{attrs:{name:"receivable_name"+n,placeholder:"เรียกเก็บ",size:"small",popperBody:!0},on:{"change-lov":function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.getValueReceivable.apply(void 0,s.concat([n]))}},model:{value:t.receivable_name,callback:function(a){e.$set(t,"receivable_name",a)},expression:"data.receivable_name"}})],1)],1),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.car_type?t.car_type:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"el_field text-center"},[a("el-form-item",[a("el-input",{staticClass:"el-input--small",attrs:{placeholder:"เลขที่กรมธรรม์"},model:{value:t.policy_number,callback:function(a){e.$set(t,"policy_number",a)},expression:"data.policy_number"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field text-center"},[a("el-form-item",{staticClass:"currency_right",attrs:{prop:"rows."+n+".company_id",rules:e.rules.company_id}},[a("lov-company",{attrs:{value:t.company_id,placeholder:"รหัสผู้รับประกันภัย",isSave:!e.complete},on:{company:function(t){for(var a=arguments.length,s=Array(a);a--;)s[a]=arguments[a];return e.receivedCompany.apply(void 0,s.concat([n]))}},model:{value:t.company_id,callback:function(a){e.$set(t,"company_id",a)},expression:"data.company_id"}})],1)],1),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.company_name?t.company_name:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.asset_number?t.asset_number:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"el_field_table text-left"},[a("el-form-item",{attrs:{prop:"rows."+n+".group_name",rules:e.rules.group_name}},[a("div",{staticClass:"padding_top_10"},[e._v(e._s(t.group_name?t.group_name:""))])])],1),e._v(" "),a("td",{staticClass:"el_field text-center"},[a("el-form-item",{attrs:{prop:"rows."+n+".location_code",rules:e.rules.location_code}},[a("lov-location",{attrs:{"set-name":"FA_LOCATION","set-data":t.location_code,index:n,placeholder:"รหัสสถานที่",disabled:e.isDisabled(t)},on:{getLocation:e.getLocation},model:{value:t.location_code,callback:function(a){e.$set(t,"location_code",a)},expression:"data.location_code"}})],1)],1),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v(e._s(t.location_description?t.location_description:""))])]),e._v(" "),a("td",{staticClass:"el_field text-left"},[a("el-form-item",{staticClass:"el-input--small",attrs:{prop:"rows."+n+".expense_account",rules:e.rules.expense_account}},[a("modalAccountCode",{attrs:{coa:e.dataTable.rows[n].expense_account,typeCost:e.type_cost,defaultValueSetName:e.defaultValueSetName,disabled:!!e.dataTable.rows[e.indexTable]&&e.isDisabled(e.dataTable.rows[e.indexTable]),index:n},on:{resCoa:e.getCoa}})],1)],1),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.expense_account_desc?t.expense_account_desc:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.car_brand?t.car_brand:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.car_cc?t.car_cc:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.engine_number?t.engine_number:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(t.tank_number?t.tank_number:"")+"\n                ")])]),e._v(" "),a("td",{staticClass:"text-left"},[a("div",{staticClass:"padding_top_10"},[e._v("\n                  "+e._s(e.setLabelExpenseFlag(t.expense_flag))+"\n                ")])]),e._v(" "),a("td",{staticClass:"el_field"},[void 0!==t.flgAdd?a("el-form-item",[a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickRemoveFlgAdd(n)}}},[a("i",{staticClass:"fa fa-times"}),e._v("\n                    ลบ\n                  ")])]):e._e()],1)])})),e._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===e.dataTable.rows.length,expression:"dataTable.rows.length === 0"}],staticClass:"text-center w-100"},[a("td",{attrs:{colspan:"52"}},[e._v("ไม่มีข้อมูล")])])],2),e._v(" "),a("tfoot")])]),e._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),e._v(" ยืนยัน\n              ")]),e._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n              ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n              ")])])],1)]),e._v(" "),a("div",{staticClass:"col-md-6 lable_align"},[a("div",{staticClass:"form-group el_field"},[a("el-form-item",[a("button",{directives:[{name:"show",rawName:"v-show",value:e.locked,expression:"locked"}],staticClass:"btn btn-primary",attrs:{type:"button",disabled:0===e.dataTable.rows.length},on:{click:function(t){return e.clickSave()}}},[a("i",{staticClass:"fa fa-save"}),e._v(" บันทึก (ล็อค)\n              ")]),e._v(" "),e.locked?e._e():a("button",{staticClass:"btn btn-danger cursor-pointer",attrs:{type:"button",disabled:0===e.dataTable.rows.length},on:{click:function(t){return e.clickIncomplete()}}},[a("i",{staticClass:"fa fa-minus-square-o"}),e._v(" แก้ไข (ปลดล็อค)\n              ")])])],1)])])])],1)])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",{staticClass:"text-center"},[a("th",{staticClass:"text-right"},[e._v("Total Premium"),a("br"),e._v("ค่าเบี้ยประกันรวม")]),e._v(" "),a("th",{staticClass:"text-right"},[e._v("Total Discount"),a("br"),e._v("ส่วนลดรวม")]),e._v(" "),a("th",{staticClass:"text-right"},[e._v("Total Duty Fee"),a("br"),e._v("อากรรวม")]),e._v(" "),a("th",{staticClass:"text-right"},[e._v("Total Vat"),a("br"),e._v("ภาษีมูลค่าเพิ่มรวม")]),e._v(" "),a("th",{staticClass:"text-right"},[e._v("Total Net Amount"),a("br"),e._v("ค่าเบี้ยประกันสุทธิรวม")]),e._v(" "),a("th",{staticClass:"text-right"},[e._v("ค่าเบี้ยประกันเรียกเก็บรวม")])])])}],!1,null,"0e05d5ca",null).exports;var re=a(67791);const ie={props:["defaultValueSetName"],data:function(){return{data:{rows:[]},funcs:re.sD,paramsQueryLicensePlate:{renew_type:null,license_plate:null,group:null}}},components:{IndexHeader:N,IndexTable:se},methods:{test:function(e){this.$refs.indextable.updateselectindex(e)},financial:function(e){return isNaN(e)?0:Number(parseFloat(e).toFixed(2))},receivedDataSearchf:function(e){this.receivedDataSearch(e)},receivedDataSearcht:function(e){this.test(!0),this.receivedDataSearch(e)},receivedDataSearch:function(e){var t=this;this.data.rows=e.map((function(e){e.renew_typex=e.renew_type_code+":"+e.renew_type,e.renew_typex.includes("null")&&(e.renew_typex="");var a=e.expense_account_desc.split("."),n=a[2]+"."+a[8]+"."+a[9];return e.expense_account_desc=n,null===e.insurance_amount?e.insurance_amount=0:e.insurance_amount,null===e.discount?e.discount=0:e.discount,"Y"===e.vat_refund?e.vat_refund="Yes":e.vat_refund="No",e.duty_amount&&(e.duty_amount=t.financial(e.duty_amount)),e.vat_amount&&(e.vat_amount=t.financial(e.vat_amount)),e.net_amount&&(e.net_amount=t.financial(e.net_amount)),"Y"!==e.return_vat_flag||(e.return_vat_flag="Yes"),e.year=+e.year,e.program_code="IRP0005",e})),this.data.rows.filter((function(e){return e.year=e.year.toString(),e}))},getValueParamsLicensePlate:function(e){this.paramsQueryLicensePlate=e}}};const le=(0,i.Z)(ie,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("index-header",{attrs:{paramsQueryLicensePlate:e.paramsQueryLicensePlate},on:{dataSearch:e.receivedDataSearchf,"fetch-show-table-header":e.receivedDataSearcht,"set-params-license-plate":e.getValueParamsLicensePlate}}),e._v(" "),a("index-table",{ref:"indextable",attrs:{dataTable:e.data,"default-value-set-name":e.defaultValueSetName,setLabelExpenseFlag:e.funcs.setLabelExpenseFlag,formatCurrency:e.funcs.formatCurrency,isNullOrUndefined:e.funcs.isNullOrUndefined,checkStatusConfirmed:e.funcs.checkStatusConfirmed,setLabelStatusAsset:e.funcs.setLabelStatusAsset}})],1)}),[],!1,null,null,null).exports},21341:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const n={name:"ir-components-calendar-date-input",data:function(){return{date:this.value}},props:["attrName","value","sizeSmall","placeholder","disabled"],computed:{},mounted:function(){var e=this;$(document).ready((function(){$("input.date_input").datepicker({format:"dd/mm/yyyy",autoclose:!0,keyboardNavigation:!1}),$('input[name="'.concat(e.attrName,'"]')).on("change",(function(t){console.log("change ",t,t.target.value);var a={value:t.target.value,getTime:$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate").getTime()};e.$emit("change-date",a),console.log("params ",a)}))}))},watch:{value:function(e,t){this.date=e}}};const s=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"el-input date "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"input-medium form-control date_input el-input__inner",attrs:{type:"text",name:e.attrName,"data-provide":"datepicker","data-date-language":"th-th",placeholder:e.placeholder,autocomplete:"off",disabled:e.disabled},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])}),[],!1,null,null,null).exports},95070:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const n={name:"ir-components-calendar-year-input",data:function(){return{year:this.value}},props:["attrName","value","sizeSmall","placeholder"],mounted:function(){var e=this;$(document).ready((function(){console.log("ready "),$("input.year_input").datepicker({format:"yyyy",autoclose:!0,keyboardNavigation:!1,startView:"years",minViewMode:"years"}),$('input[name="'.concat(e.attrName,'"]')).on("change",(function(t){console.log("change ",t,t.target.value,$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate"));var a={value:t.target.value,getTime:$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate").getTime()};e.$emit("change-year",a)}))}))},watch:{value:function(e,t){this.year=e}}};const s=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:" date "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"input-medium form-control year_input el-input__inner",attrs:{type:"text",name:e.attrName,"data-provide":"datepicker","data-date-language":"th-th",placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.year},on:{input:function(t){t.target.composing||(e.year=t.target.value)}}})])}),[],!1,null,null,null).exports},62783:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ir-components-currency-input",data:function(){return{isInputActive:!1,decimalValue:void 0===this.decimal?2:this.decimal}},props:["value","name","sizeSmall","placeholder","disabled","decimal"],computed:{displayValue:{get:function(){if(this.isInputActive)return(void 0===this.value||null===this.value?"":this.value).toString();if(this.value||0===this.value&&void 0!==this.value&&null!==this.value){var e=parseFloat(this.value),t=this.value.toString().split(".");if(void 0===t[1]){var a=parseInt(t[0]).toFixed(this.decimalValue).split(".")[1];return"".concat(parseInt(t[0]).toLocaleString(),".").concat(a)}if(0==e.toString().split(".")[0]){var n=e.toFixed(this.decimalValue).split(".")[1];return"".concat(e.toString().split(".")[0],".").concat(n)}var s=e.toFixed(this.decimalValue).split(".")[1];return"".concat(parseInt(t[0]).toLocaleString(),".").concat(s)}},set:function(e){console.log("modifiedValue --\x3e",e);var t=+e;isNaN(t)&&(t=""),this.$emit("input",t)}}},methods:{blur:function(e){this.isInputActive=!1,this.$emit("blur-currency",e.target.value)}},watch:{value:function(e,t){this.$emit("watch-value",e)}}};var s=a(93379),r=a.n(s),i=a(19258),l={insert:"head",singleton:!1};r()(i.Z,l);i.Z.locals;const o=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"el-input "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayValue,expression:"displayValue"}],staticClass:"form-control el-input__inner input-currency  text-right",attrs:{type:"text",name:e.name,placeholder:e.placeholder,autocomplete:"off",disabled:e.disabled,maxlength:"15"},domProps:{value:e.displayValue},on:{blur:e.blur,focus:function(t){e.isInputActive=!0},input:function(t){t.target.composing||(e.displayValue=t.target.value)}}})])}),[],!1,null,"dee02e12",null).exports},75943:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const n={name:"ir-components-dropdown-status-asset",data:function(){return{rows:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}],loading:!1,result:this.value}},props:["value","name","size","popperBody","disabled","placeholder"],methods:{onchange:function(e){this.$emit("change-dropdown",e)}},watch:{value:function(e,t){this.result=e}}};const s=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0,size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)}),[],!1,null,null,null).exports},8921:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const n={name:"ir-components-lov-type-cost",data:function(){return{rows:[],loading:!1,code:"",desc:"",result:this.value,account:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},description:{company:"",branch:"",department:"",product:"",source:"",account:"",subAccount:"",projectActivity:"",interCompany:"",allocation:"",futureUsed1:"",futureUsed2:""},accountId:""}},props:["value","placeholder","popperBody","name","disabled"],methods:{remoteMethod:function(e){this.getDataRows({account_id:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onchange:function(e){console.log("change ",e);var t={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};if(e)for(var a in this.rows){var n=this.rows[a];console.log("row ",n,n.account_id==e),n.account_id==e&&(t.code=n.account_code,t.id=e,t.desc=n.description,t.account_combine=n.account_combine,t.account_combine_desc=n.account_combine_desc)}else t.code="",t.id="",t.desc="",t.account_combine="",t.account_combine_desc="";this.result=e,this.setPropAccountSplitCombine(t),this.$emit("change-lov",t)},onclick:function(){console.log("onclick ",this.rows,this.result),this.getDataRows({account_id:this.result,keyword:""})},setPropAccountSplitCombine:function(e){console.log("setPropAccountSplitCombine ",e),console.log("Combine ",e.account_combine);if(""!=e.account_combine){var t=e.account_combine.split("."),a=e.account_combine_desc.split(".");console.log("accountSplit ",t),console.log("descSplit ",a);var n=0,s=0;for(var r in this.account)this.account[r]=t[n],n++;for(var i in this.description)this.description[i]=a[s],s++;this.$emit("split-account",{account:e.account_combine,description:e.account_combine_desc,type_cost:e.code,type_cost_id:e.id})}else this.$emit("split-account",{account:"",description:"",type_cost:"",type_cost_id:""})},receivedDataRows:function(e){var t=this;console.log("receivedDataRows ",e,this.account_id);var a={code:"",id:"",desc:"",account_combine:"",account_combine_desc:""};this.loading=!0,axios.get("/ir/ajax/lov/account-code-combine",{params:e}).then((function(e){var n=e.data;if(t.loading=!1,t.rows=n.data,t.accountId&&null!==t.accountId&&void 0!==t.accountId)if(t.rows.length>0)for(var s in t.rows){var r=t.rows[s];r.account_id==t.accountId&&(t.result=r.account_id,a.code=r.account_code,a.id=r.account_id,a.desc=r.description,a.account_combine=r.account_combine,a.account_combine_desc=r.account_combine_desc)}else t.result="",a.code="",a.id=t.accountId,a.desc="",a.account_combine="",a.account_combine_desc="";else a.code="",a.id="",a.desc="",a.account_combine="",a.account_combine_desc="";t.$emit("change-lov",a)})).catch((function(e){swal("Error",e,"error")}))}},mounted:function(){},watch:{value:function(e,t){this.result=e}}};const s=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:e.placeholder,"remote-method":e.remoteMethod,loading:e.loading,name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.account_code+": "+e.description,value:e.account_id}})})),1)],1)}),[],!1,null,null,null).exports},51900:(e,t,a)=>{"use strict";function n(e,t,a,n,s,r,i,l){var o,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),i?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=o):s&&(o=l?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(e,t){return o.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:c}}a.d(t,{Z:()=>n})}}]);