(self.webpackChunk=self.webpackChunk||[]).push([[2847],{2438:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const a={name:"ir-components-lov-group-code",data:function(){return{rows:[],result:this.value}},props:["value","name","size","placeholder","popperBody"],methods:{getDataRows:function(){var e=this;axios.get("/ir/ajax/lov/group-code",{params:{group_code:""}}).then((function(t){var n=t.data;e.rows=n.data})).catch((function(e){swal("Error",e,"error")}))},change:function(e){this.$emit("change-lov",e)}},created:function(){this.getDataRows()}};const i=(0,n(51900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el_field"},[n("el-select",{attrs:{placeholder:e.placeholder,name:e.name,clearable:!0,"popper-append-to-body":e.popperBody,size:e.size},on:{change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return n("el-option",{key:t,attrs:{label:e.meaning,value:e.group_code}})})),1)],1)}),[],!1,null,null,null).exports},37266:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const a={name:"ir-components-lov-policy-set-header-id",data:function(){return{rows:[],dataSet:[],loading:!1,result:this.value,isDisabled:void 0!==this.disabled&&this.disabled}},props:["value","name","size","placeholder","popperBody","fixTypeFr","fixTypeSc","check","disabled"],methods:{remoteMethod:function(e){this.dataSet=this.rows.filter((function(t){return t.policy_set_number.toLowerCase().indexOf(e.toLowerCase())>-1||t.policy_set_description.toLowerCase().indexOf(e.toLowerCase())>-1}))},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-set-header",{params:e}).then((function(e){var n=e.data;t.loading=!1,t.check?t.dataSet=t.rows=n.data.filter((function(e){return e.meaning.toLowerCase()==t.check.toLowerCase()})):t.dataSet=t.rows=n.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.getDataRows({policy_set_header_id:"",keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},onchange:function(e){this.$emit("change-lov",e)}},mounted:function(){this.result=this.value?+this.value:this.value,this.getDataRows({policy_set_header_id:this.value,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},watch:{value:function(e,t){this.result=e?+e:e,this.getDataRows({policy_set_header_id:e,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},disabled:function(){this.isDisabled=this.disabled}}};const i=(0,n(51900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el_field"},[n("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.isDisabled},on:{focus:e.onfocus,change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataSet,(function(e,t){return n("el-option",{key:t,attrs:{label:e.policy_set_number+": "+e.policy_set_description,value:e.policy_set_header_id}})})),1)],1)}),[],!1,null,null,null).exports},82847:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var a=n(87757),i=n.n(a),o=n(37266),s=n(2438);const r={name:"ir-confirm-to-gl-lov-interface-type",data:function(){return{rows:[],loading:!1,result:this.value}},props:["placeholder","name","value","size","popperBody"],methods:{remoteMethod:function(e){this.getDataRows({lookup_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/interface-gl-type",{params:e}).then((function(e){var n=e.data.data;t.loading=!1,t.rows=n})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.getDataRows({lookup_code:"",keyword:""})},change:function(e){var t={id:"",code:"",desc:""};if(e)for(var n in this.rows){var a=this.rows[n];a.lookup_code===e&&(t.code=e,t.desc=a.description,t.id=a.meaning)}else t.id="",t.code="",t.desc="";this.$emit("change-lov",t)}},mounted:function(){this.getDataRows({lookup_code:"",keyword:""})},watch:{value:function(e,t){this.result=e}}};var l=n(51900);const c=(0,l.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el_select"},[n("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody},on:{focus:e.focus,change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return n("el-option",{key:t,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports;var d=n(67791),u=n(30381),p=n.n(u);function f(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={name:"ir-confirm-to-gl-index",data:function(){return{index:{period_name:p()(p()().add(543,"years")).format("MM/YYYY"),interface_type:"",group_code:""},rules:{period_name:[{required:!0,message:"กรุณาระบุเดือน",trigger:"change"}],interface_type:[{required:!0,message:"กรุณาระบุประเภทประกันภัย",trigger:"change"}],group_code:[{required:!0,message:"กรุณาระบุกลุ่ม",trigger:"change"}]},disabledInterface:!0,funcs:d.sD,vars:d.gR,showLoading:!1}},methods:{clickPrintReport:function(){var e=this;this.$refs.index_gl_invoice_interface.validate((function(t){if(!t)return!1;e.getReport(),e.disabledInterface=!1}))},clickInterface:function(){var e=this;this.$refs.index_gl_invoice_interface.validate((function(t){if(!t)return!1;e.getInterface()}))},clickCancel:function(){var e=this;this.$refs.index_gl_invoice_interface.validate((function(t){if(!t)return!1;e.getCancel()}))},getValuePeriodName:function(e){var t=this.vars.formatMonth;e?(this.index.period_name=p()(e).format(t),this.$refs.index_gl_invoice_interface.fields.find((function(e){return"period_name"==e.prop})).clearValidate()):(this.index.period_name="",this.$refs.index_gl_invoice_interface.validateField("period_name"))},getValueInterfaceType:function(e){this.index.interface_type=e.code},getValueGroup:function(e){this.index.group_code=e},getInterface:function(){var e=this;this.showLoading=!0;var t={period_name:this.funcs.setYearCE("month",this.index.period_name),type:this.index.interface_type,group_code:this.index.group_code};axios.get("/ir/ajax/confirm-gl",{params:t}).then((function(t){e.showLoading=!1,window.open(t.data.data.redirect_to_export,"_blank"),swal({title:'<div class="mt-4"> Success </div>',text:'<span style="font-size: 16px; text-align: left;"> ทำการ Interface ข้อมูลเข้า GL เรียบร้อยแล้ว </span>',type:"success",html:!0},(function(e){e&&(window.location.href="/ir/confirm-to-gl")}))})).catch((function(t){e.showLoading=!1,swal({title:'<div class="mt-4"> Warning </div>',text:'<span style="font-size: 16px; text-align: left;">'+t.response.data.message+"</span>",type:"warning",html:!0}),e.disabledInterface=!0}))},getReport:function(){var e=this;this.showLoading=!0;var t={period_name:this.funcs.setYearCE("month",this.index.period_name),type:this.index.interface_type,group_code:this.index.group_code};axios.get("/ir/ajax/confirm-gl/report",{params:t}).then((function(t){e.showLoading=!1,window.open(t.data.data.redirect_to_export,"_blank")})).catch((function(t){swal({title:'<div class="mt-4"> Warning </div>',text:'<span style="font-size: 16px; text-align: left;">'+t.response.data.message.msg+"</span>",type:"warning",html:!0}),e.disabledInterface=!0,e.showLoading=!1}))},getCancel:function(){var e,t=this;swal((h(e={html:!0,title:"ยกเลิกรายการ Interface GL",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการยกเลิกรายการ Interface GL ใช่หรือไม่? </span></h2>',showCancelButton:!0,confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก",confirmButtonClass:"#1ab394",cancelButtonClass:"#e7eaec"},"confirmButtonClass","btn btn-primary btn-lg tw-w-25"),h(e,"cancelButtonClass","btn btn-danger btn-lg tw-w-25"),h(e,"closeOnConfirm",!1),h(e,"closeOnCancel",!0),h(e,"showLoaderOnConfirm",!0),e),function(){var e,n=(e=i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.cancel();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){f(o,a,i,s,r,"next",e)}function r(e){f(o,a,i,s,r,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}())},cancel:function(){var e=this;this.showLoading=!0;var t={period_name:this.funcs.setYearCE("month",this.index.period_name),type:this.index.interface_type,group_code:this.index.group_code};axios.get("/ir/ajax/confirm-gl/cancel",{params:t}).then((function(t){t.data;e.showLoading=!1,swal({title:'<div class="mt-4"> Success </div>',text:'<span style="font-size: 16px; text-align: left;"> ยกเลิกรายการสำเร็จ </span>',type:"success",html:!0},(function(e){e&&(window.location.href="/ir/confirm-to-gl")}))})).catch((function(t){e.showLoading=!1,swal({title:'<div class="mt-4"> Warning </div>',text:'<span style="font-size: 16px; text-align: left;">'+t.response.data.message.msg+"</span>",type:"warning",html:!0}),e.disabledInterface=!0}))},clickClear:function(){window.location.href="/ir/confirm-to-gl"}},components:{lovPolicySetHeaderId:o.Z,lovInterfaceType:c,lovGroupCode:s.Z}};const g=(0,l.Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}]},[n("el-form",{ref:"index_gl_invoice_interface",staticClass:"demo-ruleForm",attrs:{model:e.index,rules:e.rules,"label-width":"120px"}},[n("div",{staticClass:"col-lg-11"},[n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-5 col-form-label lable_align"},[n("strong",[e._v("เดือน *")])]),e._v(" "),n("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[n("el-form-item",{ref:"period_name",attrs:{prop:"period_name"}},[n("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"period_name",id:"period_name","p-type":"month",placeholder:"เดือน",format:e.vars.formatMonth},on:{dateWasSelected:e.getValuePeriodName},model:{value:e.index.period_name,callback:function(t){e.$set(e.index,"period_name",t)},expression:"index.period_name"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-5 col-form-label lable_align"},[n("strong",[e._v("ประเภทประกันภัย *")])]),e._v(" "),n("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[n("el-form-item",{attrs:{prop:"interface_type"}},[n("lov-interface-type",{attrs:{placeholder:"ประเภทประกันภัย",name:"interface_type",size:"",popperBody:!0},on:{"change-lov":e.getValueInterfaceType},model:{value:e.index.interface_type,callback:function(t){e.$set(e.index,"interface_type",t)},expression:"index.interface_type"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-5 col-form-label lable_align"},[n("strong",[e._v("กลุ่ม *")])]),e._v(" "),n("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[n("el-form-item",{attrs:{prop:"group_code"}},[n("lov-group-code",{attrs:{placeholder:"กลุ่ม",name:"group_code",size:""},on:{"change-lov":e.getValueGroup},model:{value:e.index.group_code,callback:function(t){e.$set(e.index,"group_code",t)},expression:"index.group_code"}})],1)],1)])]),e._v(" "),n("div",{staticClass:"text-right el_field"},[n("el-form-item",[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(t){return e.clickPrintReport()}}},[n("i",{staticClass:"fa fa-print"}),e._v(" พิมพ์รายงาน\n        ")]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.disabledInterface},on:{click:function(t){return e.clickInterface()}}},[n("i",{staticClass:"fa fa-exchange"}),e._v(" ส่ง Interface\n        ")]),e._v(" "),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[n("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n        ")]),e._v(" "),n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickClear()}}},[n("i",{staticClass:"fa fa-repeat"}),e._v("\n              รีเซต\n        ")])])],1)])],1)}),[],!1,null,null,null).exports}}]);