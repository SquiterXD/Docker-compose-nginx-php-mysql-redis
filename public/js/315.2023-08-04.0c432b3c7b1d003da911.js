(self.webpackChunk=self.webpackChunk||[]).push([[315],{70315:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o});var s=a(23570),i=a.n(s);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const c={props:["showqualityAssuranceLineList","showqualityAssuranceList","qualityAssuranceId"],data:function(){return{lines:[],showqualityAssuranceLines:this.showqualityAssuranceLineList,is_loading:!1,isBtnSave:!1,checkKeyWord:!0}},mounted:function(){},methods:{addLine:function(){this.lines.push({id:i()(),enabledFlag:!0,tobaccoQTYchecklist:"",description:""}),this.checkKeyWord=!1},removeRow:function(t){this.lines.splice(t,1),0==this.lines.length&&(this.checkKeyWord=!0)},saveDataToTable:function(){var t=this,e=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.lines),a=this.showqualityAssuranceList,s=this.showqualityAssuranceLines,i=this.qualityAssuranceId;return this.is_loading=!0,0===Object.keys(e).length?axios.post("/qm/ajax/quality-assurance/update",{newLines:e,headers:a,lines:s,id:i}).then((function(e){"succeed"==e.data&&(swal({title:"Success !",text:"บันทึกสำเร็จ",type:"success",showConfirmButton:!0}),t.is_loading=!1,setTimeout((function(){window.location.reload(!1)}),3e3)),(e.data.status="ERROR")&&(swal({title:"เกิดข้อผิดพลาก !",text:"เนื่องจาก "+e.data.err_msg,type:"error",showConfirmButton:!0}),t.is_loading=!1)})):e[0].description!=[]&&e[0].tobaccoQTYchecklist!=[]?axios.post("/qm/ajax/quality-assurance/update",{newLines:e,headers:a,lines:s,id:i}).then((function(e){console.log(e.data.status),"succeed"==e.data&&(swal({title:"Success !",text:"บันทึกสำเร็จ",type:"success",showConfirmButton:!0}),t.is_loading=!1,setTimeout((function(){window.location.reload(!1)}),3e3)),(e.data.status="ERROR")&&(swal({title:"เกิดข้อผิดพลาก !",text:"เนื่องจาก "+e.data.err_msg,type:"error",showConfirmButton:!0}),t.is_loading=!1)})):void swal({title:"คำเตือน !",text:"ไม่สามารถบันทึกข้อมูลระดับ Line ได้เนื่องจากกรอกข้อมูลระดับ Line ยังไม่ครบถ้วน",type:"warning",showConfirmButton:!0})}}};const o=(0,a(51900).Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"text-right",staticStyle:{"padding-bottom":"15px","padding-top":"15px","padding-right":"15px"}},[a("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return e.preventDefault(),t.addLine(e)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" เพิ่มรายการ \n        ")])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered mb-0"},[t._m(0),t._v(" "),0!=t.showqualityAssuranceLines.length?a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.is_loading,expression:"is_loading"}]},[t._l(t.showqualityAssuranceLines,(function(e,s){return a("tr",{key:"showData"+s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{model:{value:e.enabledFlagShowWeb,callback:function(a){t.$set(e,"enabledFlagShowWeb",a)},expression:"value.enabledFlagShowWeb"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายการตรวจสอบคุณภาพบุหรี่"},model:{value:e.tobacco_qty_checklist,callback:function(a){t.$set(e,"tobacco_qty_checklist",a)},expression:"value.tobacco_qty_checklist"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายละเอียดการตรวจสอบคุณภาพบุหรี่"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"value.description"}})],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}})])})),t._v(" "),t._l(t.lines,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{model:{value:e.enabledFlag,callback:function(a){t.$set(e,"enabledFlag",a)},expression:"dataLine.enabledFlag"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายการตรวจสอบคุณภาพบุหรี่"},model:{value:e.tobaccoQTYchecklist,callback:function(a){t.$set(e,"tobaccoQTYchecklist",a)},expression:"dataLine.tobaccoQTYchecklist"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายละเอียดการตรวจสอบคุณภาพบุหรี่"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"dataLine.description"}})],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(s)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])])})),t._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[a("div",{staticClass:"row justify-content-center clearfix tw-my-4"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button",disabled:t.isBtnSave},on:{click:function(e){return t.saveDataToTable()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" บันทึก\n                                ")])])])])])],2):a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.is_loading,expression:"is_loading"}]},[t.checkKeyWord?a("tr",[t._m(1)]):t._e(),t._v(" "),t._l(t.lines,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("el-checkbox",{model:{value:e.enabledFlag,callback:function(a){t.$set(e,"enabledFlag",a)},expression:"dataLine.enabledFlag"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายการตรวจสอบคุณภาพบุหรี่"},model:{value:e.tobaccoQTYchecklist,callback:function(a){t.$set(e,"tobaccoQTYchecklist",a)},expression:"dataLine.tobaccoQTYchecklist"}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[a("el-input",{attrs:{placeholder:"รายละเอียดการตรวจสอบคุณภาพบุหรี่"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"dataLine.description"}})],1),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(s)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])])})),t._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[a("div",{staticClass:"row justify-content-center clearfix tw-my-4"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button",disabled:t.isBtnSave},on:{click:function(e){return t.saveDataToTable()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" บันทึก\n                                ")])])])])])],2)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"font-size":"small"}},[a("div",[t._v("สถานะการใช้งาน")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"font-size":"small"}},[a("div",[t._v("รายการตรวจสอบคุณภาพบุหรี่ "),a("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"font-size":"small"}},[a("div",[t._v("รายละเอียดการตรวจสอบคุณภาพบุหรี่ "),a("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),a("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"100%"},attrs:{colspan:"4"}},[a("h2",[t._v(" ไม่มีข้อมูลในระบบ ")])])}],!1,null,null,null).exports}}]);