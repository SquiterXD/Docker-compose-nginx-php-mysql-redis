(self.webpackChunk=self.webpackChunk||[]).push([[5831],{35831:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(87757),a=r.n(s);function l(e,t,r,s,a,l,i){try{var n=e[l](i),o=n.value}catch(e){return void r(e)}n.done?t(o):Promise.resolve(o).then(s,a)}const i={props:["budgetYears","months","biWeekly","defaultInput","btnTrans","url"],data:function(){return{budget_year:this.defaultInput.current_year,month:"",bi_weekly:"",loading:!1,errors:{budget_year:!1,month:!1,bi_weekly:!1},monthLists:[],biWeeklyLists:[]}},mounted:function(){this.getMonth(),this.getBiWeekly()},computed:{},watch:{errors:{handler:function(e){e.budget_year?this.setError("budget_year"):this.resetError("budget_year"),e.month?this.setError("month"):this.resetError("month"),e.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{openModal:function(){$("#modal_create").modal("show")},createForm:function(){var e,t=this;return(e=a().mark((function e(){var r,s,l,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,s=$("#create-form"),l=!0,i="",r.errors.budget_year=!1,r.errors.month=!1,r.errors.bi_weekly=!1,$(s).find("div[id='el_explode_budget_year']").html(""),$(s).find("div[id='el_explode_month']").html(""),$(s).find("div[id='el_explode_bi_weekly']").html(""),""==r.budget_year&&(r.errors.budget_year=!0,l=!1,i="กรุณาเลือกปีงบประมาณ",$(s).find("div[id='el_explode_budget_year']").html(i)),""==t.month&&(t.errors.month=!0,l=!1,i="กรุณาเลือกเดือน",$(s).find("div[id='el_explode_month']").html(i)),""==r.bi_weekly&&(r.errors.bi_weekly=!0,l=!1,i="กรุณาเลือกปักษ์",$(s).find("div[id='el_explode_bi_weekly']").html(i)),l){e.next=15;break}return e.abrupt("return");case 15:return r.loading=!0,e.next=18,axios.get(r.url.ajax_machine_biweekly_create,{params:{search:{budget_year:r.budget_year,month:r.month,bi_weekly:r.bi_weekly}}}).then((function(e){r.loading=!1,"E"==e.data.data.status?swal({title:"ตรวจสอบข้อมูล",text:'<span style="font-size: 16px; text-align: left;">'+e.data.data.msg+"</span>",type:"warning",html:!0}):(swal({title:"สร้างประมาณการผลิตรายวัน",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลประมาณการผลิตรายวันเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=e.data.data.redirect_show_page}),1e3))})).catch((function(e){r.loading=!1,swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+e.response.data+"</span>",type:"error",html:!0})})).then((function(){r.loading=!1}));case 18:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(s,a){var i=e.apply(t,r);function n(e){l(i,s,a,n,o,"next",e)}function o(e){l(i,s,a,n,o,"throw",e)}n(void 0)}))})()},getMonth:function(){this.month="",this.bi_weekly="",this.monthLists=this.months},getBiWeekly:function(){var e=this;this.search||(this.bi_weekly=""),this.biWeeklyLists=this.biWeekly.filter((function(t){return t.period_num==e.month}))},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""},errorRef:function(e){var t=this;t.errors.budget_year=e.err.budget_year,t.errors.month=e.err.month,t.errors.bi_weekly=e.err.bi_weekly}}};const n=(0,r(51900).Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("button",{class:e.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:e.openModal}},[r("i",{class:e.btnTrans.create.icon}),e._v("\n        "+e._s(e.btnTrans.create.text)+"\n    ")]),e._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"modal_create",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-lg"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"modal-content"},[e._m(0),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"modal-body text-left"},[r("form",{attrs:{id:"create-form"}},[r("div",{staticClass:"row col-12"},[r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[e._v(" ปีงบประมาณ :")]),e._v(" "),r("div",{staticClass:"input-group "},[r("el-select",{ref:"budget_year",attrs:{size:"large",placeholder:"ปีงบประมาณ",clearable:"",filterable:"","popper-append-to-body":!1},on:{change:e.getMonth},model:{value:e.budget_year,callback:function(t){e.budget_year=t},expression:"budget_year"}},e._l(e.budgetYears,(function(e,t){return r("el-option",{key:t,attrs:{label:e.thai_year,value:e.thai_year}})})),1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-4 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" เดือน ")]),e._v(" "),r("div",{},[e.budget_year?r("el-select",{ref:"month",attrs:{clearable:"",size:"large",placeholder:"เดือน",filterable:"","popper-append-to-body":!1},on:{change:e.getBiWeekly},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.thai_month,value:e.period_num}})})),1):r("el-select",{ref:"month",attrs:{clearable:"",size:"large",placeholder:"เดือน",disabled:""},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.thai_month,value:e.period_num}})})),1)],1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_month"}})]),e._v(" "),r("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[r("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[e._v(" ปักษ์ที่ :")]),e._v(" "),r("div",{},[r("input",{attrs:{type:"hidden",name:"search[bi_weekly]"},domProps:{value:e.bi_weekly}}),e._v(" "),e.month?r("el-select",{ref:"bi_weekly",attrs:{clearable:"",size:"large",placeholder:"ปักษ์",filterable:"","popper-append-to-body":!1},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1):r("el-select",{ref:"bi_weekly",attrs:{clearable:"",size:"large",placeholder:"ปักษ์",disabled:""},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1),e._v(" "),r("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly"}})],1)]),e._v(" "),r("div",{staticClass:"form-group text-right pr-2 mb-0 col-lg-2 col-md-10 col-sm-12 col-xs-12"},[r("label",{staticClass:" tw-font-bold tw-uppercase mt-1"},[e._v(" ")]),e._v(" "),r("div",{staticClass:"text-left"},[r("button",{class:e.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:e.createForm}},[r("i",{class:e.btnTrans.create.icon}),e._v("\n                                        "+e._s(e.btnTrans.create.text)+"\n                                    ")])])])])])]),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[e._v("\n                        สร้างแผนประมาณการผลิตรายวัน\n                    ")]),e._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),r("span",{staticClass:"sr-only"},[e._v("Close")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")])])}],!1,null,null,null).exports}}]);