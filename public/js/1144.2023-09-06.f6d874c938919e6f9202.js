(self.webpackChunk=self.webpackChunk||[]).push([[1144],{71144:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(87757),i=a.n(n);function s(e,t,a,n,i,s,o){try{var c=e[s](o),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,i)}const o={props:["checkPoints","btnTrans"],data:function(){return{build_name:this.checkPoints?this.checkPoints[0].build_name:"",department_name:this.checkPoints?this.checkPoints[0].department_name:"",location_desc:this.checkPoints?this.checkPoints[0].location_desc:"",locator_desc:this.checkPoints?this.checkPoints[0].locator_desc:"",building_code:this.checkPoints?this.checkPoints[0].building_code:"",enable_flag:"Y"==this.checkPoints[0].enabled_flag,fileList:[],subinventory_code:this.checkPoints?this.checkPoints[0].subinventory_code:"",warehouse_code:this.checkPoints?this.checkPoints[0].building_code:"",location_code:this.checkPoints?this.checkPoints[0].location_code:"",limitImage:this.checkPoints?this.checkPoints[0].limitImage:0,validate:{build_name:!1,department_name:!1,location_desc:!1,locator_desc:!1,building_code:!1}}},mounted:function(){},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){swal({title:"คำเตือน !",text:"ไม่สามารถอัปโหลดรูปภาพเนื่องจากเกินจำนวนของรูปภาพสูงสุดของรูปภาพ",type:"warning",showConfirmButton:!0})},beforeRemove:function(e,t){return this.$confirm("ยกเลิกการอัปโหลดไฟล์รูปภาพ ".concat(e.name," ใช่หรือไม่ ?"))},onChange:function(e,t){this.fileList=t},save:function(){var e,t=this;return(e=i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,n=new FormData,a.build_name){e.next=7;break}return a.validate.build_name=!0,e.abrupt("return");case 7:a.validate.build_name=!1;case 8:if(a.department_name){e.next=13;break}return a.validate.department_name=!0,e.abrupt("return");case 13:a.validate.department_name=!1;case 14:if(a.location_desc){e.next=19;break}return a.validate.location_desc=!0,e.abrupt("return");case 19:a.validate.location_desc=!1;case 20:if(a.locator_desc){e.next=25;break}return a.validate.locator_desc=!0,e.abrupt("return");case 25:a.validate.locator_desc=!1;case 26:return n.append("subinventory_code",a.subinventory_code),n.append("warehouse_code",a.warehouse_code),n.append("location_code",a.location_code),n.append("location_desc",a.location_desc),n.append("locator_desc",a.locator_desc),n.append("enable_flag",a.enable_flag),n.append("build_name",a.build_name),n.append("department_name",a.department_name),n.append("building_code",a.building_code),a.fileList.forEach((function(e,t){n.append("files[]",a.fileList[t].raw)})),e.abrupt("return",axios.post("/qm/settings/check-points-tobacco-beetle/update",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){"SUCCESS"==e.data.status?(swal({title:"Success !",text:"ทำการเปลี่ยนข้อมูลเรียบร้อยแล้ว",type:"success",showConfirmButton:!0}),setTimeout((function(){window.location.href="/qm/settings/check-points-tobacco-beetle"}),3e3)):swal({title:"Error !",text:e.data.err_msg,type:"error",showConfirmButton:!0})})));case 37:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function c(e){s(o,n,i,c,l,"next",e)}function l(e){s(o,n,i,c,l,"throw",e)}c(void 0)}))})()}}};const c=(0,a(51900).Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.subinventory_code,expression:"subinventory_code"}],attrs:{type:"hidden",name:"subinventory_code"},domProps:{value:e.subinventory_code},on:{input:function(t){t.target.composing||(e.subinventory_code=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.warehouse_code,expression:"warehouse_code"}],attrs:{type:"hidden",name:"warehouse_code"},domProps:{value:e.warehouse_code},on:{input:function(t){t.target.composing||(e.warehouse_code=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.location_code,expression:"location_code"}],attrs:{type:"hidden",name:"location_code"},domProps:{value:e.location_code},on:{input:function(t){t.target.composing||(e.location_code=t.target.value)}}}),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[e._v("อาคาร")]),a("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.build_name,expression:"build_name"}],attrs:{type:"hidden",name:"build_name"},domProps:{value:e.build_name},on:{input:function(t){t.target.composing||(e.build_name=t.target.value)}}}),e._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่ออาคาร"},model:{value:e.build_name,callback:function(t){e.build_name=t},expression:"build_name"}}),e._v(" "),this.validate.build_name?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[e._v("กรุณากรอก ชื่ออาคาร")])]):e._e()],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[e._v("หน่วยงาน")]),a("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.department_name,expression:"department_name"}],attrs:{type:"hidden",name:"department_name"},domProps:{value:e.department_name},on:{input:function(t){t.target.composing||(e.department_name=t.target.value)}}}),e._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อหน่วยงาน"},model:{value:e.department_name,callback:function(t){e.department_name=t},expression:"department_name"}}),e._v(" "),this.validate.department_name?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[e._v("กรุณากรอก หน่วยงาน")])]):e._e()],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[e._v("ชื่อจุดตรวจสอบ")]),a("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.location_desc,expression:"location_desc"}],attrs:{type:"hidden",name:"location_desc"},domProps:{value:e.location_desc},on:{input:function(t){t.target.composing||(e.location_desc=t.target.value)}}}),e._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อจุดตรวจสอบ",disabled:!0},model:{value:e.location_desc,callback:function(t){e.location_desc=t},expression:"location_desc"}}),e._v(" "),this.validate.location_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[e._v("กรุณากรอก ชื่อจุดตรวจสอบ")])]):e._e()],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[e._v("รายละเอียดจุดตรวจสอบ")]),a("span",{staticClass:"text-danger"},[e._v(" *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.locator_desc,expression:"locator_desc"}],attrs:{type:"hidden",name:"locator_desc"},domProps:{value:e.locator_desc},on:{input:function(t){t.target.composing||(e.locator_desc=t.target.value)}}}),e._v(" "),a("el-input",{attrs:{placeholder:"กรอกชื่อจุดตรวจสอบ"},model:{value:e.locator_desc,callback:function(t){e.locator_desc=t},expression:"locator_desc"}}),e._v(" "),this.validate.locator_desc?a("div",{staticClass:"error-message"},[a("strong",{staticClass:"font-bold text-danger"},[e._v("กรุณากรอก รายละเอียดจุดตรวจสอบ")])]):e._e()],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px"}},[a("label",[e._v("สถานะการใช้งาน")]),e._v(" "),a("input",{attrs:{type:"hidden",name:"enable_flag"},domProps:{value:e.enable_flag}}),e._v(" "),a("el-checkbox",{staticClass:"w-100",model:{value:e.enable_flag,callback:function(t){e.enable_flag=t},expression:"enable_flag"}})],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"margin-right":"125px","margin-left":"125px","padding-top":"15px","padding-bottom":"15px"}},[a("label",[e._v("รูปภาพประกอบ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fileList,expression:"fileList"}],attrs:{type:"hidden",name:"files[]"},domProps:{value:e.fileList},on:{input:function(t){t.target.composing||(e.fileList=t.target.value)}}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://web-service.test/qm/settings/check-points-tobacco-beetle/update","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"auto-upload":!1,"on-change":e.onChange,multiple:"",limit:e.limitImage,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("เพิ่มรูปภาพ")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("สามารถเพิ่มได้อีก "+e._s(e.limitImage)+" รูป สูงสุดไม่เกิน 5 รูป")])],1)],1)])])]),e._v(" "),a("div",{staticClass:"col-12 mt-3"},[a("hr"),e._v(" "),a("div",{staticClass:"row clearfix m-t-lg text-right"},[a("div",{staticClass:"col-sm-12"},[a("button",{class:e.btnTrans.save.class,attrs:{type:"submit"},on:{click:e.save}},[a("i",{staticClass:"btnTrans.save.icon",attrs:{"aria-hidden":"true"}}),e._v("  \n                        "+e._s(e.btnTrans.save.text)+"\n                ")]),e._v(" "),a("a",{class:e.btnTrans.cancel.class,attrs:{href:"/qm/settings/check-points-tobacco-beetle",type:"button"}},[a("i",{class:e.btnTrans.cancel.icon,attrs:{"aria-hidden":"true"}}),e._v(" \n                    "+e._s(e.btnTrans.cancel.text)+"\n                ")])])])])])}),[],!1,null,null,null).exports}}]);