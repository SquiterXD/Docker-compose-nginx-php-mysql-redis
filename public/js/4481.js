(self.webpackChunk=self.webpackChunk||[]).push([[4481],{24481:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var n=a(87757),s=a.n(n);function r(t,e,a,n,s,r,o){try{var i=t[r](o),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,s)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var o=t.apply(e,a);function i(t){r(o,n,s,i,c,"next",t)}function c(t){r(o,n,s,i,c,"throw",t)}i(void 0)}))}}const i={props:["old","defaultValue","itemGroups","urlSave","urlReset"],data:function(){return{item_cat_code:this.old.item_cat_code?this.old.item_cat_code:this.defaultValue?this.defaultValue.item_cat_code:"",max_qty:this.old.max_qty?this.old.max_qty:this.defaultValue?this.defaultValue.max_qty:"",enable_flag:this.old.enable_flag?!!this.old.enable_flag:!this.defaultValue||"Y"==this.defaultValue.enable_flag,uom_code:"",uom_description:"",uomLists:[],csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}},mounted:function(){this.item_cat_code&&this.getItemData(),this.numbericBlur()},methods:{numbericFocus:function(){this.max_qty=this.max_qty.replaceAll(",","")},numbericBlur:function(){this.max_qty=this.max_qty.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},onlyNumeric:function(){this.max_qty=this.max_qty.replace(/[^0-9]/g,"")},getUom:function(t){var e=this;return o(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.uomLists=[],axios.get("/pm/ajax/max-storage/get-uom",{params:{query:t}}).then((function(t){e.uomLists=t.data})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},checkForm:function(t){var e=this;return o(s().mark((function a(){var n;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=$("#submitForm"),n.serialize(),e.errors=[],e.item_cat_code||(e.errors.push("ประเภทวัตถุดิบ"),swal({title:"มีข้อผิดพลาด โปรดระบุข้อมูลดังนี้",text:e.errors,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})),e.max_qty||(e.errors.push("จำนวนพัสดุต่อพื้นที่"),swal({title:"มีข้อผิดพลาด โปรดระบุข้อมูลดังนี้",text:e.errors,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})),e.uom_code||(e.errors.push("หน่วยนับ"),swal({title:"มีข้อผิดพลาด โปรดระบุข้อมูลดังนี้",text:e.errors,timer:3e3,type:"error",showCancelButton:!1,showConfirmButton:!1})),e.errors.length||(e.max_qty=e.max_qty.replaceAll(",",""),n.submit()),t.preventDefault();case 8:case"end":return a.stop()}}),a)})))()},getItemData:function(){var t=this;this.uom_description="",this.uom_code="",this.item_cat_code&&axios.get("/pm/ajax/max-storage/get-uom",{params:{item_cat_code:this.item_cat_code}}).then((function(e){var a=e.data;t.uom_description=a.unit_of_measure,t.uom_code=a.uom_code})).catch((function(t){console.log(t)}))}}};const c=(0,a(51900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{id:"submitForm",action:t.urlSave,method:"post"},on:{submit:function(e){return e.preventDefault(),t.checkForm(e)}}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),this.defaultValue?a("input",{attrs:{type:"hidden",name:"_method",value:"PUT"}}):t._e(),t._v(" "),a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._m(0),t._v(" "),a("input",{attrs:{type:"hidden",name:"item_cat_code",autocomplete:"off"},domProps:{value:t.item_cat_code}}),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:""},on:{change:function(e){return t.getItemData()}},model:{value:t.item_cat_code,callback:function(e){t.item_cat_code=e},expression:"item_cat_code"}},t._l(t.itemGroups,(function(t){return a("el-option",{key:t.item_cat_code,attrs:{label:t.item_cat_segment2_desc,value:t.item_cat_code}})})),1)],1)]),t._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col"},[t._m(1),t._v(" "),a("el-input",{attrs:{name:"max_qty"},on:{focus:t.numbericFocus,blur:t.numbericBlur,input:function(e){return t.onlyNumeric()}},model:{value:t.max_qty,callback:function(e){t.max_qty=e},expression:"max_qty"}})],1),t._v(" "),a("div",{staticClass:"col"},[t._m(2),t._v(" "),a("el-input",{attrs:{name:"uom_description",disabled:""},model:{value:t.uom_description,callback:function(e){t.uom_description=e},expression:"uom_description"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"uom_code"},domProps:{value:t.uom_code}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",[t._v(" สถานะการใช้งาน ")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enable_flag,expression:"enable_flag"}],attrs:{type:"checkbox",name:"enable_flag"},domProps:{checked:Array.isArray(t.enable_flag)?t._i(t.enable_flag,null)>-1:t.enable_flag},on:{change:function(e){var a=t.enable_flag,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=t._i(a,null);n.checked?r<0&&(t.enable_flag=a.concat([null])):r>-1&&(t.enable_flag=a.slice(0,r).concat(a.slice(r+1)))}else t.enable_flag=s}}})])])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row mt-3 text-right"},[a("div",{staticClass:"col-sm-12"},[t._m(3),t._v(" "),a("a",{staticClass:"btn btn-sm btn-warning",attrs:{href:this.urlReset,type:"button"}},[a("i",{staticClass:"fa fa-times"}),t._v(" ยกเลิก\n      ")])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v(" ประเภทวัตถุดิบ "),a("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v(" จำนวนพัสดุต่อพื้นที่ "),a("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v(" หน่วยนับ "),a("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-save"}),t._v(" บันทึก\n      ")])}],!1,null,null,null).exports}}]);