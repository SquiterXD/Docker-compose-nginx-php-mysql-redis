(self.webpackChunk=self.webpackChunk||[]).push([[9387],{49387:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var o=a(87757),l=a.n(o),s=a(23570),r=a.n(s),i=a(30381),d=a.n(i);function n(t,e,a,o,l,s,r){try{var i=t[s](r),d=i.value}catch(t){return void a(t)}i.done?e(d):Promise.resolve(d).then(o,l)}const u={props:["programs","modules","groupFormats","resetAts","dateFormats","yearTypes","getAssignments","numDocuments","headers","old","defaultFormValue"],data:function(){return{running_code:this.old.running_code?this.old.running_code:this.defaultFormValue?this.defaultFormValue.doc_seq_code:"",description:this.old.description?this.old.description:this.defaultFormValue?this.defaultFormValue.doc_seq_description:"",programs_code:this.old.programs_code?this.old.programs_code:this.getAssignments?this.getAssignments:[],start_date:this.old.start_date?this.old.start_date:this.defaultFormValue?this.defaultFormValue.start_date:"",end_date:this.old.end_date?this.old.end_date:this.defaultFormValue?this.defaultFormValue.end_date:"",reset_at:this.old.reset_at?this.old.reset_at:this.defaultFormValue?this.defaultFormValue.reset_every:"",start_digit:this.old.start_digit?this.old.start_digit:this.defaultFormValue?this.defaultFormValue.start_with:"",number_digit:this.old.number_digit?this.old.number_digit:this.defaultFormValue?this.defaultFormValue.prefix_number_digit:"",module_code:this.old.module_code?this.old.module_code:this.defaultFormValue?this.defaultFormValue.module_code:"",lines:[],disabledData:!!this.defaultFormValue,active_flag:"Y"==this.old.active_flag||(!this.defaultFormValue||("Y"==this.defaultFormValue.active_flag||"")),year_type:"",date_format:"",detail:""}},mounted:function(){var t=this;if(this.old.running_code&&this.getModule(),this.old.group_format&&this.old.group_format.forEach((function(e){var a,o,l;t.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==e?e:"$PREFIX",date_format:null!==(a=t.old.date_format)&&void 0!==a?a:"",year_type:null!==(o=t.old.year_type)&&void 0!==o?o:"",detail:null!==(l=t.old.detail)&&void 0!==l?l:"",disabledFormat:!1})})),this.defaultFormValue){var e,a,o,l,s,i,d,n,u,c,m,_,f,p,h;if(this.defaultFormValue.format1)this.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==this.defaultFormValue.format1?this.defaultFormValue.format1:"$PREFIX",date_format:null!==(e=this.defaultFormValue.format_date)&&void 0!==e?e:"",year_type:null!==(a=this.defaultFormValue.year_type)&&void 0!==a?a:"",detail:null!==(o=this.defaultFormValue.format1)&&void 0!==o?o:"",disabledFormat:!0});if(this.defaultFormValue.format2)this.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==this.defaultFormValue.format2?this.defaultFormValue.format2:"$PREFIX",date_format:null!==(l=this.defaultFormValue.format_date)&&void 0!==l?l:"",year_type:null!==(s=this.defaultFormValue.year_type)&&void 0!==s?s:"",detail:null!==(i=this.defaultFormValue.format2)&&void 0!==i?i:"",disabledFormat:!0});if(this.defaultFormValue.format3)this.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==this.defaultFormValue.format3?this.defaultFormValue.format3:"$PREFIX",date_format:null!==(d=this.defaultFormValue.format_date)&&void 0!==d?d:"",year_type:null!==(n=this.defaultFormValue.year_type)&&void 0!==n?n:"",detail:null!==(u=this.defaultFormValue.format3)&&void 0!==u?u:"",disabledFormat:!0});if(this.defaultFormValue.format4)this.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==this.defaultFormValue.format4?this.defaultFormValue.format4:"$PREFIX",date_format:null!==(c=this.defaultFormValue.format_date)&&void 0!==c?c:"",year_type:null!==(m=this.defaultFormValue.year_type)&&void 0!==m?m:"",detail:null!==(_=this.defaultFormValue.format4)&&void 0!==_?_:"",disabledFormat:!0});if(this.defaultFormValue.format5)this.lines.push({id:r()(),lineId:"",group_format:"$DATE_FORMAT"==this.defaultFormValue.format5?this.defaultFormValue.format5:"$PREFIX",date_format:null!==(f=this.defaultFormValue.format_date)&&void 0!==f?f:"",year_type:null!==(p=this.defaultFormValue.year_type)&&void 0!==p?p:"",detail:null!==(h=this.defaultFormValue.format5)&&void 0!==h?h:"",disabledFormat:!0})}},computed:{expRunningNumber:function(){for(var t="",e=1;e<this.number_digit;e++){t+="0"}return t+this.start_digit}},methods:{addLine:function(){this.lines.push({id:r()(),lineId:"",group_format:""})},removeRow:function(t){this.lines.splice(t,1)},checkDup:function(){var t=this;this.selectedData=this.headers.find((function(e){return e.doc_seq_description==t.description})),this.selectedData&&(this.$notify.error({title:"มีข้อผิดพลาด",message:"คำอธิบายซ้ำกับในระบบ"}),this.description="")},checkDate:function(){this.start_date&&d()(String(this.end_date)).format("yyyy-MM-DD")<d()(String(this.start_date)).format("yyyy-MM-DD")&&(this.$notify.error({title:"มีข้อผิดพลาด",message:"วันที่สิ้นสุดต้องไม่น้อยกว่าวันที่เริ่มต้น"}),this.end_date="")},showDate:function(){var t,e=this;return(t=l().mark((function t(){var a,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.start_date){t.next=7;break}return console.log("start_date --\x3e"+e.start_date),console.log(d()(String(e.start_date)).format("yyyy-MM-DD")),t.next=5,helperDate.parseToDateTh(e.start_date,"yyyy-MM-DD");case 5:a=t.sent,e.start_date=a;case 7:if(!e.end_date){t.next=13;break}return console.log("end_date --\x3e"+e.end_date),t.next=11,helperDate.parseToDateTh(e.end_date,"yyyy-MM-DD");case 11:o=t.sent,e.end_date=o;case 13:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(o,l){var s=t.apply(e,a);function r(t){n(s,o,l,r,i,"next",t)}function i(t){n(s,o,l,r,i,"throw",t)}r(void 0)}))})()},getModule:function(){var t=this;this.module_code="",this.selectedData=this.numDocuments.find((function(e){return e.lookup_code==t.running_code})),this.selectedData&&(this.module_code=this.selectedData.tag),console.log("ระบบงาน  ----\x3e  "+this.module_code)},checkFormat:function(t,e){var a=this;e>0&&this.lines.find((function(e){e.id!=t.id&&(console.log("group_format --\x3e"+e.group_format),"$DATE_FORMAT"==e.group_format&&"$DATE_FORMAT"==t.group_format&&(a.$notify.error({title:"มีข้อผิดพลาด",message:"ไม่สามารถเลือกรูปแบบวันที่ซ้ำกันภายใต้ Document ชุดเดียวกันได้"}),t.group_format=""))}))},onlyNumeric:function(){this.number_digit=this.number_digit.replace(/[^0-9 .]/g,""),this.start_digit=this.start_digit.replace(/[^0-9 .]/g,"")}}};const c=(0,a(51900).Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{attrs:{type:"hidden",name:"running_code",autocomplete:"off"},domProps:{value:t.running_code}}),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",disabled:this.disabledData},on:{change:function(e){return t.getModule()}},model:{value:t.running_code,callback:function(e){t.running_code=e},expression:"running_code"}},t._l(t.numDocuments,(function(t){return a("el-option",{key:t.lookup_code,attrs:{label:t.meaning,value:t.lookup_code}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("คำอธิบาย")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("el-input",{attrs:{type:"text",name:"description",size:"medium",autocomplete:"off",disabled:this.disabledData},on:{input:function(e){return t.checkDup()}},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(1),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("el-input",{attrs:{type:"text",name:"module_code",size:"medium",autocomplete:"off",disabled:""},model:{value:t.module_code,callback:function(e){t.module_code=e},expression:"module_code"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(2),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{attrs:{type:"hidden",name:"programs_code",autocomplete:"off"},domProps:{value:t.programs_code}}),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",multiple:"",disabled:this.disabledData},model:{value:t.programs_code,callback:function(e){t.programs_code=e},expression:"programs_code"}},t._l(t.programs,(function(t){return a("el-option",{key:t.program_code,attrs:{label:t.program_code+" : "+t.description,value:t.program_code}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(3),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"วันที่เริ่มต้น",name:"start_date",format:"dd-MM-yyyy",disabled:this.disabledData},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("วันที่สิ้นสุด")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"วันที่สิ้นสุด",name:"end_date",format:"dd-MM-yyyy"},on:{change:function(e){return t.checkDate()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(4),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{attrs:{type:"hidden",name:"reset_at",autocomplete:"off"},domProps:{value:t.reset_at}}),t._v(" "),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:this.disabledData},model:{value:t.reset_at,callback:function(e){t.reset_at=e},expression:"reset_at"}},t._l(t.resetAts,(function(t){return a("el-option",{key:t.lookup_code,attrs:{label:t.description,value:t.lookup_code}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("Active")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.active_flag,expression:"active_flag"}],attrs:{type:"checkbox",name:"active_flag"},domProps:{checked:Array.isArray(t.active_flag)?t._i(t.active_flag,null)>-1:t.active_flag},on:{change:function(e){var a=t.active_flag,o=e.target,l=!!o.checked;if(Array.isArray(a)){var s=t._i(a,null);o.checked?s<0&&(t.active_flag=a.concat([null])):s>-1&&(t.active_flag=a.slice(0,s).concat(a.slice(s+1)))}else t.active_flag=l}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(5),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",name:"number_digit",autocomplete:"off",disabled:this.disabledData},on:{input:t.onlyNumeric},model:{value:t.number_digit,callback:function(e){t.number_digit=e},expression:"number_digit"}}),t._v("\n                            Digits เริ่มจาก\n                            "),a("el-input",{staticStyle:{width:"30%"},attrs:{type:"text",name:"start_digit",autocomplete:"off",disabled:this.disabledData},on:{input:t.onlyNumeric},model:{value:t.start_digit,callback:function(e){t.start_digit=e},expression:"start_digit"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("ตัวอย่าง")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[t._v("\n                            "+t._s(t.expRunningNumber)+"\n                        ")])])]),t._v(" "),a("div",{staticClass:"col-6"},[t._m(6),t._v(" "),t._l(t.lines,(function(e,o){return a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-3 form-control-label text-right"},[t._v("ลำดับที่ "+t._s(o+1)),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("input",{attrs:{type:"hidden",name:"dataGroup["+o+"][group_format]",autocomplete:"off"},domProps:{value:e.group_format}}),t._v(" "),a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.disabledFormat},on:{change:function(a){return t.checkFormat(e,o)}},model:{value:e.group_format,callback:function(a){t.$set(e,"group_format",a)},expression:"row.group_format"}},t._l(t.groupFormats,(function(t){return a("el-option",{key:t.lookup_code,attrs:{label:t.description,value:t.lookup_code}})})),1)],1),t._v(" "),"$DATE_FORMAT"==e.group_format?a("div",{staticClass:"col-sm-4"},[a("div",[a("input",{attrs:{type:"hidden",name:"date_format",autocomplete:"off"},domProps:{value:e.date_format}}),t._v(" "),a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.disabledFormat},model:{value:e.date_format,callback:function(a){t.$set(e,"date_format",a)},expression:"row.date_format"}},t._l(t.dateFormats,(function(t){return a("el-option",{key:t.lookup_code,attrs:{label:t.description,value:t.lookup_code}})})),1)],1),t._v(" "),a("div",{staticClass:"mt-2"},[a("input",{attrs:{type:"hidden",name:"year_type",autocomplete:"off"},domProps:{value:e.year_type}}),t._v(" "),a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.disabledFormat},model:{value:e.year_type,callback:function(a){t.$set(e,"year_type",a)},expression:"row.year_type"}},t._l(t.yearTypes,(function(t){return a("el-option",{key:t.lookup_code,attrs:{label:t.description,value:t.lookup_code}})})),1)],1)]):t._e(),t._v(" "),"$PREFIX"==e.group_format?a("div",{staticClass:"col-sm-4"},[a("el-input",{attrs:{type:"text",name:"dataGroup["+o+"][detail]",size:"medium",autocomplete:"off",disabled:e.disabledFormat},model:{value:e.detail,callback:function(a){t.$set(e,"detail",a)},expression:"row.detail"}})],1):t._e(),t._v(" "),t.disabledData?t._e():a("div",{staticClass:"col-sm-1"},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(o)}}},[a("i",{staticClass:"fa fa-times"})])])])})),t._v(" "),t.disabledData?t._e():a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addLine(e)}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" เพิ่ม ")])])],2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("Document Code "),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("ระบบงาน"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("ชื่อเมนู"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("วันที่เริ่มใช้งาน"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("เริ่ม Running ใหม่"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-sm-4 form-control-label text-right"},[t._v("Running Number"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-12 form-control-label"},[a("strong",[t._v("เลือกตำแหน่งและรูปแบบ Format")])])])}],!1,null,null,null).exports}}]);