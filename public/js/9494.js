(self.webpackChunk=self.webpackChunk||[]).push([[9494],{84769:(a,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var e,o=t(80455);function l(a,s,t){return s in a?Object.defineProperty(a,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[s]=t,a}const i={components:{VueNumeric:t.n(o)()},props:["saleClass"],data:function(){return{dateLoading:!1,loading:!1,disable_params:!1,disable_interface:!1,dateLists:[],documentNoLists:[],close_date:"",interface_status:"",show_group_id:"",group_id:""}},mounted:function(){},methods:(e={getDateLists:function(){var a=this;a.dateLoading=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/date-lists",{sale_class:a.saleClass}).then((function(s){a.dateLists=s.data})).catch((function(s){a.dateLoading=!1,a.showError(s.message)})).then((function(){a.dateLoading=!1}))},callValidate:function(a){var s=this,t="",e=!1;if(s.close_date||(t+="กรุณาระบุวันที่ <br>",e=!0),e)return swal({html:!0,title:"กรุณาระบุข้อมูลให้ครบถ้วน",text:t,type:"error"}),!1;s.loading=!0,axios.post("/om/close-daily-payoff/"+s.saleClass+"/validate-data",{close_date:s.close_date,sale_class:s.saleClass}).then((function(t){"S"==t.data.status?"report"==a?s.callReport():"interface"==a&&s.callInterface():(s.loading=!1,"report"==a?swal({title:"Warning!",text:t.data.msg,type:"warning",showCancelButton:!1,closeOnConfirm:!0},(function(a){a&&s.callReport()})):"interface"==a&&s.showError(t.data.msg))})).catch((function(a){s.showError(a.message)})).then((function(){}))},callInterface:function(){var a=this;a.loading=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/interface",{close_date:a.close_date,sale_class:a.saleClass,group_id:a.group_id}).then((function(s){a.interface_status=s.data.status,"S"==s.data.status?(a.getDateLists(),a.showSuccess(s.data.msg),a.close_date="",a.group_id="",a.show_group_id=s.data.group_id):a.showError(s.data.msg)})).catch((function(s){a.showError(s.message)})).then((function(){a.loading=!1}))},showSuccess:function(a){swal("Success!",a,"success")},showError:function(a){swal("Error!",a,"error")},callReport:function(){var a=this;a.loading=a.disable_report=!0,axios.post("/om/close-daily-payoff/"+a.saleClass+"/call-report",{close_date:a.close_date,sale_class:a.saleClass}).then((function(s){"S"==s.data.status?(a.group_id=s.data.group_id,a.showSuccess(s.data.msg)):(a.group_id="",a.showError(s.data.msg))})).catch((function(s){a.showError(s.message)})).then((function(){a.loading=a.disable_report=!1}))}},l(e,"showSuccess",(function(a){swal("Success!",a,"success")})),l(e,"showError",(function(a){swal("Error!",a,"error")})),e)};const n=(0,t(51900).Z)(i,(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}]},[t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-3"}),a._v(" "),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-12"},[a._m(0),a._v(" "),t("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Select",disabled:a.disable_params,loading:a.dateLoading},on:{focus:function(s){return a.getDateLists()}},model:{value:a.close_date,callback:function(s){a.close_date=s},expression:"close_date"}},a._l(a.dateLists,(function(a,s){return t("el-option",{key:s,attrs:{label:a,value:s}})})),1)],1)]),a._v(" "),t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-12"},[t("label",[a._v("Group ID")]),a._v(" "),t("el-input",{staticClass:"w-100",attrs:{placeholder:"",disabled:!0},model:{value:a.show_group_id,callback:function(s){a.show_group_id=s},expression:"show_group_id"}})],1)]),a._v(" "),t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-12"},[t("label",[a._v("หมายเหตุ")]),a._v(" "),t("el-input",{staticClass:"w-100",attrs:{placeholder:"",disabled:!0},model:{value:a.interface_status,callback:function(s){a.interface_status=s},expression:"interface_status"}})],1)]),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 text-center"},[t("button",{staticClass:"btn btn-primary mt-2 mt-md-0",attrs:{type:"button",disabled:a.disable_interface},on:{click:function(s){return a.callValidate("interface")}}},[a._v(" Interface")])])])])])])}),[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("label",[a._v("วันที่ "),t("span",{staticClass:"text-danger"},[a._v("*")])])}],!1,null,null,null).exports}}]);