(self.webpackChunk=self.webpackChunk||[]).push([[6504],{26504:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>p});var a=o(87757),n=o.n(a),s=o(23570),i=o.n(s);function r(t,e,o,a,n,s,i){try{var r=t[s](i),c=r.value}catch(t){return void o(t)}r.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,o=arguments;return new Promise((function(a,n){var s=t.apply(e,o);function i(t){r(s,a,n,i,c,"next",t)}function c(t){r(s,a,n,i,c,"throw",t)}i(void 0)}))}}const l={props:["groupCode","backUrl","oldInput","btnTrans"],data:function(){return{product:"",department_code:0!=this.oldInput.length?this.oldInput.department_code:"",subinventory_code:0!=this.oldInput.length?this.oldInput.subinventory_code:"",subGroup:0!=this.oldInput.length?this.oldInput.sub_group_code:"",departments:[],subInventories:[],subGroups:[],itemCategories:[],policy_set_header:"",itemLocatorsLists:[],account_combine:"",asset_group_code:"",accounts_mapping:"",account_code:"",isDisabled:!0,isLoading:!1,isDisabledBtu:!1,lines:[],id:i()(),lineId:"",cate_code:"",loading:{locator:!1},lineList:!1,activeFlag:!0,value:""}},mounted:function(){this.oldInput.length,this.addLine(),this.groupCode&&this.ProductH()},watch:{groupCode:function(){this.ProductH()}},methods:{ProductH:function(){var t=this;this.isLoading=!0,this.product="",this.departments=[],this.subInventories=[],this.subGroups=[],this.itemCategories=[],this.policy_set_header="",this.account_combine="",this.accounts_mapping="",this.asset_group_code="",this.account_code="",this.groupCode&&axios.get("/ir/ajax/product-group",{params:{groupCode:this.groupCode}}).then((function(e){var o=e.data.data;t.product=o.groupProduct,t.departments=o.departments,t.subInventories=o.subInventories,t.subGroups=o.subGroups,t.itemCategories=o.itemCategories,t.policy_set_header=o.groupProduct?o.groupProduct.policy_set_header:"",t.accounts_mapping=o.groupProduct?o.groupProduct.accounts_mapping:"",t.account_combine=o.groupProduct?o.groupProduct.accounts_mapping.account_combine:"",t.asset_group_code=o.groupProduct?o.groupProduct.asset_group.description:"",t.isLoading=!1}))},getLocator:function(t){var e=this;return c(n().mark((function o(){var a;return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a={subinventory_code:t},e.loading.locator=!0,o.abrupt("return",axios.get("/ir/ajax/get-locator",{params:a}).then((function(t){"e"==t.data.status?(swal({title:"warning !",text:"รหัสคลังสินค้านี้ ไม่มีLocator",type:"warning",showConfirmButton:!0}),e.itemLocatorsLists=[],e.loading.locator=!1,e.locator="",e.isDisabled=!0):"clearData"==t.data.status?(e.itemLocatorsLists=[],e.loading.locator=!1,e.locator="",e.isDisabled=!0):(e.itemLocatorsLists=t.data.itemLocators,e.loading.locator=!1,e.locator="",e.isDisabled=!1)})));case 3:case"end":return o.stop()}}),o)})))()},addLine:function(){var t=this;if(0!=this.oldInput.length)return this.oldInput.cate_codes.forEach((function(e,o){t.getLocator(t.oldInput.subinventory_code),t.lines.push({id:i()(),cate_code:null===e?"":Number(e),locator:null===e?"":t.oldInput.locators[o]})})),this.oldInput=[];this.lines.push({id:i()(),cate_code:"",locator:this.locator?this.locator:""})},removeRow:function(t){this.lines.splice(t,1)},checkDuplicateCategory:function(t){var e=this;this.lines.forEach((function(o,a){a!=t&&e.lines[t].cate_code==o.cate_code&&e.lines[t].locator==o.locator&&e.showAlert()}))},checkDuplicateLocators:function(t){var e=this;this.lines.forEach((function(o,a){a!=t&&e.lines[t].locator==o.locator&&e.lines[t].cate_code==o.cate_code&&e.showAlert()})),""!=this.lines.locator&&this.searchFunction()},showAlert:function(){swal({title:"Error !",text:"ไม่สามารถเลือกชุดข้อมูลนี้ได้ เนื่องจากมีชุดข้อมูลซ้ำ",type:"error",showConfirmButton:!0})},searchFunction:function(t){var e=this;return c(n().mark((function o(){return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.loading.locator=!0,o.next=3,axios.get("/ir/ajax/get-value-set",{params:{subinventory_code:e.subinventory_code,query:t}}).then((function(t){e.itemLocatorsLists=t.data.data})).catch((function(t){})).then((function(){e.loading.locator=!1}));case 3:case"end":return o.stop()}}),o)})))()}}};var d=o(51900);const u={components:{productLine:(0,d.Z)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[o("div",{staticClass:"row col-lg-10 col-md-4"},[t._m(0),t._v(" "),void 0!==t.policy_set_header.policy_set_number?o("div",{staticClass:"col-lg-7 col-md-7 w-100",staticStyle:{"padding-top":"20px"}},[t._v("\n                    "+t._s(this.policy_set_header.policy_set_number+" : "+this.policy_set_header.policy_set_description)+" \n                ")]):t._e()]),t._v(" "),o("div",{staticClass:"row col-lg-10 col-md-4"},[t._m(1),t._v(" "),o("div",{staticClass:"col-lg-7 col-md-7 w-100",staticStyle:{"padding-top":"20px"}},[t._v("\n                    "+t._s(this.asset_group_code)+" \n                ")])]),t._v(" "),o("div",{staticClass:"row col-lg-10 col-md-4"},[t._m(2),t._v(" "),o("div",{staticClass:"col-lg-7 col-md-7 w-100",staticStyle:{"padding-top":"20px"}},[t._v("\n                    "+t._s(this.product.description)+" \n                ")])]),t._v(" "),o("div",{staticClass:"row col-lg-10 col-md-4"},[t._m(3),t._v(" "),void 0!==t.accounts_mapping.account_code?o("div",{staticClass:"col-lg-7 col-md-7 w-100",staticStyle:{"padding-top":"20px"}},[t._v("\n                    "+t._s(this.accounts_mapping.account_code+" : "+this.accounts_mapping.description)+" \n                ")]):t._e()]),t._v(" "),o("div",{staticClass:"row col-lg-10 col-md-4"},[t._m(4),t._v(" "),o("div",{staticClass:"col-lg-7 col-md-7 w-100",staticStyle:{"padding-top":"20px"}},[t._v("\n                    "+t._s(this.account_combine)+" \n                ")])])]),t._v(" "),o("div",{staticClass:"row",staticStyle:{"padding-left":"15px","padding-top":"10px"}},[t._m(5),t._v(" "),o("div",{staticClass:"col-sm-4 el_select padding_12",staticStyle:{"margin-left":"20px"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.department_code,expression:"department_code"}],attrs:{type:"hidden",name:"department_code",autocomplete:"off"},domProps:{value:t.department_code},on:{input:function(e){e.target.composing||(t.department_code=e.target.value)}}}),t._v(" "),o("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":""},model:{value:t.department_code,callback:function(e){t.department_code=e},expression:"department_code"}},t._l(t.departments,(function(t){return o("el-option",{key:t.department_code,attrs:{label:t.department_code+" : "+t.description,value:t.department_code+","+t.description}})})),1)],1)]),t._v(" "),o("div",{staticClass:"row",staticStyle:{"padding-left":"15px","padding-top":"10px"}},[t._m(6),t._v(" "),o("div",{staticClass:"col-sm-4 el_select padding_12",staticStyle:{"margin-left":"20px"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.subinventory_code,expression:"subinventory_code"}],attrs:{type:"hidden",name:"subinventory_code",autocomplete:"off"},domProps:{value:t.subinventory_code},on:{input:function(e){e.target.composing||(t.subinventory_code=e.target.value)}}}),t._v(" "),o("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":""},on:{change:function(e){return t.getLocator(t.subinventory_code)}},model:{value:t.subinventory_code,callback:function(e){t.subinventory_code=e},expression:"subinventory_code"}},t._l(t.subInventories,(function(t,e){return o("el-option",{key:e,attrs:{label:t.subinventory_code+" : "+t.subinventory_desc,value:t.subinventory_code+","+t.subinventory_desc}})})),1)],1)]),t._v(" "),o("div",{staticClass:"row",staticStyle:{"padding-left":"15px","padding-top":"10px"}},[t._m(7),t._v(" "),o("div",{staticClass:"col-sm-4 el_select padding_12",staticStyle:{"margin-left":"15px"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.subGroup,expression:"subGroup"}],attrs:{type:"hidden",name:"sub_group_code",autocomplete:"off"},domProps:{value:t.subGroup},on:{input:function(e){e.target.composing||(t.subGroup=e.target.value)}}}),t._v(" "),o("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":""},model:{value:t.subGroup,callback:function(e){t.subGroup=e},expression:"subGroup"}},t._l(t.subGroups,(function(t,e){return o("el-option",{key:e,attrs:{label:t.sub_group_code+" : "+t.sub_group_description,value:t.sub_group_code+","+t.sub_group_description}})})),1)],1)]),t._v(" "),o("div",{staticClass:"mt-2"},[o("hr"),t._v(" "),o("div",{staticClass:"text-right"},[o("button",{class:t.btnTrans.add.class+" btn-sm",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addLine(e)}}},[o("i",{class:t.btnTrans.add.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                "+t._s(t.btnTrans.add.text)+" \n            ")])]),t._v(" "),o("table",{staticClass:"table table-responsive-sm"},[t._m(8),t._v(" "),o("tbody",t._l(t.lines,(function(e,a){return o("tr",{key:a,attrs:{row:e}},[o("td",{staticStyle:{"vertical-align":"middle"}},[t._v(" "+t._s(a+1)+" ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.cate_code,expression:"row.cate_code"}],attrs:{type:"hidden",name:"cate_codes[]",autocomplete:"off"},domProps:{value:e.cate_code},on:{input:function(o){o.target.composing||t.$set(e,"cate_code",o.target.value)}}}),t._v(" "),o("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":""},on:{change:function(e){return t.checkDuplicateCategory(a)}},model:{value:e.cate_code,callback:function(o){t.$set(e,"cate_code",o)},expression:"row.cate_code"}},t._l(t.itemCategories,(function(t,e){return o("el-option",{key:e,attrs:{label:t.lookup_code+" : "+t.description,value:t.lookup_code}})})),1)],1),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.locator,expression:"row.locator"}],attrs:{type:"hidden",name:"locators[]",autocomplete:"off"},domProps:{value:e.locator},on:{input:function(o){o.target.composing||t.$set(e,"locator",o.target.value)}}}),t._v(" "),o("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.locator,expression:"loading.locator"}],staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":t.searchFunction,disabled:t.isDisabled},on:{change:function(e){return t.checkDuplicateLocators(a)}},model:{value:e.locator,callback:function(o){t.$set(e,"locator",o)},expression:"row.locator"}},t._l(t.itemLocatorsLists,(function(t,e){return o("el-option",{key:e,attrs:{label:t.meaning+" : "+t.description,value:t.flex_value}})})),1)],1),t._v(" "),o("td",{staticStyle:{"vertical-align":"middle"}},[o("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.removeRow(a)}}},[o("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])])})),0)])]),t._v(" "),o("div",{staticClass:"row",staticStyle:{"padding-left":"20px","padding-top":"10px"}},[o("label",[t._v("Active")]),o("span",{staticClass:"text-danger"},[t._v(" *")]),t._v(" "),o("input",{attrs:{type:"hidden",name:"activeFlag"},domProps:{value:t.activeFlag}}),t._v(" "),o("el-checkbox",{staticStyle:{"margin-left":"45px"},attrs:{size:"medium"},model:{value:t.activeFlag,callback:function(e){t.activeFlag=e},expression:"activeFlag"}})],1),t._v(" "),o("div",{staticClass:"row clearfix text-right"},[o("div",{staticClass:"col",staticStyle:{"margin-top":"15px"}},[o("button",{class:t.btnTrans.save.class+" btn-sm",attrs:{type:"submit",disabled:t.isDisabledBtu}},[o("i",{class:t.btnTrans.save.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                "+t._s(t.btnTrans.save.text)+" \n            ")]),t._v(" "),o("a",{class:t.btnTrans.cancel.class+" btn-sm",attrs:{href:t.backUrl,type:"button"}},[o("i",{class:t.btnTrans.cancel.icon,attrs:{"aria-hidden":"true"}}),t._v(" \n                "+t._s(t.btnTrans.cancel.text)+"\n            ")])])])])}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"col-lg-3 col-md-6 col-form-label text-left",staticStyle:{"padding-left":"5px","padding-top":"20px","vertical-align":"middle"}},[o("strong",[t._v(" กรมธรรม์ชุดที่ (Policy No.) : ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"col-lg-3 col-md-6 col-form-label text-left",staticStyle:{"padding-left":"5px","padding-top":"20px","vertical-align":"middle"}},[o("strong",[t._v(" กลุ่มของทรัพย์สิน : ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"col-lg-3 col-md-6 col-form-label text-left",staticStyle:{"padding-left":"5px","padding-top":"20px","vertical-align":"middle"}},[o("strong",[t._v(" รายการ : ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"col-lg-3 col-md-6 col-form-label text-left",staticStyle:{"padding-left":"5px","padding-top":"20px","vertical-align":"middle"}},[o("strong",[t._v(" ประเภทค่าใช้จ่าย : ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"col-lg-3 col-md-6 col-form-label text-left",staticStyle:{"padding-left":"5px","padding-top":"20px","vertical-align":"middle"}},[o("strong",[t._v(" รหัสบัญชี : ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",{staticClass:"col-lg-12 col-md-6 col-form-label text-feft",staticStyle:{width:"80px","padding-left":"5px","padding-right":"0px","padding-top":"20px"}},[t._v("\n                รหัสหน่วยงาน\n            ")]),o("span",{staticClass:"text-danger"},[t._v(" *")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",{staticClass:"col-lg-12 col-md-6 col-form-label text-feft",staticStyle:{width:"80px","padding-left":"5px","padding-right":"0px","padding-top":"20px"}},[t._v("\n                รหัสคลังสินค้า\n            ")]),o("span",{staticClass:"text-danger"},[t._v(" *")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",{staticClass:"col-lg-12 col-md-6 col-form-label text-feft",staticStyle:{width:"85px","padding-left":"5px","padding-right":"0px","padding-top":"20px"}},[t._v("\n                กลุ่มสินค้าย่อย\n            ")]),o("span",{staticClass:"text-danger"},[t._v(" *")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{width:"1%"}}),t._v(" "),o("th",{attrs:{width:"50%"}},[t._v(" รหัสประเภท (Category Code)"),o("span",{staticClass:"text-danger"},[t._v(" *")])]),t._v(" "),o("th",{attrs:{width:"30%"}},[t._v(" Locator ")]),t._v(" "),o("th",{attrs:{width:"1%"}})])])}],!1,null,null,null).exports},props:["groupProducts","policySets","subInventories","departments","url","oldGroupCode","data","oldInput","btnTrans"],data:function(){return{groupCode:this.oldGroupCode?this.oldGroupCode:"",create:!1,selectGroup:[]}},mounted:function(){this.groupCode&&this.createLine(),0!=this.oldInput.length&&(this.groupCode=this.oldInput.group_code,this.createLine()),"DuplicateHeader"==this.data?swal({title:"warning !",text:"มีข้อมูลซ้ำ ระดับ header",type:"warning",showConfirmButton:!0}):"DuplicateLine"==this.data&&swal({title:"warning !",text:"มีข้อมูลซ้ำ ระดับ Line",type:"warning",showConfirmButton:!0})},methods:{createLine:function(){this.create=!0}}};const p=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md",staticStyle:{"margin-left":"5px"}},[o("label",{staticClass:"demonstration"},[t._v("\n                กลุ่มสินค้า (Product Group)\n            ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.groupCode,expression:"groupCode"}],attrs:{type:"hidden",name:"group_code"},domProps:{value:t.groupCode},on:{input:function(e){e.target.composing||(t.groupCode=e.target.value)}}}),t._v(" "),o("div",{staticClass:"input-group"},[o("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Select"},on:{change:t.createLine},model:{value:t.groupCode,callback:function(e){t.groupCode=e},expression:"groupCode"}},t._l(t.groupProducts,(function(t){return o("el-option",{key:t.group_product_id,attrs:{label:t.policy_set_number+" : "+t.asset_group_description+" : "+t.group_product_description,value:t.group_product_id}})})),1)],1)])]),t._v(" "),this.create?o("div",{staticClass:"mt-2"},[o("productLine",{attrs:{"group-code":t.groupCode,"back-url":t.url,oldInput:t.oldInput,btnTrans:t.btnTrans}})],1):t._e()])}),[],!1,null,null,null).exports}}]);