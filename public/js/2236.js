(self.webpackChunk=self.webpackChunk||[]).push([[2236],{52048:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}",""]);const s=i},49024:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}.ibox .label,.nav .label{font-size:12px}.sticky-col{position:-webkit-sticky;position:sticky;background-color:#f7f7f7;z-index:9999}.firstP04-col{min-width:118px;left:0}.firstP04-col,.secondP04-col{position:-webkit-sticky;position:sticky;background-color:#f7f7f7;z-index:9999;width:150px;max-width:150px}.secondP04-col{min-width:152px;left:116px}.thP04-col{width:250px;max-width:250px;left:266px}.foP04-col,.thP04-col{position:-webkit-sticky;position:sticky;background-color:#f7f7f7;z-index:9999;min-width:152px}.foP04-col{width:200px;max-width:200px;left:416px}.fiP04-col{left:566px}.fiP04-col,.to-col{position:-webkit-sticky;position:sticky;background-color:#f7f7f7;z-index:9999;width:200px;min-width:150px;max-width:200px}.to-col{left:0}",""]);const s=i},35998:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var n=a(23645),i=a.n(n)()((function(t){return t[1]}));i.push([t.id,".el-input--medium .el-input__inner{height:30px!important;line-height:36px}.el-input--medium .el-input__icon{line-height:30px}",""]);const s=i},72236:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>Q});var n=a(87757),i=a.n(n);function s(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function l(t){s(r,n,i,l,o,"next",t)}function o(t){s(r,n,i,l,o,"throw",t)}l(void 0)}))}}const l={props:["budgetYears","biWeekly","search","defaultYear","defaultBiWeekly","defaultDefaultMonth","btnTrans","url"],data:function(){return{budget_year:this.defaultYear?this.defaultYear:"",bi_weekly:this.defaultBiWeekly?this.defaultBiWeekly:"",times:"",month:"",loading:!1,b_loading:!1,timeLoading:!1,errors:{budget_year:!1,bi_weekly:!1},biWeeklyLists:[],html:""}},mounted:function(){},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{openModal:function(){$("#modal_create").modal("show"),this.getBiWeekly()},getBiWeekly:function(){this.bi_weekly="",this.month="",this.times="",this.budget_year=this.defaultYear?this.defaultYear:"",this.bi_weekly=this.defaultBiWeekly?this.defaultBiWeekly:"",this.month=this.defaultDefaultMonth?this.defaultDefaultMonth:"",this.getDetail()},getDetail:function(){var t=this;return r(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t).times=1,a.html="",a.timeLoading=!0,axios.get(a.url.ajax_modal_create_details,{params:{budget_year:a.budget_year,bi_weekly:a.bi_weekly}}).then((function(t){var e=t.data.data;a.times=e.times,a.html=e.html,a.timeLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},submit:function(){var t=this;return r(i().mark((function e(){var a,n,s,r,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).loading=!0,n=$("#modal_create"),n.serialize(),s=!0,r="",t.errors.budget_year=!1,t.errors.bi_weekly=!1,$(n).find("div[id='el_explode_budget_year']").html(""),$(n).find("div[id='el_explode_bi_weekly']").html(""),""==t.budget_year&&(t.errors.budget_year=!0,s=!1,r="กรุณาเลือกปีงบประมาณ",$(n).find("div[id='el_explode_budget_year']").html(r)),""==t.bi_weekly&&(t.errors.bi_weekly=!0,s=!1,r="กรุณาเลือกปักษ์",$(n).find("div[id='el_explode_bi_weekly']").html(r)),s){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,t.create();case 16:l=e.sent,a.loading=!1,"S"==l.status?(swal({title:"สร้างแผนประมาณการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลแผนประมาณการผลิตเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=l.redirect_show_page}),2e3)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+l.msg+"</span>",type:"error",html:!0});case 19:case"end":return e.stop()}}),e)})))()},create:function(){var t=this;return r(i().mark((function e(){var a,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={msg:""},s={budget_year:(a=t).budget_year,bi_weekly:a.bi_weekly},e.next=5,axios.post(a.url.ajax_production_biweekly_store,s).then((function(t){n=t.data.data,a.redirect_show_page=n.redirect_show_page})).catch((function(t){var e=t.response.data.data;n={msg:e}})).then((function(){a.loading=!1}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()}}};var o=a(51900);const c=(0,o.Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.create.icon}),t._v("\n        "+t._s(t.btnTrans.create.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_create",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",{attrs:{id:"production-plan-create-form"}},[a("div",{staticClass:"row col-12 m-0"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{attrs:{readonly:!0,placeholder:"Please input",size:"large"},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}}),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ปักษ์ที่ :")]),t._v(" "),a("div",{},[a("el-input",{attrs:{readonly:!0,placeholder:"Please input",size:"large"},model:{value:t.bi_weekly,callback:function(e){t.bi_weekly=e},expression:"bi_weekly"}}),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ครั้งที่ :")]),t._v(" "),a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:t.timeLoading,expression:"timeLoading"}],attrs:{placeholder:"ครั้งที่",size:"large",readonly:!0},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}})],1),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-3 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" ประจำเดือน :")]),t._v(" "),a("el-input",{attrs:{placeholder:"ประจำเดือน",size:"large",readonly:!0},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1)])]),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[t.bi_weekly?a("div",{staticClass:"mt-4",domProps:{innerHTML:t._s(t.html)}}):t._e()])],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),a("button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submit()}}},[a("i",{class:t.btnTrans.create.icon}),t._v("\n                        "+t._s(t.btnTrans.create.text)+"\n                    ")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("สร้างแผนประมาณการผลิต")]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                         \n                    ")])])}],!1,null,null,null).exports;function u(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){u(s,n,i,r,l,"next",t)}function l(t){u(s,n,i,r,l,"throw",t)}r(void 0)}))}}var p,m;const f={props:["budgetYears","monthList","biWeekly","search","productTypes","btnTrans","url"],data:function(){return{budget_year:this.search?this.search.budget_year:"",bi_weekly:"",times:"",month:"",loading:!1,b_loading:!1,errors:{budget_year:!1,bi_weekly:!1},biWeeklyLists:[],html:""}},mounted:function(){this.budget_year&&this.getBiWeekly()},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0},budget_year:(m=d(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.month="";case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)}),month:(p=d(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bi_weekly="";case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},methods:{openModal:function(){$("#modal_search").modal("show")},searchForm:function(){var t=this;return d(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).loading=!0,e.next=4,axios.get(a.url.ajax_production_biweekly_search,{params:{search:{budget_year:a.budget_year,thai_month:a.month,biweekly:a.bi_weekly}}}).then((function(t){a.html=t.data.data.html})).catch((function(t){a.html="";var e=t.response.data;alert(e.message)})).then((function(){a.loading=!1}));case 4:case"end":return e.stop()}}),e)})))()},getBiWeekly:function(){var t=this;this.search||(this.bi_weekly="",this.month="",this.times=""),this.biWeeklyLists=this.biWeekly.filter((function(e){return e.period_year_thai.indexOf(t.budget_year)>-1}))}}};const h=(0,o.Z)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n        "+t._s(t.btnTrans.search.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:t.budget_year}}),t._v(" "),a("el-select",{attrs:{size:"large",placeholder:"ปีงบประมาณ",clearable:"",filterable:"","popper-append-to-body":!1},on:{change:t.getBiWeekly},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}},t._l(t.budgetYears,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" เดือน :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{attrs:{type:"hidden"},domProps:{value:t.month}}),t._v(" "),a("el-select",{attrs:{size:"large",placeholder:"เดือน",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.monthList[t.budget_year],(function(t,e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_month"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปักษ์ที่ :")]),t._v(" "),a("div",{},[a("input",{attrs:{type:"hidden",name:"search[bi_weekly]"},domProps:{value:t.bi_weekly}}),t._v(" "),""!=t.budget_year&&""!=t.month?a("el-select",{attrs:{clearable:"",size:"large",placeholder:"ปักษ์","popper-append-to-body":!1},model:{value:t.bi_weekly,callback:function(e){t.bi_weekly=e},expression:"bi_weekly"}},t._l(t.monthList[t.budget_year][t.month],(function(t,e){return a("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly}})})),1):a("el-select",{attrs:{disabled:"",clearable:"",size:"large",placeholder:"ปักษ์",filterable:""},model:{value:t.bi_weekly,callback:function(e){t.bi_weekly=e},expression:"bi_weekly"}},[a("el-option",{key:"",attrs:{label:"",value:""}})],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly"}})],1)]),t._v(" "),a("div",{staticClass:"form-group text-right  pr-2 mb-0 col-lg-3 col-md-10 col-sm-12 col-xs-12"},[a("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"text-left"},[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.searchForm}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n                                    "+t._s(t.btnTrans.search.text)+"\n                                ")])])])]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.html)}})]),t._v(" "),t._m(1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("ค้นหาแผนประมาณการผลิต")]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                         \n                    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],!1,null,null,null).exports;const v={props:["prodBiweeklyMain","lastUpdateDateFormat"],data:function(){return{statusLists:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]}}};const y=(0,o.Z)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("form",{attrs:{id:"production-plan-form",action:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 b-r"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("dl",{staticClass:"row mb-0"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.pp_bi_weekly.period_year_thai)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(1),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.pp_bi_weekly.biweekly)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(2),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.version_no)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(3),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1 "},[t.prodBiweeklyMain?a("div",[t.prodBiweeklyMain.pt_biweekly?a("div",[t._v("\n                                            "+t._s(t.prodBiweeklyMain.pt_biweekly.pp_month)+"\n                                        ")]):t._e()]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(4),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.pp_bi_weekly.thai_combine_date)+"\n                                    ")]):t._e()])])])]),t._v(" "),a("div",{staticClass:"col-lg-6",attrs:{id:"cluster_info"}},[a("dl",{staticClass:"row mb-0"},[t._m(5),t._v(" "),a("div",{staticClass:"col-sm-4 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.om_bi_weekly.biweekly_no)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(6),t._v(" "),a("div",{staticClass:"col-sm-4 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.first_sales_forecast.version)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(7),t._v(" "),a("div",{staticClass:"col-sm-4 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.first_sales_forecast.approve_date_format)+"\n                                    ")]):t._e()])])])])])]),t._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dl",{staticClass:"row mb-0"},[t._m(8),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.creation_date_format)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(9),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.lastUpdateDateFormat)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(10),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[a("span",{domProps:{innerHTML:t._s(t.prodBiweeklyMain.status_lable_html)}})]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(11),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.updated_by?t.prodBiweeklyMain.updated_by.name:"-")+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(12),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div",[t._v("\n                                        "+t._s(t.prodBiweeklyMain.approved_at_format)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-0"},[t._m(13),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.prodBiweeklyMain?a("div"):t._e()])])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ปีงบประมาณ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ปักษ์ที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ครั้งที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ประจำเดือน:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4 pl-0 text-sm-right"},[a("dt",[t._v("ประจำวันที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8  pl-0 text-sm-right"},[a("dt",[t._v("\n                                    อ้างอิงประมาณการจำหน่ายรายปักษ์ที่:\n                                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 pl-0  text-sm-right"},[a("dt",[t._v("ครั้งที่:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 pl-0  text-sm-right"},[a("dt",[t._v("วันที่อนุมัติแผนขาย:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("วันที่สร้าง:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",{attrs:{title:""}},[t._v("วันที่แก้ไขล่าสุด:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("สถานะ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("ผู้บันทึก:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("วันที่อนุมัติ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("ครั้งที่อนุมัติ:")])])}],!1,null,null,null).exports;function b(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}var w,g;const k={props:["pDateFormat","machineEfficiencyProd","prodBiweeklyMain","ppBiWeekly","productType","url","workingHour","defaultBiWeekly","selTabName","pRefresh"],data:function(){return{defaultInput:{bi_weekly:null!=this.defaultBiWeekly&&""!=this.defaultBiWeekly?this.defaultBiWeekly:null},loading:!1,html:"",planMachine:[],machines:[],efficiencies:[],days:[],totalMachine:[],totalEfficiency:[],totalDays:[],summaryMachine:[],summaryEfficiency:[],summaryDay:[],summaryTotalMachine:[],summaryTotalEfficiency:[],summaryTotalDay:[],plan:!1}},mounted:function(){this.getProductPlanMachine()},methods:{covertName:function(t){return this.planMachine[t][0].machine_group_desc},getProductPlanMachine:function(){var t=this;if(t.defaultInput.bi_weekly&&t.productType&&"tab1"==t.selTabName){t.loading=!0,t.planMachine=[],t.machines=[],t.efficiencies=[],t.days=[],t.totalMachine=[],t.totalEfficiency=[],t.totalDays=[],t.summaryMachine=[],t.summaryEfficiency=[],t.summaryDay=[],t.summaryTotalMachine=[],t.summaryTotalEfficiency=[],t.summaryTotalDay=[],t.plan=!1;var e={product_main_id:t.prodBiweeklyMain.product_main_id,product_type:t.productType,bi_weekly_id:t.defaultInput.bi_weekly};axios.get(t.url.ajax_get_plan_machine,{params:e}).then((function(e){var a=e.data.data;t.planMachine=a.planMachine,t.machines=a.machines,t.efficiencies=a.efficiencies,t.days=a.days,t.totalMachine=a.totalMachine,t.totalEfficiency=a.totalEfficiency,t.totalDays=a.totalDays,t.plan=a.plan,t.html=a.html})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:e.message,type:"error"})})).then((function(){t.loading=!1}))}}},watch:{productType:function(){this.getProductPlanMachine()},pRefresh:(w=i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getProductPlanMachine();case 1:case"end":return t.stop()}}),t,this)})),g=function(){var t=this,e=arguments;return new Promise((function(a,n){var i=w.apply(t,e);function s(t){b(i,a,n,s,r,"next",t)}function r(t){b(i,a,n,s,r,"throw",t)}s(void 0)}))},function(t,e){return g.apply(this,arguments)}),summaryMachineC:function(t){return t},summaryEfficiencyC:function(t){return t},summaryDayC:function(t){return t},summaryTotalMachineC:function(t){return t},summaryTotalEfficiencyC:function(t){return t},summaryTotalDayC:function(t){return t}},computed:{p03EfficiencyProduct:function(){var t=this,e="-";if(t.defaultInput.bi_weekly){var a=t.machineEfficiencyProd.filter((function(e){return e.machine_biweekly_id==t.defaultInput.bi_weekly}));a.length&&(a=a.filter((function(e){return e.product_type==t.productType}))).length&&(e=a[0].machine_efficiency_product)}return e},summaryMachineC:function(){var t=[],e=this;Object.values(this.machines).reduce((function(a,n){return e.workingHour.filter((function(e){a[e.lookup_code]||(a[e.lookup_code]={working_hour:e.lookup_code,total:0},t.push(a[e.lookup_code])),a[e.lookup_code].total+=Number(n[e.lookup_code])})),a}),{}),this.summaryMachine=t},summaryEfficiencyC:function(){var t=[],e=this;Object.values(this.efficiencies).reduce((function(a,n){return e.workingHour.filter((function(e){a[e.lookup_code]||(a[e.lookup_code]={working_hour:e.lookup_code,total:0},t.push(a[e.lookup_code])),a[e.lookup_code].total+=Number(n[e.lookup_code])})),a}),{}),this.summaryEfficiency=t},summaryDayC:function(){var t=[],e=this;Object.values(this.days).reduce((function(a,n){return e.workingHour.filter((function(e){a[e.lookup_code]||(a[e.lookup_code]={working_hour:e.lookup_code,total:0},t.push(a[e.lookup_code])),a[e.lookup_code].total+=Number(n[e.lookup_code])})),a}),{}),this.summaryDay=t},summaryTotalMachineC:function(){var t=[],e=this;Object.values(e.totalMachine).reduce((function(a,n){return a[e.prodBiweeklyMain.product_main_id]||(a[e.prodBiweeklyMain.product_main_id]={plan_id:e.prodBiweeklyMain.product_main_id,total:0},t.push(a[e.prodBiweeklyMain.product_main_id])),a[e.prodBiweeklyMain.product_main_id].total+=Number(n[e.prodBiweeklyMain.product_main_id]),a}),{}),this.summaryTotalMachine=t},summaryTotalEfficiencyC:function(){var t=[],e=this;Object.values(e.totalEfficiency).reduce((function(a,n){var i;return a[e.prodBiweeklyMain.product_main_id]||(a[e.prodBiweeklyMain.product_main_id]={plan_id:e.prodBiweeklyMain.product_main_id,total:0},t.push(a[e.prodBiweeklyMain.product_main_id])),a[e.prodBiweeklyMain.product_main_id].total+=Number(null!==(i=n[e.prodBiweeklyMain.product_main_id])&&void 0!==i?i:0),a}),{}),this.summaryTotalEfficiency=t},summaryTotalDayC:function(){var t=[],e=this;Object.values(e.totalDays).reduce((function(a,n){return a[e.prodBiweeklyMain.product_main_id]||(a[e.prodBiweeklyMain.product_main_id]={plan_id:e.prodBiweeklyMain.product_main_id,total:0},t.push(a[e.prodBiweeklyMain.product_main_id])),a[e.prodBiweeklyMain.product_main_id].total+=Number(n[e.prodBiweeklyMain.product_main_id]),a}),{}),this.summaryTotalDay=t}}};const x=(0,o.Z)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-1 col-form-label text-right"},[t._v(" ปักษ์ที่")]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"ปักษ์",filterable:""},on:{change:t.getProductPlanMachine},model:{value:t.defaultInput.bi_weekly,callback:function(e){t.$set(t.defaultInput,"bi_weekly",e)},expression:"defaultInput.bi_weekly"}},t._l(t.ppBiWeekly,(function(t,e){return a("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly_id}})})),1)],1),t._v(" "),a("label",{staticClass:"col-lg-2 col-form-label text-left"},[t._v("\n            สั่งผลิต(%)   \n            "),t.plan?a("span",[t._v("\n                "+t._s(t.p03EfficiencyProduct)+"\n            ")]):t._e()])]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.html)}}),t._v(" "),a("hr"),t._v(" "),t._e()])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"text-center",attrs:{colspan:"13"}},[t._v(" ประมาณกำลังการผลิตเครื่องจักร ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{width:"8%","vertical-align":"middle"},attrs:{rowspan:"3"}},[a("div",[t._v(" ขอบเขตเครื่องจักร ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{width:"10%"},attrs:{colspan:"3"}},[a("div",[t._v(" จำนวนวันทำงาน (วัน) ")])])}],!1,null,null,null).exports;function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function D(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){B(s,n,i,r,l,"next",t)}function l(t){B(s,n,i,r,l,"throw",t)}r(void 0)}))}}const M=C({props:["url","prodBiweeklyMain","productType","btnTrans","biweeklyColorCode","calTypeDefault","calTypes","canEdit","pRefresh","omBiweeklyDetail","productPlanId","pWorkingHour"],data:function(){return{loading:{avgBiweeklyTable:!1},calType:null!=this.calTypeDefault&&""!=this.calTypeDefault?this.calTypeDefault:null,clonCalType:null!=this.calTypeDefault&&""!=this.calTypeDefault?this.calTypeDefault:null,refresh:null!=this.pRefresh&&""!=this.pRefresh&&this.pRefresh,avgBiweeklyData:!1,summaryData:[],avgKkTableHtml:"",modalTotalWorking:{title:"รายละเอียดชั่วโมงการทำงาน",btn_name:"รายละเอียดการทำงาน"}}},mounted:function(){},computed:{},methods:{changeCalTypeAll:function(){var t=this;return D(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).canEdit&&a.calType){e.next=3;break}return e.abrupt("return");case 3:n=!1,Object.values(a.avgBiweeklyData).forEach(function(){var t=D(i().mark((function t(e){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(s=e[Object.keys(e)[0]]).wk_weekly==a.prodBiweeklyMain.biweekly&&(n=s.pp_bi_weekly.biweekly);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),swal({html:!0,title:"แก้ไขข้อมูลที่ใช้",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการแก้ไขข้อมูลที่ใช้ ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!0,closeOnCancel:!0},function(){var t=D(i().mark((function t(e){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?(a.clonCalType=JSON.parse(JSON.stringify(a.calType)),s=a.avgBiweeklyData[n],Object.values(s).forEach(function(){var t=D(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.calculate_type=a.calType,a.changeCalType(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):a.calType=JSON.parse(JSON.stringify(a.clonCalType));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},changeCalType:function(t){var e=this;return D(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("xx",t),e.$emit("tab2AvgChange",{case:2,product_main_id:t.product_main_id,item_id:t.item_id,d1_calculate_type:null,d5_calculate_type:t.calculate_type,d12_next_onhand_qty:null,d12_old_next_onhand_qty:t.next_onhand_qty,d7_planning_qty:null,biweekly_id:t.pp_biweekly_id,pp_biweekly_id:t.pp_biweekly_id,product_plan_id:t.product_plan_id});case 2:case"end":return a.stop()}}),a)})))()},changeNextOnhandQty:function(t){var e=this;return D(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("xx",t),e.$emit("tab2AvgChange",{case:3,product_main_id:t.product_main_id,item_id:t.item_id,d1_calculate_type:null,d5_calculate_type:t.calculate_type,d12_next_onhand_qty:t.next_onhand_qty,d12_old_next_onhand_qty:t.next_onhand_qty,d7_planning_qty:null,biweekly_id:t.pp_biweekly_id,pp_biweekly_id:t.pp_biweekly_id,product_plan_id:t.product_plan_id});case 2:case"end":return a.stop()}}),a)})))()},getAvgDataTable:function(){var t=this;return D(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).refresh){e.next=3;break}return e.abrupt("return");case 3:return a.loading.avgBiweeklyTable=!0,a.avgBiweeklyData=!1,a.avgKkTableHtml=!1,a.summaryData=[],n={product_main_id:a.prodBiweeklyMain.product_main_id,om_biweekly_id:a.omBiweeklyDetail.om_biweekly_id,product_type:a.productType},e.next=10,axios.get(a.url.ajax_get_avg_data,{params:n}).then((function(t){a.avgBiweeklyData=t.data.data.avg_biweekly,a.avgKkTableHtml=t.data.data.avg_kk_table_html,a.summaryData=t.data.data.summary;var e=t.data.data.avg_biweekly;e=_.sortBy(e,(function(t,e){return t[Object.keys(t)[0]].current_flag})),console.log("C",e,T(e)),e=Object.keys(e).map((function(t){return t})),console.log("C",e,T(e))})).catch((function(t){console.log("error");var e=t.response.data;alert(e.message)})).then((function(){a.loading.avgBiweeklyTable=!1}));case 10:a.refresh=!1;case 11:case"end":return e.stop()}}),e)})))()}},watch:{pRefresh:function(){var t=D(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.refresh=!0,this.getAvgDataTable();case 2:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()}},"computed",{});var E=a(93379),P=a.n(E),I=a(49024),A={insert:"head",singleton:!1};P()(I.Z,A);I.Z.locals;function S(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function O(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){S(s,n,i,r,l,"next",t)}function l(t){S(s,n,i,r,l,"throw",t)}r(void 0)}))}}var N;const W={components:{Tab2AvgTable:(0,o.Z)(M,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.avgBiweeklyTable,expression:"loading.avgBiweeklyTable"}]},[t.canEdit&&"KK"!=t.productType?a("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"large",placeholder:"",filterable:""},on:{change:t.changeCalTypeAll},model:{value:t.calType,callback:function(e){t.calType=e},expression:"calType"}},t._l(t.calTypes,(function(t,e){return a("el-option",{key:e,attrs:{label:t.calculate_desc,value:t.calculate_type}})})),1)],1)]):t._e(),t._v(" "),a("div",{staticClass:"table-responsive m-t"},["KK"==t.productType?a("div",{domProps:{innerHTML:t._s(t.avgKkTableHtml)}}):t._e(),t._v(" "),"KK"!=t.productType?a("table",{staticClass:"table text-nowrap table-bordered table-hover"},[a("thead",[a("tr",[a("th",{staticClass:"align-bottom ",staticStyle:{"background-color":"#ffffff",border:"0px"},attrs:{colspan:"5"}}),t._v(" "),t._l(t.avgBiweeklyData,(function(e,n,i){return[a("td",{staticClass:"text-right",staticStyle:{"background-color":"#ffffff",border:"0px"},attrs:{colspan:t.prodBiweeklyMain.biweekly==n?7:6}},["Y"!=e[Object.keys(e)[0]].current_flag?[a("modal-html",{staticClass:"text-right",attrs:{modalId:n,html:t.summaryData[n].total_working_html,modalTitle:t.modalTotalWorking.title+" ปักษ์ที่ "+n,btnTrans:t.btnTrans,btnText:t.modalTotalWorking.btn_name}})]:t._e()],2)]}))],2),t._v(" "),a("tr",[a("th",{staticClass:"align-middle text-center firstP04-col",attrs:{rowspan:"2"}},[t._v("ลำดับ")]),t._v(" "),a("th",{staticClass:"align-middle text-center secondP04-col",attrs:{rowspan:"2"}},[t._v("รหัสบุหรี่")]),t._v(" "),a("th",{staticClass:"align-middle text-center thP04-col",attrs:{rowspan:"2"}},[t._v("ตราบุหรี่")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._l(t.avgBiweeklyData,(function(e,n,i){return["Y"==e[Object.keys(e)[0]].current_flag?[a("th",{staticClass:"text-center text-white",style:"background-color: "+t.biweeklyColorCode[i],attrs:{colspan:"6"}},[t._v("\n                                ปักษ์ที่ "+t._s(n)+" (ปักษ์ปัจจุบัน)\n                                "),a("br"),t._v("\n                                ("+t._s(t.prodBiweeklyMain.creation_day+"-"+e[Object.keys(e)[0]].pp_bi_weekly.thai_combine_date.substring(3))+")\n                            ")])]:[a("th",{staticClass:"text-center text-white",style:"background-color: "+t.biweeklyColorCode[i],attrs:{colspan:t.prodBiweeklyMain.biweekly==n?7:6}},[t._v("\n                                ปักษ์ที่ "+t._s(n)+"\n                                "),a("br"),t._v("("+t._s(e[Object.keys(e)[0]].pp_bi_weekly.thai_combine_date)+")\n                            ")])]]}))],2),t._v(" "),a("tr",[t._l(t.avgBiweeklyData,(function(e,n){return["Y"==e[Object.keys(e)[0]].current_flag?[a("th",{staticClass:"text-center"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.prodBiweeklyMain.creation_date_format,placement:"top"}},[a("div",[t._v("คงคลังปัจจุบัน"),a("br"),t._v("(ล้านมวน)")])])],1),t._v(" "),a("th",{staticClass:"text-center"},[t._v("ประมาณการผลิต"),a("br"),t._v("(ล้านมวน)")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("เหลือวันขาย"),a("br"),t._v("(วัน)")])]:[n==t.prodBiweeklyMain.biweekly?[a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("\n                                                \n                                    ข้อมูลที่ใช้\n                                                \n                                ")])]:t._e(),t._v(" "),a("th",{staticClass:"text-center"},[t._v("\n                                       \n                                จำนวนชุด\n                                       \n                                "),a("br"),t._v("(ชุด)\n                            ")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("ประมาณการผลิต"),a("br"),t._v("(ล้านมวน)")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("ปริมาณใบยาที่ใช้"),a("br"),t._v("(กก.)")])],t._v(" "),a("th",{staticClass:"text-center",attrs:{title:"ค่าเฉลี่ยขายย้อนหลัง 10 วัน * จำนวนเหลือวันขาย"}},[t._v("ประมาณการขาย"),a("br"),t._v("(ล้านมวน)")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{title:"(คงคลังปัจจุบัน + ประมาณการผลิต) - ประมาณการขาย"}},[t._v("คงคลังสิ้นปักษ์"),a("br"),t._v("(ล้านมวน)")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{title:"คงคลังสิ้นปักษ์ / ค่าเฉลี่ยขายย้อนหลัง 10 วัน"}},[t._v("จำนวนวันพอจำหน่าย"),a("br"),t._v("(วัน)")])]}))],2)]),t._v(" "),a("tbody",[t._l(t.avgBiweeklyData[Object.keys(t.avgBiweeklyData)[0]],(function(e,n,i){return[a("tr",[a("td",{staticClass:"firstP04-col"},[t._v(t._s(i+=1))]),t._v(" "),a("td",{staticClass:"secondP04-col"},[t._v(t._s(e.item_code))]),t._v(" "),a("td",{staticClass:"thP04-col"},[t._v(t._s(e.item_description))]),t._v(" "),a("td",{staticClass:"text-center foP04-col"},[t._v(t._s(e.define_product_cigaret))]),t._v(" "),a("td",{staticClass:"text-right fiP04-col"},[t._v(t._s(t._f("number3Digit")(e.formula_qty)))]),t._v(" "),t._l(t.avgBiweeklyData,(function(n,i){return[i==t.prodBiweeklyMain.biweekly?[a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.canEdit,size:"large",placeholder:"",filterable:""},on:{change:function(a){return t.changeCalType(n[e.inventory_item_id])}},model:{value:n[e.inventory_item_id].calculate_type,callback:function(a){t.$set(n[e.inventory_item_id],"calculate_type",a)},expression:"biweekly[item.inventory_item_id].calculate_type"}},t._l(t.calTypes,(function(t,e){return a("el-option",{key:e,attrs:{label:t.calculate_desc,value:t.calculate_type}})})),1)],1)]:t._e(),t._v(" "),"Y"==n[e.inventory_item_id].current_flag?[a("td",{staticClass:"text-right"},[t._v("\n                                    "+t._s(t._f("number3Digit")(n[e.inventory_item_id].curr_onhnad_qty))+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                    "+t._s(t._f("number3Digit")(n[e.inventory_item_id].planning_qty))+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                    "+t._s(t._f("number2Digit")(n[e.inventory_item_id].bal_sale_day))+"\n                                ")])]:[a("td",{staticClass:"text-right"},[(t.canEdit,[t._v("\n                                        "+t._s(t._f("number3Digit")(n[e.inventory_item_id].next_onhand_qty))+"\n                                    ")])],2),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                    "+t._s(t._f("number3Digit")(n[e.inventory_item_id].planning_qty))+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                    "+t._s(t._f("number3Digit")(n[e.inventory_item_id].used_qty))+"\n                                ")])],t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(t._f("number3Digit")(n[e.inventory_item_id].forcast_qty))+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(t._f("number3Digit")(n[e.inventory_item_id].bal_onhand_qty))+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(t._f("number2Digit")(n[e.inventory_item_id].bal_sale_day))+"\n                            ")])]}))],2)]})),t._v(" "),a("tr",[a("th",{staticClass:"text-right to-col",attrs:{colspan:"5"}},[t._v("รวม")]),t._v(" "),t._l(t.avgBiweeklyData,(function(e,n){return["Y"==e[Object.keys(e)[0]].current_flag?[a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].curr_onhnad_qty)+"\n                            ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].planning_qty)+"\n                            ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].bal_sale_day)+"\n                            ")])]:[n==t.prodBiweeklyMain.biweekly?[a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}})]:t._e(),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].next_onhand_qty)+"\n                            ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].planning_qty)+"\n                            ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                                "+t._s(t.summaryData[n].used_qty)+"\n                            ")])],t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t.summaryData[n].forcast_qty)+"\n                        ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t.summaryData[n].bal_onhand_qty)+"\n                        ")]),t._v(" "),a("th",{staticClass:"text-right text-white",staticStyle:{"background-color":"#34d399"}},[t._v("\n                            "+t._s(t.summaryData[n].bal_sale_day)+"\n                        ")])]}))],2)],2)]):t._e()])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-lg-1 col-form-label text-right pr-0 pt-2"},[a("strong",{},[t._v("เลือกข้อมูล:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"align-middle text-center foP04-col",attrs:{rowspan:"2"}},[t._v("ผลิต/BATCH"),a("br"),t._v("(ล้านมวน)")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"align-middle text-center fiP04-col",attrs:{rowspan:"2"}},[t._v("ปริมาณใช้ใบยาต่อ"),a("br"),t._v("1 ล้านมวน (กก.)")])}],!1,null,null,null).exports},props:["url","pDateFormat","pRefresh","btnTrans","biweeklyColorCode","prodBiweeklyMain","selTabName","calTypes","calTypeDefault","productType","omBiweeklyList","pDefaultInput","canEdit","productPlanId","EstBiWeekly","pWorkingHour"],data:function(){return{dateFormat:null!=this.pDateFormat&&""!=this.pDateFormat?this.pDateFormat:"DD/MM/YYYY",omBiweeklyId:null!=this.pDefaultInput&&""!=this.pDefaultInput?this.pDefaultInput.tab2_om_biweekly_id:null,omBiweeklyDetail:!1,estBiweeklyTable:null,loading:{estBiweeklyTable:!1},calType:null!=this.calTypeDefault&&""!=this.calTypeDefault?this.calTypeDefault:null,refreshAvgData:0}},mounted:function(){this.changEestBiweeklyId()},computed:{},methods:{tab2AvgChange:function(t){this.$emit("tab2AvgChange",t)},changEestBiweeklyId:function(){var t=this;return O(i().mark((function e(){var a,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.omBiweeklyList.filter((function(e){return e.om_biweekly_id==t.omBiweeklyId})),t.omBiweeklyDetail=!1,!(a.length>0)){e.next=21;break}return t.omBiweeklyDetail=a[0],n=t.omBiweeklyDetail.back_sale_start_date,e.next=7,helperDate.parseToDateTh(n,"YYYY-MM-DD");case 7:return n=e.sent,e.next=10,helperDate.parseToDateThFormat(n,t.dateFormat);case 10:return n=e.sent,t.$set(t.omBiweeklyDetail,"back_sale_start_date_format",n),s=t.omBiweeklyDetail.back_sale_end_date,e.next=15,helperDate.parseToDateTh(s,"YYYY-MM-DD");case 15:return s=e.sent,e.next=18,helperDate.parseToDateThFormat(s,t.dateFormat);case 18:s=e.sent,t.$set(t.omBiweeklyDetail,"back_sale_end_date_format",s),t.getEstDataTable();case 21:case"end":return e.stop()}}),e)})))()},getEstDataTable:function(){var t=this;return O(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).productType&&(a.refreshAvgData=a.refreshAvgData+1),a.omBiweeklyDetail&&a.productType){e.next=4;break}return e.abrupt("return");case 4:return a.loading.estBiweeklyTable=!0,n={product_main_id:a.prodBiweeklyMain.product_main_id,om_biweekly_id:a.omBiweeklyDetail.om_biweekly_id,product_type:a.productType},e.next=8,axios.get(a.url.ajax_get_est_data,{params:n}).then((function(t){a.estBiweeklyTable=t.data.data.html})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading.estBiweeklyTable=!1}));case 8:case"end":return e.stop()}}),e)})))()},changCalType:function(){return O(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},watch:{productType:(N=O(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab2"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getEstDataTable();case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return N.apply(this,arguments)}),pRefresh:function(){var t=O(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab2"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getEstDataTable();case 3:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()}};var L=a(52048),j={insert:"head",singleton:!1};P()(L.Z,j);L.Z.locals;const Y=(0,o.Z)(W,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["KK"!=t.productType?[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-1 col-form-label text-right"},[t._v(" แสดงข้อมูล")]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"ปักษ์",filterable:""},on:{change:t.changEestBiweeklyId},model:{value:t.omBiweeklyId,callback:function(e){t.omBiweeklyId=e},expression:"omBiweeklyId"}},t._l(t.omBiweeklyList,(function(t,e){return a("el-option",{key:e,attrs:{label:"ประมาณการจำหน่ายรายปักษ์ที่ "+t.om_bi_weekly.biweekly_no,value:t.om_biweekly_id}})})),1)],1)]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",{staticClass:"text-right font-weight-bold",attrs:{width:"10%"}},[t._v("ปักษ์ที่ ")]),t._v(" "),a("td",{attrs:{width:"3%"}},[t.omBiweeklyDetail?a("div",[t._v(t._s(t.omBiweeklyDetail.om_bi_weekly.biweekly_no))]):t._e()]),t._v(" "),a("td",{staticClass:"text-right font-weight-bold",attrs:{width:"10%"}},[t._v("จำนวนวันขาย")]),t._v(" "),a("td",{attrs:{width:"3%"}},[t.omBiweeklyDetail?a("div",[t._v(t._s(t.omBiweeklyDetail.day_for_sale))]):t._e()]),t._v(" "),a("td",{staticClass:"text-right font-weight-bold",attrs:{width:"30%"}},[t._v("เฉลี่ยจำหน่าย/ต่อวันย้อนหลัง 10 วันตั้งแต่วันที่")]),t._v(" "),a("td",[t.omBiweeklyDetail?a("span",[t._v(t._s(t.omBiweeklyDetail.back_sale_start_date_format))]):t._e(),t._v(" "),a("strong",[t._v("   ถึง   ")]),t._v(" "),t.omBiweeklyDetail?a("span",[t._v(t._s(t.omBiweeklyDetail.back_sale_end_date_format))]):t._e()])])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed"}),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.estBiweeklyTable,expression:"loading.estBiweeklyTable"}],domProps:{innerHTML:t._s(t.estBiweeklyTable)}})]:t._e(),t._v(" "),a("div",{staticClass:"hr-line-dashed"}),t._v(" "),a("tab2-avg-table",{attrs:{url:t.url,btnTrans:t.btnTrans,omBiweeklyDetail:t.omBiweeklyDetail,prodBiweeklyMain:t.prodBiweeklyMain,"product-type":t.productType,pRefresh:t.refreshAvgData,"p-working-hour":t.pWorkingHour,calTypeDefault:t.calTypeDefault,calTypes:t.calTypes,canEdit:t.canEdit,biweeklyColorCode:t.biweeklyColorCode},on:{tab2AvgChange:t.tab2AvgChange}})],2)}),[],!1,null,null,null).exports;function z(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function q(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){z(s,n,i,r,l,"next",t)}function l(t){z(s,n,i,r,l,"throw",t)}r(void 0)}))}}const F={props:["url","pRefresh","productType","prodBiweeklyMain","selTabName"],data:function(){return{loading:!1,refreshData:0,html:""}},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var t=this;return q(i().mark((function e(){var a,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).prodBiweeklyMain){e.next=3;break}return e.abrupt("return");case 3:return a.refreshData=a.refreshData+1,a.loading=!0,a.html="",n={product_main_id:a.prodBiweeklyMain.product_main_id,product_type:a.productType},e.next=9,axios.get(a.url.ajax_get_est_by_biweekly,{params:n}).then((function(t){a.html=t.data.data.html})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading=!1}));case 9:case"end":return e.stop()}}),e)})))()}},watch:{pRefresh:function(){var t=q(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("tab3"==this.selTabName){t.next=2;break}return t.abrupt("return");case 2:this.getData();case 3:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()}};var H=a(35998),Z={insert:"head",singleton:!1};P()(H.Z,Z);H.Z.locals;function R(t,e,a,n,i,s,r){try{var l=t[s](r),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}function K(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function r(t){R(s,n,i,r,l,"next",t)}function l(t){R(s,n,i,r,l,"throw",t)}r(void 0)}))}}var U;const J={components:{ModalCreate:c,ModalSearch:h,HeaderDetail:y,Tab1:x,Tab2:Y,Tab3:(0,o.Z)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],domProps:{innerHTML:t._s(t.html)}})])}),[],!1,null,null,null).exports},props:["machineEfficiencyProd","modalCreateInput","modalSearchInput","biweeklyColorCode","pDateFormat","prodBiweeklyMain","productTypes","ppBiWeekly","workingHour","omBiweeklyList","calTypes","calTypeDefault","pDefaultInput","btnTrans","url"],data:function(){return{loading:{approveProcess:!1},defaultInput:null!=this.pDefaultInput&&""!=this.pDefaultInput?this.pDefaultInput:null,lastUpdateDateFormat:"",selTabName:"tab1",refreshTab1:0,refreshTab2:0,refreshTab3:0,canEdit:!1,canApprove:!1,tab2AvgChangeData:{}}},mounted:function(){null!=this.prodBiweeklyMain&&""!=this.prodBiweeklyMain&&(this.canEdit=this.prodBiweeklyMain.can.edit,this.canApprove=this.prodBiweeklyMain.can.approve),null!=this.prodBiweeklyMain&&""!=this.prodBiweeklyMain&&this.setLastUpdateDateFormat(this.prodBiweeklyMain.last_update_date_format)},computed:{},watch:{selTabName:(U=K(i().mark((function t(e,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"tab1"==e&&(this.refreshTab1=this.refreshTab1+1,this.tab2AvgChangeData={}),"tab2"==e&&(this.refreshTab2=this.refreshTab2+1,this.tab2AvgChangeData={}),"tab3"==e&&(this.refreshTab3=this.refreshTab3+1,this.tab2AvgChangeData={});case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return U.apply(this,arguments)})},methods:{setLastUpdateDateFormat:function(t){this.lastUpdateDateFormat=t},tab2AvgChange:function(t){var e=this;return K(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Object.keys(e.tab2AvgChangeData).length,e.$set(e.tab2AvgChangeData,"case"+t.case+"-"+t.item_id,t);case 2:case"end":return a.stop()}}),a)})))()},checkApprove:function(){var t=this;return K(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).canApprove){e.next=3;break}return e.abrupt("return");case 3:return a.loading.approveProcess=!0,e.next=6,axios.get(a.url.ajax_check_approve,{lines:a.tab2AvgChangeData}).then((function(t){"S"==t.data.data.status?swal({html:!0,title:"อนุมัตประมาณการผลิตประจำปักษ์",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอนุมัตประมาณการผลิตประจำปักษ์ ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=K(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&a.approve();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):swal({title:"อนุมัตประมาณการผลิตประจำปักษ์",text:t.data.data.msg,html:!0,showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=K(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(console.log("Approve"),a.approve());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){a.loading.approveProcess=!1}));case 6:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this;return K(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,axios.patch(a.url.ajax_approve).then((function(t){"S"==t.data.data.status&&(swal({title:"อนุมัตประมาณการผลิตประจำปักษ์",text:'<span style="font-size: 16px; text-align: left;"> อนุมัตประมาณการผลิตประจำปักษ์เรียบร้อย </span>',type:"success",html:!0}),a.tab2AvgChangeData={},"tab2"==a.selTabName&&(a.refreshTab2=a.refreshTab2+1),a.canEdit=!1,a.canApprove=!1,a.prodBiweeklyMain=t.data.data.prod_biweekly_main),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){}));case 3:case"end":return e.stop()}}),e)})))()},saveTab2AvgChange:function(){var t=this;return K(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).canEdit){e.next=3;break}return e.abrupt("return");case 3:if(0!=Object.keys(a.tab2AvgChangeData).length){e.next=6;break}return swal({title:"อัพเดทแผนการผลิต",text:'<span style="font-size: 16px; text-align: left;"> ไม่พบข้อูลการอัพเดท </span>',type:"warning",html:!0}),e.abrupt("return");case 6:swal({html:!0,title:"อัพเดทแผนการผลิต ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทแผนการผลิต ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=K(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,axios.patch(a.url.ajax_production_biweekly_update,{lines:a.tab2AvgChangeData}).then((function(t){"S"==t.data.data.status&&(swal({title:"อัพเดทแผนการผลิต",text:'<span style="font-size: 16px; text-align: left;"> อัพเดทแผนการผลิตสำเร็จ </span>',type:"success",html:!0}),a.setLastUpdateDateFormat(t.data.data.last_update_date),a.tab2AvgChangeData={},"tab2"==a.selTabName&&(a.refreshTab2=a.refreshTab2+1)),"S"!=t.data.data.status&&swal({title:"Error !",text:t.data.data.msg,type:"error",showConfirmButton:!0})})).catch((function(t){var e=t.response.data;alert(e.message)})).then((function(){}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})))()}}};const Q=(0,o.Z)(J,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.approveProcess,expression:"loading.approveProcess"}]},[a("div",{staticClass:"ibox float-e-margins mb-2"},[a("div",{staticClass:"col-12 text-right mt-1"},[a("modal-search",{attrs:{"btn-trans":t.btnTrans,url:t.url,budgetYears:t.modalSearchInput.budget_years,biWeekly:t.modalSearchInput.bi_weekly,monthList:t.modalSearchInput.month_list,search:[]}}),t._v(" "),a("modal-create",{staticClass:"pr-2",attrs:{"btn-trans":t.btnTrans,url:t.url,defaultYear:t.modalCreateInput.default_year,defaultBiWeekly:t.modalCreateInput.default_bi_weekly,defaultDefaultMonth:t.modalCreateInput.default_month,budgetYears:t.modalCreateInput.budget_years,biWeekly:t.modalCreateInput.bi_weekly}}),t._v(" "),t.canEdit?a("button",{class:t.btnTrans.save.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.saveTab2AvgChange()}}},[a("i",{class:t.btnTrans.save.icon}),t._v("\n                "+t._s(t.btnTrans.save.text)+"\n            ")]):t._e(),t._v(" "),t.canApprove?a("button",{class:t.btnTrans.approve.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.checkApprove()}}},[a("i",{class:t.btnTrans.approve.icon}),t._v("\n                "+t._s(t.btnTrans.approve.text)+"\n            ")]):t._e(),t._v(" "),a("button",{class:t.btnTrans.print.class+" btn-lg tw-w-25",attrs:{type:"button"}},[a("i",{class:t.btnTrans.print.icon}),t._v("\n                "+t._s(t.btnTrans.print.text)+"\n            ")])],1)]),t._v(" "),a("div",{staticClass:"card border-primary mb-3 mt-3"},[a("div",{staticClass:"card-body"},[a("header-detail",{attrs:{lastUpdateDateFormat:t.lastUpdateDateFormat,"prod-biweekly-main":t.prodBiweeklyMain}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 b-r"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dl",{staticClass:"row mb-0"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-8 text-sm-left"},[a("div",[a("el-radio-group",{attrs:{size:"small"},model:{value:t.defaultInput.product_type,callback:function(e){t.$set(t.defaultInput,"product_type",e)},expression:"defaultInput.product_type"}},[t._l(t.productTypes,(function(e,n){return[a("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:e.lookup_code,border:""}},[t._v("\n                                                "+t._s(e.meaning)+"\n                                            ")])]}))],2)],1)])])])])])])],1)]),t._v(" "),a("div",{staticClass:"tabs-container"},[a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#tab1"},on:{click:function(e){t.selTabName="tab1"}}},[t._v("\n                    ประมาณกำลังการผลิต\n                ")])]),t._v(" "),a("li",[a("a",{staticClass:"nav-link ",attrs:{"data-toggle":"tab",href:"#tab2"},on:{click:function(e){t.selTabName="tab2"}}},[t._v("\n                    ประมาณการผลิตแยกรายตรา\n                ")])]),t._v(" "),a("li",[a("a",{staticClass:"nav-link ",attrs:{"data-toggle":"tab",href:"#tab3"},on:{click:function(e){t.selTabName="tab3"}}},[t._v("\n                    ประมาณการผลิตรายปักษ์\n                ")])])]),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane active",attrs:{role:"tabpanel",id:"tab1"}},[a("div",{staticClass:"panel-body "},[a("tab1",{attrs:{machineEfficiencyProd:t.machineEfficiencyProd,"product-type":t.defaultInput.product_type,"default-bi-weekly":t.defaultInput.tab1_bi_weekly,"pp-bi-weekly":t.ppBiWeekly,"working-hour":t.workingHour,"sel-tab-name":t.selTabName,url:t.url,pRefresh:t.refreshTab1,"prod-biweekly-main":t.prodBiweeklyMain}})],1)]),t._v(" "),a("div",{staticClass:"tab-pane ",attrs:{role:"tabpanel",id:"tab2"}},[a("div",{staticClass:"panel-body"},[a("tab2",{attrs:{"prod-biweekly-main":t.prodBiweeklyMain,"product-type":t.defaultInput.product_type,omBiweeklyList:t.omBiweeklyList,"cal-types":t.calTypes,pRefresh:t.refreshTab2,"cal-type-default":t.calTypeDefault,"p-date-format":t.pDateFormat,"p-working-hour":t.workingHour,"sel-tab-name":t.selTabName,pDefaultInput:t.pDefaultInput,canEdit:t.canEdit,btnTrans:t.btnTrans,biweeklyColorCode:t.biweeklyColorCode,url:t.url},on:{tab2AvgChange:t.tab2AvgChange}})],1)]),t._v(" "),a("div",{staticClass:"tab-pane ",attrs:{role:"tabpanel",id:"tab3"}},[a("div",{staticClass:"panel-body"},[a("tab3",{attrs:{"prod-biweekly-main":t.prodBiweeklyMain,"product-type":t.defaultInput.product_type,pRefresh:t.refreshTab3,"sel-tab-name":t.selTabName,url:t.url}})],1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-2 pl-0 text-sm-right"},[a("dt",[t._v("ประมาณการผลิต:")])])}],!1,null,null,null).exports}}]);