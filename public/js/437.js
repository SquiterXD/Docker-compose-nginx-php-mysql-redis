(self.webpackChunk=self.webpackChunk||[]).push([[437],{30437:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>H});var i=a(87757),s=a.n(i);function n(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var l=t.apply(e,a);function r(t){n(l,i,s,r,o,"next",t)}function o(t){n(l,i,s,r,o,"throw",t)}r(void 0)}))}}const r={props:["btnTrans","url","createInput"],data:function(){return{loading:!1,loadingVerNo:!1,yearList:this.createInput.year_list,monthList:this.createInput.month_list,budgetYear:this.createInput.def_period_year,periodNo:this.createInput.def_period_no,thaiMonth:""}},mounted:function(){},computed:{},watch:{},methods:{openModal:function(){return l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$("#modal_create").modal("show");case 1:case"end":return t.stop()}}),t)})))()},submit:function(){var t=this;t.loading=!0,axios.post(t.url.ajax_validate,{budget_year:t.budgetYear,period_no:t.periodNo}).then((function(e){"W"==e.data.data.status?swal({html:!0,title:"สร้างข้อมูลการติดตามการใช้แสตมป์รายวัน",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> มีข้อมูลการติดตามการใช้แสตมป์รายวันอยู่แล้ว ต้องการอัพเดตข้อมูลหรือไม่ ? </span></h2>',showCancelButton:!0,confirmButtonText:t.btnTrans.ok.text,cancelButtonText:t.btnTrans.cancel.text,confirmButtonClass:t.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:t.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},(function(e){e&&t.create(),t.loading=!1})):"E"==e.data.data.status?swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.data.data.msg+"</span>",type:"warning",html:!0}):t.create()})).catch((function(t){})).then((function(){t.loading=!1}))},create:function(){var t=this;t.loading=!0,axios.post(t.url.ajax_store,{budget_year:t.budgetYear,period_no:t.periodNo}).then((function(t){"S"==t.data.data.status?(swal({title:"สร้างข้อมูลการติดตามการใช้แสตมป์รายวัน",text:'<span style="font-size: 15px; text-align: left;">'+t.data.data.msg+"</span>",type:"success",html:!0}),window.setTimeout((function(){window.location.href=t.data.data.redirect_page}),500)):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.data.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){})).then((function(){t.loading=!1}))},getDetail:function(){var t=this;return l(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t).budgetYear||a.periodNo){e.next=3;break}return e.abrupt("return");case 3:a.loadingVerNo=!0,axios.get(a.url.ajax_modal_create_details,{params:{period_no:a.periodNo}}).then((function(t){var e=t.data.data;a.versionNo=e.version_no,a.loadingVerNo=!1}));case 5:case"end":return e.stop()}}),e)})))()},getMonth:function(){this.periodNo="",this.thaiMonth=""}}};var o=a(51900);const c=(0,o.Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.create.icon}),t._v("\n        "+t._s(t.btnTrans.create.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_create",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("div",{staticClass:"row col-12 m-0"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{attrs:{size:"large",placeholder:"ปีงบประมาณ",clearable:"",filterable:"","popper-append-to-body":!1},on:{change:t.getMonth},model:{value:t.budgetYear,callback:function(e){t.budgetYear=e},expression:"budgetYear"}},t._l(t.yearList,(function(t,e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ประมาณการใช้แสตมป์เดือน :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{attrs:{size:"large",placeholder:"เดือน",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.periodNo,callback:function(e){t.periodNo=e},expression:"periodNo"}},t._l(t.monthList,(function(t,e){return a("el-option",{key:t.period_num,attrs:{label:t.thai_month,value:t.period_num}})})),1)],1)])]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[t._m(1),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{class:t.btnTrans.create.class+" btn-md tw-w-25",attrs:{type:"button",disabled:!t.periodNo},on:{click:function(e){return e.preventDefault(),t.submit()}}},[a("i",{class:t.btnTrans.create.icon}),t._v("\n                                "+t._s(t.btnTrans.create.text)+"\n                            ")]),t._v(" "),a("button",{staticClass:"btn btn-white btn-md tw-w-25",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[t._v("\n                        สร้างการติดตามการใช้งานแสตมป์รายวัน\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:" tw-font-bold tw-uppercase mt-1"},[t._v(" "),a("br")])}],!1,null,null,null).exports;function d(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}const u={props:["budgetYears","monthList","defBudgetYear","btnTrans","url"],data:function(){return{budget_year:this.defBudgetYear,month:"",loading:!1,errors:{budget_year:!1,month:!1}}},mounted:function(){},computed:{},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.month?this.setError("month"):this.resetError("month")},deep:!0}},methods:{openModal:function(){$("#modal_search").modal("show")},searchForm:function(){var t,e=this;return(t=s().mark((function t(){var a,i,n,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e,i=$("#search-form"),n=!0,l="",a.errors.budget_year=!1,a.errors.month=!1,$(i).find("div[id='el_explode_budget_year']").html(""),$(i).find("div[id='el_explode_month']").html(""),""==a.budgetYear&&(a.errors.budget_year=!0,n=!1,l="กรุณาเลือกปีงบประมาณ",$(i).find("div[id='el_explode_budget_year']").html(l)),""==e.month&&(e.errors.month=!0,n=!1,l="กรุณาเลือกเดือน",$(i).find("div[id='el_explode_month']").html(l)),n){t.next=12;break}return t.abrupt("return");case 12:a.loading=!0,i.submit();case 14:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){d(n,i,s,l,r,"next",t)}function r(t){d(n,i,s,l,r,"throw",t)}l(void 0)}))})()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},errorRef:function(t){this.errors.budget_year=t.err.budget_year,this.errors.month=t.err.month}}};const _=(0,o.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n        "+t._s(t.btnTrans.search.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_search",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",{attrs:{id:"search-form",action:t.url.search}},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:t.budget_year}}),t._v(" "),a("el-select",{ref:"budget_year",attrs:{size:"large",placeholder:"ปีงบประมาณ",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}},t._l(t.budgetYears,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" เดือน :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("input",{attrs:{type:"hidden",name:"search[thai_month]"},domProps:{value:t.month}}),t._v(" "),a("el-select",{ref:"month",attrs:{size:"large",placeholder:"เดือน",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.monthList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.thai_month,value:t.thai_month}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_month"}})],1)]),t._v(" "),a("div",{staticClass:"form-group text-right pr-2 mb-0 col-lg-2 col-md-10 col-sm-12 col-xs-12"},[a("label",{staticClass:" tw-font-bold tw-uppercase mt-2"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"text-left"},[a("button",{class:t.btnTrans.search.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.searchForm(e)}}},[a("i",{class:t.btnTrans.search.icon}),t._v("\n                                        "+t._s(t.btnTrans.search.text)+"\n                                    ")])]),t._v(" "),a("small",{staticClass:"font-bold"},[t._v("\n                                     \n                                ")])])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[t._v("\n                        ค้นหาการติดตามการใช้งานแสตมป์รายวัน\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])])}],!1,null,null,null).exports;var m=a(30381),v=a.n(m);function p(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){p(n,i,s,l,r,"next",t)}function r(t){p(n,i,s,l,r,"throw",t)}l(void 0)}))}}var h,b,y;const g={props:["btnTrans","url","header","stampMain","users"],data:function(){return{head:this.header,loading:!1,needByDate:"",interfaceFlag:!1,approver1:"",approver2:"",html:"",checkDate:{curr_date:"",date_from:"",date_to:"",need_by_date:""},errors:{need_by_date:"",approver1:"",approver2:""}}},watch:{errors:{handler:function(t){t.approver1?this.setError("approver1"):this.resetError("approver1"),t.approver2?this.setError("approver2"):this.resetError("approver2")},deep:!0}},methods:(h={openModal:function(){var t=this;return f(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getDetail(),t.approver1="",t.approver2="",t.html="",$("#modal_interface").modal("show");case 5:case"end":return e.stop()}}),e)})))()},getDetail:function(){var t=this;return f(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).loading=!0,a.html,e.next=5,axios.get(a.url.ajax_get_period).then((function(e){v()().format("YYYY-MM-DD");var i=v()(e.data.period.start_date).format("YYYY-MM-DD"),s=v()(e.data.period.end_date).format("YYYY-MM-DD");a.checkDate.date_from=i,a.checkDate.date_to=s,t.convertDate()})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:t.message,type:"error"})})).then((function(){a.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},convertDate:function(){var t=this;return f(s().mark((function e(){var a,i,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v()().format("YYYY-MM-DD"),e.next=3,helperDate.parseToDateTh(a,"YYYY-MM-DD");case 3:i=e.sent,t.needByDate=v()(i).format("DD-MMM-YYYY"),t.checkDate.curr_date=v()(i).format("DD-MMM-YYYY"),n=v()(i).format("YYYY-MM-DD"),n=t.changeThToEn(n),t.checkDate.need_by_date=n;case 9:case"end":return e.stop()}}),e)})))()},dateWasSelected:function(t){var e=$("#form-interface");this.errors.need_by_date=!1,$(e).find("div[id='el_explode_need_by_date']").html(""),this.needByDate=t?v()(t).format("DD-MMM-YYYY"):"";var a=v()(t).format("YYYY-MM-DD");a=this.changeThToEn(a),this.checkDate.need_by_date=a,this.getSummaryPR()},changeThToEn:function(t){var e=v()(t,"YYYY-MM-DD");return e.subtract(543,"years"),e.format("YYYY-MM-DD")},errorRef:function(t){this.errors.need_by_date=t.err.need_by_date},getSummaryPR:function(){var t=this;return f(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).loading=!0,e.next=4,axios.post(a.url.ajax_get_summary_interface_pr,{needByDate:a.checkDate.need_by_date}).then((function(t){a.html=t.data.html,a.interfaceFlag=t.data.interfaceFlag})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:t.message,type:"error"})})).then((function(){a.loading=!1}));case 4:case"end":return e.stop()}}),e)})))()},submitPR:function(){var t=this,e=$("#interface-form"),a=!0,i="";t.errors.approver1=!1,t.errors.approver2=!1,$(e).find("div[id='el_explode_approver1']").html(""),$(e).find("div[id='el_explode_approver2']").html(""),""==t.approver1&&(t.errors.approver1=!0,a=!1,i="กรุณาระบุผู้ตรวจสอบ",$(e).find("div[id='el_explode_approver1']").html(i)),""==t.approver2&&(t.errors.approver2=!0,a=!1,i="กรุณาระบุผู้อนุมัติ",$(e).find("div[id='el_explode_approver2']").html(i)),a&&swal({html:!0,title:'<div class="mt-4">  ส่งข้อมูลแสตมป์เข้าระบบ PR </div>',text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> ต้องการส่งข้อมูลแสตมป์เข้าระบบ PR ใช่หรือไม่ ? </span></h2>',showCancelButton:!0,confirmButtonText:t.btnTrans.ok.text,cancelButtonText:t.btnTrans.cancel.text,confirmButtonClass:t.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:t.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},(function(e){e&&t.interface(),t.loading=!1}))},interface:function(){var t=this;t.loading=!0,axios.post(t.url.ajax_interface_pr,{needByDate:t.checkDate.need_by_date,approver1:t.approver1,approver2:t.approver2}).then((function(e){"S"==e.data.status?(t.$emit("updateStampHeader",{header:e.data.header,interfaceTemps:e.data.interfaceTemps,poLists:e.data.poLists}),swal({title:'<div class="mt-4">  ส่งข้อมูลแสตมป์เข้าระบบ PR </div>',text:'<span style="font-size: 15px; text-align: left;">'+e.data.msg+"</span>",type:"success",html:!0})):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+res.data.msg+"</span>",type:"warning",html:!0})})).then((function(){$("#modal_interface").modal("hide"),t.loading=!1}))},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""}},b="errorRef",y=function(t){this.errors.approver1=t.err.approver1,this.errors.approver2=t.err.approver2},b in h?Object.defineProperty(h,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[b]=y,h)};const x=(0,o.Z)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{class:t.btnTrans.interface_pr.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:t.openModal}},[a("i",{class:t.btnTrans.interface_pr.icon}),t._v("\n        "+t._s(t.btnTrans.interface_pr.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_interface",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-body text-left"},[a("form",{attrs:{id:"interface-form"}},[a("div",{staticClass:"row col-12 m-0"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่ส่งข้อมูล :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{attrs:{type:"text",placeholder:"วันที่ส่งข้อมูล",readonly:""},model:{value:t.head.current_date_format,callback:function(e){t.$set(t.head,"current_date_format",e)},expression:"head.current_date_format"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" วันที่ที่ต้องการจัดซื้อ :")]),t._v(" "),a("div",{staticClass:"input-group"},[a("datepicker-th",{staticClass:"form-control md:tw-mb-0 tw-mb-2",style:"width: 100%; "+(t.errors.need_by_date?"border: 1px solid red;":""),attrs:{name:"need_by_date",id:"need_by_date",placeholder:"โปรดเลือกวันที่",value:t.needByDate,format:"DD-MMM-YYYY"},on:{dateWasSelected:t.dateWasSelected},model:{value:t.needByDate,callback:function(e){t.needByDate=e},expression:"needByDate"}})],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_need_by_date"}})])]),t._v(" "),a("div",{staticClass:"row col-12 m-0"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ผู้ตรวจสอบ :")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{ref:"approver1",staticStyle:{"'width":"100%"},attrs:{size:"large",placeholder:"ผู้ตรวจสอบ",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.approver1,callback:function(e){t.approver1=e},expression:"approver1"}},t._l(t.users,(function(t,e){return a("el-option",{key:t.username,attrs:{label:t.name,value:t.username}})})),1)],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_approver1"}})]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-4 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ผู้อนุมัติ :")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-select",{ref:"approver2",staticStyle:{"'width":"100%"},attrs:{size:"large",placeholder:"ผู้อนุมัติ",clearable:"",filterable:"","popper-append-to-body":!1},model:{value:t.approver2,callback:function(e){t.approver2=e},expression:"approver2"}},t._l(t.users,(function(t,e){return a("el-option",{key:t.username,attrs:{label:t.name,value:t.username}})})),1)],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_approver2"}})])]),t._v(" "),t.html?a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-6 col-xs-6 mt-2"},[a("hr"),t._v(" "),a("div",{staticClass:"table-responsive",domProps:{innerHTML:t._s(t.html)}})]):t._e(),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[t._m(1),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{class:t.btnTrans.create.class+" btn-md tw-w-25",attrs:{type:"button",disabled:!t.interfaceFlag},on:{click:function(e){return e.preventDefault(),t.submitPR()}}},[a("i",{class:t.btnTrans.interface_pr.icon}),t._v(" ส่งข้อมูล\n                                ")]),t._v(" "),a("button",{staticClass:"btn btn-white btn-md tw-w-25",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[t._v("\n                        ส่งข้อมูลเข้า PR\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:" tw-font-bold tw-uppercase mt-1"},[t._v(" "),a("br")])}],!1,null,null,null).exports;const w={props:["header"],data:function(){return{}},methods:{},watch:{},computed:{}};const C=(0,o.Z)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("form",{attrs:{id:"stamp-follow-form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 b-r"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3"},[a("dl",{staticClass:"row mb-0"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-5 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header&&t.header.pp_period?a("div",[t._v("\n                                        "+t._s(t.header.pp_period.thai_year)+"\n                                    ")]):t._e()])])])]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("dl",{staticClass:"row mb-0"},[t._m(1),t._v(" "),a("div",{staticClass:"col-sm-7 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header&&t.header.pp_period?a("div",[t._v("\n                                        "+t._s(t.header.pp_period.thai_month)+"\n                                    ")]):t._e()])])])])])]),t._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dl",{staticClass:"row mb-1"},[t._m(2),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header?a("div",[t._v("\n                                        "+t._s(t.header.current_date_format)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-1"},[t._m(3),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header?a("div",[t._v("\n                                        "+t._s(t.header.last_update_date_format)+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-1"},[t._m(4),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header?a("div",[t._v("\n                                        "+t._s(t.header.updated_by?t.header.updated_by.name:"")+"\n                                    ")]):t._e()])])]),t._v(" "),a("dl",{staticClass:"row mb-1"},[t._m(5),t._v(" "),a("div",{staticClass:"col-sm-6 text-sm-left"},[a("dd",{staticClass:"mb-1"},[t.header?a("div",[t._v("\n                                        "+t._s(t.header.interface_pr_date_format?t.header.interface_pr_date_format:"")+"\n                                    ")]):t._e()])])])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-7 pl-0 text-sm-right pl-0 pr-0"},[a("dt",[t._v("ปีงบประมาณ:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-5 pl-0 text-sm-right pl-0 pr-0"},[a("dt",[t._v("ประจำเดือน:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("วันที่ปัจจุบัน:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",{attrs:{title:""}},[t._v("วันที่แก้ไขล่าสุด:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("ผู้บันทึก:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6 text-sm-right"},[a("dt",[t._v("นำข้อมูลเข้าล่าสุด:")])])}],!1,null,null,null).exports;var D=a(80455),k=a.n(D);const S={components:{VueNumeric:k()},props:["stamp","line","editFlag","lineWeeklyDailyEdit"],data:function(){return{oldWeeklyReceiveQty:this.line.weekly_receive_qty,oldRollReceiveQty:this.line.receive_roll_qty,oldReceiptAmount:this.line.receipt_amount,canEdit:!1}},mounted:function(){this.checkCanEdit()},watch:{editFlag:function(t){0==t&&(this.line.weekly_receive_qty=Number(this.oldWeeklyReceiveQty),this.line.receive_roll_qty=Number(this.oldRollReceiveQty),this.line.receipt_amount=Number(this.oldReceiptAmount))}},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},formatNumber:function(t){return Number(t).toLocaleString(void 0)},changeReceiveQty:function(){var t=this,e=Number(t.line.weekly_receive_qty)/Number(t.stamp.stamp_per_roll);t.line.receive_roll_qty=e.toFixed(2);var a=t.line.weekly_receive_qty*Number(t.stamp.unit_price);t.line.receipt_amount=a.toFixed(2),Vue.set(t.lineWeeklyDailyEdit,t.line.follow_date,Number(t.line.weekly_receive_qty))},checkCanEdit:function(){v()(this.line.follow_date).format("YYYY-MM-DD")>v()().format("YYYY-MM-DD")&&(this.canEdit=!0)}}};const T=(0,o.Z)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[t.editFlag?a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"receive_roll_qty",separator:",",precision:2,minus:!1,min:0,max:99999999999},on:{change:function(e){return t.changeReceiveQty()},blur:function(e){return t.changeReceiveQty()}},model:{value:t.line.weekly_receive_qty,callback:function(e){t.$set(t.line,"weekly_receive_qty",e)},expression:"line.weekly_receive_qty"}}):a("div",{staticStyle:{width:"100%"}},[t._v(" "+t._s(t.formatNumber(Number(t.line.weekly_receive_qty)))+" ")])],1)}),[],!1,null,null,null).exports;const q={components:{VueNumeric:k()},props:["stamp","line","editFlag","lineRollDailyEdit"],data:function(){return{oldWeeklyReceiveQty:this.line.weekly_receive_qty,oldRollReceiveQty:this.line.receive_roll_qty,oldReceiptAmount:this.line.receipt_amount,canEdit:!1}},mounted:function(){this.checkCanEdit()},watch:{editFlag:function(t){0==t&&(this.line.weekly_receive_qty=Number(this.oldWeeklyReceiveQty),this.line.receive_roll_qty=Number(this.oldRollReceiveQty),this.line.receipt_amount=Number(this.oldReceiptAmount))}},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},formatNumber:function(t){return Number(t).toLocaleString(void 0)},changeReceiveQty:function(){var t=this,e=Number(t.line.receive_roll_qty)*Number(t.stamp.stamp_per_roll);t.line.weekly_receive_qty=e.toFixed(2);var a=t.line.weekly_receive_qty*Number(t.stamp.unit_price);t.line.receipt_amount=a.toFixed(2),Vue.set(t.lineRollDailyEdit,t.line.follow_date,Number(t.line.receive_roll_qty))},checkCanEdit:function(){v()(this.line.follow_date).format("YYYY-MM-DD")>v()().format("YYYY-MM-DD")&&(this.canEdit=!0)}}};const Y=(0,o.Z)(q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[t.editFlag?a("vue-numeric",{staticClass:"form-control input-sm text-right",staticStyle:{width:"100%"},attrs:{name:"receive_roll_qty",separator:",",precision:2,minus:!1,min:0,max:99999999999},on:{change:function(e){return t.changeReceiveQty()},blur:function(e){return t.changeReceiveQty()}},model:{value:t.line.receive_roll_qty,callback:function(e){t.$set(t.line,"receive_roll_qty",e)},expression:"line.receive_roll_qty"}}):a("div",{staticStyle:{width:"100%"}},[t._v(" "+t._s(Number(t.line.receive_roll_qty).toFixed(2))+" ")])],1)}),[],!1,null,null,null).exports;function R(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function N(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){R(n,i,s,l,r,"next",t)}function r(t){R(n,i,s,l,r,"throw",t)}l(void 0)}))}}const E={components:{ReceiveWeekly:T,ReceiveRoll:Y},props:["header","stamp","btnTrans","url","summaryData"],data:function(){return{loading:!1,lines:this.summaryData,edit_flag:!1,valid:!1,sel_daily:"",lineWeeklyDailyEdit:{},lineRollDailyEdit:{},onhandQuantity:{},balanceQuantity:{},balanceOnhandWeekly:{},balanceOnhandRoll:{},balanceDays:{},quantity:{weekly_receive:0,roll_receive:0,total_receive:0,claim_receive:0,issue_receive:0,lost_receive:0,damaged_receive:0,incompleted_receive:0,total_issue_receive:0,total_daily_receive:0,factory_bal_onhand_qty:0},canEdit:!1}},mounted:function(){this.checkCanEdit()},computed:{weeklyReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.weekly_receive=e+parseFloat(a.weekly_receive_qty),e+Number(a.weekly_receive_qty)}),0)},rollReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.roll_receive=e+Number(a.receive_roll_qty),e+Number(a.receive_roll_qty)}),0)},totalReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_receive=e+Number(a.receipt_amount),e+Number(a.receipt_amount)}),0)},claimReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.claim_receive=e+Number(a.claim_receive_qty),e+Number(a.claim_receive_qty)}),0)},issueReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.issue_receive=e+Number(a.issue_qty),e+Number(a.issue_qty)}),0)},lostReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.lost_receive=e+Number(a.lost_qty),e+Number(a.lost_qty)}),0)},damagedReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.damaged_receive=e+Number(a.damaged_qty),e+Number(a.damaged_qty)}),0)},incompletedReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.incompleted_receive=e+Number(a.incompleted_qty),e+Number(a.incompleted_qty)}),0)},totalIssueReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_issue_receive=e+Number(a.total_issue_qty),e+Number(a.total_issue_qty)}),0)},totalDailyReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_daily_receive=e+Number(a.total_daily_qty),e+Number(a.total_daily_qty)}),0)},totalOnhandFactoryA13:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.factory_bal_onhand_qty=e+Number(a.factory_bal_onhand_qty),e+Number(a.factory_bal_onhand_qty)}),0)},calBalanceStampDaily:function(){var t=this;t.lines.filter((function(e,a){var i,s=0;v()(e.follow_date).format("YYYY-MM-DD");if(i=Number(e.onhand_qty)+Number(e.weekly_receive_qty)-Number(e.total_daily_qty),a>0){var n=t.onhandQuantity[t.lines[a-1].follow_date]?t.onhandQuantity[t.lines[a-1].follow_date]:e.onhand_qty;s=Number(n)+Number(t.lines[a-1].weekly_receive_qty)-Number(t.lines[a-1].total_daily_qty),Vue.set(t.onhandQuantity,e.follow_date,Number(s))}else Vue.set(t.onhandQuantity,e.follow_date,Number(i))}))},calBalanceOnhand:function(){var t=this,e=v()().format("YYYY-MM-DD");t.lines.filter((function(a,i){var s=0,n=0,l=0;v()(a.follow_date).format("YYYY-MM-DD")>=e?(s=t.onhandQuantity[a.follow_date]?t.onhandQuantity[a.follow_date]:a.onhand_qty,t.lineWeeklyDailyEdit[a.follow_date]?t.lineWeeklyDailyEdit[a.follow_date]:a.weekly_receive_qty,l=(l=s/t.stamp.stamp_per_roll)||0,Vue.set(t.balanceOnhandWeekly,a.follow_date,Number(s)),Vue.set(t.balanceOnhandRoll,a.follow_date,Number(l).toFixed(2))):(l=(l=(n=t.quantity.factory_bal_onhand_qty+a.inventory_bal_onhand_qty)/t.stamp.unit_price)||0,Vue.set(t.balanceOnhandWeekly,a.follow_date,Number(n)),Vue.set(t.balanceOnhandRoll,a.follow_date,Number(l).toFixed(2)))}))},calBalanceDays:function(){var t=this,e=0;t.lines.filter((function(a,i){var s=0,n=1;Vue.set(t.balanceDays,a.follow_date,Number(n));var l=v()(a.follow_date).format("YYYY-MM-DD");0==i?(e=Number(a.onhand_qty)-Number(a.total_daily_qty))>0&&t.lines.filter((function(i,r){v()(i.follow_date).format("YYYY-MM-DD")>=l&&r+1<t.lines.length&&(0==s?(s=Number(e)-Number(t.lines[r+1].total_daily_qty),n+=1,Vue.set(t.balanceDays,a.follow_date,Number(n))):(s=Number(s)-Number(t.lines[r+1].total_daily_qty),n+=1,Vue.set(t.balanceDays,a.follow_date,Number(n))))})):(e=Number(t.onhandQuantity[a.follow_date])-Number(a.total_daily_qty),t.lines.filter((function(i,r){v()(i.follow_date).format("YYYY-MM-DD")>=l&&r+1<t.lines.length&&(0==s?(s=Number(e)-Number(t.lines[r+1].total_daily_qty),n+=1,Vue.set(t.balanceDays,a.follow_date,Number(n))):(s=Number(s)-Number(t.lines[r+1].total_daily_qty),n+=1,Vue.set(t.balanceDays,a.follow_date,Number(n))))})))}))}},watch:{edit_flag:function(t){0==t&&(this.lineWeeklyDailyEdit={},this.lineRollDailyEdit={})},weeklyReceive:function(t){return t},rollReceive:function(t){return t},totalReceive:function(t){return t},claimReceive:function(t){return t},issueReceive:function(t){return t},lostReceive:function(t){return t},damagedReceive:function(t){return t},incompletedReceive:function(t){return t},totalIssueReceive:function(t){return t},totalDailyReceive:function(t){return t},totalOnhandFactoryA13:function(t){return t},calBalanceStampDaily:function(t){return t},calBalanceOnhand:function(t){return t},calBalanceDays:function(t){return t}},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},formatNumber:function(t){return Number(t).toLocaleString(void 0)},selDailyDate:function(t){this.sel_daily=t},changeStampData:function(){this.valid=this.edit_flag=!this.edit_flag,this.$emit("validAction",this.valid)},saveChangeInput:function(){var t=this;return N(s().mark((function e(){var a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(a=t).url.ajax_store+"/"+a.header.follow_stamp_main_id,0!=Object.keys(a.lineWeeklyDailyEdit).length||0!=Object.keys(a.lineRollDailyEdit).length){e.next=5;break}return swal({title:"อัพเดทการติดตามการใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;"> ไม่พบข้อมูลการอัพเดทการติดตามการใช้แสตมป์รายวัน </span>',type:"warning",html:!0}),e.abrupt("return");case 5:swal({html:!0,title:"อัพเดทการติดตามการใช้แสตมป์รายวัน ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทการติดตามการใช้แสตมป์รายวัน ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=N(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return a.loading=!0,a.valid=!1,t.next=5,axios.patch(i,{lines:a.lines,lineWeeklyDaily:a.lineWeeklyDailyEdit,lineRollDaily:a.lineRollDailyEdit}).then((function(t){"S"==t.data.data.status?(a.lineWeeklyDailyEdit={},a.lineRollDailyEdit={},a.$emit("updateStamp",{status:"S",stamp_main:t.data.data.header,valid_action:a.valid}),swal({title:"อัพเดทการติดตามการใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;">'+t.data.data.msg+"</span>",type:"success",html:!0})):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.data.data.msg+"</span>",type:"warning",html:!0}),a.edit_flag=!1})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},checkCanEdit:function(){v()(this.lines[this.lines.length-1].follow_date).format("YYYY-MM-DD")>v()().format("YYYY-MM-DD")&&(this.canEdit=!0)}}};const B=(0,o.Z)(E,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[t._m(0),t._v(" "),t.header?a("div",{staticClass:"col-md-4 text-right"},[t.edit_flag?t._e():a("button",{class:t.btnTrans.edit.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return t.changeStampData()}}},[a("i",{class:t.btnTrans.edit.icon}),t._v(" "+t._s(t.btnTrans.edit.text)+"\n            ")]),t._v(" "),t.edit_flag?a("button",{class:t.btnTrans.save.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.saveChangeInput(e)}}},[a("i",{class:t.btnTrans.save.icon}),t._v(" "+t._s(t.btnTrans.save.text)+"\n            ")]):t._e(),t._v(" "),t.edit_flag?a("button",{class:t.btnTrans.cancel.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return t.changeStampData()}}},[a("i",{class:t.btnTrans.cancel.icon}),t._v(" "+t._s(t.btnTrans.cancel.text)+"\n            ")]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),a("tbody",[t.lines.length<=0?[t._m(2)]:[t._l(t.lines,(function(e,i){return[a("tr",{style:"Y"==e.holiday_flag?"background-color: #cccccc;":"P"==e.holiday_flag?"background-color: #878788;":""},[a("td",{staticClass:"text-center",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"80px"}},[t._v(" "+t._s(e.follow_date_format)+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v("\n                                    "+t._s(t._f("number2Digit")(t.onhandQuantity[e.follow_date]))+"\n                                ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("receive-weekly",{staticStyle:{width:"130px"},attrs:{stamp:t.stamp,line:e,"edit-flag":t.edit_flag,"line-weekly-daily-edit":t.lineWeeklyDailyEdit}})],1),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("receive-roll",{staticStyle:{width:"130px"},attrs:{stamp:t.stamp,line:e,"edit-flag":t.edit_flag,"line-roll-daily-edit":t.lineRollDailyEdit}})],1),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"130px"}},[t._v(" "+t._s(t._f("number2Digit")(e.receipt_amount))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.claim_receive_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.issue_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.lost_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.damaged_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.incompleted_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.total_issue_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.total_daily_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.factory_bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.inventory_bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(t.balanceOnhandWeekly[e.follow_date]))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(t.balanceOnhandRoll[e.follow_date]))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(t.balanceDays[e.follow_date]))+" ")])])])]})),t._v(" "),a("tr",[t._m(3),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.weekly_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number2Digit")(t.quantity.roll_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number2Digit")(t.quantity.total_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.claim_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.issue_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.lost_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.damaged_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.incompleted_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.total_issue_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.total_daily_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#b3b5b4"},attrs:{colspan:"6"}})])]],2)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-8"},[a("h2",{staticClass:"tw-font-bold"},[t._v(" Stamp Daily Detail ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" วันที่ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" คงคลังเช้า "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"3"}},[a("div",[t._v(" รับเข้า ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" รับแสตมป์เคลม ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ใช้จริง "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" สูญหาย "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" เสียหาย "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ไม่สมบูรณ์ "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" รวมใช้จริง "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ประมาณการใช้ "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("div",[t._v(" คงคลัง (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("div",[t._v(" รวมคงคลังเย็น ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" พอใช้ "),a("br"),t._v(" (วัน) ")])])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ดวง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ม้วน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" จำนวนเงิน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ฝ่ายโรงงาน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" กองคลัง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ดวง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ม้วน ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"17"}},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("strong",[t._v(" รวม ")])])}],!1,null,null,null).exports;function M(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function I(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){M(n,i,s,l,r,"next",t)}function r(t){M(n,i,s,l,r,"throw",t)}l(void 0)}))}}const P={components:{ReceiveWeekly:T,ReceiveRoll:Y},props:["header","stamp","btnTrans","url","summaryData"],data:function(){return{loading:!1,lines:this.summaryData,edit_flag:!1,valid:!1,sel_daily:"",lineWeeklyDailyEdit:{},lineRollDailyEdit:{},onhandQuantity:{},balanceQuantity:{},quantity:{weekly_receive:0,roll_receive:0,total_receive:0,claim_receive:0,issue_receive:0,lost_receive:0,damaged_receive:0,incompleted_receive:0,total_issue_receive:0,total_daily_receive:0,factory_bal_onhand_qty:0},canEdit:!1}},mounted:function(){},computed:{weeklyReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.weekly_receive=e+parseFloat(a.weekly_receive_qty),e+Number(a.weekly_receive_qty)}),0)},rollReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.roll_receive=e+Number(a.receive_roll_qty),e+Number(a.receive_roll_qty)}),0)},totalReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_receive=e+Number(a.receipt_amount),e+Number(a.receipt_amount)}),0)},claimReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.claim_receive=e+Number(a.claim_receive_qty),e+Number(a.claim_receive_qty)}),0)},issueReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.issue_receive=e+Number(a.issue_qty),e+Number(a.issue_qty)}),0)},lostReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.lost_receive=e+Number(a.lost_qty),e+Number(a.lost_qty)}),0)},damagedReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.damaged_receive=e+Number(a.damaged_qty),e+Number(a.damaged_qty)}),0)},incompletedReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.incompleted_receive=e+Number(a.incompleted_qty),e+Number(a.incompleted_qty)}),0)},totalIssueReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_issue_receive=e+Number(a.total_issue_qty),e+Number(a.total_issue_qty)}),0)},totalDailyReceive:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.total_daily_receive=e+Number(a.total_daily_qty),e+Number(a.total_daily_qty)}),0)},totalOnhandFactoryA13:function(){var t=this;return this.lines.reduce((function(e,a){return t.quantity.factory_bal_onhand_qty=e+Number(a.factory_bal_onhand_qty),e+Number(a.factory_bal_onhand_qty)}),0)}},watch:{edit_flag:function(t){0==t&&(this.lineWeeklyDailyEdit={},this.lineRollDailyEdit={})},weeklyReceive:function(t){return t},rollReceive:function(t){return t},totalReceive:function(t){return t},claimReceive:function(t){return t},issueReceive:function(t){return t},lostReceive:function(t){return t},damagedReceive:function(t){return t},incompletedReceive:function(t){return t},totalIssueReceive:function(t){return t},totalDailyReceive:function(t){return t},totalOnhandFactoryA13:function(t){return t},calBalanceStampDaily:function(t){return t},calBalanceOnhand:function(t){return t}},methods:{decimal:function(t){return Number(t).toLocaleString(void 0,{minimumFractionDigits:2})},formatNumber:function(t){return Number(t).toLocaleString(void 0)},selDailyDate:function(t){this.sel_daily=t},changeStampData:function(){this.valid=this.edit_flag=!this.edit_flag,this.$emit("validAction",this.valid)},saveChangeInput:function(){var t=this;return I(s().mark((function e(){var a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(a=t).url.ajax_store+"/"+a.header.follow_stamp_main_id,0!=Object.keys(a.lineWeeklyDailyEdit).length||0!=Object.keys(a.lineRollDailyEdit).length){e.next=5;break}return swal({title:"อัพเดทการติดตามการใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;"> ไม่พบข้อมูลการอัพเดทการติดตามการใช้แสตมป์รายวัน </span>',type:"warning",html:!0}),e.abrupt("return");case 5:swal({html:!0,title:"อัพเดทการติดตามการใช้แสตมป์รายวัน ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทการติดตามการใช้แสตมป์รายวัน ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=I(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return a.loading=!0,a.valid=!1,t.next=5,axios.patch(i,{lines:a.lines,lineWeeklyDaily:a.lineWeeklyDailyEdit,lineRollDaily:a.lineRollDailyEdit}).then((function(t){"S"==t.data.data.status?(a.lineWeeklyDailyEdit={},a.lineRollDailyEdit={},a.$emit("updateStamp",{status:"S",stamp_main:t.data.data.header,valid_action:a.valid}),swal({title:"อัพเดทการติดตามการใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;">'+t.data.data.msg+"</span>",type:"success",html:!0})):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.data.data.msg+"</span>",type:"warning",html:!0}),a.edit_flag=!1})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},checkCanEdit:function(){v()(this.lines[this.lines.length-1].follow_date).format("YYYY-MM-DD")>v()().format("YYYY-MM-DD")&&(this.canEdit=!0)}}};const z=(0,o.Z)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[t._m(0),t._v(" "),a("tbody",[t.lines.length<=0?[t._m(1)]:[t._l(t.lines,(function(e,i){return[a("tr",{style:"Y"==e.holiday_flag?"background-color: #cccccc;":"P"==e.holiday_flag?"background-color: #878788;":""},[a("td",{staticClass:"text-center",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"80px"}},[t._v(" "+t._s(e.follow_date_format)+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(e.onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(e.weekly_receive_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB;":"",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(e.receive_roll_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"130px"}},[t._v(" "+t._s(t._f("number2Digit")(e.receipt_amount))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.claim_receive_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.issue_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.lost_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.damaged_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.incompleted_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.total_issue_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.total_daily_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.factory_bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.inventory_bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number0Digit")(e.total_bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(e.bal_onhand_qty))+" ")])]),t._v(" "),a("td",{staticClass:"text-right",style:t.sel_daily==e.follow_date_format?"background-color: #9AD9DB; vertical-align: middle;":"vertical-align: middle;",on:{click:function(a){return t.selDailyDate(e.follow_date_format)}}},[a("div",{staticStyle:{width:"100px"}},[t._v(" "+t._s(t._f("number2Digit")(e.bal_days))+" ")])])])]})),t._v(" "),a("tr",[t._m(2),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number2Digit")(t.quantity.weekly_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number2Digit")(t.quantity.roll_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number2Digit")(t.quantity.total_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.claim_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.issue_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.lost_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.damaged_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.incompleted_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.total_issue_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#70d200"}},[a("div",{staticClass:"tw-font-bold text-right",staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t._f("number0Digit")(t.quantity.total_daily_receive))+"\n                            ")])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle","background-color":"#b3b5b4"},attrs:{colspan:"6"}})])]],2)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" วันที่ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" คงคลังเช้า "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"3"}},[a("div",[t._v(" รับเข้า ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" รับแสตมป์เคลม ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ใช้จริง "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" สูญหาย "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" เสียหาย "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ไม่สมบูรณ์ "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" รวมใช้จริง "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" ประมาณการใช้ "),a("br"),t._v(" (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("div",[t._v(" คงคลัง (ดวง) ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("div",[t._v(" รวมคงคลังเย็น ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a("div",[t._v(" พอใช้ "),a("br"),t._v(" (วัน) ")])])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ดวง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ม้วน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" จำนวนเงิน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ฝ่ายโรงงาน ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" กองคลัง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ดวง ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"}},[a("div",[t._v(" ม้วน ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"17"}},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"2"}},[a("strong",[t._v(" รวม ")])])}],!1,null,null,null).exports;function O(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function A(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){O(n,i,s,l,r,"next",t)}function r(t){O(n,i,s,l,r,"throw",t)}l(void 0)}))}}const L={props:["index","header","line","poLists","btnTrans","url"],data:function(){return{loading:!1,valid:!1,validReport:!1,cancelled_reason:"",errors:{cancelled_reason:!1}}},mounted:function(){this.checkPRPOTransaction()},watch:{errors:{handler:function(t){t.cancelled_reason?this.setError("cancelled_reason"):this.resetError("cancelled_reason")},deep:!0},line:function(t){this.checkPRPOTransaction()}},methods:{cancelPRModal:function(){this.cancelled_reason="",$("#modal_cancel_pr"+this.index).modal("show")},checkPRPOTransaction:function(){var t=this;if(""==t.line.pr_number||null==t.line.pr_number)return t.valid=!0,void(t.validReport=!0);t.poLists.filter((function(e,a){e.pr_number==t.line.pr_number&&(""==e.po_number&&null==e.po_number&&null!=t.line.pr_number&&"Cancelled"!=t.line.authorization_status||(t.valid=!0))}))},cancelInterfacePR:function(){var t=this;return A(s().mark((function e(){var a,i,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,$("#cancel-pr-form"+a.index),i=!0,n="",a.errors.cancelled_reason=!1,$("div[id=el_explode_cancelled_reason"+a.index+"]").html(""),""==a.cancelled_reason&&(a.errors.cancelled_reason=!0,i=!1,n="กรุณาระบุเหตุผลขอการยกเลิก",$("div[id=el_explode_cancelled_reason"+a.index+"]").html(n)),i){e.next=9;break}return e.abrupt("return");case 9:swal({html:!0,title:'<span style="font-size: 22px"><strong> ยกเลิกรายการ PR </strong></span>',text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 17px"> คุณต้องการยกเลิกรายการ PR นี้หรือไม่ ? </span></h2>',showCancelButton:!0,confirmButtonText:a.btnTrans.ok.text,cancelButtonText:a.btnTrans.cancel.text,confirmButtonClass:a.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:a.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var t=A(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return a.loading=!0,t.next=4,axios.post(a.url.ajax_cancel_interface_pr,{pr_number:a.line.pr_number,cancelled_reason:a.cancelled_reason}).then((function(t){"S"==t.data.status?(a.checkPRPOTransaction(),a.$emit("updateInterfacePR",{interfaceTemps:t.data.interfaceTemps,poLists:t.data.poLists}),swal({title:"ยกเลิกรายการ PR",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"success",html:!0})):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})})).then((function(){$("#modal_cancel_pr"+a.index).modal("hide"),a.loading=!1}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})))()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},errorRef:function(t){var e=this;e.errors.start_date=t.err.start_date,e.errors.end_date=t.err.end_date,e.errors.machine_group=t.err.machine_group}}};function W(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}const F={components:{SubmitPrTransaction:(0,o.Z)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("a",{class:t.btnTrans.print.class+" btn-sm",attrs:{href:t.url.ajax_print_report_pr+"?pr_number="+t.line.pr_number,target:"_blank",type:"button",disabled:t.validReport}},[a("i",{class:t.btnTrans.print.icon}),t._v(" พิมพ์รายงาน\n    ")]),t._v(" "),a("button",{class:t.btnTrans.cancel.class+" btn-sm",attrs:{type:"button",disabled:t.valid},on:{click:function(e){return t.cancelPRModal()}}},[a("i",{class:t.btnTrans.cancel.icon}),t._v(" "+t._s(t.btnTrans.cancel.text)+"\n    ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_cancel_pr"+t.index,tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static","data-keyboard":"false"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body text-left"},[a("form",{attrs:{id:"cancel-pr-form"+t.index}},[a("div",{staticClass:"row col-12 m-0"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-2"},[a("label",{staticClass:"tw-font-bold tw-uppercase mb-1"},[t._v(" เหตุผลการยกเลิก :")]),t._v(" "),a("div",{staticClass:"input-group mb-2"},[a("el-input",{ref:"cancelled_reason",attrs:{type:"textarea",rows:3,placeholder:"เหตุผลการยกเลิก"},model:{value:t.cancelled_reason,callback:function(e){t.cancelled_reason=e},expression:"cancelled_reason"}})],1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_cancelled_reason"+t.index}})])])])]),t._v(" "),a("div",{staticClass:"modal-footer p-2",staticStyle:{"justify-content":"right !important"}},[a("button",{class:t.btnTrans.create.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.cancelInterfacePR()}}},[t._v("\n                        ตกลง\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"22px","font-weight":"400"}},[t._v("\n                        เหตุผลการยกเลิก\n                    ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])])}],!1,null,null,null).exports},props:["header","interfaceTemps","poLists","btnTrans","url"],data:function(){return{loading:!1,valid:!1,lines:this.interfaceTemps,poMaps:this.poLists}},mounted:function(){},watch:{interfaceTemps:function(t){this.lines=t},poLists:function(t){this.poMaps=t}},methods:{getStampDailyTab3:function(){var t,e=this;return(t=s().mark((function t(){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).summaryDataTab3=[],a.loading=!0,t.next=5,axios.get(a.url.ajax_get_stamp_daily_tab3,{params:{follow_stamp_main_id:a.header.follow_stamp_main_id}}).then((function(t){a.lines=t.data.interfaceTemps,a.poMaps=t.data.poLists})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.message+"</span>",type:"warning",html:!0})})).then((function(){a.loading=!1}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){W(n,i,s,l,r,"next",t)}function r(t){W(n,i,s,l,r,"throw",t)}l(void 0)}))})()},updateInterfacePR:function(t){this.lines=t.interfaceTemps,this.poMaps=t.poLists}}};function Q(t,e,a,i,s,n,l){try{var r=t[n](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(i,s)}function j(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function l(t){Q(n,i,s,l,r,"next",t)}function r(t){Q(n,i,s,l,r,"throw",t)}l(void 0)}))}}const V={components:{StampDailyTableTab1:B,StampDailyTableTab2:z,StampDailyTableTab3:(0,o.Z)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-group pl-2 pr-2 m-0 col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right"},[a("button",{class:t.btnTrans.upload.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.getStampDailyTab3(e)}}},[t._v("\n            อัพเดตข้อมูลรายการ PR\n        ")])]),t._v(" "),a("div",{staticClass:"hr-line-dashed mt-3"}),t._v(" "),t.loading?a("div",{staticClass:"m-t-lg m-b-lg"},[t._m(0)]):[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),a("tbody",[t.lines.length<=0?[t._m(2)]:[t._l(t.lines,(function(e,i){return[a("tr",{key:i+"_"+e.pr_number},[a("td",{staticClass:"text-center"},[t._v("\n                                    "+t._s(e.pr_create_date_format)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n                                    "+t._s(e.need_by_date_format)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n                                    "+t._s(e.pr_number)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-center"},[a("span",{domProps:{innerHTML:t._s(e.status_lable_html)}})]),t._v(" "),a("td",{staticClass:"text-center"},[t._l(t.poMaps,(function(a,i){return[e.pr_number==a.pr_number?[t._v("\n                                                "+t._s(a.po_number)+"\n                                            ")]:t._e()]}))],2),t._v(" "),a("td",{staticClass:"text-center"},[t._l(t.poMaps,(function(a,i){return[e.pr_number==a.pr_number?[t._v("\n                                            "+t._s(t.poMaps[0].po_approval_status)+"\n                                        ")]:t._e()]}))],2),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                    "+t._s(e.cancelled_reason_pr)+"\n                                ")]),t._v(" "),a("td",{staticClass:"text-center"},[a("submit-pr-transaction",{key:i+e.pr_number,attrs:{index:i,header:t.header,line:e,poLists:t.poLists,btnTrans:t.btnTrans,url:t.url},on:{updateInterfacePR:t.updateInterfacePR}})],1)])]}))]],2)])])]],2)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center sk-spinner sk-spinner-wave"},[a("div",{staticClass:"sk-rect1"}),t._v(" "),a("div",{staticClass:"sk-rect2"}),t._v(" "),a("div",{staticClass:"sk-rect3"}),t._v(" "),a("div",{staticClass:"sk-rect4"}),t._v(" "),a("div",{staticClass:"sk-rect5"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"8%"}},[a("div",[t._v(" วันที่ส่งข้อมูล ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"8%"}},[a("div",[t._v(" วันที่จัดซื้อ ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" เลขที่รายการ PR ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" สถานะรายการ PR ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" เลขที่รายการ PO ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"10%"}},[a("div",[t._v(" สถานะรายการ PO ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"15%"}},[a("div",[t._v(" เหตุผลการยกเลิก PR ")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle",width:"15%"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"8"}},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])])}],!1,null,null,null).exports},props:["header","btnTrans","url","interfaceTemps","poLists"],data:function(){return{head:this.header,loading:{stampDailyTab1Process:!1,stampDailyTab2Process:!1,stampDailyTab3Process:!1},valid_action:!1,stamp_code:"",set_stamp_code:"",summaryDataTab1:[],summaryDataTab2:[],summaryDataTab3:[],errors:{stamp_code_tab1:!1,stamp_code_tab2:!1,cigarettes_code:!1},tab1Input:{stamp_code:"",cigarettes_code:""},tab2Input:{stamp_code:"",set_stamp_code:""}}},mounted:function(){},computed:{},watch:{errors:{handler:function(t){t.stamp_code_tab1?this.setError("stamp_code_tab1"):this.resetError("stamp_code_tab1"),t.stamp_code_tab2?this.setError("stamp_code_tab2"):this.resetError("stamp_code_tab2"),t.cigarettes_code?this.setError("cigarettes_code"):this.resetError("cigarettes_code")},deep:!0}},methods:{selStamp:function(){if(this.valid_action)return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),void(this.stamp_code=this.set_stamp_code);this.summaryData=[]},updateStamp:function(t){this.valid_action=t.valid_action,"S"===t.status&&(this.getStampDailyTab1(),this.$emit("updateStamp",t.stamp_main))},validAction:function(t){this.valid_action=t},getStampDailyTab1:function(){var t=this;return j(s().mark((function e(){var a,i,n,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t).valid_action){e.next=4;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 4:if(i=$("#stamp-form-tab1"),n=!0,l="",a.errors.stamp_code_tab1=!1,a.errors.cigarettes_code=!1,$(i).find("div[id='el_explode_stamp_code_tab1']").html(""),$(i).find("div[id='el_explode_cigarettes_code_tab1']").html(""),""!=a.tab1Input.stamp_code&&null!=a.tab1Input.stamp_code||(a.errors.stamp_code_tab1=!0,n=!1,l="กรุณาเลือกรหัสแสตมป์",$(i).find("div[id='el_explode_stamp_code_tab1']").html(l)),""!=a.tab1Input.cigarettes_code&&null!=a.tab1Input.cigarettes_code||(a.errors.cigarettes_code=!0,n=!1,l="กรุณาเลือกรหัสบุหรี่",$(i).find("div[id='el_explode_cigarettes_code_tab1']").html(l)),n){e.next=15;break}return e.abrupt("return");case 15:return a.header.stamp_summary[a.tab1Input.stamp_code][0].follow_stamp_id,a.set_stamp_code=t.tab1Input.stamp_code,a.summaryData="",a.loading.stampDailyTab1Process=!0,e.next=21,axios.get(a.url.ajax_get_stamp_daily_tab1,{params:{follow_stamp_main_id:a.header.follow_stamp_main_id,stamp_code:a.tab1Input.stamp_code,cigarettes_code:a.tab1Input.cigarettes_code}}).then((function(t){a.summaryDataTab1=t.data.data.stampDaily})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.message+"</span>",type:"warning",html:!0})})).then((function(){a.loading.stampDailyTab1Process=!1}));case 21:case"end":return e.stop()}}),e)})))()},getStampDailyTab2:function(){var t=this;return j(s().mark((function e(){var a,i,n,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("tab2"),!(a=t).valid_action){e.next=5;break}return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 5:if(i=$("#stamp-form-tab2"),n=!0,l="",a.errors.stamp_code_tab2=!1,$(i).find("div[id='el_explode_stamp_code_tab2']").html(""),""!=a.tab2Input.stamp_code&&null!=a.tab2Input.stamp_code||(a.errors.stamp_code_tab2=!0,n=!1,l="กรุณาเลือกรหัสแสตมป์",$(i).find("div[id='el_explode_stamp_code_tab2']").html(l)),n){e.next=13;break}return e.abrupt("return");case 13:return a.header.stamp_summary[a.tab2Input.stamp_code][0].follow_stamp_id,a.set_stamp_code=a.tab2Input.stamp_code,a.summaryData="",a.loading.stampDailyTab2Process=!0,e.next=19,axios.get(a.url.ajax_get_stamp_daily_tab2,{params:{follow_stamp_main_id:a.header.follow_stamp_main_id,stamp_code:a.tab2Input.stamp_code}}).then((function(t){a.summaryDataTab2=t.data.data.stampDaily})).catch((function(t){var e=t.response.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.message+"</span>",type:"warning",html:!0})})).then((function(){a.loading.stampDailyTab2Process=!1}));case 19:case"end":return e.stop()}}),e)})))()},updateIssueStamp:function(){var t=this;if(t.valid_action)swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0});else{var e="/planning/ajax/stamp-follow/update_issue/"+t.header.follow_stamp_main_id;swal({html:!0,title:"อัพเดทการตัดใช้แสตมป์รายวัน ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทการตัดใช้แสตมป์รายวัน ? </span></h2>',showCancelButton:!0,confirmButtonText:t.btnTrans.ok.text,cancelButtonText:t.btnTrans.cancel.text,confirmButtonClass:t.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:t.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var a=j(s().mark((function a(i){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=3;break}return a.next=3,axios.get(e).then((function(e){"S"==e.data.data.status?(swal({title:"อัพเดทการตัดใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;">'+e.data.data.msg+"</span>",type:"success",html:!0}),t.tab1Input.stamp_code&&(t.valid_action=!1,t.getStampDailyTab1())):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.data.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})}));case 3:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}},refreshStampTap1:function(){var t=this;if(t.valid_action)swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0});else{var e=t.url.ajax_refresh_stamp_tab1;swal({html:!0,title:"อัพเดทประมาณการใช้แสตมป์รายวัน ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทประมาณการใช้แสตมป์รายวัน ? </span></h2>',showCancelButton:!0,confirmButtonText:t.btnTrans.ok.text,cancelButtonText:t.btnTrans.cancel.text,confirmButtonClass:t.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:t.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var a=j(s().mark((function a(i){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=3;break}return a.next=3,axios.get(e).then((function(e){"S"==e.data.data.status?(swal({title:"อัพเดทประมาณการใช้แสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;">'+e.data.data.msg+"</span>",type:"success",html:!0}),t.tab1Input.stamp_code&&(t.valid_action=!1,t.getStampDailyTab1())):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.data.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})}));case 3:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}},refreshStampTap2:function(){var t=this;if(t.valid_action)swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0});else{var e=t.url.ajax_refresh_stamp_onhand_tab2;swal({html:!0,title:"อัพเดทคงคลังแสตมป์รายวัน ?",text:'<h2 class="m-t-sm m-b-lg"><span style="font-size: 18px"> คุณต้องการอัพเดทคงคลังแสตมป์รายวัน ? </span></h2>',showCancelButton:!0,confirmButtonText:t.btnTrans.ok.text,cancelButtonText:t.btnTrans.cancel.text,confirmButtonClass:t.btnTrans.ok.class+" btn-lg tw-w-25",cancelButtonClass:t.btnTrans.cancel.class+" btn-lg tw-w-25",closeOnConfirm:!1,closeOnCancel:!0,showLoaderOnConfirm:!0},function(){var a=j(s().mark((function a(i){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=3;break}return a.next=3,axios.get(e).then((function(e){"S"==e.data.data.status?(swal({title:"อัพเดทคงคลังแสตมป์รายวัน",text:'<span style="font-size: 16px; text-align: left;" class="mt-2">'+e.data.data.msg+"</span>",type:"success",html:!0}),t.tab2Input.stamp_code&&(t.valid_action=!1,t.getStampDailyTab2())):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+e.data.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 15px; text-align: left;">'+t.response+"</span>",type:"warning",html:!0})}));case 3:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},errorRef:function(t){var e=this;e.errors.stamp_code_tab1=t.err.stamp_code,e.errors.stamp_code_tab2=t.err.stamp_code_tab2,e.errors.cigarettes_code=t.err.cigarettes_code}}};const Z={components:{ModalCreate:c,ModalSearch:_,ModalInterface:x,HeaderDetail:C,StampDaily:(0,o.Z)(V,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabs-container mb-3"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading"}],staticClass:"tab-content"},[a("div",{staticClass:"tab-pane active",attrs:{role:"tabpanel",id:"tab1"}},[a("div",{staticClass:"panel-body "},[a("form",{attrs:{id:"stamp-form-tab1"}},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" รหัสแสตมป์ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{ref:"stamp_code_tab1",staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"รหัสแสตมป์",clearable:"",filterable:""},on:{change:t.selStamp},model:{value:t.tab1Input.stamp_code,callback:function(e){t.$set(t.tab1Input,"stamp_code",e)},expression:"tab1Input.stamp_code"}},t._l(t.header.stamp_summary,(function(e,i){return a("el-option",{key:i,attrs:{label:i,value:i}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(i))]),t._v(" "),a("span",{staticStyle:{float:"left",color:"#8492a6"}},[t._v(" : "+t._s(e[0].stamp_description))])])})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_stamp_code_tab1"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab1Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab1Input.stamp_code].find((function(e){return e.stamp_code===t.tab1Input.stamp_code}));return e?e.stamp_description:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ม้วนละ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{staticClass:"text-right",attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab1Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab1Input.stamp_code].find((function(e){return e.stamp_code===t.tab1Input.stamp_code}));return e?e.stamp_per_roll:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ราคาต่อดวง :")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"text-right",attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab1Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab1Input.stamp_code].find((function(e){return e.stamp_code===t.tab1Input.stamp_code}));return e?e.unit_price:void 0}()}})],1)])]),t._v(" "),a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" รหัสบุหรี่ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{ref:"cigarettes_code",staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"รหัสบุหรี่",clearable:"",filterable:""},on:{change:t.getStampDailyTab1},model:{value:t.tab1Input.cigarettes_code,callback:function(e){t.$set(t.tab1Input,"cigarettes_code",e)},expression:"tab1Input.cigarettes_code"}},t._l(t.head.stamp_items_group[t.tab1Input.stamp_code],(function(t,e){return a("el-option",{key:t.cigarettes_code,attrs:{label:t.cigarettes_code+": "+t.cigarettes_description,value:t.cigarettes_code}})})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_cigarettes_code_tab1"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ตราบุหรี่")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{attrs:{size:"large",disabled:"",readonly:!0,value:function(){if(!t.tab1Input.stamp_code)return"";if(!t.tab1Input.cigarettes_code)return"";var e=t.head.stamp_items_group[t.tab1Input.stamp_code].find((function(e){return e.cigarettes_code===t.tab1Input.cigarettes_code}));return e?e.cigarettes_description:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2 pt-1"},[t._m(1),t._v(" "),a("button",{class:t.btnTrans.upload.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.refreshStampTap1(e)}}},[t._v("\n                                    อัพเดตประมาณการตัดใช้แสตมป์\n                                ")])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed mt-3"}),t._v(" "),t.loading.stampDailyTab1Process?a("div",{staticClass:"m-t-lg m-b-lg"},[t._m(2)]):t.summaryDataTab1.length>0&&!t.loading.stampDailyTab1Process?a("div",[a("stamp-daily-table-tab1",{attrs:{header:t.header,stamp:t.header.stamp_summary[t.tab1Input.stamp_code][0],btnTrans:t.btnTrans,url:t.url,summaryData:t.summaryDataTab1},on:{updateStamp:t.updateStamp,validAction:t.validAction}})],1):t._e()])])]),t._v(" "),a("div",{staticClass:"tab-pane",attrs:{role:"tabpanel",id:"tab2"}},[a("div",{staticClass:"panel-body "},[a("form",{attrs:{id:"stamp-form-tab2"}},[a("div",{staticClass:"row col-12"},[a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" รหัสแสตมป์ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-select",{ref:"stamp_code_tab2",staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"รหัสแสตมป์",clearable:"",filterable:""},on:{change:t.getStampDailyTab2},model:{value:t.tab2Input.stamp_code,callback:function(e){t.$set(t.tab2Input,"stamp_code",e)},expression:"tab2Input.stamp_code"}},t._l(t.header.stamp_summary,(function(e,i){return a("el-option",{key:i,attrs:{label:i,value:i}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(i))]),t._v(" "),a("span",{staticStyle:{float:"left",color:"#8492a6"}},[t._v(" : "+t._s(e[0].stamp_description))])])})),1),t._v(" "),a("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_stamp_code_tab2"}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab2Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab2Input.stamp_code].find((function(e){return e.stamp_code===t.tab2Input.stamp_code}));return e?e.stamp_description:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ม้วนละ :")]),t._v(" "),a("div",{staticClass:"input-group "},[a("el-input",{staticClass:"text-right",attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab2Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab2Input.stamp_code].find((function(e){return e.stamp_code===t.tab2Input.stamp_code}));return e?e.stamp_per_roll:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[a("label",{staticClass:"text-left tw-font-bold tw-uppercase mb-1"},[t._v(" ราคาต่อดวง :")]),t._v(" "),a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"text-right",attrs:{size:"llarge",readonly:!0,disabled:"",value:function(){if(!t.tab2Input.stamp_code)return"";var e=t.header.stamp_summary[t.tab2Input.stamp_code].find((function(e){return e.stamp_code===t.tab2Input.stamp_code}));return e?e.unit_price:void 0}()}})],1)]),t._v(" "),a("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2 pt-1"},[t._m(3),t._v(" "),a("button",{class:t.btnTrans.upload.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.refreshStampTap2(e)}}},[t._v("\n                                    อัพเดตคงคลังแสตมป์\n                                ")])])]),t._v(" "),a("div",{staticClass:"hr-line-dashed mt-3"}),t._v(" "),t.loading.stampDailyTab2Process?a("div",{staticClass:"m-t-lg m-b-lg"},[t._m(4)]):t.summaryDataTab2.length>0&&!t.loading.stampDailyTab2Process?a("div",[a("stamp-daily-table-tab2",{attrs:{header:t.header,stamp:t.tab2Input.stamp_code?t.header.stamp_summary[t.tab2Input.stamp_code][0]:"",btnTrans:t.btnTrans,url:t.url,summaryData:t.summaryDataTab2}})],1):t._e()])])]),t._v(" "),a("div",{staticClass:"tab-pane",attrs:{role:"tabpanel",id:"tab3"}},[a("div",{staticClass:"panel-body"},[a("stamp-daily-table-tab3",{attrs:{header:t.header,interfaceTemps:t.interfaceTemps,poLists:t.poLists,btnTrans:t.btnTrans,url:t.url}})],1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#tab1"}},[t._v("\n                    ประมาณการผลิตแยกรายตรา\n                ")])]),t._v(" "),a("li",[a("a",{staticClass:"nav-link ",attrs:{"data-toggle":"tab",href:"#tab2"}},[t._v("\n                    ประมาณการผลิตแยกตามกลุ่มราคา\n                ")])]),t._v(" "),a("li",[a("a",{staticClass:"nav-link ",attrs:{"data-toggle":"tab",href:"#tab3"}},[t._v("\n                    ตรวจสอบรายการ PR\n                ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("br"),t._v("  ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center sk-spinner sk-spinner-wave"},[a("div",{staticClass:"sk-rect1"}),t._v(" "),a("div",{staticClass:"sk-rect2"}),t._v(" "),a("div",{staticClass:"sk-rect3"}),t._v(" "),a("div",{staticClass:"sk-rect4"}),t._v(" "),a("div",{staticClass:"sk-rect5"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("br"),t._v("  ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center sk-spinner sk-spinner-wave"},[a("div",{staticClass:"sk-rect1"}),t._v(" "),a("div",{staticClass:"sk-rect2"}),t._v(" "),a("div",{staticClass:"sk-rect3"}),t._v(" "),a("div",{staticClass:"sk-rect4"}),t._v(" "),a("div",{staticClass:"sk-rect5"})])}],!1,null,null,null).exports},props:["btnTrans","dateFormat","createInput","searchInput","url","header","defaultSearch","users","interfaceTemps","poLists","lastDate"],data:function(){return function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({stamp_main:this.header,loading:!1,valid:!1,temps:this.interfaceTemps,poMaps:this.poLists},"poMaps",this.poLists)},mounted:function(){this.checkCanEdit()},methods:{updateStamp:function(t){this.stamp_main=t},updateStampHeader:function(t){this.stamp_main=t.header,this.temps=t.interfaceTemps,this.poMaps=t.poLists},checkCanEdit:function(){v()(this.lastDate).format("YYYY-MM-DD")>v()().format("YYYY-MM-DD")&&(this.valid=!0)}}};const H=(0,o.Z)(Z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"ibox float-e-margins mb-2"},[a("div",{staticClass:"col-12 text-right mt-2"},[a("modal-search",{attrs:{btnTrans:t.btnTrans,url:t.url,budgetYears:t.searchInput.budget_years,defBudgetYear:t.searchInput.def_period_year,monthList:t.searchInput.month_list,search:t.defaultSearch}}),t._v(" "),a("modal-create",{attrs:{btnTrans:t.btnTrans,url:t.url,createInput:t.createInput}}),t._v(" "),t.stamp_main&&t.valid?a("modal-interface",{attrs:{btnTrans:t.btnTrans,url:t.url,header:t.header,stampMain:t.stamp_main,users:t.users},on:{updateStampHeader:t.updateStampHeader}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"card border-primary mb-3 mt-2"},[a("div",{staticClass:"card-body"},[a("header-detail",{attrs:{header:t.stamp_main}})],1)]),t._v(" "),t.stamp_main?a("stamp-daily",{attrs:{header:t.stamp_main,btnTrans:t.btnTrans,url:t.url,interfaceTemps:t.temps,poLists:t.poMaps},on:{updateStamp:t.updateStamp}}):Object.values(t.defaultSearch).length?[a("div",{staticClass:"col-12 text-center mt-4"},[a("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")]),t._v(" "),a("div",{staticClass:"hr-line-dashed"})])]:t._e()],2)}),[],!1,null,null,null).exports}}]);