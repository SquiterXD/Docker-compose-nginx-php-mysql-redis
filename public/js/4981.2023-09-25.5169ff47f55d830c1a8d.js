(self.webpackChunk=self.webpackChunk||[]).push([[4981],{24981:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r(87757),i=r.n(n),s=r(80455);function c(e,t,r,n,i,s,c){try{var o=e[s](c),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(e){c(s,n,i,o,u,"next",e)}function u(e){c(s,n,i,o,u,"throw",e)}o(void 0)}))}}const u={props:["productTypes","budgetYears","defaultInput","searchInput","search","workingHour"],components:{VueNumeric:r.n(s)()},data:function(){return{budget_year:this.defaultInput.current_year,month:"",efficiency_machine:"",efficiency_product:this.defaultInput.efficiency_product,product_type:"",month_lists:[],loading:!1,m_loading:!1,errors:{budget_year:!1,efficiency_product:!1},working_hour:this.defaultInput.working_hour}},mounted:function(){this.budget_year&&this.getMonth()},computed:{monthLists:function(){return this.month_lists},efficiencyMachine:function(){return this.efficiency_machine},efficiencyProduct:function(){return this.efficiency_product}},watch:{errors:{handler:function(e){e.budget_year?this.setError("budget_year"):this.resetError("budget_year"),e.efficiency_product?this.setError("efficiency_product"):this.resetError("efficiency_product")},deep:!0}},methods:{getMonth:function(){this.search||(this.month="")},checkInputNumber:function(e){var t=parseFloat(e.replace(/[^\d\.]/g,""));isNaN(t)&&(t=0)},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""},submit:function(){var e=this;return o(i().mark((function t(){var r,n,s,c,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=$("#machine-create-form"),n=r.serialize(),s=!0,c="",e.errors.budget_year=!1,e.errors.efficiency_product=!1,$(r).find("div[id='el_explode_budget_year']").html(""),$(r).find("div[id='el_explode_efficiency_product']").html(""),""==e.budget_year&&(e.errors.budget_year=!0,s=!1,c="กรุณาเลือกปีงบประมาณ",$(r).find("div[id='el_explode_budget_year']").html(c)),""==e.efficiency_product&&(e.errors.efficiency_product=!0,s=!1,c="กรุณากรอกเปอร์เซ็นต์สั่งผลิต",$(r).find("div[id='el_explode_efficiency_product']").html(c)),s){t.next=12;break}return t.abrupt("return");case 12:return e.loading=!0,t.next=15,e.createMachineTransactions(n);case 15:"S"==(o=t.sent).status?(e.loading=!1,swal({title:"สร้างประมาณการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลประมาณการผลิตประจำปีเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.href=o.redirect_show_page}),2e3)):(swal({title:"สร้างประมาณการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลประมาณการผลิตประจำปีเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.reload()}),2e3));case 17:case"end":return t.stop()}}),t)})))()},createMachineTransactions:function(e){var t=this;return o(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],r.next=3,axios.post("/planning/machine-yearly",e).then((function(e){n=e.data})).catch((function(e){e.response.data;swal({title:"สร้างประมาณการผลิตประจำปี",text:'<span style="font-size: 16px; text-align: left;"> ทำการสร้างข้อมูลประมาณการผลิตประจำปีเรียบร้อยแล้ว </span>',type:"success",html:!0}),window.setTimeout((function(){window.location.reload()}),2e3)})).then((function(){t.loading=!1}));case 3:return r.abrupt("return",n);case 4:case"end":return r.stop()}}),r)})))()}}};const f=(0,r(51900).Z)(u,undefined,undefined,!1,null,null,null).exports}}]);