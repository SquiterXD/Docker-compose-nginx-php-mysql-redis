(self.webpackChunk=self.webpackChunk||[]).push([[7978],{67791:(e,t,a)=>{"use strict";a.d(t,{gR:()=>o,R_:()=>l,sD:()=>r});var i=a(30381),n=a.n(i),o={formatDate:"DD/MM/YYYY",formatMonth:"MM/YYYY",formatYear:"YYYY",monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},l={irp0001_table_header:[{document_number:"",status:"NEW",period_year:"2020",period_name:"Jan-20",period_from:"12/01/2020",period_to:"12/01/2020",policy_set_number:"1",policy_set_description:"POLICY SET DESCRIPTION",department_code:"DEPARTMENT CODE",department_desc:"DEPARTMENT DESC"}],irp0001_table_line:[{line_number:"1",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"INTERFACE",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"3",status:"NEW",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"},{line_number:"2",status:"CONFIRMED",period_from:"01/2020",period_to:"01/2020",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"12",unit_price:"12",line_amount:"1212",coverage_amount:"343",calculate_start_date:"12/04/2021",calculate_end_date:"15/04/2021",calculate_days:"4",line_type:"MANUAL"}],irp0010_table_header:[{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},{claim_header_id:"2",status:"INTERFACE",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"}],irp0010_form:{headers:{claim_header_id:"1",status:"NEW",document_number:"Dept-Year-XXX",accident_date:"04/08/2019",accident_time:"22:00",location_code:"",location_name:"สถานีใบยาดอนนางหงส์",department_code:"10000000",department_name:"ผู้ว่าการการยาสูบแห่งประเทศไทย",requestor_id:"",requestor_name:"นายคนดี ว่องไว",requestor_tel:"02-345-6667",claim_amount:"400000",year:"2020"},apply:{apply_company:[{company_id:55,company_name:"บริษัท เทเวศประกันภัย จำกัด (มหาชน)",claim_percent:"40",claim_amount:"140000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""},{company_id:54,company_name:"บริษัท ทิพยประกันภัย จำกัด (มหาชน)",claim_percent:"60",claim_amount:"160000",apply_details:[{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันไหลเข้าไปในโรงซื้อใบยาสด - เก็บใบยาแห้ง ทำให้ทรัพย์สินได้รับความเสียหาย",line_amount:"100000",claim_detail_id:""},{line_number:"",line_description:"เกิดฝนตกหนัก ทำให้เกิดน้ำท่วมฉับพลันทำให้อาคารเสียหาย",line_amount:"60000",claim_detail_id:""}],informant_date:"04/08/2020",invoice_date:"15/03/2020",gl_date:"15/03/2020",ar_invoice_num:"120091228",policy_number:"14016-114-06000",ar_receipt_date:"15/03/2020",ar_receipt_id:"",ar_receipt_number:"RE12110333",ar_received_amount:"350674.21",claim_apply_id:"",ar_invoice_id:""}]}},irp0002_table_line:[{status:"NEW",line_number:"",period_name:"Jan-20",organization_code:"ORGANIZATION CODE",sub_inventory_code:"SUB INVENTORY CODE",sub_inventory_desc:"SUB INVENTORY DESC",location_code:"LOCATION CODE",location_desc:"LOCATION DESC",item_code:"ITEM CODE",item_description:"ITEM DESCRIPTION",uom_code:"UOM CODE",uom_description:"UOM DESCRIPTION",original_quantity:"111",unit_price:"2",line_amount:"222",coverage_amount:"230",calculate_days:"2",calculate_start_date:"12/01/2020",calculate_end_date:"15/01/2020"}]},r={setFirstLetterUpperCase:function(e){if(e&&null!=e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return e},setYearCE:function(e,t){var a="",i="month"===e?o.formatMonth:"date"===e?o.formatDate:"year"===e?o.formatYear:"";return t&&i?a=n()(n()(t,i).subtract(543,"years").toDate()).format(i):a},setYearBE:function(e,t){var a="",i="month"===e?o.formatMonth:"date"===e?o.formatDate:"year"===e?o.formatYear:"";return t&&i?a=n()(n()(t,i).add(543,"years").toDate()).format(i):a},showYearBE:function(e,t){var a="";if("month"===e&&t&&null!=t){var i=t.split("/"),n=+i[1]+543;return a="".concat(i[0],"/").concat(n)}if("date"===e&&t&&null!=t){var o=t.split("/"),l=+o[2]+543;return a="".concat(o[0],"/").concat(o[1],"/").concat(l)}return"year"===e&&t&&null!=t?+t+543:a},getTime:function(e){var t="";if(e&&null!=e){var a=e.split("/");return t=new Date("".concat(a[1],"/").concat(a[0],"/").concat(a[2])).getTime()}return t},calculateDate:function(e,t){var a="",i="";if(e&&t){var n=r.getTime(e),o=r.getTime(t);a=(i=Math.round(Math.abs((o-n)/864e5)))?i+1:i}return a},checkStatusInterface:function(e){return!(!e||"INTERFACE"!==e.toUpperCase())},checkStatusCancelled:function(e){return!(!e||"CANCELLED"!==e.toUpperCase())},isNullOrUndefined:function(e){return null==e?"":e},formatCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a="";if(e||0===e){a=parseFloat(e);var i=e.toString().split(".");if(void 0===i[1]){var n=parseInt(i[0]).toFixed(t).split(".")[1];return"".concat(parseInt(i[0]).toLocaleString(),".").concat(n)}if(0==a.toString().split(".")[0]){var o=a.toFixed(t).split(".")[1];return"".concat(a.toString().split(".")[0],".").concat(o)}var l=a.toFixed(t).split(".")[1],r="".concat(parseInt(i[0]).toLocaleString(),".").concat(l);return r}return a},formatfloat:function(e){return e.slice(0,e.indexOf(".")+1+2)},checkStatusConfirmed:function(e){if(e)return"CONFIRMED"===e.toUpperCase()},showPeriodNameFormat:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1])),i=a.getFullYear(),n=1===(a.getMonth()+1).toString().length?"0".concat(a.getMonth()+1):a.getMonth()+1;return"".concat(n,"/").concat(i+543)}return e},setValuePeriodNameFormat:function(e){var t="";if(e&&null!=e){var a=o.monthNameShort[e.getMonth()],i=(+e.getFullYear()-543).toString(),n=i.substr(i.length-2);t="".concat(a,"-").concat(n)}return t},checkStatusNew:function(e){if(e&&"NEW"===e.toUpperCase())return!0},calculateDateMomentTable:function(e){var t=o.formatDate,a="",i="",l="",r=e.start_calculate_date,c=e.end_calculate_date;if(r&&c){var s=helperDate.convertDate(r,t),d=helperDate.convertDate(c,t);s.then((function(o){a=n()(o,t),d.then((function(o){i=n()(o,t),l=i.diff(a,"days"),e.days=-1===Math.sign(l)?"":l+1}))}))}else e.days=""},covertFomatDateMoment:function(e,t){var a="date"===t?o.formatDate:"month"===t?o.formatMonth:"year"===t?o.formatYear:"";return e&&t?n()(e).format(a):""},setBudgetYearFromFieldStCalendar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",a=("date"===t?o.formatDate:"month"===t?o.formatMonth:"year"===t&&o.formatYear,"");if(e){var i=e.getFullYear(),l=n()({year:i,month:8,date:30}),r=n()({year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),c=r.isAfter(l)?1:0;return n()(n()({year:i+c,month:8,date:30}),o.formatDate).toDate()}return a},setLabelStatusAsset:function(e){return"Y"===e?"Active":"N"===e?"Inactive":""},setFotmatPeriodNameIsFullDate:function(e){if(e){var t=e.split("-"),a=new Date("".concat(t[0]," 01, ").concat(t[1]));return n()(a).format(o.formatDate)}return""},setFullDateIsDateCE:function(e){var t="";if(e){var a=n()(e).format(o.formatDate);return t=r.setYearCE("date",a)}return t},setLabelExpenseFlag:function(e){return"Y"==e?"Yes":"No"},setLabelVatRefund:function(e){return"Y"==e?"Yes":"No"},setDefaultActive:function(e){var t=$(".".concat(e)).is(":checked");$(".".concat(e)).prop("checked",!t)},setDefaultEndDateIsLastDateOfMonth:function(e){var t=o.formatDate;if(e){var a=n()(e).endOf("month");return n()(a).format(t)}return""}}},89697:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(23645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,"td[data-v-5053d222],th[data-v-5053d222]{padding:.25rem}th[data-v-5053d222]{position:-webkit-sticky;position:sticky;top:0}.custom-file-label[data-v-5053d222]:after{background-color:#f5f7fa}",""]);const o=n},44726:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(23645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,"td[data-v-25a74ae1],th[data-v-25a74ae1]{padding:.25rem}th[data-v-25a74ae1]{background:#fff;position:-webkit-sticky;position:sticky;top:0}",""]);const o=n},19258:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(23645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".text-right[data-v-dee02e12]{text-align:right}",""]);const o=n},23994:(e,t,a)=>{"use strict";a.d(t,{Z:()=>P});const i={name:"ir-claim-insurance-lov-department",data:function(){return{rows:[],loading:!1,result:this.value}},props:["placeholder","attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({department_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:e}).then((function(e){var a=e.data;console.log("response getDataRows ",a);var i=a.data;t.loading=!1,t.rows=i})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){0===this.rows.length&&this.result||this.rows.length>0&&this.result?this.getDataRows({department_code:"",keyword:this.result}):0!==this.rows.length||this.result||this.getDataRows({department_code:"",keyword:""})},onchange:function(e){var t={code:"",desc:""};if(e)for(var a in this.rows){var i=this.rows[a];i.department_code===e&&(t.code=e,t.desc=i.description)}else t.code="",t.desc="";console.log("change-lov ",t),this.$emit("change-lov",t)},onclick:function(){console.log("onclick ",this.rows,this.result),this.rows.length>=0&&this.result?this.getDataRows({department_code:"",keyword:this.result}):this.rows.length>=0&&!this.result&&this.getDataRows({department_code:"",keyword:""})}},mounted:function(){console.log("mounted department ",this.value),this.getDataRows({department_code:"",keyword:""})},watch:{value:function(e,t){console.log("newVal deparment ",e),this.result=e,this.getDataRows({department_code:"",keyword:e})}}};var n=a(51900);const o=(0,n.Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.department_code+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const r={name:"ir-components-currency-input-group-append",data:function(){return{isInputActive:!1}},props:["value","name","sizeSmall","placeholder","disabled","showAppend","wordingAppend"],computed:{displayValue:{get:function(){return this.isInputActive?(console.log("this.value ",this.value,l(this.value)),(void 0===this.value||null===this.value?"":this.value).toString()):this.value||0===this.value&&void 0!==this.value&&null!==this.value?parseFloat(this.value).toFixed(2).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,"):void 0},set:function(e){var t=+e;isNaN(t)&&(t=""),this.$emit("input",t)}},sizeInput:function(){return this.sizeSmall?"small":""}},methods:{blur:function(e){this.isInputActive=!1,this.$emit("blur-currency",e.target.value)},focus:function(){console.log("focus"),this.isInputActive=!0}}};const c=(0,n.Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"el-input el-input-group el-input-group--append "+(e.sizeSmall?"el-input--small":"")+" "+(e.disabled?"is-disabled":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayValue,expression:"displayValue"}],staticClass:"el-input__inner",attrs:{type:"text",name:e.name,placeholder:e.placeholder,autocomplete:"off",disabled:e.disabled,maxlength:"15"},domProps:{value:e.displayValue},on:{blur:e.blur,focus:function(t){return e.focus()},input:function(t){t.target.composing||(e.displayValue=t.target.value)}}}),e._v(" "),e.showAppend?a("div",{staticClass:"el-input-group__append"},[e._v("\n    "+e._s(e.wordingAppend)+"\n  ")]):e._e()])}),[],!1,null,null,null).exports;const s={name:"ir-claim-insurance-lov-company",data:function(){return{rows:[],loading:!1,result:this.value?+this.value:this.value}},props:["placeholder","attrName","value","size","index","disabled","resData"],methods:{remoteMethod:function(e){this.getDataRows({company_id:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/companies",{params:e}).then((function(e){var a=e.data;console.log("response getDataRows ",a);var i=a.data;t.loading=!1,t.rows=i})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){0===this.rows.length&&this.result||this.rows.length>0&&this.result?this.getDataRows({company_id:"",keyword:this.result}):0!==this.rows.length||this.result||this.getDataRows({company_id:"",keyword:""})},onchange:function(e){var t="",a="",i="";if(e)for(var n in this.rows){var o=this.rows[n];o.company_id===+e&&(t=o.company_number,a=o.company_name,i=e)}else t="",a="",i="";var l={code:t,desc:a,id:i,index:this.index};console.log("change-lov ",l),this.$emit("change-lov",l)},onclick:function(){this.rows.length>=0&&this.result?this.getDataRows({company_id:"",keyword:this.result}):this.rows.length>=0&&!this.result&&this.getDataRows({company_id:"",keyword:""})}},mounted:function(){console.log("mounted company ",this.value),this.getDataRows({company_id:this.value,keyword:""})},watch:{value:function(e,t){console.log("newVal company ",e),this.result=e},resData:function(e,t){this.rows=e}}};const d=(0,n.Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_number+": "+e.company_name,value:e.company_id}})})),1)],1)}),[],!1,null,null,null).exports;const u={name:"ir-claim-insurance-lov-location",data:function(){return{rows:[],loading:!1,result:this.value}},props:["placeholder","attrName","value","disabled"],methods:{remoteMethod:function(e){this.getDataRows({department_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/location",{params:e}).then((function(e){var a=e.data;console.log("response getDataRows ",a);var i=a.data;t.loading=!1,t.rows=i})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){console.log("focus ",e),this.getDataRows({department_code:"",keyword:""})},change:function(e){var t="",a="";for(var i in this.rows){var n=this.rows[i];n.meaning===e&&(t=e,a=n.description)}var o={code:t,desc:a};console.log("change-lov ",o),this.$emit("change-lov",o)}},mounted:function(){this.getDataRows({department_code:"",keyword:""})}};const m=(0,n.Z)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",disabled:e.disabled},on:{focus:e.focus,change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.meaning+": "+e.description,value:e.meaning}})})),1)],1)}),[],!1,null,null,null).exports;var p=a(21341),h=a(98703),_=a(62783),f=a(30381),g=a.n(f);const v={name:"ir-claim-insurance-modal-details",data:function(){return{req_modal:"",modal:{informant_date:"",invoice_date:"",gl_date:"",ar_invoice_num:"",policy_number:"",ar_receipt_date:"",ar_receipt_number:"",ar_received_amount:""},rules:{invoice_date:[{required:!0,message:"กรุณาระบุ Invoice Date",trigger:"blur"}],gl_date:[{required:!0,message:"กรุณาระบุ GL Date",trigger:"blur"}]}}},props:["details","index","status","checkStatusInterface","checkStatusConfirmed","vars","checkStatusCancelled"],methods:{clickSave:function(){console.log("clickSave"),this.$emit("modal-details",this.details),$("#modal_details".concat(this.index)).modal("hide")},getInformantDate:function(e){this.details.informant_date=e.value},getInvoiceDate:function(e){this.details.invoice_date=e.value},getGLDate:function(e){this.details.gl_date=e.value},getArReceiptDate:function(e){this.details.ar_receipt_date=e.value},getDataArInvoiceNum:function(e){this.details.ar_invoice_num=e},getValueInformantDate:function(e){console.log("getValueInformantDate ",e);var t=this.vars.formatDate;this.details.informant_date=e?g()(e).format(t):""},getValueInvoiceDate:function(e){console.log("getValueInvoiceDate ",e);var t=this.vars.formatDate;this.details.invoice_date=e?g()(e).format(t):""},getValueGlDate:function(e){console.log("getValueGlDate ",e);var t=this.vars.formatDate;this.details.gl_date=e?g()(e).format(t):""},getValueArReceiptDate:function(e){console.log("getValueArReceiptDate ",e);var t=this.vars.formatDate;this.details.ar_receipt_date=e?g()(e).format(t):""}},components:{lovInvoiceNumberAr:h.Z,dateInput:p.Z,currencyInput:_.Z}};const y=(0,n.Z)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal inmodal fade",attrs:{id:"modal_details"+e.index,tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),a("div",{staticClass:"modal-body"},[a("el-form",{ref:"modal_details",staticClass:"demo-ruleForm",attrs:{model:e.details,"label-width":"120px",rules:e.rules}},[a("div",{staticClass:"margin_top_20"},[a("h5",[e._v("สถานะได้รับแจ้งเรื่องแล้ว")]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("วันที่รับแจ้งเรื่อง")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"informant_date","p-type":"date",placeholder:"วันที่รับแจ้งเรื่อง",format:e.vars.formatDate,disabled:e.checkStatusInterface(e.status)||e.checkStatusConfirmed(e.status)||e.checkStatusCancelled(e.status)},on:{dateWasSelected:e.getValueInformantDate},model:{value:e.details.informant_date,callback:function(t){e.$set(e.details,"informant_date",t)},expression:"details.informant_date"}})],1)],1)]),e._v(" "),a("h5",{staticClass:"margin_top_20"},[e._v("สถานะแจ้งบริษัทประกันแล้ว")]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("Invoice Date *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"invoice_date"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"invoice_date","p-type":"date",placeholder:"Invoice Date",format:e.vars.formatDate,disabled:e.checkStatusInterface(e.status)||e.checkStatusConfirmed(e.status)||e.checkStatusCancelled(e.status)},on:{dateWasSelected:e.getValueInvoiceDate},model:{value:e.details.invoice_date,callback:function(t){e.$set(e.details,"invoice_date",t)},expression:"details.invoice_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("GL Date *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"gl_date"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"gl_date","p-type":"date",placeholder:"GL Date",format:e.vars.formatDate,disabled:e.checkStatusInterface(e.status)||e.checkStatusConfirmed(e.status)||e.checkStatusCancelled(e.status)},on:{dateWasSelected:e.getValueGlDate},model:{value:e.details.gl_date,callback:function(t){e.$set(e.details,"gl_date",t)},expression:"details.gl_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เลขที่อ้างอิงกับเอกสารในระบบ AR")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"เลขที่อ้างอิงกับเอกสารในระบบ AR",disabled:!0,name:"ar_invoice_num"},model:{value:e.details.ar_invoice_num,callback:function(t){e.$set(e.details,"ar_invoice_num",t)},expression:"details.ar_invoice_num"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เลขที่กรมธรรม์")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"เลขที่กรมธรรม์"},model:{value:e.details.policy_number,callback:function(t){e.$set(e.details,"policy_number",t)},expression:"details.policy_number"}})],1)],1)]),e._v(" "),a("h5",{staticClass:"margin_top_20"},[e._v("สถานะได้รับชดใช้แล้ว")]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("วันที่ได้รับชดใช้")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"ar_receipt_date","p-type":"date",placeholder:"วันที่ได้รับชดใช้",format:e.vars.formatDate,disabled:!0},on:{dateWasSelected:e.getValueArReceiptDate},model:{value:e.details.ar_receipt_date,callback:function(t){e.$set(e.details,"ar_receipt_date",t)},expression:"details.ar_receipt_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เลขที่ใบเสร็จรับเงิน")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"เลขที่ใบเสร็จรับเงิน",disabled:!0},model:{value:e.details.ar_receipt_number,callback:function(t){e.$set(e.details,"ar_receipt_number",t)},expression:"details.ar_receipt_number"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("จำนวนเงินที่ได้รับ")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("currency-input",{attrs:{name:"ar_received_amount",sizeSmall:!1,placeholder:"จำนวนเงินที่ได้รับ",disabled:!0},model:{value:e.details.ar_received_amount,callback:function(t){e.$set(e.details,"ar_received_amount",t)},expression:"details.ar_received_amount"}})],1)],1)])])])],1),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickSave()}}},[a("i",{staticClass:"fa fa-save"}),e._v(" บันทึก\n        ")]),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"sr-only"},[e._v("Close")])]),e._v(" "),a("p",{staticClass:"modal-title text-left"},[e._v("รายละเอียด (Details)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n        ")])}],!1,null,null,null).exports;const b={name:"ir-claim-insurance-header-form"};const w=(0,n.Z)(b,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex",width:"100%"}},[a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    บริษัทประกันภัย *\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    สัดส่วน (%) *\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    จำนวนเงิน *\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    ลบ\n  ")])])}],!1,null,null,null).exports;const C={name:"ir-claim-insurance-policy-header-form"};const k=(0,n.Z)(C,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex",width:"100%"}},[a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    กลุ่มกรมธรรม์\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    ชุดกรมธรรม์\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n    จำนวนเงินเรียกชดใช้ *\n  ")]),e._v(" "),a("div",{staticClass:"media_claim_col",staticStyle:{padding:"12px",width:"25%","text-align":"center",color:"#212529","font-weight":"bold","border-bottom":"1px solid"}},[e._v("\n   ลบ\n  ")])])}],!1,null,null,null).exports;const x={name:"ir-claim-insurance-lov-policy-group",data:function(){return{rows:[],loading:!1,result:this.value}},props:["value","name","size","placeholder","popperBody","disabled"],methods:{remoteMethod:function(e){this.getDataRows({group_header_id:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-group-header",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){console.log("onfocus ",this.rows,this.result),this.rows.length>=0&&this.result?this.getDataRows({group_header_id:"",keyword:this.result}):this.rows.length>=0&&!this.result&&this.getDataRows({group_header_id:"",keyword:""})},onchange:function(e){var t={code:"",desc:"",id:""};if(e)for(var a in this.rows){var i=this.rows[a];i.group_header_id===e&&(t.code=i.group_code,t.desc=i.group_description,t.id=e)}else t.code="",t.desc="",t.id="";this.$emit("change-lov",t)},onclick:function(){console.log("onclick ",this.rows,this.result),this.rows.length>=0&&this.result?this.getDataRows({keyword:this.result,group_header_id:""}):this.rows.length>=0&&!this.result&&this.getDataRows({keyword:"",group_header_id:""})}},mounted:function(){console.log("mounted policy number ",this.value),this.result=this.value?+this.value:this.value,this.getDataRows({group_header_id:this.value,keyword:""})}};const D=(0,n.Z)(x,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.onchange,focus:e.onfocus},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_code+": "+e.group_description,value:e.group_header_id}})})),1)],1)}),[],!1,null,null,null).exports;const S={name:"ir-claim-insurance-lov-policy-set-header-group",data:function(){return{rows:[],loading:!1,result:this.value,isDisabled:void 0!==this.disabled&&this.disabled}},props:["value","name","size","placeholder","popperBody","fixTypeFr","fixTypeSc","disabled","group_header_id"],methods:{remoteMethod:function(e){this.getDataRows({group_header_id:this.group_header_id,keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-set-header-group",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.getDataRows({group_header_id:this.group_header_id,keyword:""})},onchange:function(e){var t={code:"",desc:"",id:""};if(e)for(var a in this.rows){var i=this.rows[a];i.policy_set_header_id===e&&(t.code=i.policy_set_number,t.desc=i.policy_set_description,t.id=e)}else t.code="",t.desc="",t.id="";console.log("onchange ",t),this.$emit("change-lov",t)}},created:function(){console.log("mounted group_header_id ",this.value),this.result=this.value,this.getDataRows({group_header_id:this.group_header_id,policy_set_header_id:this.value,keyword:""})},watch:{value:function(e,t){this.result=e,this.getDataRows({group_header_id:this.group_header_id,keyword:""})}}};const E=(0,n.Z)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.isDisabled},on:{focus:e.onfocus,change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.policy_set_number+": "+e.policy_set_description,value:e.policy_set_header_id}})})),1)],1)}),[],!1,null,null,null).exports;const O={name:"ir-claim-insurance-lov-company-policy-group",data:function(){return{rows:[],loading:!1,result:this.value}},props:["placeholder","attrName","value","size","index","disabled","group_header_id","year"],methods:{remoteMethod:function(e){console.log("remoteMethod getdatarow"),this.getDataRows({company_id:"",keyword:e,group_header_id:this.group_header_id,year:this.year})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/company-percent",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.rows=a,t.$nextTick((function(){t.$emit("response-company-percent",a)}))})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){console.log("onfocus getdatarow"),0===this.rows.length&&this.result||this.rows.length>0&&this.result?this.getDataRows({company_id:"",keyword:this.result,group_header_id:this.group_header_id,year:this.year}):0!==this.rows.length||this.result||this.getDataRows({company_id:"",keyword:"",group_header_id:this.group_header_id,year:this.year})},onchange:function(e){var t={code:"",desc:"",id:"",percent:""};if(e)for(var a in this.rows){var i=this.rows[a];i.company_id==e&&(t.code=i.company_number,t.desc=i.company_name,t.id=e,t.percent=i.company_percent?+i.company_percent:0)}else t.code="",t.desc="",t.id="",t.percent="";this.$emit("change-lov",t)},onclick:function(){console.log("onclick getdatarow"),this.rows.length>0&&this.result?this.getDataRows({company_id:"",keyword:this.result,group_header_id:this.group_header_id,year:this.year}):this.rows.length>0&&!this.result&&this.getDataRows({company_id:"",keyword:"",group_header_id:this.group_header_id,year:this.year})}},mounted:function(){},watch:{value:function(e,t){this.result=e}}};const N=(0,n.Z)(O,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,disabled:e.disabled},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[e._v("ß\n             "),e._v(" "),e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_number+": "+e.company_name,value:e.company_id}})}))],2)],1)}),[],!1,null,null,null).exports;function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}const M={name:"ir-claim-insurance-form",data:function(){return{rules:{headers:{accident_date:[{required:!0,message:"กรุณาระบุวันที่เกิดเหตุ",trigger:"blur"}],accident_time:[{required:!0,message:"กรุณาระบุเวลาเกิดเหตุ",trigger:"blur"}],location_name:[{required:!0,message:"กรุณาระบุสถานที่",trigger:"blur"}],department_code:[{required:!0,message:"กรุณาระบุหน่วยงาน",trigger:"change"}],requestor_name:[{required:!0,message:"กรุณาระบุผู้แจ้งเหตุ",trigger:"change"}],requestor_tel:[{required:!0,message:"กรุณาระบุเบอร์โทรผู้แจ้งเหตุ",trigger:"change"}],claim_amount:[{required:!0,message:"กรุณาระบุจำนวนเงินเรียกชดใช้รวม",trigger:"change"}]},group:{company:[{company_id:[{required:!0,message:"กรุณาระบุบริษัทประกันภัย",trigger:"change"}],claim_percent:[{required:!0,message:"กรุณาระบุสัดส่วน",trigger:"change"},{type:"number",message:"กรุณาระบุเป็นตัวเลขเท่านั้น"}],claim_amount:[{required:!0,message:"กรุณาระบุจำนวนเงิน",trigger:"change"}]}],amount:[{required:!0,message:"กรุณาระบุจำนวนเงินชดใช้",trigger:"change"}],detail:[{line_description:[{required:!0,message:"กรุณาระบุรายละเอียด",trigger:"change"}],line_amount:[{required:!0,message:"กรุณาระบุจำนวน",trigger:"change"}]}],details:[{required:!0,message:"กรุณาระบุรายละเอียดให้ครบ",trigger:"change"}]},req_modal:[{required:!0,message:"กรุณาระบุ Invoice / GL Date",trigger:"change"}],companies:[{required:!0,message:"กรุณาระบุรายการเคลม",trigger:"change"}]},index_comp:0,index_group:0,details:{},accident_time:"",confirm:!1,fileList:[],btn:"",btnConfirm:!1,files:[],resData:[],companies_percent:[]}},props:["claim","isNullOrUndefined","checkStatusInterface","checkStatusConfirmed","checkStatusCancelled","action","setYearCE","vars"],computed:{checkColumnPercent:function(){var e=[];this.claim.group.forEach((function(t){e=T(t.company.map((function(e){return{claim_percent:e.claim_percent}})))})),console.log("companies ",e);var t=e.reduce((function(e,t){return""===t.claim_percent?e+0:e+parseInt(t.claim_percent)}),0);return console.log("claim_percent ",t),t},statusHeader:function(){return"add"===this.action?"NEW":"edit"===this.action&&this.checkStatusInterface(this.claim.headers.status)?"INTERFACE":"PENDING"},checkColumnLineAmountDetails:function(){console.log("checkColumnLineAmountDetails ",this.claim.group);var e,t=[],a=[];return this.claim.group.forEach((function(e){t=[].concat(T(t),T(e.company.map((function(e){return e}))))})),console.log("comds ",t),t.forEach((function(e){a=[].concat(T(a),T(e.detail.map((function(e){return{line_amount:e.line_amount}}))))})),console.log("details ",a),e=a.reduce((function(e,t){return""===t.line_amount?e+0:e+parseFloat(t.line_amount)}),0),console.log("line_amount ",e),e},checkColumnClaimAmountComp:function(){console.log("checkColumnClaimAmountComp ",this.claim.group);var e,t=[];return this.claim.group.forEach((function(e){t=[].concat(T(t),T(e.company.map((function(t){return console.log("comps ",e),t}))))})),console.log("comps ",t),e=t.reduce((function(e,t){return""===t.claim_amount?e+0:e+parseFloat(t.claim_amount)}),0),console.log("claim_amount ",e),e}},methods:{getDataDepartment:function(e){this.claim.headers.department_code=e.code,this.claim.headers.department_name=e.desc},clickSave:function(){var e=this,t=new FormData;t.append("file",this.fileList),console.log("clickSave ",this.claim.group,this.fileList,t);var a="save";this.btn=a,this.checkBtnSaveOrConfirm(a);var i=this;this.$refs.claim_insurance.validate((function(t){if(!t)return console.log("error submit!"),!1;e.$refs.claim_apply_companies.validate((function(t){if(!t)return console.log("error submit!"),!1;100===e.checkColumnPercent?(i.setPropertySaveAndConfirm(i.claim,a),console.log("save ",i.claim)):swal("Warning","คอลัมน์สัดส่วนรวมกันต้องเท่ากับ 100%","warning")}))}));var n,o=[];this.claim.group.forEach((function(e){o=[].concat(T(o),T(e.company.map((function(e){return{company_id:e.company_id,claim_percent:e.claim_percent}}))))})),console.log("companies ",o),n=o.filter((function(e){return""==e.company_id||""==e.claim_percent})),console.log("validCompanies ",n);var l,r=[],c=[];if(this.claim.group.forEach((function(e){r=[].concat(T(r),T(e.company.map((function(e){return e}))))})),console.log("comds ",r),r.forEach((function(e){c=[].concat(T(c),T(e.detail.map((function(e){return{line_description:e.line_description,line_amount:e.line_amount}}))))})),console.log("details ",c),l=c.filter((function(e){return""==e.line_description||""==e.line_amount})),console.log("validDetails ",l),n.length>0)return swal("Warning","กรุณากรอกข้อมูลรายการเคลมให้ครบ!","warning"),!1;if(n.length>0)swal("Warning","กรุณากรอกข้อมูลรายการเคลมให้ครบ!","warning");else{if(!(l.length>0))return!1;swal("Warning","กรุณากรอกข้อมูลรายละเอียดให้ครบ!","warning")}},clickCancel:function(){window.location.href="/ir/claim-insurance"},clickConfirm:function(){var e="confirm";this.btn=e,this.checkBtnSaveOrConfirm(e);var t=this;console.log("clickConfirm ",this.btn,this.btnConfirm),t.$refs.claim_insurance.validate((function(e){if(!e)return console.log("validClaim error submit!"),!1;t.$refs.claim_apply_companies.validate((function(e){if(!e)return console.log("validCompany error submit!"),!1}))}));var a,i=[];this.claim.group.forEach((function(e){i=[].concat(T(i),T(e.company.map((function(e){return{company_id:e.company_id,claim_percent:e.claim_percent}}))))})),console.log("companies ",i),a=i.filter((function(e){return""==e.company_id||""==e.claim_percent})),console.log("validCompanies ",a);var n,o=[];this.claim.group.forEach((function(e){o=[].concat(T(o),T(e.company.map((function(e){return{invoice_date:e.modal.invoice_date,gl_date:e.modal.gl_date}}))))})),console.log("modal ",o),n=o.filter((function(e){return""==e.invoice_date||""==e.gl_date})),console.log("validModal ",n);var l,r=[],c=[];if(this.claim.group.forEach((function(e){r=[].concat(T(r),T(e.company.map((function(e){return e}))))})),console.log("comds ",r),r.forEach((function(e){c=[].concat(T(c),T(e.detail.map((function(e){return{line_description:e.line_description,line_amount:e.line_amount}}))))})),console.log("details ",c),l=c.filter((function(e){return""==e.line_description||""==e.line_amount})),console.log("validDetails ",l),a.length>0&&0===n.length)swal("Warning","กรุณากรอกข้อมูลรายการเคลมให้ครบ!","warning");else{if(n.length>0&&0===a.length)return swal("Warning","กรุณากรอก Invoice Date และ GL Date!","warning"),!1;a.length>0&&n.length>0?swal("Warning","กรุณากรอกข้อมูลรายการเคลมให้ครบ!","warning"):l.length>0?swal("Warning","กรุณากรอกข้อมูลรายละเอียดให้ครบ!","warning"):100!==t.checkColumnPercent?swal("Warning","คอลัมน์สัดส่วนรวมกันต้องเท่ากับ 100%","warning"):(t.setPropertySaveAndConfirm(t.claim,e),console.log("confirmed ",t.claim))}},clickCreateClaimGroup:function(){console.log("clickCreateClaimGroup",this.claim.group,this.checkColumnPercent),this.claim.group.push({group_code:"",group_description:"",group_header_id:"",amount:"",group_set_id:"",policy_set_description:"",policy_set_header_id:"",company:[],showLovCompany:!0,flag:"add"})},changePercent:function(e,t,a){console.log("changePercent ",e,t),this.claim.group[a].company[t].claim_percent=e,this.claim.group[a].company[t].claim_amount=e?this.claim.group[a].amount*e/100:e;var i=this.claim.group[a].company[t].claim_amount;this.setDefaultLineAmountDetails(i,t,a)},getDataCompany:function(e,t,a){console.log("getDataCompany ",e),this.claim.group[a].company[t].company_number=e.code,this.claim.group[a].company[t].company_name=e.desc,this.claim.group[a].company[t].company_id=e.id},clickAddDetails:function(e,t){console.log("clickAddDetails ",this.claim,e,t);var a=e.detail.length;e.detail.push({line_number:a+1,line_description:"",line_amount:"",flag:"add"})},getDataAmount:function(e,t){console.log("getDataAmount ",e,this.claim.group),this.claim.group[t].amount=e;var a=this.claim.group.reduce((function(e,t){return""===t.amount?e+0:e+parseFloat(t.amount)}),0);console.log("amount_group ",a),this.claim.headers.claim_amount=a},clickRemoveGroup:function(e,t){var a=this;if(console.log("clickRemoveG ",e,t),"add"===e.flag){var i=this.claim.group.indexOf(e);console.log("index ",i),i>-1&&(this.claim.group.splice(i,1),console.log("splice",this.claim.group))}else axios.delete("/ir/ajax/claim/".concat(e.claim_group_id)).then((function(t){var i=t.data;console.log("remove response ",i),swal({title:"Success",text:i.message,type:"success",timer:3e3,showConfirmButton:!1,closeOnConfirm:!1});var n=a.claim.group.indexOf(e);console.log("index ",n),n>-1&&a.claim.group.splice(n,1);var o=a.claim.group.reduce((function(e,t){return""===t.amount?e+0:e+parseFloat(t.amount)}),0);console.log("amount_group ",o),a.claim.headers.claim_amount=o})).catch((function(e){swal("Error",e,"error")}));var n=this.claim.group.reduce((function(e,t){return""===t.amount?e+0:e+parseFloat(t.amount)}),0);console.log("amount_group ",n),this.claim.headers.claim_amount=n},getAccidentDate:function(e){this.claim.headers.accident_date=e.value,e.value?this.$refs.claim_insurance.fields.find((function(e){return"headers.accident_date"==e.prop})).clearValidate():this.$refs.claim_insurance.validateField("headers.accident_date")},clickRemove:function(e,t,a){var i=this;if(console.log("clickRemove ",e,t,this.claim.group,this.claim),"add"===e.flag){var n=this.claim.group[a].company.indexOf(e);console.log("index ",n),n>-1&&(this.claim.group[a].company.splice(t,1),console.log("splice ",this.claim.group))}else axios.delete("/ir/ajax/claim/company/".concat(this.claim.headers.claim_header_id,"?claim_apply_id=").concat(e.company_id)).then((function(n){var o=n.data;console.log("remove response ",o),swal({title:"Success",text:o.message,type:"success",timer:3e3,showConfirmButton:!1,closeOnConfirm:!1});var l=i.claim.group[a].company.indexOf(e);console.log("index ",l),l>-1&&(i.claim.group[a].company.splice(t,1),console.log("splice ",i.claim.group))})).catch((function(e){swal("Error",e,"error")}))},clickModalDetails:function(e,t,a){console.log("clickModalDetails ",e,t,a),this.index_comp=t,this.index_group=a,this.details=e.modal},setPropertySaveAndConfirm:function(e,t){var a=this;console.log("setPropertySaveAndConfirm ",this.fileList);var i=e.group,n=[],o=!1;i.filter((function(e){var t=R(R({},e),{},{company_rows:e.company});e.company.filter((function(e){console.log("=== ",a.checkColumnLineAmountDetails,a.checkColumnClaimAmountComp,e.claim_amount?+e.claim_amount:e.claim_amount,e.claim_amount),o=a.checkColumnLineAmountDetails===a.checkColumnClaimAmountComp})),n.push(t)}));var l={data:{header:R(R({},this.claim.headers),{},{file:this.fileList,status:"save"===t?this.statusHeader:"confirm"===t?"CONFIRMED":""}),claim_policy_group_rows:n,program_code:"IRP0010"}};console.log("params ",l,this.checkColumnLineAmountDetails,o),o?axios.post("/ir/ajax/claim",l).then((function(i){var n=i.data.data;if(console.log(t+" response ",l,i,i.status),200===i.status){var o=a.setFormData(n);a.receivedUploadFile(o)}swal({title:"Success",text:e.message,type:"success",showConfirmButton:!1,closeOnConfirm:!1}),window.location.href="/ir/claim-insurance"})):swal("Warning","กรุณาระบุจำนวนเงินให้ถูกต้องตามสัดส่วน!","warning")},getDataModalDetails:function(e){console.log("getDataModalDetails ",e,this.index_comp,this.claim,this.index_group),this.claim.group[this.index_group].company[this.index_comp].modal.informant_date=e.informant_date,this.claim.group[this.index_group].company[this.index_comp].modal.invoice_date=e.invoice_date,this.claim.group[this.index_group].company[this.index_comp].modal.gl_date=e.gl_date,this.claim.group[this.index_group].company[this.index_comp].modal.ar_invoice_num=e.ar_invoice_num,this.claim.group[this.index_group].company[this.index_comp].modal.policy_number=e.policy_number,this.claim.group[this.index_group].company[this.index_comp].modal.ar_receipt_date=e.ar_receipt_date,this.claim.group[this.index_group].company[this.index_comp].modal.ar_receipt_number=e.ar_receipt_number,this.claim.group[this.index_group].company[this.index_comp].modal.ar_received_amount=e.ar_received_amount,this.confirm?this.claim.group[this.index_group].company[this.index_comp].req_modal=e.invoice_date&&e.gl_date?"1":"":this.claim.group[this.index_group].company[this.index_comp].req_modal="1"},getClaimAmountCompany:function(e,t){console.log("getClaimAmountCompany ",e,t),this.claim.group[t].detail.filter((function(t){return t.line_amount=e,t})),e?this.$refs.claim_apply_companies.fields.find((function(e){return e.prop=="group."+t+".company.claim_amount"})).clearValidate():this.$refs.claim_apply_companies.validateField("group."+t+".company.claim_amount")},checkBtnSaveOrConfirm:function(e){"save"===e?(this.confirm=!1,this.claim.group.filter((function(e){return e.company.filter((function(e){return e.req_modal="1",e})),e}))):"confirm"===e&&(this.confirm=!0,this.claim.group.filter((function(e){return e.company.filter((function(e){return e.req_modal=e.modal.invoice_date&&e.modal.gl_date?"1":"",e})),e})))},clickRemoveDetails:function(e,t,a){if(console.log("clickRemoveDetails ",e,t,this.claim,a),"add"===t.flag||"edit"===t.flag){var i=e.detail.indexOf(t);console.log("index ",i),i>-1&&(e.detail.splice(i,1),e.detail.filter((function(e,t){return e.line_number=t+1,e})),console.log("splice ",e.detail,e.detail[a]))}},checkReqTableDetails:function(){var e=[];return this.claim.group.forEach((function(t){e=[].concat(T(e),T(t.detail.map((function(e){return{line_amount:e.line_amount,line_description:e.line_description}}))))})),!(e.filter((function(e){return""==e.line_description||""==e.line_amount})).length>0)||(swal("Warning","กรุณากรอกข้อมูลรายละเอียดให้ครบ!","warning"),!1)},showBtnRemoveCompany:function(e,t){return console.log("showBtnRemoveCompany ",e),"add"===e.flag||("edit"===e.flag?!(this.checkStatusInterface(this.claim.headers.status)||this.checkStatusConfirmed(this.claim.headers.status)||this.checkColumnPercent<=100):void 0)},setDefaultLineAmountDetails:function(e,t,a){console.log("setDefaultLineAmountDetails ",e,t,a);var i=this.claim.group[a].company[t].detail;i.length>0&&(i[0].line_amount=e)},watchClaimAmountCompany:function(e,t,a){console.log("watchClaimAmountCompany ",e,t,a),this.setDefaultLineAmountDetails(e,t,a)},getValueAccidentDate:function(e){console.log("getValueAccidentDate ",e);var t=this.vars.formatDate;this.claim.headers.accident_date=e?g()(e).format(t):"",this.validateNotElUi(e,"headers.accident_date")},validateNotElUi:function(e,t){e?this.$refs.claim_insurance.fields.find((function(e){return e.prop==t})).clearValidate():this.$refs.claim_insurance.validateField(t)},onBeforeUploadImage:function(e){var t="image/jpeg"===e.type||"image/jpg",a=e.size/1024/1024<1;return t||this.$message.error("Upload file can only be in image format!"),a||this.$message.error("Upload file size cannot exceed 1MB!"),t&&a},UploadImage:function(e){var t=new FormData;t.append("file",e.file),t.append("data",e.data),console.log("UploadImage ",e,t),axios.post("/ir/claim-insurance/create/upload",t,config).then((function(e){})).catch((function(e){console.log("error ",e)}))},onchange:function(e,t){console.log("onchange ",e,t),this.fileList=t},onRemove:function(e,t){console.log("onRemove ",e,t);if("add"===this.action)this.fileList=t;else{var a=e.attachment_id;this.fileList=t,console.log("action  ",this.action,t,a),this.receivedDelete(a)}},setFormData:function(e){console.log("setFormData ",this.fileList,e,e.claim_header_id);var t={claim_header_id:e.claim_header_id},a=new FormData;a.append("data",JSON.stringify(t));var i=this.fileList.every(this.checkFilesEditSuccessEvery);if(console.log("everySuccess ",i,this.fileList),this.fileList.length>0&&!i){for(var n in this.fileList){var o=this.fileList[n];console.log("file ",o,o.raw),"ready"===o.status&&a.append("file[]",o.raw)}console.log("formData ",a)}else a.append("file[]",[]);return a},receivedUploadFile:function(e){axios.post("/ir/ajax/claim/upload",e).then((function(e){var t=e.data;swal({title:"Success",text:t.message,type:"success",showConfirmButton:!1,closeOnConfirm:!1})})).catch((function(e){swal("Error",e,"error")}))},receivedDelete:function(e){var t=this;axios.delete("/ir/ajax/claim/file/".concat(e)).then((function(e){var a=e.data;swal({title:"Success",text:a.message,type:"success",showConfirmButton:!1,closeOnConfirm:!1,timer:3e3}),t.files=t.fileList,console.log("success ",t.fileList,t.files)})).catch((function(e){400===e.response.data.status?swal("Warning",e.response.data.message,"warning"):swal("Error",e,"error"),t.fileList=t.files,console.log("error ",t.fileList,t.files)}))},beforeRemove:function(e,t){return console.log("beforeRemove ",e,t),this.$confirm("ต้องการลบหรือไม่")},checkFilesEditSuccessEvery:function(e){return console.log("checkFilesEditSuccessEvery",e),!(!e.status||"success"!==e.status.toLowerCase())},getPolicyCode:function(e,t){this.claim.group[t].group_code=e.code,this.claim.group[t].group_description=e.desc,this.claim.group[t].group_header_id=e.id,e.id?(this.claim.group[t].showLovCompany=!1,this.getCompaiesPercent(e.id)):(this.claim.group[t].showLovCompany=!0,this.claim.group[t].company=[])},getPolicySetHeaderId:function(e,t){this.claim.group[t].policy_set_header_id=e.id,this.claim.group[t].policy_set_description=e.desc},getDataCompanyPolicyGroup:function(e,t,a){console.log("company_percent ",e,t,a,this.claim.group),this.claim.group[a].company[t].company_id=e.id,this.claim.group[a].company[t].company_name=e.desc;var i=e.percent?+e.percent:0;this.claim.group[a].company[t].claim_percent=i,this.claim.group[a].company[t].claim_amount=i?this.claim.group[a].amount*i/100:i},clickCreateApplyCompanies:function(e,t){var a=this;console.log("clickCreateApplyComssssssssspanies ",e,this.claim.group);var i,n=[];this.claim.group.forEach((function(e){console.log("companiesssssss",e),n=[].concat(T(n),T(e.company.map((function(e){return{company_id:e.company_id,claim_percent:e.claim_percent}}))))})),console.log("companies ",n),i=n.filter((function(e){return""==e.company_id||""==e.claim_percent})),console.log("validCompanies ",i);var o,l=[],r=[];if(this.claim.group.forEach((function(e){l=[].concat(T(l),T(e.company.map((function(e){return e}))))})),console.log("comds ",l),l.forEach((function(e){r=[].concat(T(r),T(e.detail.map((function(e){return{line_description:e.line_description,line_amount:e.line_amount}}))))})),console.log("details ",r),o=r.filter((function(e){return""==e.line_description||""==e.line_amount})),console.log("validDetails ",o),i.length>0)return swal("Warning","กรุณากรอกข้อมูลรายการเคลมให้ครบ!","warning"),!1;if(o.length>0)swal("Warning","กรุณากรอกข้อมูลรายละเอียดให้ครบ!","warning"),console.log("validDetails",o);else if(100===this.checkColumnPercent)swal("Warning","สัดส่วนได้ครบจำนวน 100 % !","warning");else{if(""===t.group_code)return this.claim.group[e].company.push({company_id:"",company_name:"",claim_percent:"",claim_amount:"",detail:[{line_number:"1",line_description:"",line_amount:"",flag:"add"}],req_modal:"",modal:{informant_date:"",invoice_date:"",gl_date:"",ar_invoice_num:"",policy_number:"",ar_receipt_date:"",ar_receipt_number:"",ar_received_amount:""},flag:"add",claim_apply_id:""}),console.log("data.group_code.length",t.group_code.length),!0;console.log("this.companies_percent",this.companies_percent),this.companies_percent.filter((function(t,i){var n={company_id:"",company_name:"",claim_percent:"",claim_amount:"",detail:[{line_number:"1",line_description:"",line_amount:"",flag:"add"}],req_modal:"",modal:{informant_date:"",invoice_date:"",gl_date:"",ar_invoice_num:"",policy_number:"",ar_receipt_date:"",ar_receipt_number:"",ar_received_amount:""},flag:"add",claim_apply_id:""},o=t.company_percent?+t.company_percent:0;n.company_id=t.company_id,n.company_name=t.company_name,n.claim_percent=t.company_percent,n.claim_amount=o?a.claim.group[e].amount*o/100:o,n.detail.line_amount=o?a.claim.group[e].amount*o/100:o,a.claim.group[e].company.push(n),console.log("dataaa",n,n.detail),n.detail.filter((function(e){var t=n.claim_amount?+n.claim_amount:0;e.line_amount=t,console.log("detl ",e),console.log("lineamount0",e.line_amount)})),console.log("dataaaaa",n)}))}},getValueCompaniesPercent:function(e,t,a){var i=this,n=this;console.log("array",e),e.length>0?(console.log("testIf",a),e.filter((function(e,o){if(o==a){console.log("aaaaasdfaaa",e.company_id,o,a);var l=e.company_percent?+e.company_percent:0;i.claim.group[t].company[a].company_id=e.company_id,i.claim.group[t].company[a].company_name=e.company_name,i.claim.group[t].company[a].claim_percent=e.company_percent,i.claim.group[t].company[a].claim_amount=l?n.claim.group[t].amount*l/100:l}})),console.log("testxxx",t,a)):(this.claim.group[t].company[a].company_id="",this.claim.group[t].company[a].company_name="",this.claim.group[t].company[a].claim_percent="",this.claim.group[t].company[a].claim_amount="",this.claim.group[t].company[a].detail=[])},getCompaiesPercent:function(e){var t=this,a={company_id:"",keyword:"",group_header_id:e,year:this.claim.headers.year};axios.get("/ir/ajax/lov/company-percent",{params:a}).then((function(e){var a=e.data;console.log("response getDataRows ",a);var i=a.data;t.companies_percent=i})).catch((function(e){swal("Error",e,"error")}))}},components:{lovDepartment:o,currencyInputGroupAppend:c,currencyInput:_.Z,lovCompany:d,lovLocation:m,dateInput:p.Z,modalDetails:y,headerForm:w,policyHeaderForm:k,lovPolicyGroup:D,lovPolicySetHeaderId:E,lovCompanyPolicyGroup:N},watch:{btn:function(e,t){console.log("btn ",e,this.btnConfirm),this.btnConfirm="confirm"===e},"claim.headers.file":function(e,t){console.log("claim.headers.file ",e),this.fileList=e,this.files=e}}};var F=a(93379),L=a.n(F),q=a(89697),Y={insert:"head",singleton:!1};L()(q.Z,Y);q.Z.locals;const P=(0,n.Z)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h5",[e._v("รายละเอียดการเกิดเหตุ")]),e._v(" "),a("el-form",{ref:"claim_insurance",staticClass:"demo-ruleForm margin_top_20",attrs:{model:e.claim,"label-width":"120px",rules:e.rules}},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"headers"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("วันที่เกิดเหตุ *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.accident_date"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"accident_date","p-type":"date",placeholder:"วันที่เกิดเหตุ",format:e.vars.formatDate,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{dateWasSelected:e.getValueAccidentDate},model:{value:e.claim.headers.accident_date,callback:function(t){e.$set(e.claim.headers,"accident_date",t)},expression:"claim.headers.accident_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เวลาเกิดเหตุ *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.accident_time"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"เวลาเกิดเหตุ",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status),"value-format":"HH:mm"},model:{value:e.claim.headers.accident_time,callback:function(t){e.$set(e.claim.headers,"accident_time",t)},expression:"claim.headers.accident_time"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("สถานที่ *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.location_name"}},[a("el-input",{attrs:{placeholder:"สถานที่",name:"location_name",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},model:{value:e.claim.headers.location_name,callback:function(t){e.$set(e.claim.headers,"location_name",t)},expression:"claim.headers.location_name"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("หน่วยงาน *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.department_code"}},[a("lov-department",{attrs:{placeholder:"หน่วยงาน",attrName:"department_code",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{"change-lov":e.getDataDepartment},model:{value:e.claim.headers.department_code,callback:function(t){e.$set(e.claim.headers,"department_code",t)},expression:"claim.headers.department_code"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ผู้แจ้งเหตุ *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.requestor_name"}},[a("el-input",{attrs:{placeholder:"ผู้แจ้งเหตุ",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},model:{value:e.claim.headers.requestor_name,callback:function(t){e.$set(e.claim.headers,"requestor_name",t)},expression:"claim.headers.requestor_name"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เบอร์โทรผู้แจ้งเหตุ *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"headers.requestor_tel"}},[a("el-input",{attrs:{placeholder:"เบอร์โทรผู้แจ้งเหตุ",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},model:{value:e.claim.headers.requestor_tel,callback:function(t){e.$set(e.claim.headers,"requestor_tel",t)},expression:"claim.headers.requestor_tel"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("จำนวนเงินเรียกชดใช้รวม")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("currency-input-group-append",{attrs:{placeholder:"จำนวนเงินเรียกชดใช้รวม",name:"claim_amount",disabled:!0,sizeSmall:!1,showAppend:!0,wordingAppend:"THB",inputClass:"text-right"},model:{value:e.claim.headers.claim_amount,callback:function(t){e.$set(e.claim.headers,"claim_amount",t)},expression:"claim.headers.claim_amount"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("Attachments (ไฟล์แนบ)")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{staticClass:"display_none_el_icon_close_tip"},[a("el-upload",{ref:"upload_claim",staticClass:"upload-demo",attrs:{name:"file[]",action:"","on-change":e.onchange,"file-list":e.fileList,multiple:"","on-remove":e.onRemove,data:e.claim,"auto-upload":!1,"before-remove":e.beforeRemove,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)}},[e._v("\n                  Click to upload\n                ")])],1)],1)],1)])]),e._v(" "),a("div",{staticClass:"row margin_top_20 text-right"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(t){return e.clickCreateClaimGroup()}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" เพิ่ม\n          ")])])]),e._v(" "),a("el-form",{ref:"claim_apply_companies",staticClass:"demo-ruleForm",staticStyle:{"padding-top":"30px"},attrs:{model:e.claim,"label-width":"120px"}},[e._l(e.claim.group,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.claim.group.length>0,expression:"claim.group.length > 0"}],key:i,staticClass:"el_field_table",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticStyle:{display:"block",width:"100%","overflow-x":"auto",height:"135px"}},[a("policy-header-form"),e._v(" "),a("div",{staticClass:"el_field_table",staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"group."+i+".group_description",rules:e.rules.group}},[a("lov-policy-group",{attrs:{name:"group_description"+i,size:"",placeholder:"กลุ่มกรมธรรม์",popperBody:!0,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{"change-lov":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getPolicyCode.apply(void 0,n.concat([i]))}},model:{value:t.group_header_id,callback:function(a){e.$set(t,"group_header_id",a)},expression:"data.group_header_id"}})],1),e._v(" "),a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"group."+i+".group_description",rules:e.rules.group.group_description}},[a("lov-policy-set-header-id",{attrs:{name:"group_description"+i,size:"",placeholder:"ชุดกรมธรรม์",popperBody:!0,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status),group_header_id:t.group_header_id},on:{"change-lov":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getPolicySetHeaderId.apply(void 0,n.concat([i]))}},model:{value:t.policy_set_header_id,callback:function(a){e.$set(t,"policy_set_header_id",a)},expression:"data.policy_set_header_id"}})],1),e._v(" "),a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"group."+i+".amount",rules:e.rules.group.amount}},[a("currency-input",{attrs:{name:"amount"+i,sizeSmall:!1,placeholder:"จำนวนเงินเรียกชดใช้",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{input:function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getDataAmount.apply(void 0,n.concat([i]))}},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"data.amount"}})],1),e._v(" "),"add"===t.flag||"edit"===t.flag?a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px","text-align":"center"}},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(a){return e.clickRemoveGroup(t,i)}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ลบ\n                    ")])]):e._e()],1)],1),e._v(" "),e.claim.group.length>0?a("div",{staticClass:"row margin_top_20 text-right"},[a("div",{staticClass:"col-md-12"},[a("el-form-item",{staticStyle:{float:"right"},attrs:{prop:"group."+i+".company",rules:e.rules.companies}},[a("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(a){return e.clickCreateApplyCompanies(i,t)}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" เพิ่มรายการเคลม\n                ")])])],1)]):e._e(),e._v(" "),a("el-form",{ref:"companies",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:t,"label-width":"120px"}},e._l(t.company,(function(n,o){return a("div",{key:o},[a("div",{staticStyle:{display:"block",width:"100%","overflow-x":"auto",height:"135px"}},[a("header-form"),e._v(" "),a("div",{staticClass:"el_field_table",staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"company."+o+".company_id",rules:e.rules.group.company.company_id}},[t.showLovCompany?a("lov-company",{attrs:{placeholder:"บริษัทประกันภัย",attrName:"company_id"+o,index:o,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status),resData:e.resData},on:{"change-lov":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getDataCompany.apply(void 0,n.concat([o],[i]))}},model:{value:n.company_id,callback:function(t){e.$set(n,"company_id",t)},expression:"comp.company_id"}}):e._e(),e._v(" "),t.showLovCompany?e._e():a("lov-company-policy-group",{attrs:{placeholder:"บริษัทประกันภัย",attrName:"company_id_policy_group"+o,index:o,disabled:e.checkStatusInterface(e.claim.headers.status)||!t.showLovCompany||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status),group_header_id:t.group_header_id,year:e.claim.headers.year},on:{"change-lov":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getDataCompanyPolicyGroup.apply(void 0,n.concat([o],[i]))},"response-company-percent":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.getValueCompaniesPercent.apply(void 0,n.concat([i],[o]))}},model:{value:n.company_name,callback:function(t){e.$set(n,"company_name",t)},expression:"comp.company_name"}})],1),e._v(" "),a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"company."+o+".claim_percent",rules:e.rules.group.company.claim_percent}},[a("el-input",{staticClass:"currency_right",attrs:{placeholder:"สัดส่วน (%)",name:"claim_percent"+o,disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status),type:"age",autocomplete:"off"},on:{change:function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.changePercent.apply(void 0,n.concat([o],[i]))}},model:{value:n.claim_percent,callback:function(t){e.$set(n,"claim_percent",e._n(t))},expression:"comp.claim_percent"}})],1),e._v(" "),a("el-form-item",{staticClass:"currency_right media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px"},attrs:{prop:"company."+o+".claim_amount",rules:e.rules.group.company.claim_amount}},[a("currency-input",{attrs:{name:"claim_amount"+o,sizeSmall:!1,placeholder:"จำนวนเงิน",disabled:!0},on:{"watch-value":function(t){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return e.watchClaimAmountCompany.apply(void 0,n.concat([o],[i]))}},model:{value:n.claim_amount,callback:function(t){e.$set(n,"claim_amount",t)},expression:"comp.claim_amount"}})],1),e._v(" "),"add"===t.flag||"edit"===t.flag?a("el-form-item",{staticClass:"media_claim_col",staticStyle:{"margin-bottom":"0px",width:"25%",padding:"12px","text-align":"center"}},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(t){return e.clickRemove(n,o,i)}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ลบ\n                    ")])]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"row margin_top_20 text-right"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(t){return e.clickAddDetails(n,o)}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" เพิ่มรายการ\n                  ")])])]),e._v(" "),a("el-form-item",[a("el-form",{ref:"claim_apply_details",refInFor:!0,staticClass:"demo-dynamic",attrs:{model:n,"label-width":"120px"},model:{value:n.detail,callback:function(t){e.$set(n,"detail",t)},expression:"comp.detail"}},[a("div",{staticClass:"table-responsive margin_top_20"},[a("table",{staticClass:"table table-bordered",staticStyle:{display:"block",overflow:"auto","max-height":"240px"}},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{staticStyle:{"min-width":"80px",width:"1%"}},[e._v("ลำดับ")]),e._v(" "),a("th",{staticStyle:{"min-width":"250px",width:"65%","z-index":"1"}},[e._v("รายละเอียด *")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px",width:"25%","z-index":"1"}},[e._v("จำนวนเงิน *")]),e._v(" "),a("th",{staticStyle:{"min-width":"130px",width:"10%","z-index":"1"}},[e._v("ลบ")])])]),e._v(" "),a("tbody",{attrs:{id:"table_details"}},[e._l(n.detail,(function(i,o){return a("tr",{directives:[{name:"show",rawName:"v-show",value:n.detail.length>0,expression:"comp.detail.length > 0"}],key:o},[a("td",{staticStyle:{"text-align":"center","vertical-align":"middle"}},[e._v("\n                            "+e._s(e.isNullOrUndefined(i.line_number))+"\n                          ")]),e._v(" "),a("td",{staticClass:"el_field_table",style:"edit"===i.flag?"vertical-align: middle;":""},["add"!==i.flag?a("span",[e._v("\n                              "+e._s(e.isNullOrUndefined(i.line_description))+"\n                            ")]):a("el-form-item",[a("el-input",{attrs:{placeholder:"รายละเอียด",size:"small",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},model:{value:i.line_description,callback:function(t){e.$set(i,"line_description",t)},expression:"detail.line_description"}})],1)],1),e._v(" "),a("td",{staticClass:"el_field_table"},[a("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[a("currency-input",{attrs:{name:"line_amount"+o,sizeSmall:!0,placeholder:"จำนวนเงิน",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},model:{value:i.line_amount,callback:function(t){e.$set(i,"line_amount",t)},expression:"detail.line_amount"}})],1)],1),e._v(" "),a("td",["add"===i.flag||"edit"===t.flag?a("el-form-item",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(t){return e.clickRemoveDetails(n,i,o)}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ลบ\n                              ")])]):e._e()],1)])})),e._v(" "),0===n.detail.length?a("tr",{staticClass:"text-center"},[a("td",{attrs:{colspan:"4"}},[e._v("ไม่มีข้อมูล")])]):e._e()],2),e._v(" "),a("tfoot")])])])],1),e._v(" "),a("div",{staticClass:"row text-right"},[a("div",{staticClass:"col-md-12"},[a("el-form-item",{staticStyle:{float:"right",width:"145px"}},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#modal_details"+o,value:n.req_modal,name:"modal_details"+o},on:{click:function(t){return e.clickModalDetails(n,o,0)}}},[a("i",{staticClass:"fa fa-file-text-o"}),e._v(" รายละเอียด\n                    ")])])],1)])],1)})),0)],1)})),e._v(" "),0===e.claim.group.length?a("div",{staticStyle:{"text-align":"center",display:"block",width:"100%","overflow-x":"auto",height:"135px"}},[a("policy-header-form"),e._v(" "),a("div",{staticClass:"media_claim_no_data_align_end",staticStyle:{padding:"20px"}},[e._v("\n            ไม่มีข้อมูล\n          ")])],1):e._e()],2),e._v(" "),a("div",{staticClass:"row margin_top_20"},[a("div",{staticClass:"col-md-12 lable_align el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.clickSave()}}},[a("i",{staticClass:"fa fa-save"}),e._v(" บันทึก\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" ยกเลิก\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.checkStatusInterface(e.claim.headers.status)||e.checkStatusConfirmed(e.claim.headers.status)||e.checkStatusCancelled(e.claim.headers.status)},on:{click:function(t){return e.clickConfirm()}}},[a("i",{staticClass:"fa fa-check"}),e._v(" ยืนยัน\n            ")])])],1)])],1)]),e._v(" "),a("modal-details",{attrs:{details:e.details,index:e.index_comp,status:e.claim.headers.status,checkStatusInterface:e.checkStatusInterface,checkStatusConfirmed:e.checkStatusConfirmed,checkStatusCancelled:e.checkStatusCancelled,vars:e.vars},on:{"modal-details":e.getDataModalDetails}})],1)}),[],!1,null,"5053d222",null).exports},37978:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var i=a(98703),n=a(95070),o=a(21341),l=a(22133),r=a(43126),c=a(87150);const s={name:"ir-claim-insurance-lov-policy-number",data:function(){return{rows:[],loading:!1,result:this.value}},props:["value","name","size","placeholder","popperBody"],methods:{remoteMethod:function(e){this.getDataRows({keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/claim-policy-number",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){console.log("onfocus ",this.rows,this.result),this.rows.length>=0&&this.result?this.getDataRows({keyword:this.result}):this.rows.length>=0&&!this.result&&this.getDataRows({keyword:""})},onchange:function(e){this.$emit("change-lov",e)},onclick:function(){console.log("onclick ",this.rows,this.result),this.rows.length>=0&&this.result?this.getDataRows({keyword:this.result}):this.rows.length>=0&&!this.result&&this.getDataRows({keyword:""})}},mounted:function(){console.log("mounted policy number ",this.value),this.getDataRows({keyword:""})}};var d=a(51900);const u=(0,d.Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody},on:{change:e.onchange},nativeOn:{click:function(t){return e.onclick(t)}},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.policy_number,value:e.policy_number}})})),1)],1)}),[],!1,null,null,null).exports,m={name:"ir-cliam-insurance-index-search",data:function(){return{rules:{start_year:[{required:!0,message:"กรุณาระบุปี",trigger:"change"}],end_year:[{required:!0,message:"กรุณาระบุถึงปี",trigger:"change"}]},create:{headers:{claim_header_id:"",status:"",document_number:"",accident_date:"",accident_time:"",location_code:"",location_name:"",department_code:"",department_name:"",requestor_id:"",requestor_name:"",requestor_tel:"",claim_amount:"",year:(new Date).getFullYear()+543},apply:{apply_company:[]},informant_date:"",invoice_date:"",gl_date:"",ar_invoice_num:"",policy_number:"",ar_receipt_date:"",ar_receipt_id:"",ar_receipt_number:"",ar_received_amount:""},getTimeYearSt:"",getTimeYearEn:"",getTimeDateSt:"",getTimeDateEn:"",rows:[],loading:!1}},props:["search","vars"],computed:{checkAccidentDate:function(){var e=this.search.accident_start_date,t=this.search.accident_end_date;return!e||!t||(console.log("getTimeDateSt ",this.getTimeDateSt),console.log("getTimeDateEn ",this.getTimeDateEn),this.getTimeDateSt<=this.getTimeDateEn)},checkYear:function(){var e=this.search.start_year,t=this.search.end_year;return!e||!t||(console.log("getTimeYearSt ",this.getTimeYearSt),console.log("getTimeYearEn ",this.getTimeYearEn),this.getTimeYearSt<=this.getTimeYearEn)}},methods:{clickCreate:function(){var e={showIndex:!1,action:"add",create:this.create};this.$emit("click-create",e)},clickSearch:function(){var e=this;console.log("clickSearch ",this.checkYear,this.checkAccidentDate),this.$refs.search_index_claim_insurance.validate((function(t){if(!t)return console.log("error submit!"),!1;e.checkRangeAccidentDateNotReq()?(console.log("clickSearch ",e.search),e.$emit("click-search",e.search)):swal("Warning","กรุณาระบุช่วงวันที่เกิดเหตุให้ครบ!","warning")}))},getDataArInvoiceNum:function(e){this.search.ar_invoice_num=e},clickCancel:function(){this.search.start_year="",this.search.end_year="",this.search.accident_start_date="",this.search.accident_end_date="",this.search.department_end="",this.search.ar_invoice_num="",this.search.policy_number="",this.search.status="",window.location.href="/ir/claim-insurance"},getStYear:function(e){this.search.start_year=e.value,this.getTimeYearSt=e.getTime,e.value?this.$refs.search_index_claim_insurance.fields.find((function(e){return"start_year"==e.prop})).clearValidate():this.$refs.search_index_claim_insurance.validateField("start_year")},getEnYear:function(e){this.search.end_year=e.value,this.getTimeYearEn=e.getTime,e.value?this.$refs.search_index_claim_insurance.fields.find((function(e){return"end_year"==e.prop})).clearValidate():this.$refs.search_index_claim_insurance.validateField("end_year")},getAccidentStDate:function(e){console.log("getAccidentStDate ",e),this.search.accident_start_date=e.value,this.getTimeDateSt=e.getTime},getAccidentEnDate:function(e){console.log("getAccidentEnDate ",e),this.search.accident_end_date=e.value,this.getTimeDateEn=e.getTime},reqDate:function(){if(!this.checkYear&&this.checkAccidentDate)swal("Warning","ฟิลด์ปีต้องน้อยกว่าหรือเท่ากับฟิลด์ถึงปี!","warning");else if(!this.checkAccidentDate&&this.checkYear)swal("Warning","ฟิลด์วันที่เกิดเหตุต้องน้อยกว่าหรือเท่ากับฟิลด์ถึงวันที่เกิดเหตุ!","warning");else{if(this.checkYear||this.checkAccidentDate)return!0;swal("Warning","ฟิลด์ปีต้องน้อยกว่าหรือเท่ากับฟิลด์ถึงปี!","warning")}},getDepartmentSt:function(e){this.search.department_start=e,this.search.department_end=this.search.department_start},getDepartmentEn:function(e){this.search.department_end=e},getPolicyNumber:function(e){this.search.policy_number=e},getValueStYear:function(e){console.log("getValueStYear ",e,this.search.end_year),this.search.start_year=e,e&&this.search.end_year&&e>this.search.end_year&&(this.search.end_year="",this.validateNotElUi(this.search.end_year,"end_year")),this.search.end_year=this.search.start_year,this.validateNotElUi(e,"start_year")},getValueEnYear:function(e){console.log("getValueEnYear ",e),this.search.end_year=e,this.validateNotElUi(e,"end_year")},validateNotElUi:function(e,t){e?this.$refs.search_index_claim_insurance.fields.find((function(e){return e.prop==t})).clearValidate():this.$refs.search_index_claim_insurance.validateField(t)},getValueAccidentStDate:function(e){console.log("getValueAccidentStDate ",e,this.search.accident_end_date),this.search.accident_start_date=null===e?"":e,e&&this.search.accident_end_date&&e>this.search.accident_end_date&&(this.search.accident_end_date=""),this.search.accident_end_date=this.search.accident_start_date},getValueAccidentEnDate:function(e){console.log("getValueAccidentEnDate ",e),this.search.accident_end_date=null===e?"":e},checkRangeAccidentDateNotReq:function(){console.log("checkRangeAccidentDateNotReq ",this.search);var e=this.search.accident_start_date,t=this.search.accident_end_date;return""===e&&""===t||null===e&&null===t||!(!e||!t)},getValueStatus:function(e){this.search.status=e},getValuePolicyNumber:function(e){this.search.policy_number=e},getDataDepartment:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:e}).then((function(e){var a=e.data;console.log("response getDataDepartment ",a),t.loading=!1,t.policies=a.data})).catch((function(e){swal("Error",e,"error")}))},remoteMethoddepst:function(e){this.getDataDepartment({department_code:"",keyword:e})},focusdepSt:function(e){this.getDataDepartment({department_code:"",keyword:""})},changeDepSt:function(e){console.log("changePolicySt ",e),this.search.department_start=e,this.search.department_end=e},remoteMethoddepen:function(e){this.getDataDepartment({department_code:"",keyword:e})},focusdepen:function(e){this.getDataDepartment({department_code:"",keyword:""})},changeDepen:function(e){this.search.department_end=e}},components:{lovInvoiceNumberAr:i.Z,yearInput:n.Z,dateInput:o.Z,lovDepartment:l.Z,lovPolicySetHeaderId:r.Z,dropdownStatusIr:c.Z,lovPolicyNumber:u}};const p=(0,d.Z)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"search_index_claim_insurance",staticClass:"demo-ruleForm",attrs:{model:e.search,rules:e.rules,"label-width":"120px"}},[a("div",{staticClass:"col-lg-11"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ปี *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"start_year"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"start_year","p-type":"year",placeholder:"ปี",format:e.vars.formatYear},on:{dateWasSelected:function(t){return e.getValueStYear.apply(void 0,arguments)}},model:{value:e.search.start_year,callback:function(t){e.$set(e.search,"start_year",t)},expression:"search.start_year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง *")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",{attrs:{prop:"end_year"}},[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"end_year","p-type":"year",placeholder:"ถึงปี",format:e.vars.formatYear,disabledDateTo:e.search.start_year},on:{dateWasSelected:function(t){return e.getValueEnYear.apply(void 0,arguments)}},model:{value:e.search.end_year,callback:function(t){e.$set(e.search,"end_year",t)},expression:"search.end_year"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("วันที่เกิดเหตุ")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"accident_start_date","p-type":"date",placeholder:"วันที่เกิดเหตุ",format:e.vars.formatDate},on:{dateWasSelected:function(t){return e.getValueAccidentStDate.apply(void 0,arguments)}},model:{value:e.search.accident_start_date,callback:function(t){e.$set(e.search,"accident_start_date",t)},expression:"search.accident_start_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("datepicker-th",{staticClass:"el-input__inner",staticStyle:{width:"100%"},attrs:{name:"accident_end_date","p-type":"date",placeholder:"ถึงวันที่เกิดเหตุ",format:e.vars.formatDate,disabledDateTo:e.search.accident_start_date},on:{dateWasSelected:function(t){return e.getValueAccidentEnDate.apply(void 0,arguments)}},model:{value:e.search.accident_end_date,callback:function(t){e.$set(e.search,"accident_end_date",t)},expression:"search.accident_end_date"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("หน่วยงาน")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"หน่วยงาน",attrName:"department_start"},on:{"change-lov":e.getDepartmentSt},model:{value:e.search.department_start,callback:function(t){e.$set(e.search,"department_start",t)},expression:"search.department_start"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("ถึง")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-department",{attrs:{placeholder:"ถึงหน่วยงาน",attrName:"department_end"},on:{"change-lov":e.getDepartmentEn},model:{value:e.search.department_end,callback:function(t){e.$set(e.search,"department_end",t)},expression:"search.department_end"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เลขที่อ้างอิงเอกสารในระบบ AR")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-invoice-number-ar",{attrs:{attrName:"ar_invoice_num"},on:{"change-value":e.getDataArInvoiceNum},model:{value:e.search.ar_invoice_num,callback:function(t){e.$set(e.search,"ar_invoice_num",t)},expression:"search.ar_invoice_num"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("เลขที่กรมธรรม์")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("lov-policy-number",{attrs:{name:"policy_number",size:"",placeholder:"เลขที่กรมธรรม์",popperBody:!0},on:{"change-lov":e.getValuePolicyNumber},model:{value:e.search.policy_number,callback:function(t){e.$set(e.search,"policy_number",t)},expression:"search.policy_number"}})],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label lable_align"},[a("strong",[e._v("สถานะ")])]),e._v(" "),a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6 el_field"},[a("el-form-item",[a("dropdown-status-ir",{attrs:{name:"status",size:"",popperBody:!0,disabled:!1,placeholder:"สถานะ"},on:{"change-dropdown":e.getValueStatus},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"text-right el_field"},[a("el-form-item",[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){return e.clickSearch()}}},[a("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา\n        ")]),e._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return e.clickCancel()}}},[a("i",{staticClass:"fa fa-repeat"}),e._v(" รีเซต\n        ")])])],1)])],1)}),[],!1,null,null,null).exports;const h={name:"ir-claim-insurance-index-table-header",data:function(){return{activeIndex:""}},props:["tableHeader","isNullOrUndefined","formatCurrency","checkStatusInterface","setFirstLetterUpperCase","showYearBE"],methods:{clickEdit:function(e){console.log("clickEdit ",e);var t={showIndex:!1,row:{claim_header_id:e.claim_header_id,status:this.isNullOrUndefined(e.status),document_number:this.isNullOrUndefined(e.document_number),accident_date:this.isNullOrUndefined(e.accident_date),accident_time:this.isNullOrUndefined(e.accident_time),location_code:this.isNullOrUndefined(e.test),location_name:this.isNullOrUndefined(e.location_name),department_code:this.isNullOrUndefined(e.test),department_name:this.isNullOrUndefined(e.test),requestor_name:this.isNullOrUndefined(e.requestor_name),requestor_tel:this.isNullOrUndefined(e.requestor_tel),claim_amount:this.isNullOrUndefined(e.claim_amount)},action:"edit"};console.log("dataja",t),this.$emit("click-edit",t)},clickCancel:function(e){var t=this;console.log("clickCancel ",e);var a={data:{header:{claim_header_id:e.claim_header_id,status:"CANCELLED",document_number:this.isNullOrUndefined(e.document_number),accident_date:this.isNullOrUndefined(e.accident_date),accident_time:this.isNullOrUndefined(e.accident_time),location_code:this.isNullOrUndefined(e.location_code),location_name:this.isNullOrUndefined(e.location_name),department_code:this.isNullOrUndefined(e.department_code),department_name:this.isNullOrUndefined(e.department_name),requestor_name:this.isNullOrUndefined(e.requestor_name),requestor_tel:this.isNullOrUndefined(e.requestor_tel),claim_amount:this.isNullOrUndefined(e.claim_amount)},program_code:"IRP0010"}};console.log("params ",e),axios.post("/ir/ajax/claim",a).then((function(e){var a=e.data;swal({title:"Success",timer:3e3,text:a.message,type:"success",showConfirmButton:!1,closeOnConfirm:!1}),t.$emit("cancel-success",!0)})).catch((function(e){swal("Error",e,"error")}))},clickRow:function(e,t){var a={claim_header_id:e.claim_header_id,status:this.isNullOrUndefined(e.status),document_number:this.isNullOrUndefined(e.document_number),accident_date:this.isNullOrUndefined(e.accident_date),accident_time:this.isNullOrUndefined(e.accident_time),location_name:this.isNullOrUndefined(e.location_name),requestor_name:this.isNullOrUndefined(e.requestor_name),requestor_tel:this.isNullOrUndefined(e.requestor_tel),claim_amount:this.isNullOrUndefined(e.claim_amount)};this.$emit("click-row",a),this.activeIndex=t}},watch:{tableHeader:function(e,t){this.rows=e,this.activeIndex=""}},updated:function(){this.rows=this.tableHeader}};var _=a(93379),f=a.n(_),g=a(44726),v={insert:"head",singleton:!1};f()(g.Z,v);g.Z.locals;const y=(0,d.Z)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered",staticStyle:{display:"block",overflow:"auto","max-height":"500px"}},[e._m(0),e._v(" "),a("tbody",{attrs:{id:"table_search"}},[e._l(e.tableHeader,(function(t,i){return a("tr",{directives:[{name:"show",rawName:"v-show",value:e.tableHeader.length>0,expression:"tableHeader.length > 0"}],key:i,class:"style_row_show "+(i===e.activeIndex?"highlight":""),on:{click:function(a){return e.clickRow(t,i)}}},[a("td",[e._v(e._s(e.setFirstLetterUpperCase(t.status)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.document_number)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.reference_document_number)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.year)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.accident_date)))]),e._v(" "),a("td",{staticClass:"text-center"},[e._v(e._s(e.isNullOrUndefined(t.accident_time)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.location_name)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.department_name)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.requestor_name)))]),e._v(" "),a("td",[e._v(e._s(e.isNullOrUndefined(t.requestor_tel)))]),e._v(" "),a("td",{staticClass:"text-right"},[e._v("\n          "+e._s(e.isNullOrUndefined(t.claim_amount)||0===e.isNullOrUndefined(t.claim_amount)?e.formatCurrency(t.claim_amount):e.isNullOrUndefined(t.claim_amount))+"\n        ")]),e._v(" "),a("td",{staticClass:"text-center"},[a("a",{staticClass:"btn btn-warning btn-xs",attrs:{type:"button",href:"/ir/claim-insurance/edit/"+t.claim_header_id}},[a("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),e._v(" แก้ไข\n          ")])]),e._v(" "),a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-danger btn-xs",attrs:{disabled:!!e.checkStatusInterface(t.status),type:"button"},on:{click:function(a){return e.clickCancel(t)}}},[a("i",{staticClass:"fa fa-times m-r-xs"}),e._v("ยกเลิก\n          ")])])])})),e._v(" "),0===e.tableHeader.length?a("tr",{staticClass:"text-center"},[a("td",{attrs:{colspan:"13"}},[e._v("ไม่มีข้อมูล")])]):e._e()],2),e._v(" "),a("tfoot")])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticStyle:{"min-width":"110px"}},[e._v("Status "),a("br"),e._v("สถานะ")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[e._v("Document Number "),a("br"),e._v("เลขที่เอกสาร")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[e._v("Referance "),a("br"),e._v("Document")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[e._v("ปี")]),e._v(" "),a("th",{staticStyle:{"min-width":"150px"}},[e._v("วันที่เกิดเหตุ")]),e._v(" "),a("th",{staticStyle:{"min-width":"100px"}},[e._v("เวลาเกิดเหตุ")]),e._v(" "),a("th",{staticStyle:{"min-width":"170px"}},[e._v("สถานที่")]),e._v(" "),a("th",{staticStyle:{"min-width":"200px"}},[e._v("หน่วยงาน")]),e._v(" "),a("th",{staticStyle:{"min-width":"200px",width:"1%"}},[e._v("ผู้แจ้งเหตุ")]),e._v(" "),a("th",{staticStyle:{"min-width":"130px"}},[e._v("เบอร์โทรผู้แจ้งเหตุ")]),e._v(" "),a("th",{staticClass:"text-right",staticStyle:{"min-width":"170px"}},[e._v("จำนวนเงินเรียกชดใช้รวม")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"80px","z-index":"1"}},[e._v("แก้ไข")]),e._v(" "),a("th",{staticClass:"text-center",staticStyle:{"min-width":"80px","z-index":"1"}},[e._v("ยกเลิก")])])])}],!1,null,"25a74ae1",null).exports;var b=a(23994),w=a(67791);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const D={name:"ir-claim-insurance-index",data:function(){return{showIndex:!0,search:{start_year:"",end_year:"",accident_start_date:"",accident_end_date:"",department_start:"",department_end:"",ar_invoice_num:"",policy_number:"",status:""},action:"",claim:{headers:{claim_header_id:"",status:"",document_number:"",accident_date:"",accident_time:"",location_code:"",location_name:"",department_code:"",department_name:"",requestor_id:"",requestor_name:"",requestor_tel:"",claim_amount:"",year:""},group:[]},tableHeader:[],test:"",funcs:w.sD,mocks:w.R_,vars:w.gR}},methods:{getCreateDefault:function(e){this.showIndex=e.showIndex,this.action=e.action,this.claim=e.create},getDataSearch:function(e){this.search=e,this.getTableHeader()},getDataRowEditToForm:function(e){console.log("getDataRowEditToForm ",e),this.showIndex=e.showIndex,this.action=e.action,this.getDataEdit(e.row)},getDate:function(e){console.log("getDate ",e),this.test=e},submit:function(){console.log("submit ",this.test)},getTableHeader:function(){var e=this;console.log("getTableHeader ",this.search);var t=this.funcs.covertFomatDateMoment(this.search.start_year,"year"),a=this.funcs.covertFomatDateMoment(this.search.end_year,"year"),i=this.funcs.covertFomatDateMoment(this.search.accident_start_date,"date"),n=this.funcs.covertFomatDateMoment(this.search.accident_end_date,"date"),o={year_from:this.funcs.setYearCE("year",t),year_to:this.funcs.setYearCE("year",a),accident_start:this.funcs.setYearCE("date",i),accident_end:this.funcs.setYearCE("date",n),department_from:this.search.department_start,department_to:this.search.department_end,ar_invoice_num:this.search.ar_invoice_num,policy_number:this.search.policy_number,status:this.search.status};axios.get("/ir/ajax/claim",{params:o}).then((function(t){var a=t.data;e.tableHeader=a.data})).catch((function(e){swal("Error",e,"error")}))},getDataEdit:function(e){var t=this;axios.get("/ir/ajax/claim/".concat(e.claim_header_id)).then((function(e){var a=e.data;t.claim=t.setPropertyForm(a.data)})).catch((function(e){swal("Error",e,"error")}))},setPropertyForm:function(e){console.log("setPropertyForm ",e),e.company_rows.filter((function(e,t){e.claim_percent=e.claim_percent?+e.claim_percent:e.claim_percent,e.flag="edit",e.line_rows.filter((function(e,t){return e.line_number=t+1,e.flag="edit",e})),e.apply_details=e.line_rows,e.req_modal=""}));var t={headers:k({},e.header),apply:{apply_company:e.company_rows}};return console.log("setPropertyForm params ",t),t},cancelSuccess:function(e){this.getTableHeader()}},components:{indexSearch:p,indexTableHeader:y,formClaimInsurance:b.Z},created:function(){this.getTableHeader()}};const S=(0,d.Z)(D,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("index-search",{attrs:{search:e.search,vars:e.vars},on:{"click-create":e.getCreateDefault,"click-search":e.getDataSearch}}),e._v(" "),a("index-table-header",{attrs:{isNullOrUndefined:e.funcs.isNullOrUndefined,tableHeader:e.tableHeader,formatCurrency:e.funcs.formatCurrency,checkStatusInterface:e.funcs.checkStatusInterface,setFirstLetterUpperCase:e.funcs.setFirstLetterUpperCase,showYearBE:e.funcs.showYearBE},on:{"click-edit":e.getDataRowEditToForm,"cancel-success":e.cancelSuccess}})],1)}),[],!1,null,null,null).exports},98703:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-claim-insurance-lov-invoice-number-ar",data:function(){return{dataRows:[],loading:!1,invoice_number:this.value}},props:["attrName","value"],methods:{remoteMethod:function(e){this.gatDataRows({claim_apply_id:"",keyword:e})},gatDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/ar-invoice-num",{params:e}).then((function(e){var a=e.data.data;t.loading=!1,t.dataRows=a})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){this.gatDataRows({claim_apply_id:"",keyword:""})},change:function(e){this.$emit("change-value",e)}},mounted:function(){}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:"เลขที่อ้างอิงเอกสารในระบบ AR",name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:""},on:{focus:e.focus,change:e.change},model:{value:e.invoice_number,callback:function(t){e.invoice_number=t},expression:"invoice_number"}},e._l(e.dataRows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.ar_invoice_num,value:e.ar_invoice_num}})})),1)],1)}),[],!1,null,null,null).exports},21341:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-components-calendar-date-input",data:function(){return{date:this.value}},props:["attrName","value","sizeSmall","placeholder","disabled"],computed:{},mounted:function(){var e=this;$(document).ready((function(){$("input.date_input").datepicker({format:"dd/mm/yyyy",autoclose:!0,keyboardNavigation:!1}),$('input[name="'.concat(e.attrName,'"]')).on("change",(function(t){console.log("change ",t,t.target.value);var a={value:t.target.value,getTime:$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate").getTime()};e.$emit("change-date",a),console.log("params ",a)}))}))},watch:{value:function(e,t){this.date=e}}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"el-input date "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"input-medium form-control date_input el-input__inner",attrs:{type:"text",name:e.attrName,"data-provide":"datepicker","data-date-language":"th-th",placeholder:e.placeholder,autocomplete:"off",disabled:e.disabled},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])}),[],!1,null,null,null).exports},95070:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-components-calendar-year-input",data:function(){return{year:this.value}},props:["attrName","value","sizeSmall","placeholder"],mounted:function(){var e=this;$(document).ready((function(){console.log("ready "),$("input.year_input").datepicker({format:"yyyy",autoclose:!0,keyboardNavigation:!1,startView:"years",minViewMode:"years"}),$('input[name="'.concat(e.attrName,'"]')).on("change",(function(t){console.log("change ",t,t.target.value,$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate"));var a={value:t.target.value,getTime:$('input[name="'.concat(e.attrName,'"]')).datepicker("getDate").getTime()};e.$emit("change-year",a)}))}))},watch:{value:function(e,t){this.year=e}}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:" date "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"input-medium form-control year_input el-input__inner",attrs:{type:"text",name:e.attrName,"data-provide":"datepicker","data-date-language":"th-th",placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.year},on:{input:function(t){t.target.composing||(e.year=t.target.value)}}})])}),[],!1,null,null,null).exports},62783:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const i={name:"ir-components-currency-input",data:function(){return{isInputActive:!1,decimalValue:void 0===this.decimal?2:this.decimal}},props:["value","name","sizeSmall","placeholder","disabled","decimal"],computed:{displayValue:{get:function(){if(this.isInputActive)return(void 0===this.value||null===this.value?"":this.value).toString();if(this.value||0===this.value&&void 0!==this.value&&null!==this.value){var e=parseFloat(this.value),t=this.value.toString().split(".");if(void 0===t[1]){var a=parseInt(t[0]).toFixed(this.decimalValue).split(".")[1];return"".concat(parseInt(t[0]).toLocaleString(),".").concat(a)}if(0==e.toString().split(".")[0]){var i=e.toFixed(this.decimalValue).split(".")[1];return"".concat(e.toString().split(".")[0],".").concat(i)}var n=e.toFixed(this.decimalValue).split(".")[1];return"".concat(parseInt(t[0]).toLocaleString(),".").concat(n)}},set:function(e){console.log("modifiedValue --\x3e",e);var t=+e;isNaN(t)&&(t=""),this.$emit("input",t)}}},methods:{blur:function(e){this.isInputActive=!1,this.$emit("blur-currency",e.target.value)}},watch:{value:function(e,t){this.$emit("watch-value",e)}}};var n=a(93379),o=a.n(n),l=a(19258),r={insert:"head",singleton:!1};o()(l.Z,r);l.Z.locals;const c=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"el-input "+(e.sizeSmall?"el-input--small":"")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayValue,expression:"displayValue"}],staticClass:"form-control el-input__inner input-currency  text-right",attrs:{type:"text",name:e.name,placeholder:e.placeholder,autocomplete:"off",disabled:e.disabled,maxlength:"15"},domProps:{value:e.displayValue},on:{blur:e.blur,focus:function(t){e.isInputActive=!0},input:function(t){t.target.composing||(e.displayValue=t.target.value)}}})])}),[],!1,null,"dee02e12",null).exports},87150:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-components-lov-status-ir",data:function(){return{rows:[],loading:!1,result:this.value}},props:["value","name","size","popperBody","disabled","placeholder"],methods:{getDataRows:function(){var e=this;axios.get("/ir/ajax/lov/status").then((function(t){var a=t.data;e.rows=a})).catch((function(e){swal("Error",e,"error")}))},change:function(e){this.$emit("change-lov",e)}},watch:{value:function(e,t){this.result=e}},created:function(){this.getDataRows()}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:"สถานะ",name:e.name,clearable:!0,size:e.size,"popper-append-to-body":e.popperBody,disabled:e.disabled},on:{change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.description,value:e.lookup_code}})})),1)],1)}),[],!1,null,null,null).exports},22133:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-components-lov-department",data:function(){return{rows:[],loading:!1,result:this.value}},props:["placeholder","attrName","value","popperBody","size"],methods:{remoteMethod:function(e){this.getDataRows({department_code:"",keyword:e})},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/department-code",{params:e}).then((function(e){var a=e.data;console.log("response getDataRows ",a);var i=a.data;t.loading=!1,t.rows=i})).catch((function(e){swal("Error",e,"error")}))},focus:function(e){console.log("focus ",e),this.getDataRows({department_code:"",keyword:""})},change:function(e){this.$emit("change-lov",e)}},mounted:function(){this.getDataRows({department_code:"",keyword:""})},watch:{value:function(e,t){this.result=e}}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_select"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.attrName,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"","popper-append-to-body":e.popperBody,size:e.size},on:{focus:e.focus,change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.rows,(function(e,t){return a("el-option",{key:t,attrs:{label:e.department_code+": "+e.description,value:e.department_code}})})),1)],1)}),[],!1,null,null,null).exports},43126:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i={name:"ir-components-lov-policy-set-header-id",data:function(){return{rows:[],dataSet:[],loading:!1,result:this.value,isDisabled:void 0!==this.disabled&&this.disabled}},props:["value","name","size","placeholder","popperBody","fixTypeFr","fixTypeSc","check","disabled"],methods:{remoteMethod:function(e){this.dataSet=this.rows.filter((function(t){return t.policy_set_number.toLowerCase().indexOf(e.toLowerCase())>-1||t.policy_set_description.toLowerCase().indexOf(e.toLowerCase())>-1}))},getDataRows:function(e){var t=this;this.loading=!0,axios.get("/ir/ajax/lov/policy-set-header",{params:e}).then((function(e){var a=e.data;t.loading=!1,t.check?t.dataSet=t.rows=a.data.filter((function(e){return e.meaning.toLowerCase()==t.check.toLowerCase()})):t.dataSet=t.rows=a.data})).catch((function(e){swal("Error",e,"error")}))},onfocus:function(){this.getDataRows({policy_set_header_id:"",keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},onchange:function(e){console.log("onchange ",e),this.$emit("change-lov",e)}},mounted:function(){console.log("mounted policy_set_header_id ",this.value),this.result=this.value?+this.value:this.value,this.getDataRows({policy_set_header_id:this.value,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},watch:{value:function(e,t){this.result=e?+e:e,this.getDataRows({policy_set_header_id:e,keyword:"",type:this.fixTypeFr,type2:this.fixTypeSc})},disabled:function(){this.isDisabled=this.disabled}}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el_field"},[a("el-select",{attrs:{placeholder:e.placeholder,name:e.name,"remote-method":e.remoteMethod,loading:e.loading,remote:"",clearable:!0,filterable:"",size:e.size,"popper-append-to-body":e.popperBody,disabled:e.isDisabled},on:{focus:e.onfocus,change:e.onchange},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.dataSet,(function(e,t){return a("el-option",{key:t,attrs:{label:e.policy_set_number+": "+e.policy_set_description,value:e.policy_set_header_id}})})),1)],1)}),[],!1,null,null,null).exports}}]);