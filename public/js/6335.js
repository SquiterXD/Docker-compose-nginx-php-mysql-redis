(self.webpackChunk=self.webpackChunk||[]).push([[6335],{72486:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(23645),s=n.n(a)()((function(t){return t[1]}));s.push([t.id,".sticky-col{position:sticky;background-color:#f7f7f7;z-index:9999}.first-col{min-width:100px;left:0}.first-col,.second-col{width:150px;max-width:150px}.second-col{min-width:150px;left:116px}.th-col{width:250px;min-width:150px;max-width:250px;left:266px}.fo-col{left:416px}.fi-col,.fo-col{width:200px;min-width:150px;max-width:200px}.fi-col{left:566px}.t1-col{left:0}.t1-col,.t2-col{width:200px;min-width:150px;max-width:200px}.t2-col{left:566px}",""]);const r=s},66335:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>P});var a=n(87757),s=n.n(a),r=n(30381),i=n.n(r),l=(n(23570),n(80455)),o=n.n(l);const c={props:["plan","workingHoliday","pWorkingHourEdit","canEdit"],data:function(){return{hour:this.plan.working_hour,workingHour:[],workingHourEdit:this.pWorkingHourEdit,oldWkh:this.plan.working_hour}},mounted:function(){},methods:{changeHour:function(){var t=this;console.log(t.plan.working_hour),t.oldWkh=t.plan.working_hour,t.plan.working_hour=t.hour,Vue.set(t.workingHourEdit,t.plan.biweekly_id+"|"+t.plan.division_code+"|"+t.plan.working_date,Number(t.hour))}},computed:{orderedWorkingHour:function(){return _.orderBy(this.workingHoliday,["attribute1"])}},watch:{canEdit:function(t){0==t&&(this.plan.working_hour=this.oldWkh,this.hour=this.oldWkh)}}};var d=n(51900);const u=(0,d.Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-select",{attrs:{placeholder:"Hour",size:"small",disabled:!t.canEdit},on:{change:t.changeHour},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}},t._l(t.workingHoliday,(function(t){return n("el-option",{key:t.attribute1,attrs:{label:t.attribute1,value:t.attribute1}})})),1)],1)}),[],!1,null,null,null).exports;const m={components:{VueNumeric:o()},props:["plan","time","otPercent","value","pOtPercentEdit","canEdit"],data:function(){return{percent:this.value,otPercentEdit:this.pOtPercentEdit,oldPercent:this.value}},mounted:function(){},methods:{changeOTPercent:function(){var t=this;t.oldPercent=t.value,t.otPercent[t.time][t.plan.ot_plan_id]=t.percent,Vue.set(t.otPercentEdit,t.time+"|"+t.plan.department_code+"|"+t.plan.employee_type,t.percent)}}};function p(t,e,n,a,s,r,i){try{var l=t[r](i),o=l.value}catch(t){return void n(t)}l.done?e(o):Promise.resolve(o).then(a,s)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(a,s){var r=t.apply(e,n);function i(t){p(r,a,s,i,l,"next",t)}function l(t){p(r,a,s,i,l,"throw",t)}i(void 0)}))}}const v={components:{workingHour:u,otPercent:(0,d.Z)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{precision:2,minus:!1,min:0,max:100,disabled:t.canEdit},on:{change:function(e){return t.changeOTPercent()},blur:function(e){return t.changeOTPercent()}},model:{value:t.percent,callback:function(e){t.percent=e},expression:"percent"}})],1)}),[],!1,null,null,null).exports,VueNumeric:o()},props:["departments","url","workingHoliday","btnTrans","dateArr","defaultInput","search","otMain","colorCode"],data:function(){return{otPlans:[],otPlanBiWeekly:[],otPercent:[],hourlyWage:[],hourIncrease:[],defaultRate:[],otAmount:[],otTimeDesc:[],department:this.defaultInput.department,workingHourEdit:{},otPercentEdit:{},valid_action:!1,canEdit:!1,loadingOTPlan:"",loadingOTPlanBiWeekly:"",checkDate:{current_date:"",start_date:"",end_date:""},isNotDisableControl:!1,summary:[],summaryAll:[]}},mounted:function(){Object.values(this.search).length>0&&this.otMain&&(this.getOTPlan(),this.getDateByBiWeekly())},computed:{},watch:{},methods:{getOTPlan:function(){var t=this;return h(s().mark((function e(){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t).$emit("department",n.department),!n.valid_action){e.next=5;break}return swal({title:"เปลี่ยนแปลงข้อมูลชั่วโมงการทำงาน",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.abrupt("return");case 5:return n.otPlans=[],n.loadingOTPlan=' <div class="m-t-lg m-b-lg">                            <div class="text-center sk-spinner sk-spinner-wave">                                <div class="sk-rect1"></div>                                <div class="sk-rect2"></div>                                <div class="sk-rect3"></div>                                <div class="sk-rect4"></div>                                <div class="sk-rect5"></div>                            </div>                        </div>',a={department:n.department},e.next=10,axios.post(n.url.ajax_get_ot_plan,{params:a}).then((function(t){console.log(t.data),"S"==t.data.status&&(n.otPlans=t.data.otPlans,n.otPlanBiWeekly=t.data.otPlanBiWeekly,n.otPercent=t.data.otPercent,n.hourlyWage=t.data.hourlyWage,n.hourIncrease=t.data.hourIncrease,n.defaultRate=t.data.defaultRate,n.otAmount=t.data.otAmount,n.otTimeDesc=t.data.otTimeDesc,n.summary=t.data.summary,n.summaryAll=t.data.summaryAll,n.otPercentEdit={},n.workingHourEdit={},n.valid_action=!1)})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.message+"</span>",type:"warning",html:!0})})).then((function(){n.loadingOTPlan=""}));case 10:case"end":return e.stop()}}),e)})))()},updateOTPlan:function(){var t=this;return h(s().mark((function e(){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,!(Object.values(n.workingHourEdit).length<=0)){e.next=4;break}return swal({title:"เปลี่ยนแปลงข้อมูลชั่วโมงการทำงาน",text:'<span style="font-size: 16px; text-align: left;"> ไม่มีการเปลี่ยนแปลงข้อมูลชั่วโมงการทำงาน </span>',type:"warning",html:!0}),e.abrupt("return");case 4:return n.canEdit=!1,n.otPlanBiWeekly=[],n.otPercent=[],n.hourlyWage=[],n.hourIncrease=[],n.defaultRate=[],n.otAmount=[],n.otTimeDesc=[],n.loadingOTPlan=' <div class="m-t-lg m-b-lg">                            <div class="text-center sk-spinner sk-spinner-wave">                                <div class="sk-rect1"></div>                                <div class="sk-rect2"></div>                                <div class="sk-rect3"></div>                                <div class="sk-rect4"></div>                                <div class="sk-rect5"></div>                            </div>                        </div>',a={department:n.department,workingHour:n.workingHourEdit},e.next=16,axios.post(n.url.ajax_update_ot_plan,{params:a}).then((function(t){console.log(t.data),"S"==t.data.status?(n.otPlanBiWeekly=t.data.otPlanBiWeekly,n.otPercent=t.data.otPercent,n.hourlyWage=t.data.hourlyWage,n.hourIncrease=t.data.hourIncrease,n.defaultRate=t.data.defaultRate,n.otAmount=t.data.otAmount,n.otTimeDesc=t.data.otTimeDesc,n.summary=t.data.summary,n.summaryAll=t.data.summaryAll,n.workingHourEdit={},n.valid_action=!1):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.message+"</span>",type:"warning",html:!0})})).then((function(){n.loadingOTPlan=""}));case 16:case"end":return e.stop()}}),e)})))()},updateOTPercent:function(){var t=this;return h(s().mark((function e(){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,!(Object.values(n.otPercentEdit).length<=0)){e.next=4;break}return swal({title:"เปลี่ยนแปลงข้อมูล OT Percent",text:'<span style="font-size: 16px; text-align: left;"> ไม่มีการเปลี่ยนแปลงข้อมูล OT Percent </span>',type:"warning",html:!0}),e.abrupt("return");case 4:return n.otPlanBiWeekly=[],n.otPercent=[],n.hourlyWage=[],n.hourIncrease=[],n.defaultRate=[],n.otAmount=[],n.otTimeDesc=[],n.loadingOTPlanBiWeekly=' <div class="m-t-lg m-b-lg">                            <div class="text-center sk-spinner sk-spinner-wave">                                <div class="sk-rect1"></div>                                <div class="sk-rect2"></div>                                <div class="sk-rect3"></div>                                <div class="sk-rect4"></div>                                <div class="sk-rect5"></div>                            </div>                        </div>',a={department:n.department,otPercent:n.otPercentEdit},e.next=15,axios.post(n.url.ajax_update_ot_percent,{params:a}).then((function(t){console.log(t.data),"S"==t.data.status?(n.otPlanBiWeekly=t.data.otPlanBiWeekly,n.otPercent=t.data.otPercent,n.hourlyWage=t.data.hourlyWage,n.hourIncrease=t.data.hourIncrease,n.defaultRate=t.data.defaultRate,n.otAmount=t.data.otAmount,n.otTimeDesc=t.data.otTimeDesc,n.summary=t.data.summary,n.summaryAll=t.data.summaryAll,n.otPercentEdit={},n.valid_action=!1):swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"warning",html:!0})})).catch((function(t){swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.message+"</span>",type:"warning",html:!0})})).then((function(){n.loadingOTPlanBiWeekly=""}));case 15:case"end":return e.stop()}}),e)})))()},editWorkingHour:function(t){this.valid_action=t,this.canEdit=t},getDateByBiWeekly:function(){var t=this,e=t.otMain.pp_bi_weekly.start_date,n=t.otMain.pp_bi_weekly.end_date,a=i()().format("YYYY-MM-DD");t.checkDate.current_date=a,t.checkDate.start_date=i()(e).format("YYYY-MM-DD"),t.checkDate.end_date=i()(n).format("YYYY-MM-DD"),t.checkDate.current_date>t.checkDate.start_date&&t.checkDate.current_date>t.checkDate.end_date&&(t.isNotDisableControl=!0)},getDepartment:function(t){var e="";return this.departments.filter((function(n){t==n.department_code&&(e=n.department_name)})),e},getDepartmentGroup:function(t){var e=t.split("  ");return""==e[1]?t:e[1]}}};n(30981);const f=(0,d.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[Object.values(t.search).length>0&&t.otMain?[""!=t.loadingOTPlan?[n("div",{domProps:{innerHTML:t._s(t.loadingOTPlan)}})]:t.otPlans.length<=0?[t._m(0)]:[n("div",{staticClass:"row col-12 mb-3"},[n("div",{staticClass:"col-md-6 p-0"},[n("label",{staticClass:"tw-font-bold tw-uppercase mb-1 ml-1"},[t._v(" หน่วยงาน ")]),t._v(" "),n("div",[n("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"Department",size:"medium"},on:{change:t.getOTPlan},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},t._l(t.departments,(function(t){return n("el-option",{key:t.department_code,attrs:{label:t.department_code+": "+t.department_name,value:t.department_code}})})),1)],1)]),t._v(" "),n("div",{staticClass:"col-md-6  p-0 text-right"},[t.canEdit||t.isNotDisableControl?t._e():n("button",{class:t.btnTrans.edit.class+" btn-lg tw-w-25",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.editWorkingHour(t.canEdit=!t.canEdit)}}},[n("i",{class:t.btnTrans.edit.icon}),t._v(" แก้ไขชั่วโมงการทำงาน\n                    ")]),t._v(" "),t.canEdit?n("button",{class:t.btnTrans.confirm.class+" btn-lg tw-w-25",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.updateOTPlan(e)}}},[n("i",{class:t.btnTrans.confirm.icon}),t._v(" ยืนยันชั่วโมงการทำงาน\n                    ")]):t._e(),t._v(" "),t.canEdit?n("button",{class:t.btnTrans.cancel.class+" btn-lg tw-w-25",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.editWorkingHour(t.canEdit=!t.canEdit)}}},[n("i",{class:t.btnTrans.cancel.icon}),t._v(" ยกเลิก\n                    ")]):t._e()])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-bordered table-hover",staticStyle:{width:"50%","max-height":"370px",display:"block",overflow:"auto",position:"sticky"}},[t._m(1),t._v(" "),n("tbody",t._l(t.otPlans,(function(e,a){return n("tr",[n("td",{staticClass:"text-center",style:"Y"==e.holiday_flag?"background-color: #ddd;":"P"==e.holiday_flag?"background-color: #cccccc;":""},[t._v("\n                                "+t._s(t.dateArr[e.workdy])+"\n                            ")]),t._v(" "),n("td",{staticClass:"text-center",style:"Y"==e.holiday_flag?"background-color: #ddd;":"P"==e.holiday_flag?"background-color: #cccccc;":""},[t._v("\n                                "+t._s(e.working_date_at_format)+"\n                            ")]),t._v(" "),n("td",{staticClass:"text-center",style:"Y"==e.holiday_flag?"background-color: #ddd;":"P"==e.holiday_flag?"background-color: #cccccc;":""},[n("workingHour",{attrs:{plan:e,workingHoliday:t.workingHoliday,pWorkingHourEdit:t.workingHourEdit,canEdit:t.canEdit}})],1)])})),0)])])],t._v(" "),n("div",{staticClass:"hr-line-dashed"}),t._v(" "),""!=t.loadingOTPlan?[n("div")]:""!=t.loadingOTPlanBiWeekly?[n("div",{domProps:{innerHTML:t._s(t.loadingOTPlanBiWeekly)}})]:[Object.values(t.otPlanBiWeekly).length>0?n("div",{staticClass:"row mr-2 mb-2 pull-right"},[t.canEdit||t.isNotDisableControl?t._e():n("button",{class:t.btnTrans.confirm.class+" btn-lg tw-w-25",staticStyle:{"padding-left":"7px"},on:{click:function(e){return e.preventDefault(),t.updateOTPercent(e)}}},[n("i",{class:t.btnTrans.confirm.icon}),t._v(" คำนวณค่าใช้จ่ายล่วงเวลา\n                ")])]):t._e(),t._v(" "),n("div",{staticClass:"table-responsive m-t"},[n("table",{staticClass:"table table-bordered table-hover text-nowrap"},[n("thead",[n("tr",[n("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"15%"}},[t._v("\n                                    กลุ่ม / กองพนักงาน\n                                ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"12%"}},[t._v("\n                                    ประเภท\n                                ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"8%"}},[t._v("\n                                    จำนวน\n                                ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{rowspan:"2",width:"8%"}},[t._v("\n                                    ค่าแรง\n                                ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{colspan:"2",width:"12%"}},[t._v("\n                                    เสาร์ / อาทิตย์ / นักขัตฤกษ์\n                                ")]),t._v(" "),t._l(t.otTimeDesc,(function(e,a){return[n("th",{staticClass:"text-center",style:"background-color: "+t.colorCode[a]+"; border-right: 2px solid #646464;",attrs:{colspan:"5",width:"15%"}},[t._v("\n                                        "+t._s(e)+" น.\n                                    ")])]}))],2),t._v(" "),n("tr",[n("th",{staticClass:"text-center",attrs:{width:"8%"}},[t._v("\n                                    ชม. ผลิตเพิ่ม\n                                ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"8%"}},[t._v("\n                                    ค่าล่วงเวลา\n                                ")]),t._v(" "),t._l(t.otTimeDesc,(function(e){return[n("th",{staticClass:"text-center",attrs:{width:"10%"}},[t._v("\n                                        % ทำงานล่วงเวลา\n                                    ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"8%"}},[t._v("\n                                        ค่าแรง OT/ชม.\n                                    ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"8%"}},[t._v("\n                                        ชม. ผลิตเพิ่ม\n                                    ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"8%"}},[t._v("\n                                        คิด 1.5 เท่า\n                                    ")]),t._v(" "),n("th",{staticClass:"text-center",staticStyle:{"border-right":"2px solid #646464"},attrs:{width:"8%"}},[t._v("\n                                        ค่าล่วงเวลา\n                                    ")])]}))],2)]),t._v(" "),n("tbody",[t.otPlanBiWeekly.length<=0?[t._m(2)]:[t._l(t.otPlanBiWeekly,(function(e,a){return[n("tr",[n("td",{staticClass:"text-left",attrs:{rowspan:e.length+1}},[n("div",[t._v(" "+t._s(t.getDepartmentGroup(a))+" ")])])]),t._l(e,(function(e){return n("tr",[n("td",{staticClass:"text-center"},[t._v("\n                                                "+t._s(e.employee_type_name)+"\n                                            ")]),t._v(" "),n("td",{staticClass:"text-center"},[t._v("\n                                                "+t._s(e.employee_qty)+"\n                                            ")]),t._v(" "),n("td",{staticClass:"text-right"},[t._v("\n                                                "+t._s(e.ot_perhour)+"\n                                            ")]),t._v(" "),n("td",{staticClass:"text-center"},[t._v("\n                                                "+t._s(e.ot_hour)+"\n                                            ")]),t._v(" "),n("td",{staticClass:"text-right"},[t._v("\n                                                "+t._s(t._f("number2Digit")(e.ot_holiday))+"\n                                            ")]),t._v(" "),t._l(t.otTimeDesc,(function(a){return[n("td",{staticClass:"text-center"},[n("otPercent",{attrs:{plan:e,time:a,otPercent:t.otPercent,value:t.otPercent[a][e.department_code+"|"+e.employee_type],pOtPercentEdit:t.otPercentEdit,canEdit:t.canEdit||t.isNotDisableControl}})],1),t._v(" "),n("td",{staticClass:"text-right"},[t._v("\n                                                    "+t._s(t._f("number2Digit")(t.hourlyWage[a][e.department_code+"|"+e.employee_type]))+"\n                                                ")]),t._v(" "),n("td",{staticClass:"text-center"},[t._v("\n                                                    "+t._s(t.hourIncrease[a][e.department_code+"|"+e.employee_type])+"\n                                                ")]),t._v(" "),n("td",{staticClass:"text-center"},[t._v("\n                                                    "+t._s(t.defaultRate[a][e.department_code+"|"+e.employee_type])+"\n                                                ")]),t._v(" "),n("td",{staticClass:"text-right",staticStyle:{"border-right":"2px solid #646464"}},[t._v("\n                                                    "+t._s(t._f("number2Digit")(t.otAmount[a][e.department_code+"|"+e.employee_type]))+"\n                                                ")])]}))],2)}))]})),t._v(" "),n("tr",{staticStyle:{"background-color":"#34d399"}},[n("th",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("\n                                        รวมหน่วยงาน : "+t._s(t.getDepartment(t.department))+"\n                                    ")]),t._v(" "),t._l(t.otTimeDesc,(function(e){return[n("th",{staticClass:"text-center"},[t._v("\n                                            -\n                                        ")]),t._v(" "),n("th",{staticClass:"text-right"},[t._v("\n                                            "+t._s(t._f("number2Digit")(t.summary[e].hourly_wage))+"\n                                        ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n                                            "+t._s(t._f("number0Digit")(t.summary[e].hour_increase))+"\n                                        ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n                                            -\n                                        ")]),t._v(" "),n("th",{staticClass:"text-right",staticStyle:{"border-right":"2px solid #646464"}},[t._v("\n                                            "+t._s(t._f("number2Digit")(t.summary[e].ot_amount))+"\n                                        ")])]}))],2),t._v(" "),n("tr",{staticStyle:{"background-color":"#34d399"}},[n("th",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("\n                                        รวมทุกหน่วยงาน\n                                    ")]),t._v(" "),t._l(t.otTimeDesc,(function(e){return[n("th",{staticClass:"text-center"},[t._v("\n                                            -\n                                        ")]),t._v(" "),n("th",{staticClass:"text-right"},[t._v("\n                                            "+t._s(t._f("number2Digit")(t.summaryAll[e].hourly_wage))+"\n                                        ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n                                            "+t._s(t._f("number0Digit")(t.summaryAll[e].hour_increase))+"\n                                        ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n                                            -\n                                        ")]),t._v(" "),n("th",{staticClass:"text-right",staticStyle:{"border-right":"2px solid #646464"}},[t._v("\n                                            "+t._s(t._f("number2Digit")(t.summaryAll[e].ot_amount))+"\n                                        ")])]}))],2)]],2)])])]]:t._e()],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 text-center"},[n("h2",[t._v(" ไม่พบข้อมูลที่ค้นหาในระบบ ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",{staticStyle:{height:"50px"}},[n("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle","min-width":"50px",position:"sticky",top:"0","z-index":"9999"},attrs:{width:"12%"}},[t._v("\n                                วัน\n                            ")]),t._v(" "),n("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle","min-width":"50px",position:"sticky",top:"0","z-index":"9999"},attrs:{width:"12%"}},[t._v("\n                                วันที่\n                            ")]),t._v(" "),n("th",{staticClass:"text-center",staticStyle:{"vertical-align":"middle","min-width":"50px",position:"sticky",top:"0","z-index":"9999"},attrs:{width:"10%"}},[t._v("\n                                ชั่วโมงการทำงาน\n                            ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{colspan:"21"}},[n("h2",[t._v(" ไม่มีข้อมูลประมาณการคำนวณค่าใช้จ่ายล่วงเวลา ")])])])}],!1,null,null,null).exports;const g={components:{VueNumeric:o()},props:["department","pBudgetBiWeekly"],data:function(){return{amount:0,budgetBiWeekly:this.pBudgetBiWeekly}},mounted:function(){this.changeInputAmount()},methods:{changeInputAmount:function(){var t=this;Vue.set(t.budgetBiWeekly,t.department.department_code+"|"+t.department.employee_type+"|budget",t.amount)}}};const b=(0,d.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{precision:2,minus:!1,min:0,max:9999999999},on:{change:function(e){return t.changeInputAmount()},blur:function(e){return t.changeInputAmount()}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)}),[],!1,null,null,null).exports;const y={components:{VueNumeric:o()},props:["department","pBudgetBiWeekly"],data:function(){return{amount:0,budgetBiWeekly:this.pBudgetBiWeekly}},mounted:function(){this.changeInputAmount()},methods:{changeInputAmount:function(){var t=this;Vue.set(t.budgetBiWeekly,t.department.department_code+"|"+t.department.employee_type+"|biweekly",t.amount)}}};function k(t,e,n,a,s,r,i){try{var l=t[r](i),o=l.value}catch(t){return void n(t)}l.done?e(o):Promise.resolve(o).then(a,s)}const w={components:{inputBudget:b,inputBudgetBiWeekly:(0,d.Z)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{precision:2,minus:!1,min:0,max:9999999999},on:{change:function(e){return t.changeInputAmount()},blur:function(e){return t.changeInputAmount()}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)}),[],!1,null,null,null).exports},props:["departments","search","btnTrans","url","selDepartment"],data:function(){return{loading:!1,budgetBiWeekly:{}}},mounted:function(){},methods:{openModal:function(){$("#modal-ot-report").modal("show")},submit:function(){var t,e=this;return(t=s().mark((function t(){var n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).loading=!0,a={budgetBiWeekly:n.budgetBiWeekly},t.next=5,axios.post(n.url.ajax_submit_budget_ot_plan,a).then((function(t){if("S"==t.data.status){var e=n.url.ajax_report_ot_plan+"?department="+n.selDepartment;window.open(e,"_blank")}else swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+t.data.msg+"</span>",type:"error",html:!0})})).catch((function(t){var e=t.response.data.data;swal({title:"มีข้อผิดพลาด",text:'<span style="font-size: 16px; text-align: left;">'+e+"</span>",type:"error",html:!0})})).then((function(){n.loading=!1}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,s){var r=t.apply(e,n);function i(t){k(r,a,s,i,l,"next",t)}function l(t){k(r,a,s,i,l,"throw",t)}i(void 0)}))})()}}};function x(t,e,n,a,s,r,i){try{var l=t[r](i),o=l.value}catch(t){return void n(t)}l.done?e(o):Promise.resolve(o).then(a,s)}const C={components:{otPlan:f,modalReportOt:(0,d.Z)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("button",{class:t.btnTrans.print.class+" btn-lg tw-w-25",staticStyle:{"padding-left":"7px"},on:{click:t.openModal}},[n("i",{class:t.btnTrans.print.icon}),t._v(" พิมพ์\n    ")]),t._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"modal-ot-report",role:"dialog"}},[n("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"980px"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content"},[t._m(0),t._v(" "),n("div",{staticClass:"modal-body text-left"},[n("form",{attrs:{id:"machine-downtime-form"}},[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",{staticClass:"text-center",attrs:{width:"12%"}},[t._v(" หน่วยงาน ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"12%"}},[t._v(" ประเภทพนักงาน ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"13%"}},[t._v(" \n                                            กรอบงบประมาณค่าล่วงเวลา "),n("br"),t._v(" ที่ผ่านการกลั่นกรองปีงบประมาณ "+t._s(t.search.budget_year)+" "),n("br"),t._v(" (บาท)\n                                        ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"13%"}},[1==t.search.bi_weekly?[t._v("\n                                                ประมาณการใช้งบประมาณ "),n("br"),t._v(" ปักษ์ที่ 1 "),n("br"),t._v(" (บาท)\n                                            ")]:[t._v("\n                                                ประมาณการใช้งบประมาณ "),n("br"),t._v(" ปักษ์ที่ 1 - "+t._s(t.search.bi_weekly-1)+" "),n("br"),t._v(" (บาท)\n                                            ")]],2)])]),t._v(" "),n("tbody",[t._l(t.departments,(function(e,a){return[n("tr",[n("td",{staticClass:"text-center",attrs:{rowspan:e.length+1}},[t._v("\n                                                "+t._s(a)+"\n                                            ")])]),t._l(e,(function(e){return n("tr",[n("td",{staticClass:"text-center"},[t._v("\n                                                    "+t._s(e.employee_type_name)+"\n                                                ")]),t._v(" "),n("td",{staticClass:"text-center"},[n("inputBudget",{attrs:{department:e,pBudgetBiWeekly:t.budgetBiWeekly}})],1),t._v(" "),n("td",{staticClass:"text-center"},[n("inputBudgetBiWeekly",{attrs:{department:e,pBudgetBiWeekly:t.budgetBiWeekly}})],1)])}))]}))],2)])])])]),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{class:t.btnTrans.print.class+" btn-lg tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submit()}}},[n("i",{class:t.btnTrans.print.icon}),t._v(" "+t._s(t.btnTrans.print.text)+"\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-white btn-lg tw-w-25'",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-header"},[n("h3",{staticClass:"modal-title text-left",staticStyle:{"font-size":"24px","font-weight":"400"}},[t._v("\n                        รายงานประมาณการค่าใช้จ่ายล่วงเวลาประจำปักษ์\n                    ")]),t._v(" "),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),n("span",{staticClass:"sr-only"},[t._v("Close")])])])}],!1,null,null,null).exports},props:["search","otMain","workingHour","workingHoliday","productTypes","defaultInput","searchInput","budgetYears","biWeeklyDetails","dateFormat","btnTrans","url","departments","dateArr","colorCode","deptReports"],data:function(){return{budget_year:Object.values(this.search).length>0?String(this.search.budget_year):this.defaultInput.current_year,month:Object.values(this.search).length>0?String(this.search.month):"",bi_weekly:Object.values(this.search).length>0?String(this.search.bi_weekly):"",month_lists:[],bi_weekly_lists:[],bi_weekly_detail:"",loading:!1,valid:!1,m_loading:!1,b_loading:!1,errors:{budget_year:!1,month:!1,bi_weekly:!1},set_budget_year:Object.values(this.search).length>0?String(this.search.budget_year):this.defaultInput.current_year,set_month:Object.values(this.search).length>0?String(this.search.month):"",set_bi_weekly:Object.values(this.search).length>0?String(this.search.bi_weekly):"",sel_department:""}},mounted:function(){this.budget_year&&this.getMonth(),this.budget_year&&this.month&&this.bi_weekly&&(this.getMonth(),this.getBiWeeklySeq()),this.getBiWeeklyDetail()},computed:{monthLists:function(){return this.month_lists},biWeeklyLists:function(){return this.bi_weekly_lists}},watch:{errors:{handler:function(t){t.budget_year?this.setError("budget_year"):this.resetError("budget_year"),t.month?this.setError("month"):this.resetError("month"),t.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{getMonth:function(){var t=this;t.search?t.set_budget_year!=t.budget_year&&(t.month="",t.bi_weekly="",t.bi_weekly_detail=""):(t.month="",t.bi_weekly="",t.bi_weekly_detail=""),t.month_lists=t.searchInput.months},getBiWeeklySeq:function(){var t=this;t.search&&t.set_month==t.month&&t.set_bi_weekly==t.bi_weekly||(t.bi_weekly="",t.bi_weekly_detail=""),t.bi_weekly_lists=t.searchInput.bi_weekly.filter((function(e){return e.period_num==t.month}))},getBiWeeklyDetail:function(){var t=this;""!=t.biWeekly&&null!=t.biWeekly||(t.biWeeklyDetail=""),t.biWeeklyDetails.filter((function(e){if(e.thai_year==t.budget_year&&e.period_num==t.month&&e.biweekly==t.bi_weekly)return t.bi_weekly_detail=e.thai_combine_date}))},submit:function(){var t,e=this;return(t=s().mark((function t(){var n,a,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=$("#overtimes-form")).serialize(),a=!0,r="",e.errors.budget_year=!1,e.errors.month=!1,e.errors.bi_weekly=!1,$(n).find("div[id='el_explode_budget_year']").html(""),$(n).find("div[id='el_explode_month']").html(""),$(n).find("div[id='el_explode_bi_weekly']").html(""),""==e.budget_year&&(e.errors.budget_year=!0,a=!1,r="กรุณาเลือกปีงบประมาณ",$(n).find("div[id='el_explode_budget_year']").html(r)),""==e.month&&(e.errors.month=!0,a=!1,r="กรุณาเลือกเดือน",$(n).find("div[id='el_explode_month']").html(r)),""==e.bi_weekly&&(e.errors.bi_weekly=!0,a=!1,r="กรุณาเลือกปักษ์",$(n).find("div[id='el_explode_bi_weekly']").html(r)),a){t.next=15;break}return t.abrupt("return");case 15:e.loading=!0,n.submit();case 17:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,s){var r=t.apply(e,n);function i(t){x(r,a,s,i,l,"next",t)}function l(t){x(r,a,s,i,l,"throw",t)}i(void 0)}))})()},setError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style="border: 1px solid red;"},resetError:function(t){(this.$refs[t].$refs.reference?this.$refs[t].$refs.reference.$refs.input:this.$refs[t].$refs.textarea?this.$refs[t].$refs.textarea:this.$refs[t].$refs.input.$refs?this.$refs[t].$refs.input.$refs.input:this.$refs[t].$refs.input).style=""},selDepartment:function(t){this.sel_department=t}}};const P=(0,d.Z)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ibox float-e-margins mb-2"},[n("div",{staticClass:"row col-12 m-0 mb-2"},[t._m(0),t._v(" "),n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2 text-right"},[n("button",{staticClass:"btn btn-white btn-lg",on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[n("i",{staticClass:"fa fa-search"}),t._v(" ค้นหา\n                ")]),t._v(" "),n("a",{staticClass:"btn btn-white btn-lg",attrs:{href:t.url.submit_p10}},[t._v("ล้าง")]),t._v(" "),n("modalReportOt",{attrs:{departments:t.deptReports,search:t.search,btnTrans:t.btnTrans,url:t.url,selDepartment:t.sel_department}})],1)]),t._v(" "),n("div",{staticClass:"card border-primary mb-3 mt-3"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("form",{attrs:{id:"overtimes-form",action:t.url.submit_p10}},[n("div",{staticClass:"row"},[n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[n("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ปีงบประมาณ ")]),t._v(" "),n("div",{staticClass:"input-group "},[n("input",{attrs:{type:"hidden",name:"budget_year"},domProps:{value:t.budget_year}}),t._v(" "),n("el-select",{ref:"budget_year",attrs:{size:"medium",placeholder:"ปีงบประมาณ",filterable:""},on:{change:t.getMonth},model:{value:t.budget_year,callback:function(e){t.budget_year=e},expression:"budget_year"}},t._l(t.budgetYears,(function(t,e){return n("el-option",{key:e,attrs:{label:t.thai_year,value:t.thai_year}})})),1)],1),t._v(" "),n("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})]),t._v(" "),n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[n("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" เดือน ")]),t._v(" "),n("div",{},[n("input",{attrs:{type:"hidden",name:"month"},domProps:{value:t.month}}),t._v(" "),t.budget_year?n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.m_loading,expression:"m_loading"}],ref:"month",attrs:{size:"medium",placeholder:"เดือน",filterable:""},on:{change:t.getBiWeeklySeq},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.monthLists,(function(t,e){return n("el-option",{key:e,attrs:{label:t.thai_month,value:t.period_num}})})),1):n("el-select",{ref:"month",attrs:{size:"medium",placeholder:"เดือน",disabled:""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.monthLists,(function(t,e){return n("el-option",{key:e,attrs:{label:t.thai_month,value:t.period_num}})})),1)],1),t._v(" "),n("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_month"}})]),t._v(" "),n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[n("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ปักษ์ ")]),t._v(" "),n("div",{},[n("input",{attrs:{type:"hidden",name:"bi_weekly"},domProps:{value:t.bi_weekly}}),t._v(" "),t.month?n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.b_loading,expression:"b_loading"}],ref:"bi_weekly",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",filterable:""},on:{change:t.getBiWeeklyDetail},model:{value:t.bi_weekly,callback:function(e){t.bi_weekly=e},expression:"bi_weekly"}},t._l(t.biWeeklyLists,(function(t,e){return n("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly}})})),1):n("el-select",{ref:"bi_weekly",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",disabled:""},model:{value:t.bi_weekly,callback:function(e){t.bi_weekly=e},expression:"bi_weekly"}},t._l(t.biWeeklyLists,(function(t,e){return n("el-option",{key:e,attrs:{label:t.biweekly,value:t.biweekly}})})),1)],1),t._v(" "),n("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly"}})]),t._v(" "),n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[n("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[t._v(" ประจำวันที่ ")]),t._v(" "),t.bi_weekly_detail?n("div",{staticClass:"p-1",staticStyle:{"font-size":"14px"}},[t._v("\n                                        "+t._s(t.bi_weekly_detail)+"\n                                    ")]):t._e()])])])])])])]),t._v(" "),[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 mt-3"},[n("otPlan",{attrs:{departments:t.departments,defaultInput:t.defaultInput,workingHoliday:t.workingHoliday,search:t.search,otMain:t.otMain,dateArr:t.dateArr,url:t.url,btnTrans:t.btnTrans,colorCode:t.colorCode},on:{department:t.selDepartment}})],1)])]],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-3"},[n("h3",[t._v(" ประมาณการค่าใช้จ่ายล่วงเวลาประจำปักษ์ ")])])}],!1,null,null,null).exports},30981:(t,e,n)=>{var a=n(72486);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(45346).Z)("6f843753",a,!0,{})}}]);