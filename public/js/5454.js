(self.webpackChunk=self.webpackChunk||[]).push([[5454],{29040:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var o=a(23645),r=a.n(o)()((function(t){return t[1]}));r.push([t.id,".vld-overlay,.vld-shown{overflow:hidden}.vld-overlay{bottom:0;left:0;position:absolute;right:0;top:0;align-items:center;display:none;justify-content:center;z-index:9999}.vld-overlay.is-active{display:flex}.vld-overlay.is-full-page{z-index:9999;position:fixed}.vld-overlay .vld-background{bottom:0;left:0;position:absolute;right:0;top:0;background:#fff;opacity:.5}.vld-overlay .vld-icon,.vld-parent{position:relative}",""]);const s=r},17390:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var o=a(23645),r=a.n(o)()((function(t){return t[1]}));r.push([t.id,".v--modal-overlay[data-v-8d582b76]{z-index:2000;padding-top:3rem;padding-bottom:3rem}.vm--overlay[data-modal=modal-search-allocate-year][data-v-8d582b76]{height:100%!important}",""]);const s=r},19371:(t,e,a)=>{"use strict";var o=a(93379),r=a.n(o),s=a(29040),n={insert:"head",singleton:!1};r()(s.Z,n),s.Z.locals},15454:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>k});var o=a(87757),r=a.n(o),s=a(7398),n=a.n(s),c=(a(19371),a(30381)),i=a.n(c),l=a(80455),u=a.n(l);function d(t,e,a,o,r,s,n){try{var c=t[s](n),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(o,r)}function p(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var s=t.apply(e,a);function n(t){d(s,o,r,n,c,"next",t)}function c(t){d(s,o,r,n,c,"throw",t)}n(void 0)}))}}const m={props:["periodYearValue","allocateGroupValue","stdcostYear","stdcostAccount","stdcostTargets"],components:{VueNumeric:u()},watch:{periodYearValue:function(t){this.periodYear=t},allocateGroupValue:function(t){this.allocateGroup=t},stdcostYear:function(t){this.stdcostYearData=t},stdcostAccount:function(t){this.stdcostAccountData=t},stdcostTargets:function(t){this.stdcostTargetItems=t}},data:function(){return{periodYear:this.periodYearValue,allocateGroup:this.allocateGroupValue,stdcostYearData:this.stdcostYear,stdcostAccountData:this.stdcostAccount,stdcostTargetItems:this.stdcostTargets}},mounted:function(){},computed:{},methods:{saveStdcostTarget:function(t,e,a){var o=this;return p(r().mark((function s(){var n,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n={period_year:o.periodYearData,input_stdcost_year:JSON.stringify(o.stdcostYearData),input_stdcost_account:JSON.stringify(t),input_stdcost_target:JSON.stringify(a)},o.isLoading=!0,!(c=o.validateBeforeSaveTarget(t,e,a)).valid){r.next=8;break}return r.next=6,axios.post("/ajax/ct/std-costs/target",n).then((function(t){var e=t.data.data,a=e.message;return e.status,"error"==e.status&&swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูล | ".concat(a),"error"),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูล | ".concat(t.message),"error")}));case 6:r.next=9;break;case 8:swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกข้อมูล | ".concat(c.message),"error");case 9:o.isLoading=!1;case 10:case"end":return r.stop()}}),s)})))()},validateBeforeSaveTarget:function(t,e,a){var o={valid:!0,message:""};return t.quantity&&t.ratio_rate||(o.valid=!1,o.message="กรอกข้อมูลรายการเป้าหมายการปันส่วนไม่ครบถ้วน กรุณาตรวจสอบ"),a.quantity&&a.ratio_rate||(o.valid=!1,o.message="กรอกข้อมูลรายการเป้าหมายการปันส่วนไม่ครบถ้วน กรุณาตรวจสอบ"),e.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)>parseFloat(t.quantity)&&(o.valid=!1,o.message="กรอกข้อมูลสัดส่วนเป้าหมายการปันส่วนไม่ถูกต้อง กรุณาตรวจสอบ"),e.reduce((function(t,e){return t+parseFloat(e.ratio_rate)}),0)>parseFloat(t.ratio_rate)&&(o.valid=!1,o.message="กรอกข้อมูล % เป้าหมายการปันส่วนไม่ถูกต้อง กรุณาตรวจสอบ"),o},onStdcostTargetQuantityChanged:function(t){var e=this;return p(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.saveStdcostTarget(e.stdcostAccountData,e.stdcostTargetItems,t);case 2:e.emitStdcostTargetsChanged();case 3:case"end":return a.stop()}}),a)})))()},onStdcostTargetRatioRateChanged:function(t){var e=this;return p(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.saveStdcostTarget(e.stdcostAccountData,e.stdcostTargetItems,t);case 2:e.emitStdcostTargetsChanged();case 3:case"end":return a.stop()}}),a)})))()},emitStdcostTargetsChanged:function(){this.$emit("onStdcostTargetsChanged",{stdcostTargets:this.stdcostTargetItems})},formatNumber:function(t){return t.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()}}};var _=a(51900);const g=(0,_.Z)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-pl-10"},[a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"600px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[a("thead",[a("tr",[a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"background-color":"#fff0e0","border-left":"0px","border-right":"0px"},attrs:{width:"20%"}},["DEPT"==t.allocateGroup?a("span",[t._v(" หน่วยงาน ")]):t._e(),t._v(" "),"COST"==t.allocateGroup?a("span",[t._v(" ศูนย์ต้นทุน ")]):t._e(),t._v(" "),"PRODUCT"==t.allocateGroup?a("span",[t._v(" กลุ่มสินค้า ")]):t._e()]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"background-color":"#fff0e0","border-left":"0px","border-right":"0px"},attrs:{width:"20%"}},[t._v(" รายละเอียด ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell tw-hidden",staticStyle:{"background-color":"#fff0e0","border-left":"0px","border-right":"0px"},attrs:{width:"15%"}},[t._v("  สัดส่วน % ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"background-color":"#fff0e0","border-left":"0px","border-right":"0px"},attrs:{width:"25%"}},[t._v(" ค่าใช้จ่ายประมาณการ ")])])]),t._v(" "),t.stdcostTargetItems.length>0?a("tbody",[t._l(t.stdcostTargetItems,(function(e,o){return[t._l(e.target_items,(function(e,r){return[a("tr",{key:o+"_"+r},[a("td",{staticClass:"text-center md:tw-table-cell",staticStyle:{"border-left":"0","border-right":"0"}},[t._v("\n                                "+t._s(e.target_code)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-left":"0","border-right":"0"}},[t._v("\n                                "+t._s(e.target_code_desc)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell tw-hidden",staticStyle:{"border-left":"0","border-right":"0"}},[t._v("\n                                "+t._s(e.ratio_rate)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0","border-right":"0"}},[t._v("\n                                "+t._s(e.estimate_expense_amount?Number(e.estimate_expense_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")])])]}))]}))],2):a("tbody",[t._m(0)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"5"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[t._v("ไม่พบข้อมูล")])])])}],!1,null,null,null).exports;function f(t,e,a,o,r,s,n){try{var c=t[s](n),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(o,r)}function v(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var s=t.apply(e,a);function n(t){f(s,o,r,n,c,"next",t)}function c(t){f(s,o,r,n,c,"throw",t)}n(void 0)}))}}function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){x(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function x(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const w={props:["periodYearValue","stdcostYear","stdcostAccounts","allocateTypes","listAllocateGroups","listDeptAllocateGroupCodes","listCostAllocateGroupCodes","listProductAllocateGroupCodes"],components:{Loading:n(),VueNumeric:u(),TableStdCostTargets:g},watch:{periodYearValue:function(t){this.periodYear=t},stdcostYear:function(t){this.stdcostYearData=t},stdcostAccounts:function(t){var e=this;this.stdcostAccountItems=t.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{reason_name:t.reason_name?t.reason_name:"",estimate_expense_amount:t.estimate_expense_amount?t.estimate_expense_amount:0,allocate_type_label:e.getAllocateTypeLabel(e.allocateTypes,t.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),this.deptStdcostAccountItems=t.filter((function(t){return"DEPT"==t.allocate_group})).map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{reason_name:t.reason_name?t.reason_name:"",estimate_expense_amount:t.estimate_expense_amount?t.estimate_expense_amount:0,allocate_type_label:e.getAllocateTypeLabel(e.allocateTypes,t.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),this.costStdcostAccountItems=t.filter((function(t){return"COST"==t.allocate_group})).map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{reason_name:t.reason_name?t.reason_name:"",estimate_expense_amount:t.estimate_expense_amount?t.estimate_expense_amount:0,allocate_type_label:e.getAllocateTypeLabel(e.allocateTypes,t.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),this.productStdcostAccountItems=t.filter((function(t){return"PRODUCT"==t.allocate_group})).map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{reason_name:t.reason_name?t.reason_name:"",estimate_expense_amount:t.estimate_expense_amount?t.estimate_expense_amount:0,allocate_type_label:e.getAllocateTypeLabel(e.allocateTypes,t.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})}))}},data:function(){var t=this;return{periodYear:this.periodYearValue,isTableDeptActive:!0,isTableCostActive:!1,isTableProductActive:!1,isTableDeptShowTargets:!1,isTableCostShowTargets:!1,isTableProductShowTargets:!1,selectedDeptAllocateGroupCode:"",selectedCostAllocateGroupCode:"",selectedProductAllocateGroupCode:"",filterDeptAllocateGroupCode:"",filterCostAllocateGroupCode:"",filterProductAllocateGroupCode:"",stdcostYearData:this.stdcostYear,stdcostAccountItems:this.stdcostAccounts.map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{reason_name:e.reason_name?e.reason_name:"",estimate_expense_amount:e.estimate_expense_amount?e.estimate_expense_amount:0,allocate_type_label:t.getAllocateTypeLabel(t.allocateTypes,e.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),deptStdcostAccountItems:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{reason_name:e.reason_name?e.reason_name:"",estimate_expense_amount:e.estimate_expense_amount?e.estimate_expense_amount:0,allocate_type_label:t.getAllocateTypeLabel(t.allocateTypes,e.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),costStdcostAccountItems:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{reason_name:e.reason_name?e.reason_name:"",estimate_expense_amount:e.estimate_expense_amount?e.estimate_expense_amount:0,allocate_type_label:t.getAllocateTypeLabel(t.allocateTypes,e.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),productStdcostAccountItems:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{reason_name:e.reason_name?e.reason_name:"",estimate_expense_amount:e.estimate_expense_amount?e.estimate_expense_amount:0,allocate_type_label:t.getAllocateTypeLabel(t.allocateTypes,e.allocate_type),is_show:!0,is_show_targets:!1,marked_as_deleted:!1})}))})})),stdcostTargets:[],totalEstimateExpenseAmount:this.stdcostAccounts.reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),deptTotalActualAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),deptTotalAvgActualAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),deptTotalBudgetAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),deptTotalEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),costTotalActualAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),costTotalAvgActualAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),costTotalBudgetAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),costTotalEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),productTotalActualAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),productTotalAvgActualAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),productTotalBudgetAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),productTotalEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),deptSumFilteredActualAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),deptSumFilteredAvgActualAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),deptSumFilteredBudgetAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),deptSumFilteredEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),costSumFilteredActualAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),costSumFilteredAvgActualAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),costSumFilteredBudgetAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),costSumFilteredEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),productSumFilteredActualAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),productSumFilteredAvgActualAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),productSumFilteredBudgetAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),productSumFilteredEstimateExpenseAmount:this.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),isLoading:!1}},mounted:function(){},computed:{},methods:{toggleShowTable:function(t){var e=this;this.isTableDeptActive=!1,this.isTableCostActive=!1,this.isTableProductActive=!1,this.deptStdcostAccountItems=this.deptStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{is_show:!0,is_show_targets:!1})}))})})),this.costStdcostAccountItems=this.costStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{is_show:!0,is_show_targets:!1})}))})})),this.productStdcostAccountItems=this.productStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){return b(b({},t),{},{is_show:!0,is_show_targets:!1})}))})})),this.$nextTick((function(){"DEPT"==t&&(e.isTableDeptActive=!0),"COST"==t&&(e.isTableCostActive=!0),"PRODUCT"==t&&(e.isTableProductActive=!0)}))},onGetStdcostTargets:function(t){var e=this;return v(r().mark((function a(){var o,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(o=e.validateBeforeGetTargets(t)).valid){a.next=20;break}if(e.stdcostTargets=[],s=!t.is_show_targets,t.is_show_targets=s,"DEPT"==t.allocate_group?e.deptStdcostAccountItems=e.deptStdcostAccountItems.map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{is_show_targets:e.target_account_code==t.target_account_code&&e.is_show_targets})}))})})):"COST"==t.allocate_group?e.costStdcostAccountItems=e.costStdcostAccountItems.map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{is_show_targets:e.target_account_code==t.target_account_code&&e.is_show_targets})}))})})):"PRODUCT"==t.allocate_group&&(e.productStdcostAccountItems=e.productStdcostAccountItems.map((function(e){return b(b({},e),{},{account_items:e.account_items.map((function(e){return b(b({},e),{},{is_show_targets:e.target_account_code==t.target_account_code&&e.is_show_targets})}))})}))),e.isTableDeptShowTargets=!1,e.isTableCostShowTargets=!1,e.isTableProductShowTargets=!1,e.selectedDeptAllocateGroupCode="",e.selectedCostAllocateGroupCode="",e.selectedProductAllocateGroupCode="",!s){a.next=18;break}return"DEPT"==t.allocate_group&&(e.isTableDeptShowTargets=!0,e.selectedDeptAllocateGroupCode=t.allocate_group_code),"COST"==t.allocate_group&&(e.isTableCostShowTargets=!0,e.selectedCostAllocateGroupCode=t.allocate_group_code),"PRODUCT"==t.allocate_group&&(e.isTableProductShowTargets=!0,e.selectedProductAllocateGroupCode=t.allocate_group_code),a.next=18,e.getStdcostTargets(e.stdcostYearData,t);case 18:a.next=21;break;case 20:swal("เกิดข้อผิดพลาด","".concat(o.message),"error");case 21:case"end":return a.stop()}}),a)})))()},getAllocateTypeLabel:function(t,e){var a="";if(t.length>0&&e){var o=t.find((function(t){return t.allocate_type_value==e}));a=o?o.allocate_type_label:""}return a},getAllocateGroupLevel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.level_no:""},getAllocateGroupLabel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.allocate_group_label:""},getStdcostTargets:function(t,e){var a=this;return v(r().mark((function o(){var s;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a.isLoading=!0,s={period_year:a.periodYear,input_stdcost_year:JSON.stringify(t),input_stdcost_account:JSON.stringify(e)},o.next=4,axios.get("/ajax/ct/std-costs/targets",{params:s}).then((function(t){var e=t.data.data;return"success"==e.status?a.stdcostTargets=e.stdcost_targets?JSON.parse(e.stdcost_targets):[]:swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูล | ".concat(e.message),"error"),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูล | ".concat(t.message),"error")}));case 4:a.isLoading=!1;case 5:case"end":return o.stop()}}),o)})))()},isAllowAddStdcostAccount:function(t){var e=!0;return t.filter((function(t){return t.is_new_line&&!t.estimate_expense_amount})).length>0&&(e=!1),e},saveStdcostAccount:function(t){var e=this;return v(r().mark((function a(){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={period_year:e.periodYear,input_stdcost_year:JSON.stringify(e.stdcostYear),input_stdcost_account:JSON.stringify(t)},e.isLoading=!0,a.next=4,axios.post("/ajax/ct/std-costs/account",o).then((function(t){var e=t.data.data,a=e.message;if("success"==e.status){var o=e.stdcost_account?JSON.parse(e.stdcost_account):null;console.log(o)}return"error"==e.status&&swal("เกิดข้อผิดพลาด","บันทึกข้อมูล | ".concat(a),"error"),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","บันทึกข้อมูล | ".concat(t.message),"error")}));case 4:e.isLoading=!1;case 5:case"end":return a.stop()}}),a)})))()},saveStdcostAccountExpense:function(t){var e=this;return v(r().mark((function a(){var o,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o={period_year:e.periodYear,input_stdcost_year:JSON.stringify(e.stdcostYear),input_stdcost_account:JSON.stringify(t)},e.isLoading=!0,!(s=e.validateBeforeSaveAccount(t)).valid){a.next=8;break}return a.next=6,axios.post("/ajax/ct/std-costs/account-expense",o).then((function(t){var e=t.data.data,a=e.message;if("success"==e.status){var o=e.stdcost_account?JSON.parse(e.stdcost_account):null;console.log(o)}return"error"==e.status&&swal("เกิดข้อผิดพลาด","บันทึกข้อมูล | ".concat(a),"error"),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","บันทึกข้อมูล | ".concat(t.message),"error")}));case 6:a.next=9;break;case 8:console.log("เกิดข้อผิดพลาด : บันทึกข้อมูล | ".concat(s.message));case 9:e.isLoading=!1;case 10:case"end":return a.stop()}}),a)})))()},validateBeforeGetTargets:function(t){return{valid:!0,message:""}},validateBeforeSaveAccount:function(t){var e={valid:!0,message:""};return void 0!==t.estimate_expense_amount&&null!=t.estimate_expense_amount||(e.valid=!1,e.message='ข้อมูล "ค่าใช้จ่ายประมาณการ" ไม่ถูกต้อง กรุณาตรวจสอบ'),e},onFilterDeptAllocateGroupCodeChanged:function(t){var e=this;this.filterDeptAllocateGroupCode=t,this.isTableDeptShowTargets=!1,this.selectedDeptAllocateGroupCode="",this.deptStdcostAccountItems=this.deptStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){var a=""==e.filterDeptAllocateGroupCode||e.filterDeptAllocateGroupCode==t.allocate_group_code;return b(b({},t),{},{is_show:a,is_show_targets:!1})}))})})),this.calFilteredSummaryAmount("DEPT")},onFilterCostAllocateGroupCodeChanged:function(t){var e=this;this.filterCostAllocateGroupCode=t,this.isTableCostShowTargets=!1,this.selectedCostAllocateGroupCode="",this.costStdcostAccountItems=this.costStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){var a=""==e.filterCostAllocateGroupCode||e.filterCostAllocateGroupCode==t.allocate_group_code;return b(b({},t),{},{is_show:a,is_show_targets:!1})}))})})),this.calFilteredSummaryAmount("COST")},onFilterProductAllocateGroupCodeChanged:function(t){var e=this;this.filterProductAllocateGroupCode=t,this.isTableProductShowTargets=!1,this.selectedProductAllocateGroupCode="",this.productStdcostAccountItems=this.productStdcostAccountItems.map((function(t){return b(b({},t),{},{account_items:t.account_items.map((function(t){var a=""==e.filterProductAllocateGroupCode||e.filterProductAllocateGroupCode==t.allocate_group_code;return b(b({},t),{},{is_show:a,is_show_targets:!1})}))})})),this.calFilteredSummaryAmount("PRODUCT")},calTotalSummaryAmount:function(t){var e=this;return v(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"DEPT"==t&&(e.deptTotalActualAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.deptTotalAvgActualAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.deptTotalBudgetAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.deptTotalEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0)),"COST"==t&&(e.costTotalActualAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.costTotalAvgActualAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.costTotalBudgetAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.costTotalEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0)),"COST"==t&&(e.productTotalActualAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.productTotalAvgActualAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.productTotalBudgetAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.productTotalEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0));case 3:case"end":return a.stop()}}),a)})))()},calFilteredSummaryAmount:function(t){var e=this;return v(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"DEPT"==t&&e.filterDeptAllocateGroupCode&&(e.deptSumFilteredActualAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group&&t.allocate_group_code==e.filterDeptAllocateGroupCode})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.deptSumFilteredAvgActualAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group&&t.allocate_group_code==e.filterDeptAllocateGroupCode})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.deptSumFilteredBudgetAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group&&t.allocate_group_code==e.filterDeptAllocateGroupCode})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.deptSumFilteredEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"DEPT"==t.allocate_group&&t.allocate_group_code==e.filterDeptAllocateGroupCode})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0)),"COST"==t&&e.filterCostAllocateGroupCode&&(e.costSumFilteredActualAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group&&t.allocate_group_code==e.filterCostAllocateGroupCode})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.costSumFilteredAvgActualAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group&&t.allocate_group_code==e.filterCostAllocateGroupCode})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.costSumFilteredBudgetAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group&&t.allocate_group_code==e.filterCostAllocateGroupCode})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.costSumFilteredEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"COST"==t.allocate_group&&t.allocate_group_code==e.filterCostAllocateGroupCode})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0)),"COST"==t&&e.filterProductAllocateGroupCode&&(e.productSumFilteredActualAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group&&t.allocate_group_code==e.filterProductAllocateGroupCode})).reduce((function(t,e){return t+(e.actual_amount?parseFloat(e.actual_amount):0)}),0),e.productSumFilteredAvgActualAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group&&t.allocate_group_code==e.filterProductAllocateGroupCode})).reduce((function(t,e){return t+(e.avg_actual_amount?parseFloat(e.avg_actual_amount):0)}),0),e.productSumFilteredBudgetAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group&&t.allocate_group_code==e.filterProductAllocateGroupCode})).reduce((function(t,e){return t+(e.budget_amount?parseFloat(e.budget_amount):0)}),0),e.productSumFilteredEstimateExpenseAmount=e.stdcostAccounts.filter((function(t){return"PRODUCT"==t.allocate_group&&t.allocate_group_code==e.filterProductAllocateGroupCode})).reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0));case 3:case"end":return a.stop()}}),a)})))()},onStdcostAccountEstimateExpenseAmountChanged:function(t,e){var a=this;return v(r().mark((function o(){var s,n;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=t.account_items.reduce((function(t,e){return t+(e.estimate_expense_amount?parseFloat(e.estimate_expense_amount):0)}),0),t.estimate_expense_amount=s,(n=a.stdcostAccounts.find((function(e){return e.allocate_group==t.allocate_group&&e.allocate_group_code==t.allocate_group_code})))&&(n.estimate_expense_amount=s),o.next=6,a.saveStdcostAccountExpense(e);case 6:e.is_show_targets&&a.onGetStdcostTargets(e),a.calTotalSummaryAmount(e.allocate_group),a.calFilteredSummaryAmount(e.allocate_group);case 9:case"end":return o.stop()}}),o)})))()},onStdcostAccountReasonNameChanged:function(t){var e=this;return v(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.saveStdcostAccount(t);case 2:t.is_show_targets&&e.onGetStdcostTargets(t);case 3:case"end":return a.stop()}}),a)})))()},onStdcostTargetsChanged:function(t){this.stdcostTargets=t.stdcostTargets},emitStdcostAccountsChanged:function(){this.$emit("onStdcostAccountsChanged",{stdcostAccounts:this.stdcostAccountItems})},formatNumber:function(t){return t.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()}}};const A=(0,_.Z)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"btn-group",attrs:{role:"group"}},[a("button",{staticClass:"tw-w-52 btn btn-lg",class:[t.isTableDeptActive?"btn-primary":"btn-white"],attrs:{type:"button"},on:{click:function(e){return t.toggleShowTable("DEPT")}}},[t._v(" "+t._s(t.getAllocateGroupLevel(t.listAllocateGroups,"DEPT"))+" : "+t._s(t.getAllocateGroupLabel(t.listAllocateGroups,"DEPT"))+" ")]),t._v(" "),a("button",{staticClass:"tw-w-52 btn btn-lg",class:[t.isTableCostActive?"btn-primary":"btn-white"],attrs:{type:"button"},on:{click:function(e){return t.toggleShowTable("COST")}}},[t._v(" "+t._s(t.getAllocateGroupLevel(t.listAllocateGroups,"COST"))+" : "+t._s(t.getAllocateGroupLabel(t.listAllocateGroups,"COST"))+" ")])])]),t._v(" "),t.isTableDeptActive&&t.listDeptAllocateGroupCodes.length>0?a("div",{staticClass:"row tw-my-2"},[a("label",{staticClass:"col-md-2 col-form-label tw-font-bold text-center tw-pl-4"},[t._v(" หน่วยงานที่ปัน : ")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("pm-el-select",{attrs:{name:"allocate_group_code",id:"input_allocate_group_code","select-options":t.listDeptAllocateGroupCodes,"option-key":"allocate_group_code_value","option-value":"allocate_group_code_value","option-label":"allocate_group_code_label",value:t.filterDeptAllocateGroupCode,filterable:!0},on:{onSelected:t.onFilterDeptAllocateGroupCodeChanged}})],1)]):t._e(),t._v(" "),t.isTableDeptActive?a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"600px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[t._m(0),t._v(" "),t.deptStdcostAccountItems.length>0?a("tbody",[t._l(t.deptStdcostAccountItems,(function(e,o){return[t._l(e.account_items,(function(r,s){return[r.is_show?a("tr",{key:o+"_"+s,style:s+1==e.count_account?"border-bottom : 2px solid rgb(179 179 179);":""},[0==s?a("td",{staticClass:"text-center md:tw-table-cell",staticStyle:{"border-bottom":"2px solid rgb(179 179 179)","border-left":"0","border-right":"0","vertical-align":"top !important"},attrs:{rowspan:e.count_account+1}},[t._v("\n                                "+t._s(r.allocate_group_code)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_account_code)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_sub_acc_code_desc)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.allocate_type_label)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.actual_amount?Number(r.actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.avg_actual_amount?Number(r.avg_actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.budget_amount?Number(r.budget_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"estimate_expense_amount_"+o,id:"input_estimate_expense_amount_"+o,disabled:t.isLoading},on:{blur:function(a){return t.onStdcostAccountEstimateExpenseAmountChanged(e,r)}},model:{value:r.estimate_expense_amount,callback:function(e){t.$set(r,"estimate_expense_amount",e)},expression:"deptAccountItem.estimate_expense_amount"}})],1),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[a("input",{directives:[{name:"model",rawName:"v-model",value:r.reason_name,expression:"deptAccountItem.reason_name"}],staticClass:"input-sm form-control",attrs:{type:"text",name:"reason_name",id:"input_reason_name",disabled:t.isLoading},domProps:{value:r.reason_name},on:{blur:function(e){return t.onStdcostAccountReasonNameChanged(r)},input:function(e){e.target.composing||t.$set(r,"reason_name",e.target.value)}}})]),t._v(" "),a("td",{staticClass:"text-center text-nowrap"},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-white",on:{click:function(e){return t.onGetStdcostTargets(r)}}},[a("i",{staticClass:"fa fa-list tw-mr-1"}),t._v(" เป้าหมายที่รับปัน\n                                ")])])]):t._e(),t._v(" "),r.is_show_targets?a("tr",{key:"targets_"+o+"_"+s},[a("td",{attrs:{colspan:"9"}},[a("table-std-cost-targets",{attrs:{"period-year-value":t.periodYear,"allocate-group-value":r.allocate_group,"stdcost-year":t.stdcostYearData,"stdcost-account":r,"stdcost-targets":t.stdcostTargets},on:{onStdcostTargetsChanged:t.onStdcostTargetsChanged}})],1)]):t._e(),t._v(" "),0!=s||t.isTableDeptShowTargets&&t.selectedDeptAllocateGroupCode==e.allocate_group_code?t._e():a("tr",{key:"targets_"+o+"_"+s},[a("td",{staticStyle:{padding:"0px","border-color":"#fff"},attrs:{colspan:"8"}})])]}))]}))],2):a("tbody",[t._m(1)])])]):t._e(),t._v(" "),t.isTableDeptActive&&t.deptStdcostAccountItems.length>0?a("div",[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[a("thead",[t.deptStdcostAccountItems.length>0?a("tr",[a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-right":"0"},attrs:{width:"31%",colspan:"3"}},[a("b",[t._v(" ประเภทการปันส่วน : "+t._s(t.getAllocateGroupLevel(t.listAllocateGroups,"DEPT"))+" "+t._s(t.getAllocateGroupLabel(t.listAllocateGroups,"DEPT"))+" ")])]),t._v(" "),t._m(2),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterDeptAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.deptSumFilteredActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.deptTotalActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterDeptAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.deptSumFilteredAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.deptTotalAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterDeptAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.deptSumFilteredBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.deptTotalBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"13%",colspan:"3"}},[t.filterDeptAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.deptSumFilteredEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.deptTotalEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell",attrs:{width:"20%"}})]):t._e()])])]):t._e(),t._v(" "),t.isTableCostActive&&t.listCostAllocateGroupCodes.length>0?a("div",{staticClass:"row tw-my-2"},[a("label",{staticClass:"col-md-2 col-form-label tw-font-bold text-center tw-pl-4"},[t._v(" หน่วยงานที่ปัน : ")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("pm-el-select",{attrs:{name:"allocate_group_code",id:"input_allocate_group_code","select-options":t.listCostAllocateGroupCodes,"option-key":"allocate_group_code_value","option-value":"allocate_group_code_value","option-label":"allocate_group_code_label",value:t.filterCostAllocateGroupCode,filterable:!0},on:{onSelected:t.onFilterCostAllocateGroupCodeChanged}})],1)]):t._e(),t._v(" "),t.isTableCostActive?a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"600px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[t._m(3),t._v(" "),t.costStdcostAccountItems.length>0?a("tbody",[t._l(t.costStdcostAccountItems,(function(e,o){return[t._l(e.account_items,(function(r,s){return[r.is_show?a("tr",{key:o+"_"+s,style:s+1==e.count_account?"border-bottom : 2px solid rgb(179 179 179);":""},[0==s?a("td",{staticClass:"text-center md:tw-table-cell",staticStyle:{"border-bottom":"2px solid rgb(179 179 179)","border-left":"0","border-right":"0","vertical-align":"top !important"},attrs:{rowspan:e.count_account+1}},[t._v("\n                                "+t._s(r.allocate_group_code)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_account_code)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_sub_acc_code_desc)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.allocate_type_label)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.actual_amount?Number(r.actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.avg_actual_amount?Number(r.avg_actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.budget_amount?Number(r.budget_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[a("vue-numeric",{staticClass:"form-control input-sm text-right",attrs:{separator:",",precision:2,minus:!1,name:"estimate_expense_amount_"+o,id:"input_estimate_expense_amount_"+o,disabled:t.isLoading},on:{blur:function(a){return t.onStdcostAccountEstimateExpenseAmountChanged(e,r)}},model:{value:r.estimate_expense_amount,callback:function(e){t.$set(r,"estimate_expense_amount",e)},expression:"costAccountItem.estimate_expense_amount"}})],1),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[a("input",{directives:[{name:"model",rawName:"v-model",value:r.reason_name,expression:"costAccountItem.reason_name"}],staticClass:"input-sm form-control",attrs:{type:"text",name:"reason_name",id:"input_reason_name",disabled:t.isLoading},domProps:{value:r.reason_name},on:{blur:function(e){return t.onStdcostAccountReasonNameChanged(r)},input:function(e){e.target.composing||t.$set(r,"reason_name",e.target.value)}}})]),t._v(" "),a("td",{staticClass:"text-center text-nowrap"},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-white",on:{click:function(e){return t.onGetStdcostTargets(r)}}},[a("i",{staticClass:"fa fa-list tw-mr-1"}),t._v(" เป้าหมายที่รับปัน\n                                ")])])]):t._e(),t._v(" "),r.is_show_targets?a("tr",{key:"targets_"+o+"_"+s},[a("td",{attrs:{colspan:"8"}},[a("table-std-cost-targets",{attrs:{"period-year-value":t.periodYear,"allocate-group-value":r.allocate_group,"stdcost-year":t.stdcostYearData,"stdcost-account":r,"stdcost-targets":t.stdcostTargets},on:{onStdcostTargetsChanged:t.onStdcostTargetsChanged}})],1)]):t._e(),t._v(" "),0!=s||t.isTableCostShowTargets&&t.selectedCostAllocateGroupCode==e.allocate_group_code?t._e():a("tr",{key:"targets_"+o+"_"+s},[a("td",{staticStyle:{padding:"0px","border-color":"#fff"},attrs:{colspan:"8"}})])]}))]}))],2):a("tbody",[t._m(4)])])]):t._e(),t._v(" "),t.isTableCostActive&&t.costStdcostAccountItems.length>0?a("div",[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[a("thead",[t.costStdcostAccountItems.length>0?a("tr",[a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-right":"0"},attrs:{width:"32%",colspan:"4"}},[a("b",[t._v(" ประเภทการปันส่วน : "+t._s(t.getAllocateGroupLevel(t.listAllocateGroups,"COST"))+" "+t._s(t.getAllocateGroupLabel(t.listAllocateGroups,"COST"))+" ")])]),t._v(" "),t._m(5),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterCostAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.costSumFilteredActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.costTotalActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterCostAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.costSumFilteredAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.costTotalAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterCostAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.costSumFilteredBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.costTotalBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"13%",colspan:"3"}},[t.filterCostAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.costSumFilteredEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.costTotalEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell",attrs:{width:"20%"}})]):t._e()])])]):t._e(),t._v(" "),t.isTableProductActive&&t.listProductAllocateGroupCodes.length>0?a("div",{staticClass:"row tw-my-2"},[a("label",{staticClass:"col-md-2 col-form-label tw-font-bold text-center tw-pl-4"},[t._v(" ศูนย์ต้นทุนที่ปัน : ")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("pm-el-select",{attrs:{name:"allocate_group_code",id:"input_allocate_group_code","select-options":t.listProductAllocateGroupCodes,"option-key":"allocate_group_code_value","option-value":"allocate_group_code_value","option-label":"allocate_group_code_label",value:t.filterProductAllocateGroupCode,filterable:!0},on:{onSelected:t.onFilterProductAllocateGroupCodeChanged}})],1)]):t._e(),t._v(" "),t.isTableProductActive?a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"600px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[t._m(6),t._v(" "),t.productStdcostAccountItems.length>0?a("tbody",[t._l(t.productStdcostAccountItems,(function(e,o){return[t._l(e.account_items,(function(r,s){return[r.is_show?a("tr",{key:o+"_"+s,style:s+1==e.count_account?"border-bottom : 2px solid rgb(179 179 179);":""},[0==s?a("td",{staticClass:"text-center md:tw-table-cell",staticStyle:{"border-bottom":"2px solid rgb(179 179 179)","border-left":"0","border-right":"0","vertical-align":"top !important"},attrs:{rowspan:e.count_account+1}},[t._v("\n                                "+t._s(r.allocate_group_code)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_account_code)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.target_sub_acc_code_desc)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell"},[t._v("\n                                "+t._s(r.allocate_type_label)+"\n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.actual_amount?Number(r.actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.avg_actual_amount?Number(r.avg_actual_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.budget_amount?Number(r.budget_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell"},[t._v("\n                                "+t._s(r.estimate_expense_amount?Number(r.estimate_expense_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")+" \n                            ")]),t._v(" "),a("td",{staticClass:"text-center text-nowrap"},[a("button",{staticClass:"btn btn-inline-block btn-xs btn-white",on:{click:function(e){return t.onGetStdcostTargets(r)}}},[a("i",{staticClass:"fa fa-list tw-mr-1"}),t._v(" เป้าหมายที่รับปัน\n                                ")])])]):t._e(),t._v(" "),r.is_show_targets?a("tr",{key:"targets_"+o+"_"+s},[a("td",{attrs:{colspan:"8"}},[a("table-std-cost-targets",{attrs:{"period-year-value":t.periodYear,"allocate-group-value":r.allocate_group,"stdcost-year":t.stdcostYearData,"stdcost-account":r,"stdcost-targets":t.stdcostTargets},on:{onStdcostTargetsChanged:t.onStdcostTargetsChanged}})],1)]):t._e(),t._v(" "),0!=s||t.isTableProductShowTargets&&t.selectedProductAllocateGroupCode==e.allocate_group_code?t._e():a("tr",{key:"targets_"+o+"_"+s},[a("td",{staticStyle:{padding:"0px","border-color":"#fff"},attrs:{colspan:"8"}})])]}))]}))],2):a("tbody",[t._m(7)])])]):t._e(),t._v(" "),t.isTableProductActive&&t.productStdcostAccountItems.length>0?a("div",[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[a("thead",[t.productStdcostAccountItems.length>0?a("tr",[a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-right":"0"},attrs:{width:"32%",colspan:"4"}},[a("b",[t._v(" ประเภทการปันส่วน : "+t._s(t.getAllocateGroupLevel(t.listAllocateGroups,"PRODUCT"))+" "+t._s(t.getAllocateGroupLabel(t.listAllocateGroups,"PRODUCT"))+" ")])]),t._v(" "),t._m(8),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterProductAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.productSumFilteredActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.productTotalActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterProductAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.productSumFilteredAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.productTotalAvgActualAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"10%",colspan:"3"}},[t.filterProductAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.productSumFilteredBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.productTotalBudgetAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-right md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"13%",colspan:"3"}},[t.filterProductAllocateGroupCode?a("b",[t._v(" "+t._s(Number(t.productSumFilteredEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")]):a("b",[t._v(" "+t._s(Number(t.productTotalEstimateExpenseAmount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"  ")])]),t._v(" "),a("td",{staticClass:"text-left md:tw-table-cell",attrs:{width:"10%"}})]):t._e()])])]):t._e(),t._v(" "),a("loading",{attrs:{active:t.isLoading,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" หน่วยงานที่ปัน ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" รหัสบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"12%"}},[t._v(" ชื่อบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" เกณฑ์การปันส่วน ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริง ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริงเฉลี่ย ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายตามงบประมาณ ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"13%"}},[t._v(" ค่าใช้จ่ายประมาณการ ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" หมายเหตุ ")]),t._v(" "),a("th",{attrs:{width:"10%"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"11"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[t._v("ไม่พบข้อมูล")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"5%"}},[a("b",[t._v(" รวม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" หน่วยงานที่ปัน ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" รหัสบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"13%"}},[t._v(" ชื่อบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" เกณฑ์การปันส่วน ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริง ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริงเฉลี่ย ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายตามงบประมาณ ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"13%"}},[t._v(" ค่าใช้จ่ายประมาณการ ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" หมายเหตุ ")]),t._v(" "),a("th",{attrs:{width:"10%"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"10"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[t._v("ไม่พบข้อมูล")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"5%"}},[a("b",[t._v(" รวม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" ศูนย์ต้นทุนที่ปัน ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"7%"}},[t._v(" รหัสบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"13%"}},[t._v(" ชื่อบัญชี ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" เกณฑ์การปันส่วน ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริง ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายจริงเฉลี่ย ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"10%"}},[t._v(" ค่าใช้จ่ายตามงบประมาณ ")]),t._v(" "),a("th",{staticClass:"text-right tw-text-xs md:tw-table-cell",staticStyle:{"z-index":"2"},attrs:{width:"13%"}},[t._v(" ค่าใช้จ่ายประมาณการ ")]),t._v(" "),a("th",{attrs:{width:"10%"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"10"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[t._v("ไม่พบข้อมูล")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-left md:tw-table-cell",staticStyle:{"border-left":"0"},attrs:{width:"5%"}},[a("b",[t._v(" รวม ")])])}],!1,null,null,null).exports;function C(t,e,a,o,r,s,n){try{var c=t[s](n),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(o,r)}function S(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var s=t.apply(e,a);function n(t){C(s,o,r,n,c,"next",t)}function c(t){C(s,o,r,n,c,"throw",t)}n(void 0)}))}}const y={props:["modalName","modalWidth","modalHeight","organizationCode","periodYears","periodYearValue","listAllocateGroups"],components:{Loading:n()},watch:{periodYears:function(t){this.periodYearOptions=t},periodYearValue:function(t){this.periodYearLabel=this.getPeriodYearLabel(this.periodYearOptions,t),this.periodYearLabel&&(this.periodYear=t,this.getListPeriods(this.periodYear),this.getListPrdgrps(this.periodYear),this.getAllocateGroupCodes(this.periodYear,this.allocateAccountVersion),this.getAllocateAccounts(this.periodYear))}},data:function(){return{isLoading:!1,width:this.modalWidth,periodYear:this.periodYearValue,periodYearLabel:this.getPeriodYearLabel(this.periodYears,this.periodYearValue),periodNames:[],periodYearOptions:this.periodYears,prdgrpVersions:[],prdgrpYearId:this.prdgrpYearIdValue,planVersionNo:null,allocateAccountVersions:[],allocateAccountVersion:this.allocateAccountVersionValue,allocateYearId:this.allocateAccountVersionValue,allocateGroupCodes:[],stdcostYears:[],selectedStdcostYear:null}},created:function(){this.handleResize()},mounted:function(){this.periodYearOptions=this.periodYears,this.periodYearLabel=this.getPeriodYearLabel(this.periodYears,this.periodYearValue),this.periodYearLabel&&(this.periodYear=this.periodYearValue,this.getListPeriods(this.periodYear),this.getListPrdgrps(this.periodYear),this.getAllocateGroupCodes(this.periodYear,this.allocateAccountVersionValue),this.getAllocateAccounts(this.periodYear))},methods:{handleResize:function(){window.innerWidth<768?this.width="90%":window.innerWidth<992?this.width="80%":this.width=this.modalWidth},onPeriodYearChanged:function(t){var e=this;return S(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.periodYear=t,e.periodYearLabel=e.getPeriodYearLabel(e.periodYears,e.periodYear),e.periodNameFrom=null,e.periodNameTo=null,e.allocateAccountVersion=null,e.allocateYearId=null,e.prdgrpYearId=null,e.getListPeriods(e.periodYear),e.getListPrdgrps(e.periodYear),e.getAllocateGroupCodes(e.periodYear,e.allocateAccountVersion),e.getAllocateAccounts(e.periodYear);case 11:case"end":return a.stop()}}),a)})))()},onPrdgrpVersionChanged:function(t){var e=this;return S(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.prdgrpYearId=t,e.planVersionNo=e.getPrdgrpPlanVersionNo(e.prdgrpVersions,e.prdgrpYearId);case 2:case"end":return a.stop()}}),a)})))()},onAllocateAccountVersionChanged:function(t){var e=this;return S(r().mark((function a(){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.allocateAccountVersion=t,e.getAllocateGroupCodes(e.periodYear,e.allocateAccountVersion),o=e.allocateAccountVersions.find((function(e){return e.version_no==t})),e.allocateYearId=o?o.allocate_year_id:null;case 4:case"end":return a.stop()}}),a)})))()},getPeriodYearLabel:function(t,e){var a=null;return t&&e&&t.length>0&&(a=t.find((function(t){return t.period_year_value==e}))),a?a.period_year_label:""},getPrdgrpPlanVersionNo:function(t,e){var a=null;if(e){var o=t.find((function(t){return t.prdgrp_year_id==e}));a=o?o.plan_version_no:""}return a},getPeriodNameLabel:function(t,e){var a=null;if(e){var o=t.find((function(t){return t.period_name==e}));a=o?o.thai_month:""}return a},getAllocateGroupLevel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.level_no:""},getAllocateGroupLabel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.allocate_group_label:""},getListStdcostYears:function(){var t=this;return S(r().mark((function e(){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!0,t.stdcostYears=[],t.selectedStdcostYear=null,a={period_year:t.periodYear,allocate_account_version:t.allocateAccountVersion,allocate_group:t.allocateGroup,prdgrp_year_id:t.prdgrpYearId},o=null,t.periodYearOptions&&t.periodYear&&t.periodYearOptions.length>0&&(o=t.periodYearOptions.find((function(e){return e.period_year_value==t.periodYear}))),!o){e.next=11;break}return e.next=9,axios.get("/ajax/ct/std-costs/list-years",{params:a}).then((function(e){var a=e.data.data;return"error"==a.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลปันส่วนของปีปัญชี ไม่ถูกต้อง | ".concat(a.message),"error"):t.stdcostYears=a.stdcost_years?JSON.parse(a.stdcost_years):null,a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลปันส่วนของปีปัญชี ไม่ถูกต้อง | ".concat(t.message),"error")}));case 9:e.next=12;break;case 11:swal("เกิดข้อผิดพลาด","กรุณากรอกข้อมูลให้ครบถ้วน","error");case 12:t.isLoading=!1;case 13:case"end":return e.stop()}}),e)})))()},getListPeriods:function(t){var e=this;return S(r().mark((function a(){var o,s,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t},n=null,e.periodYearOptions&&t&&e.periodYearOptions.length>0&&(n=e.periodYearOptions.find((function(e){return e.period_year_value==t}))),!n){a.next=9;break}return a.next=8,axios.get("/ajax/ct/std-costs/list-periods",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเดือนงบประมาณของปี ".concat(t," | ").concat(o.message),"error"):e.periodNames=o.periods?JSON.parse(o.periods):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเดือนงบประมาณของปี ".concat(t," | ").concat(e.message),"error")}));case 8:o=a.sent;case 9:return e.isLoading=!1,a.abrupt("return",o);case 11:case"end":return a.stop()}}),a)})))()},getListPrdgrps:function(t){var e=this;return S(r().mark((function a(){var o,s,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t,only_exist:!0},n=null,e.periodYearOptions&&t&&e.periodYearOptions.length>0&&(n=e.periodYearOptions.find((function(e){return e.period_year_value==t}))),!n){a.next=9;break}return a.next=8,axios.get("/ajax/ct/std-costs/list-prdgrps",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิต ปี ".concat(t," | ").concat(o.message),"error"):e.prdgrpVersions=o.prdgrps?JSON.parse(o.prdgrps):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิต ปี ".concat(t," | ").concat(e.message),"error")}));case 8:o=a.sent;case 9:return e.isLoading=!1,a.abrupt("return",o);case 11:case"end":return a.stop()}}),a)})))()},getAllocateGroupCodes:function(t,e){var a=this;return S(r().mark((function o(){var s,n,c;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=null,a.isLoading=!0,n={period_year:t,version_no:e,only_exist:!0},c=null,a.periodYearOptions&&t&&a.periodYearOptions.length>0&&(c=a.periodYearOptions.find((function(e){return e.period_year_value==t}))),!c){o.next=9;break}return o.next=8,axios.get("/ajax/ct/std-costs/allocate-group-codes",{params:n}).then((function(e){var o=e.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลหน่วยงานที่ปัน ปี ".concat(t," | ").concat(o.message),"error"):a.allocateGroupCodes=o.allocate_group_codes?JSON.parse(o.allocate_group_codes):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลหน่วยงานที่ปัน ปี ".concat(t," | ").concat(e.message),"error")}));case 8:s=o.sent;case 9:return a.isLoading=!1,o.abrupt("return",s);case 11:case"end":return o.stop()}}),o)})))()},getAllocateAccounts:function(t){var e=this;return S(r().mark((function a(){var o,s,n;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t,only_exist:!0},n=null,e.periodYearOptions&&t&&e.periodYearOptions.length>0&&(n=e.periodYearOptions.find((function(e){return e.period_year_value==t}))),!n){a.next=9;break}return a.next=8,axios.get("/ajax/ct/std-costs/allocate-accounts",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเกณฑ์การปันส่วนครั้งที่ ปี ".concat(t," | ").concat(o.message),"error"):e.allocateAccountVersions=o.allocate_account_versions?JSON.parse(o.allocate_account_versions):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเกณฑ์การปันส่วนครั้งที่ ปี ".concat(t," | ").concat(e.message),"error")}));case 8:o=a.sent;case 9:return e.isLoading=!1,a.abrupt("return",o);case 11:case"end":return a.stop()}}),a)})))()},onSelectStdcostYearVersion:function(t){this.selectedStdcostYear=t,this.onSearchStdcostVersion()},onSearchStdcostVersion:function(){this.$modal.hide(this.modalName),this.$emit("onSearchStdcostVersion",{stdcost_year:this.selectedStdcostYear,allocate_group:this.allocateGroup})}}};var T=a(93379),Y=a.n(T),N=a(17390),F={insert:"head",singleton:!1};Y()(N.Z,F);N.Z.locals;const D=(0,_.Z)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"fixed","z-index":"100"}},[a("modal",{attrs:{name:t.modalName,width:t.width,scrollable:!0,height:t.modalHeight,shiftX:.3,shiftY:.3}},[a("div",{staticClass:"p-4"},[a("h4",[t._v(" ค้นหากำหนดเกณฑ์การปันส่วน ")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" ปีบัญชีงบประมาณ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_year",id:"input_period_year","select-options":t.periodYearOptions,"option-key":"period_year_value","option-value":"period_year_value","option-label":"period_year_label",value:t.periodYear,filterable:!0},on:{onSelected:t.onPeriodYearChanged}})],1)]),t._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0"},[t._v(" แผนการผลิตครั้งที่ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"prdgrp_year_id",id:"input_prdgrp_year_id","select-options":t.prdgrpVersions,"option-key":"prdgrp_year_id","option-value":"prdgrp_year_id","option-label":"plan_version_no",value:t.prdgrpYearId,filterable:!0,clearable:!0},on:{onSelected:t.onPrdgrpVersionChanged}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0"},[t._v(" เกณฑ์การปันส่วนครั้งที่ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"allocate_account_version",id:"input_allocate_account_version","select-options":t.allocateAccountVersions,"option-key":"version_no","option-value":"version_no","option-label":"version_no",value:t.allocateAccountVersion,filterable:!0,clearable:!0},on:{onSelected:t.onAllocateAccountVersionChanged}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary tw-w-32",attrs:{type:"button",disabled:!t.periodYear},on:{click:t.getListStdcostYears}},[t._v(" \n                            ค้นหา \n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-link tw-w-32 tw-mt-2",attrs:{type:"button"},on:{click:function(e){return t.$modal.hide(t.modalName)}}},[t._v(" \n                            ยกเลิก \n                        ")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"360px"}},[a("table",{staticClass:"table table-bordered table-sticky mb-0"},[a("thead",[a("tr",[a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",attrs:{width:"10%"}},[t._v(" ปีบัญชีงบประมาณ ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",attrs:{width:"10%"}},[t._v(" แผนการผลิตครั้งที่ ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",attrs:{width:"20%"}},[t._v(" เปรียบเทียบค่าใช้จ่ายจริงจาก-ถึง ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",attrs:{width:"10%"}},[t._v(" เกณฑ์การปันส่วนครั้งที่ ")]),t._v(" "),a("th",{staticClass:"text-center tw-text-xs md:tw-table-cell",attrs:{width:"10%"}},[t._v(" วันที่สร้าง ")]),t._v(" "),a("th",{attrs:{width:"10%"}})])]),t._v(" "),t.stdcostYears.length>0?a("tbody",[t._l(t.stdcostYears,(function(e,o){return[a("tr",{key:o},[a("td",{staticClass:"text-center md:tw-table-cell"},[t._v(" "+t._s(e.period_year?t.getPeriodYearLabel(t.periodYears,e.period_year):"-")+" ")]),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v(" "+t._s(e.prdgrp_year_id?t.getPrdgrpPlanVersionNo(t.prdgrpVersions,e.prdgrp_year_id):"-")+" ")]),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v(" "+t._s(e.period_name_from?t.getPeriodNameLabel(t.periodNames,e.period_name_from):"")+" - "+t._s(e.period_name_to?t.getPeriodNameLabel(t.periodNames,e.period_name_to):"")+" ")]),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v(" "+t._s(e.version_no)+" ")]),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[t._v(" "+t._s(e.creation_date)+" ")]),t._v(" "),a("td",{staticClass:"text-center md:tw-table-cell"},[a("button",{staticClass:"btn btn-inline-block btn-primary",on:{click:function(a){return t.onSelectStdcostYearVersion(e)}}},[t._v("\n                                        เลือก\n                                    ")])])])]}))],2):a("tbody",[a("tr",[a("td",{attrs:{colspan:"7"}},[a("h2",{staticClass:"p-5 text-center text-muted"},[t._v("ไม่พบข้อมูล")])])])])])])])]),t._v(" "),a("loading",{attrs:{active:t.isLoading,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}})],1)}),[],!1,null,"8d582b76",null).exports;function P(t,e,a,o,r,s,n){try{var c=t[s](n),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(o,r)}function L(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var s=t.apply(e,a);function n(t){P(s,o,r,n,c,"next",t)}function c(t){P(s,o,r,n,c,"throw",t)}n(void 0)}))}}const G={components:{Loading:n(),TableStdCostAccounts:A,ModalSearchStdcost:D},props:["defaultData","periodYearValue","prdgrpYearIdValue","allocateAccountVersionValue","allocateYearIdValue","allocateGroupValue","periodNameFromValue","periodNameToValue","periodYears","existPeriodYears","listAllocateGroups","allocateTypes"],mounted:function(){var t=this;this.periodYearValue&&(this.getListPeriods(this.periodYearValue).then((function(e){t.periodNameFromValue&&(t.periodNameFrom=t.periodNameFromValue,t.periodNameFromLabel=t.getPeriodNameLabel(t.periodNameFroms,t.periodNameFrom)),t.periodNameToValue&&(t.periodNameTo=t.periodNameToValue,t.periodNameToLabel=t.getPeriodNameLabel(t.periodNameTos,t.periodNameTo))})),this.getListPrdgrps(this.periodYearValue).then((function(e){t.planVersionNo=t.getPrdgrpPlanVersionNo(t.prdgrpVersions,t.prdgrpYearIdValue)})),this.getAllocateAccounts(this.periodYearValue).then((function(e){if(t.allocateAccountVersionValue){var a=t.allocateAccountVersions.find((function(e){return e.version_no==t.allocateAccountVersionValue}));t.allocateYearId=a?a.allocate_year_id:null}})),this.getAllocateGroupCodes(this.periodYearValue,this.allocateAccountVersionValue))},data:function(){return{organizationId:this.defaultData?JSON.parse(this.defaultData).organization_id:null,organizationCode:this.defaultData?JSON.parse(this.defaultData).organization_code:null,department:this.defaultData?JSON.parse(this.defaultData).department:null,periodYear:this.periodYearValue,periodYearLabel:this.getPeriodYearLabel(this.periodYears,this.periodYearValue),existPeriodYearOptions:this.existPeriodYears,periodNameFroms:[],periodNameFrom:this.periodNameFromValue,periodNameFromLabel:null,periodNameTos:[],periodNameTo:this.periodNameToValue,periodNameToLabel:null,prdgrpVersions:[],prdgrpYearId:this.prdgrpYearIdValue,planVersionNo:null,allocateAccountVersions:[],allocateAccountVersion:this.allocateAccountVersionValue,allocateYearId:this.allocateAccountVersionValue,allocateGroupCodes:[],stdcostYear:null,stdcostYearVersion:this.versionValue,stdcostYearVersions:[],selectedStdcostYearData:{},stdcostAccounts:[],listDeptAllocateGroupCodes:[],listCostAllocateGroupCodes:[],listProductAllocateGroupCodes:[],showTableStdcostAccounts:!1,isLoading:!1}},computed:{},methods:{setUrlParams:function(){var t=new URLSearchParams(window.location.search);t.set("period_year",this.periodYear?this.periodYear:""),t.set("prdgrp_year_id",this.prdgrpYearId?this.prdgrpYearId:""),t.set("allocate_account_version",this.allocateAccountVersion?this.allocateAccountVersion:""),t.set("allocate_year_id",this.allocateYearId?this.allocateYearId:""),t.set("allocate_group",this.allocateGroup?this.allocateGroup:"DEPT"),t.set("period_name_from",this.periodNameFrom?this.periodNameFrom:""),t.set("period_name_to",this.periodNameTo?this.periodNameTo:""),window.history.replaceState(null,null,"?"+t.toString())},onPeriodYearChanged:function(t){var e=this;return L(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.periodYear=t,e.periodYearLabel=e.getPeriodYearLabel(e.periodYears,e.periodYear),e.setUrlParams(),e.stdcostYear=null,e.stdcostAccounts=[],e.listDeptAllocateGroupCodes=[],e.listCostAllocateGroupCodes=[],e.listProductAllocateGroupCodes=[],e.periodNameFrom=null,e.periodNameTo=null,e.allocateAccountVersion=null,e.allocateYearId=null,e.prdgrpYearId=null,e.getListPeriods(e.periodYear),e.getListPrdgrps(e.periodYear),a.next=17,e.getAllocateGroupCodes(e.periodYear,e.allocateGroup,e.allocateAccountVersion);case 17:return a.next=19,e.getAllocateAccounts(e.periodYear);case 19:e.showTableStdcostAccounts=!1;case 20:case"end":return a.stop()}}),a)})))()},onPrdgrpVersionChanged:function(t){var e=this;return L(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.prdgrpYearId=t,e.planVersionNo=e.getPrdgrpPlanVersionNo(e.prdgrpVersions,e.prdgrpYearId),e.stdcostAccounts=[],e.listDeptAllocateGroupCodes=[],e.listCostAllocateGroupCodes=[],e.listProductAllocateGroupCodes=[],e.setUrlParams();case 7:case"end":return a.stop()}}),a)})))()},onAllocateAccountVersionChanged:function(t){var e=this;return L(r().mark((function a(){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.allocateAccountVersion=t,e.getAllocateGroupCodes(e.periodYear,e.allocateGroup,e.allocateAccountVersion),o=e.allocateAccountVersions.find((function(e){return e.version_no==t})),e.allocateYearId=o?o.allocate_year_id:null,e.stdcostYear=null,e.stdcostAccounts=[],e.listDeptAllocateGroupCodes=[],e.listCostAllocateGroupCodes=[],e.listProductAllocateGroupCodes=[],e.showTableStdcostAccounts=!1,e.setUrlParams();case 11:case"end":return a.stop()}}),a)})))()},onPeriodNameFromChanged:function(t){var e=this;return L(r().mark((function a(){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.periodNameFrom=t,e.periodNameFromLabel=e.getPeriodNameLabel(e.periodNameFroms,e.periodNameFrom),o=e.periodNameFroms.find((function(t){return t.period_name==e.periodNameFrom})),e.periodNameTos=e.periodNameFroms.filter((function(t){return t.period_num>=o.period_num&&t.period_num<12})),e.periodNameTo=null,e.periodNameToLabel=null,e.setUrlParams();case 7:case"end":return a.stop()}}),a)})))()},onPeriodNameToChanged:function(t){var e=this;return L(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.periodNameTo=t,e.periodNameToLabel=e.getPeriodNameLabel(e.periodNameTos,e.periodNameTo),e.setUrlParams();case 3:case"end":return a.stop()}}),a)})))()},getPeriodYearLabel:function(t,e){var a=null;if(e){var o=t.find((function(t){return t.period_year_value==e}));a=o?o.period_year_label:""}return a},getPeriodNameLabel:function(t,e){var a=null;if(e){var o=t.find((function(t){return t.period_name==e}));a=o?o.thai_month:""}return a},getPrdgrpPlanVersionNo:function(t,e){var a=null;if(e){var o=t.find((function(t){return t.prdgrp_year_id==e}));a=o?o.plan_version_no:""}return a},getAllocateGroupLevel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.level_no:""},getAllocateGroupLabel:function(t,e){var a=t.find((function(t){return t.allocate_group==e}));return a?a.allocate_group_label:""},validateBeforeGetStdcostYear:function(t,e){var a=!1;return t&&e&&(a=!0),a},validateBeforeSaveStdcostYear:function(t,e,a,o,r,s){var n=!1;return t&&e&&a&&o&&r&&s&&(n=!0),n},validateBeforeGetDeptCodes:function(t){var e=!1;return t&&(e=!0),e},validateBeforeGetStdcostAccounts:function(t,e){var a=!1;return t&&e&&(a=!0),a},validateBeforeGenerateAccountTargets:function(t,e){var a=!1;return t&&e&&(a=!0),a},getStdcostYearData:function(t,e,a,o,s,n,c){var i=this;return L(r().mark((function l(){var u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.isLoading=!0,i.stdcostYear=null,u={period_year:t,allocate_account_version:a,prdgrp_year_id:e,period_name_from:s,period_name_to:n},i.selectedStdcostYearData={period_year:t,allocate_account_version:a,prdgrp_year_id:e,allocate_year_id:o,period_name_from:s,period_name_to:n},!i.validateBeforeGetStdcostYear(t,a)){r.next=16;break}return r.next=8,axios.get("/ajax/ct/std-costs/year",{params:u}).then((function(t){var e=t.data.data;return"error"==e.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลปันส่วนของปีปัญชี ไม่ถูกต้อง | ".concat(e.message),"error"):(i.stdcostYear=e.stdcost_year?JSON.parse(e.stdcost_year):null,i.stdcostYear&&!c&&(i.prdgrpYearId=i.stdcostYear.prdgrp_year_id,i.allocateYearId=i.stdcostYear.allocate_year_id,i.periodNameFrom=i.stdcostYear.period_name_from,i.periodNameTo=i.stdcostYear.period_name_to,i.planVersionNo=i.getPrdgrpPlanVersionNo(i.prdgrpVersions,i.prdgrpYearId),i.periodNameFromLabel=i.getPeriodNameLabel(i.periodNameFroms,i.periodNameFrom),i.periodNameToLabel=i.getPeriodNameLabel(i.periodNameTos,i.periodNameTo))),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลปันส่วนของปีปัญชี ไม่ถูกต้อง | ".concat(t.message),"error")}));case 8:if("error"==r.sent.status){r.next=13;break}if(c){r.next=13;break}return r.next=13,i.getStdcostAccounts(i.periodYear,i.stdcostYear);case 13:i.setUrlParams(),r.next=17;break;case 16:swal("เกิดข้อผิดพลาด","กรุณากรอกข้อมูลให้ครบถ้วน","error");case 17:i.isLoading=!1;case 18:case"end":return r.stop()}}),l)})))()},onGenerateStdcostYearData:function(t,e,a,o,s,n){var c=this;return L(r().mark((function i(){return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c.getStdcostYearData(t,e,a,o,s,n,!0);case 2:if(!c.stdcostYear){i.next=6;break}swal({title:"",text:"พบข้อมูลซ้ำ (ปีบัญชีงบประมาณ: ".concat(c.periodYearLabel,", เกณฑ์การปันส่วนครั้งที่: ").concat(c.allocateAccountVersion,", เปรียบเทียบค่าใช้จ่ายจริงจาก: ").concat(c.periodNameFromLabel," ถึง ").concat(c.periodNameToLabel,") ต้องการสร้างข้อมูลใหม่ ?"),showCancelButton:!0,confirmButtonClass:"btn-primary",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",closeOnConfirm:!0},function(){var t=L(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=12;break}return c.prdgrpYearId=c.selectedStdcostYearData.prdgrp_year_id,c.allocateYearId=c.selectedStdcostYearData.allocate_year_id,c.periodNameFrom=c.selectedStdcostYearData.period_name_from,c.periodNameTo=c.selectedStdcostYearData.period_name_to,c.planVersionNo=c.getPrdgrpPlanVersionNo(c.prdgrpVersions,c.prdgrpYearId),c.periodNameFromLabel=c.getPeriodNameLabel(c.periodNameFroms,c.periodNameFrom),c.periodNameToLabel=c.getPeriodNameLabel(c.periodNameTos,c.periodNameTo),t.next=10,c.onSaveStdcostYear();case 10:return t.next=12,c.getStdcostAccounts(c.periodYear,c.stdcostYear);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=10;break;case 6:return i.next=8,c.onSaveStdcostYear();case 8:return i.next=10,c.getStdcostAccounts(c.periodYear,c.stdcostYear);case 10:case"end":return i.stop()}}),i)})))()},getListPeriods:function(t){var e=this;return L(r().mark((function a(){var o,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t},!t){a.next=7;break}return a.next=6,axios.get("/ajax/ct/std-costs/list-periods",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเดือนงบประมาณของปี ".concat(t," | ").concat(o.message),"error"):(e.periodNameFroms=o.periods?JSON.parse(o.periods):[],e.periodNameFroms=e.periodNameFroms.filter((function(t){return t.period_num<12})),e.periodNameTos=o.periods?JSON.parse(o.periods):[],e.periodNameTos=e.periodNameTos.filter((function(t){return t.period_num<12}))),o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเดือนงบประมาณของปี ".concat(t," | ").concat(e.message),"error")}));case 6:o=a.sent;case 7:return e.isLoading=!1,a.abrupt("return",o);case 9:case"end":return a.stop()}}),a)})))()},getListPrdgrps:function(t){var e=this;return L(r().mark((function a(){var o,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t},!t){a.next=7;break}return a.next=6,axios.get("/ajax/ct/std-costs/list-prdgrps",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิต ปี ".concat(t," | ").concat(o.message),"error"):e.prdgrpVersions=o.prdgrps?JSON.parse(o.prdgrps):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแผนการผลิต ปี ".concat(t," | ").concat(e.message),"error")}));case 6:o=a.sent;case 7:return e.isLoading=!1,a.abrupt("return",o);case 9:case"end":return a.stop()}}),a)})))()},getAllocateGroupCodes:function(t,e){var a=this;return L(r().mark((function o(){var s,n;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=null,a.isLoading=!0,n={period_year:t,version_no:e},!t){o.next=7;break}return o.next=6,axios.get("/ajax/ct/std-costs/allocate-group-codes",{params:n}).then((function(e){var o=e.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลหน่วยงานที่ปัน ปี ".concat(t," | ").concat(o.message),"error"):a.allocateGroupCodes=o.allocate_group_codes?JSON.parse(o.allocate_group_codes):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลหน่วยงานที่ปัน ปี ".concat(t," | ").concat(e.message),"error")}));case 6:s=o.sent;case 7:return a.isLoading=!1,o.abrupt("return",s);case 9:case"end":return o.stop()}}),o)})))()},getAllocateAccounts:function(t){var e=this;return L(r().mark((function a(){var o,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null,e.isLoading=!0,s={period_year:t},!t){a.next=7;break}return a.next=6,axios.get("/ajax/ct/std-costs/allocate-accounts",{params:s}).then((function(a){var o=a.data.data;return"error"==o.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเกณฑ์การปันส่วนครั้งที่ ปี ".concat(t," | ").concat(o.message),"error"):e.allocateAccountVersions=o.allocate_account_versions?JSON.parse(o.allocate_account_versions):[],o})).catch((function(e){console.log(e),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลเกณฑ์การปันส่วนครั้งที่ ปี ".concat(t," | ").concat(e.message),"error")}));case 6:o=a.sent;case 7:return e.isLoading=!1,a.abrupt("return",o);case 9:case"end":return a.stop()}}),a)})))()},getStdcostAccounts:function(t,e){var a=this;return L(r().mark((function o(){var s,n;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=null,a.isLoading=!0,a.stdcostAccounts=[],a.listDeptAllocateGroupCodes=[],a.listCostAllocateGroupCodes=[],a.listProductAllocateGroupCodes=[],n={period_year:t,input_stdcost_year:JSON.stringify(e)},!a.validateBeforeGetStdcostAccounts(t,e)){o.next=13;break}return o.next=11,axios.get("/ajax/ct/std-costs/accounts",{params:n}).then((function(t){var e=t.data.data;return"error"==e.status?swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลบัญชีรับปัน | ".concat(e.message),"error"):(a.stdcostAccounts=e.stdcost_accounts?JSON.parse(e.stdcost_accounts):[],a.listDeptAllocateGroupCodes=e.list_dept_allocate_group_codes?JSON.parse(e.list_dept_allocate_group_codes):[],a.listCostAllocateGroupCodes=e.list_cost_allocate_group_codes?JSON.parse(e.list_cost_allocate_group_codes):[],a.listProductAllocateGroupCodes=e.list_product_allocate_group_codes?JSON.parse(e.list_product_allocate_group_codes):[]),e})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลบัญชีรับปัน | ".concat(t.message),"error")}));case 11:s=o.sent,a.showTableStdcostAccounts=!0;case 13:return a.isLoading=!1,o.abrupt("return",s);case 15:case"end":return o.stop()}}),o)})))()},getApproveStatusDesc:function(t){var e="-";if(t){var a=this.approveStatuses.find((function(e){return e.lookup_code==t}));e=a?a.description:"-"}return e},onStdcostAccountsChanged:function(t){this.stdcostAccounts=t.stdcostAccounts},onSearchStdcostVersion:function(t){var e=this;return L(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.stdcostYear=t.stdcost_year,e.allocateGroup=t.allocate_group,e.periodYear=e.stdcostYear.period_year,e.periodYearLabel=e.getPeriodYearLabel(e.periodYears,e.periodYear),e.prdgrpYearId=e.stdcostYear.prdgrp_year_id,e.allocateAccountVersion=e.stdcostYear.version_no,e.allocateYearId=e.stdcostYear.allocate_year_id,e.periodNameFrom=e.stdcostYear.period_name_from,e.periodNameTo=e.stdcostYear.period_name_to,e.planVersionNo=e.getPrdgrpPlanVersionNo(e.prdgrpVersions,e.prdgrpYearId),e.periodNameFromLabel=e.getPeriodNameLabel(e.periodNameFroms,e.periodNameFrom),e.periodNameToLabel=e.getPeriodNameLabel(e.periodNameTos,e.periodNameTo),!e.periodYear){a.next=21;break}return a.next=15,e.getListPeriods(e.periodYear);case 15:return a.next=17,e.getListPrdgrps(e.periodYear);case 17:return a.next=19,e.getAllocateGroupCodes(e.periodYear,e.allocateGroup,e.allocateAccountVersion);case 19:return a.next=21,e.getAllocateAccounts(e.periodYear);case 21:return a.next=23,e.getStdcostYearData(e.periodYear,e.prdgrpYearId,e.allocateAccountVersion,e.allocateYearId,e.periodNameFrom,e.periodNameTo,!1);case 23:case"end":return a.stop()}}),a)})))()},onSaveStdcostYear:function(){var t=this;return L(r().mark((function e(){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={period_year:t.periodYear,prdgrp_year_id:t.prdgrpYearId,allocate_account_version:t.allocateAccountVersion,allocate_year_id:t.allocateYearId,period_name_from:t.periodNameFrom,period_name_to:t.periodNameTo},t.isLoading=!0,!t.validateBeforeSaveStdcostYear(t.periodYear,t.prdgrpYearId,t.allocateAccountVersion,t.allocateYearId,t.periodNameFrom,t.periodNameTo)){e.next=8;break}return e.next=6,axios.post("/ajax/ct/std-costs/year",a).then((function(e){var a=e.data.data,o=a.message;return"success"==a.status&&(t.stdcostYear=a.stdcost_year?JSON.parse(a.stdcost_year):null,t.existPeriodYearOptions=a.exist_period_years?JSON.parse(a.exist_period_years):[]),"error"==a.status&&swal("เกิดข้อผิดพลาด","บันทึกต้นทุนมาตรฐานค่าแรงและค่าใช้จ่ายการผลิต | ".concat(o),"error"),a})).catch((function(t){console.log(t),swal("เกิดข้อผิดพลาด","บันทึกต้นทุนมาตรฐานค่าแรงและค่าใช้จ่ายการผลิต | ".concat(t.message),"error")}));case 6:e.next=9;break;case 8:swal("เกิดข้อผิดพลาด","ไม่สามารถบันทึกต้นทุนมาตรฐานค่าแรงและค่าใช้จ่ายการผลิต | ".concat(resValidate.message),"error");case 9:t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},formatDateTh:function(t){return t?i()(t).add(543,"years").format("DD/MM/YYYY"):""}}};const k=(0,_.Z)(G,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ibox"},[a("div",{staticClass:"ibox-content tw-pt-10",staticStyle:{"min-height":"600px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" ปีบัญชีงบประมาณ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_year",id:"input_period_year","select-options":t.periodYears,"option-key":"period_year_value","option-value":"period_year_value","option-label":"period_year_label",value:t.periodYear,filterable:!0},on:{onSelected:t.onPeriodYearChanged}})],1)]),t._v(" "),a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" เกณฑ์การปันส่วนครั้งที่ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"allocate_account_version",id:"input_allocate_account_version","select-options":t.allocateAccountVersions,"option-key":"version_no","option-value":"version_no","option-label":"version_no",value:t.allocateAccountVersion,filterable:!0},on:{onSelected:t.onAllocateAccountVersionChanged}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" แผนการผลิตครั้งที่ ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"prdgrp_year_id",id:"input_prdgrp_year_id","select-options":t.prdgrpVersions,"option-key":"prdgrp_year_id","option-value":"prdgrp_year_id","option-label":"plan_version_no",value:t.prdgrpYearId,filterable:!0},on:{onSelected:t.onPrdgrpVersionChanged}})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" เปรียบเทียบค่าใช้จ่ายจริงจาก ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_name_from",id:"input_period_name_from","select-options":t.periodNameFroms,"option-key":"period_name_value","option-value":"period_name_value","option-label":"period_name_label",value:t.periodNameFrom,filterable:!0},on:{onSelected:t.onPeriodNameFromChanged}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row form-group"},[a("label",{staticClass:"col-md-4 col-form-label tw-font-bold tw-pt-0 required"},[t._v(" ถึง ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("pm-el-select",{attrs:{name:"period_name_to",id:"input_period_name_to","select-options":t.periodNameTos,"option-key":"period_name_value","option-value":"period_name_value","option-label":"period_name_label",value:t.periodNameTo,filterable:!0},on:{onSelected:t.onPeriodNameToChanged}})],1)])])])])]),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-inline-block btn-white tw-w-32",on:{click:function(e){return t.$modal.show("modal-search-stdcost")}}},[a("i",{staticClass:"fa fa-search tw-mr-1"}),t._v(" ค้นหา \n            ")]),t._v(" "),a("button",{staticClass:"btn btn-inline-block btn-primary tw-w-52",attrs:{disabled:!(t.periodYear&&t.prdgrpYearId&&t.allocateAccountVersion&&t.periodNameFrom&&t.periodNameTo)},on:{click:function(e){return t.onGenerateStdcostYearData(t.periodYear,t.prdgrpYearId,t.allocateAccountVersion,t.allocateYearId,t.periodNameFrom,t.periodNameTo)}}},[a("i",{staticClass:"fa fa-arrow-down"}),t._v(" ดึงข้อมูลลงบททดลอง\n            ")]),t._v(" "),a("a",{staticClass:"btn btn-inline-block btn-danger tw-w-32",attrs:{href:"/ct/std-costs"}},[t._v(" ล้าง ")])]),t._v(" "),a("hr"),t._v(" "),t.showTableStdcostAccounts?a("div",{staticClass:"row tw-mb-5"},[a("div",{staticClass:"col-12"},[a("table-std-cost-accounts",{attrs:{"period-year-value":t.periodYear,"stdcost-year":t.stdcostYear,"stdcost-accounts":t.stdcostAccounts,"allocate-types":t.allocateTypes,"list-allocate-groups":t.listAllocateGroups,"list-dept-allocate-group-codes":t.listDeptAllocateGroupCodes,"list-cost-allocate-group-codes":t.listCostAllocateGroupCodes,"list-product-allocate-group-codes":t.listProductAllocateGroupCodes},on:{onStdcostAccountsChanged:t.onStdcostAccountsChanged}})],1)]):t._e()]),t._v(" "),a("loading",{attrs:{active:t.isLoading,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("modal-search-stdcost",{attrs:{"modal-name":"modal-search-stdcost","modal-width":"1024","modal-height":"auto","organization-code":t.organizationCode,"period-years":t.existPeriodYearOptions,"period-year-value":t.periodYear,"list-allocate-groups":t.listAllocateGroups},on:{onSearchStdcostVersion:t.onSearchStdcostVersion}})],1)}),[],!1,null,null,null).exports},7398:function(t){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function a(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(o,r,function(e){return t[e]}.bind(null,r));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e,a){},function(t,e,a){"use strict";a.r(e);var o="undefined"!=typeof window?window.HTMLElement:Object,r={mounted:function(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn:function(t){if(this.isActive&&t.target!==this.$el&&!this.$el.contains(t.target)){var e=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||e&&e.contains(t.target))&&(t.preventDefault(),this.$el.focus())}}},beforeDestroy:function(){document.removeEventListener("focusin",this.focusIn)}};function s(t,e,a,o,r,s,n,c){var i,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),n?(i=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=i):r&&(i=c?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),i)if(l.functional){l._injectStyles=i;var u=l.render;l.render=function(t,e){return i.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,i):[i]}return{exports:t,options:l}}var n=s({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height,stroke:this.color}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[e("circle",{attrs:{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}}),e("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"}})],1)])])])}),[],!1,null,null,null).exports,c=s({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:this.color,width:this.width,height:this.height}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[e("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),e("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[e("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),e("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[e("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,i=s({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:this.height,width:this.width,fill:this.color}},[e("rect",{attrs:{x:"0",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"10",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"20",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,l=s({name:"vue-loading",mixins:[r],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,o],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:function(){}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},data:function(){return{isActive:this.active}},components:{Spinner:n,Dots:c,Bars:i},beforeMount:function(){this.programmatic&&(this.container?(this.isFullPage=!1,this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0),document.addEventListener("keyup",this.keyPress)},methods:{cancel:function(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide:function(){var t=this;this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){var e;t.$destroy(),void 0!==(e=t.$el).remove?e.remove():e.parentNode.removeChild(e)}),150))},disableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vld-shown")},enableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vld-shown")},keyPress:function(t){27===t.keyCode&&this.cancel()}},watch:{active:function(t){this.isActive=t},isActive:function(t){t?this.disableScroll():this.enableScroll()}},computed:{bgStyle:function(){return{background:this.backgroundColor,opacity:this.opacity,backdropFilter:"blur(".concat(this.blur,")")}}},beforeDestroy:function(){document.removeEventListener("keyup",this.keyPress)}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transition}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"vld-overlay is-active",class:{"is-full-page":t.isFullPage},style:{zIndex:t.zIndex},attrs:{tabindex:"0","aria-busy":t.isActive,"aria-label":"Loading"}},[a("div",{staticClass:"vld-background",style:t.bgStyle,on:{click:function(e){return e.preventDefault(),t.cancel(e)}}}),a("div",{staticClass:"vld-icon"},[t._t("before"),t._t("default",[a(t.loader,{tag:"component",attrs:{color:t.color,width:t.width,height:t.height}})]),t._t("after")],2)])])}),[],!1,null,null,null).exports,u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{show:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s={programmatic:!0},n=Object.assign({},e,o,s),c=new(t.extend(l))({el:document.createElement("div"),propsData:n}),i=Object.assign({},a,r);return Object.keys(i).map((function(t){c.$slots[t]=i[t]})),c}}};a(0),l.install=function(t){var e=u(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});t.$loading=e,t.prototype.$loading=e},e.default=l}]).default}}]);