(self.webpackChunk=self.webpackChunk||[]).push([[1453],{8702:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const s={props:["dateRangeDetail"],data:function(){return{}},mounted:function(){}};const a=(0,i(51900).Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("span",[e._v(" "+e._s(e.dateRangeDetail)+" ")])])}),[],!1,null,null,null).exports},81453:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var s=i(87757),a=i.n(s);function r(e,t,i,s,a,r,l){try{var n=e[r](l),o=n.value}catch(e){return void i(e)}n.done?t(o):Promise.resolve(o).then(s,a)}const l={components:{DateRangeDetail:i(8702).Z},props:["header","lines","resPlanDate","productTypes","budgetYears","defaultInput","searchInput","search","biWeeklyDetails","workingHour","workingHoliday","eamperformanceMachines","efficiencyMachines","efficiencyProducts","machineMaintenances","machineDowntimes","machineDtLines","machineGroups","machineDesc","holidays","saleForecastsHtml","efficiencyFullProducts","btnTrans","dateFormat","url","pSaleForecasts","versionLists","holidaysHtml","lastUpdate"],data:function(){return{budget_year:this.search?String(this.search.budget_year):this.defaultInput.current_year,month:this.search?String(this.search.month):"",bi_weekly:this.search?String(this.search.bi_weekly):"",efficiency_machine:this.header?this.header.efficiency_machine:"",efficiency_product:this.header?this.header.efficiency_product:this.defaultInput.efficiency_product,product_type:(null!=this.header&&""!=this.header?this.header.product_type:this.search)?this.search.product_type:this.defaultInput.product_type,month_lists:[],bi_weekly_lists:[],loading:!1,valid:!1,m_loading:!1,b_loading:!1,errors:{budget_year:!1,month:!1,bi_weekly:!1},edit_flag:!1,show_flag:!0,set_budget_year:this.search?String(this.search.budget_year):this.defaultInput.current_year,set_month:this.search?String(this.search.month):"",set_bi_weekly:this.search?String(this.search.bi_weekly):"",set_product_type:(null!=this.header&&""!=this.header?this.header.product_type:this.search)?this.search.product_type:this.defaultInput.product_type,bi_weekly_detail:"",valid_action:!1,creator:this.header&&this.header.updated_by?this.header.updated_by.name:this.header&&this.header.created_by?this.header.created_by.name:null}},mounted:function(){this.budget_year&&this.getMonth(),this.budget_year&&this.month&&this.bi_weekly&&(this.getMonth(),this.getBiWeeklySeq()),this.getBiWeeklyDetail()},computed:{monthLists:function(){return this.month_lists},biWeeklyLists:function(){return this.bi_weekly_lists},efficiencyMachine:function(){return this.efficiency_machine},efficiencyProduct:function(){return this.efficiency_product}},watch:{errors:{handler:function(e){e.budget_year?this.setError("budget_year"):this.resetError("budget_year"),e.month?this.setError("month"):this.resetError("month"),e.bi_weekly?this.setError("bi_weekly"):this.resetError("bi_weekly")},deep:!0}},methods:{getMonth:function(){var e=this;e.search?e.set_budget_year!=e.budget_year&&(e.month="",e.bi_weekly="",e.bi_weekly_detail=""):(e.month="",e.bi_weekly="",e.bi_weekly_detail=""),e.month_lists=e.searchInput.months,this.checkSearchCondition()},getBiWeeklySeq:function(){var e=this;e.search&&e.set_month==e.month&&e.set_bi_weekly==e.bi_weekly||(e.bi_weekly="",e.bi_weekly_detail=""),e.bi_weekly_lists=e.searchInput.bi_weekly.filter((function(t){return t.period_num==e.month})),this.checkSearchCondition()},getBiWeeklyDetail:function(){var e=this;""!=e.biWeekly&&null!=e.biWeekly||(e.biWeeklyDetail=""),e.biWeeklyDetails.filter((function(t){if(t.thai_year==e.budget_year&&t.period_num==e.month&&t.biweekly==e.bi_weekly)return e.bi_weekly_detail=t.thai_combine_date})),this.checkSearchCondition()},changeProductType:function(){this.checkSearchCondition()},submit:function(){var e,t=this;return(e=a().mark((function e(){var i,s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=$("#machine-form")).serialize(),s=!0,r="",t.errors.budget_year=!1,t.errors.month=!1,t.errors.bi_weekly=!1,$(i).find("div[id='el_explode_budget_year']").html(""),$(i).find("div[id='el_explode_month']").html(""),$(i).find("div[id='el_explode_bi_weekly']").html(""),""==t.budget_year&&(t.errors.budget_year=!0,s=!1,r="กรุณาเลือกปีงบประมาณ",$(i).find("div[id='el_explode_budget_year']").html(r)),""==t.month&&(t.errors.month=!0,s=!1,r="กรุณาเลือกเดือน",$(i).find("div[id='el_explode_month']").html(r)),""==t.bi_weekly&&(t.errors.bi_weekly=!0,s=!1,r="กรุณาเลือกปักษ์",$(i).find("div[id='el_explode_bi_weekly']").html(r)),s){e.next=15;break}return e.abrupt("return");case 15:t.loading=!0,i.submit();case 17:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(s,a){var l=e.apply(t,i);function n(e){r(l,s,a,n,o,"next",e)}function o(e){r(l,s,a,n,o,"throw",e)}n(void 0)}))})()},setError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style="border: 1px solid red;"},resetError:function(e){(this.$refs[e].$refs.reference?this.$refs[e].$refs.reference.$refs.input:this.$refs[e].$refs.textarea?this.$refs[e].$refs.textarea:this.$refs[e].$refs.input.$refs?this.$refs[e].$refs.input.$refs.input:this.$refs[e].$refs.input).style=""},checkSearchCondition:function(){var e=this;if(e.valid_action)return swal({title:"บันทึกหรือยกเลิกการเปลี่ยนแปลงข้อมูล",text:'<span style="font-size: 16px; text-align: left;"> กรุณาทำการบันทึกหรือยกเลิกการเปลี่ยนแปลงให้เรียบร้อย </span>',type:"warning",html:!0}),e.budget_year=e.set_budget_year,e.month=e.set_month,e.bi_weekly=e.set_bi_weekly,void(e.product_type=e.set_product_type);e.edit_flag="",e.show_flag=!0,e.set_budget_year!=e.budget_year||e.set_month!=e.month||e.set_bi_weekly!=e.bi_weekly||e.set_budget_year==e.budget_year&&""==e.month&&""==e.bi_weekly?(e.edit_flag=!1,e.show_flag=!1):e.set_budget_year!=e.budget_year||e.set_month!=e.month||""!=e.bi_weekly&&e.set_bi_weekly==e.bi_weekly?e.set_budget_year==e.budget_year&&e.set_month==e.month&&e.set_bi_weekly==e.bi_weekly&&e.set_product_type!=e.product_type&&(e.edit_flag=!1,e.show_flag=!1):(e.edit_flag=!1,e.show_flag=!1)},updateEditFlag:function(e){this.valid_action=e}}};const n=(0,i(51900).Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"ibox float-e-margins mb-2"},[i("div",{staticClass:"row col-12 mb-2"},[e._m(0),e._v(" "),i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2 text-right"},[i("button",{staticClass:"btn btn-white btn-lg",on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[i("i",{staticClass:"fa fa-search"}),e._v(" ค้นหา\n                ")]),e._v(" "),i("a",{staticClass:"btn btn-white btn-lg",attrs:{href:e.url.submit_p03}},[e._v("ล้าง")])])]),e._v(" "),i("div",{staticClass:"card border-primary mb-3 mt-3"},[i("div",{staticClass:"card-body"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8 b-r"},[i("form",{attrs:{id:"machine-form",action:e.url.submit_p03}},[i("div",{staticClass:"row"},[i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-3 col-sm-6 col-xs-6 mt-2"},[i("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" ปีงบประมาณ ")]),e._v(" "),i("div",{staticClass:"input-group "},[i("input",{attrs:{type:"hidden",name:"search[budget_year]"},domProps:{value:e.budget_year}}),e._v(" "),i("el-select",{ref:"budget_year",attrs:{size:"medium",placeholder:"ปีงบประมาณ",filterable:""},on:{change:e.getMonth},model:{value:e.budget_year,callback:function(t){e.budget_year=t},expression:"budget_year"}},e._l(e.budgetYears,(function(e,t){return i("el-option",{key:t,attrs:{label:e.thai_year,value:e.thai_year}})})),1)],1),e._v(" "),i("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_budget_year"}})]),e._v(" "),i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[i("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" เดือน ")]),e._v(" "),i("div",{},[i("input",{attrs:{type:"hidden",name:"search[month]"},domProps:{value:e.month}}),e._v(" "),e.budget_year?i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.m_loading,expression:"m_loading"}],ref:"month",attrs:{size:"medium",placeholder:"เดือน",filterable:""},on:{change:e.getBiWeeklySeq},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthLists,(function(e,t){return i("el-option",{key:t,attrs:{label:e.thai_month,value:e.period_num}})})),1):i("el-select",{ref:"month",attrs:{size:"medium",placeholder:"เดือน",disabled:""},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthLists,(function(e,t){return i("el-option",{key:t,attrs:{label:e.thai_month,value:e.period_num}})})),1)],1),e._v(" "),i("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_month"}})]),e._v(" "),i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-2 col-md-2 col-sm-6 col-xs-6 mt-2"},[i("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" ปักษ์ ")]),e._v(" "),i("div",{},[i("input",{attrs:{type:"hidden",name:"search[bi_weekly]"},domProps:{value:e.bi_weekly}}),e._v(" "),e.month?i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.b_loading,expression:"b_loading"}],ref:"bi_weekly",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",filterable:""},on:{change:e.getBiWeeklyDetail},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return i("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1):i("el-select",{ref:"bi_weekly",attrs:{clearable:"",size:"medium",placeholder:"ปักษ์",disabled:""},model:{value:e.bi_weekly,callback:function(t){e.bi_weekly=t},expression:"bi_weekly"}},e._l(e.biWeeklyLists,(function(e,t){return i("el-option",{key:t,attrs:{label:e.biweekly,value:e.biweekly}})})),1)],1),e._v(" "),i("div",{staticClass:"error_msg text-left",attrs:{id:"el_explode_bi_weekly"}})]),e._v(" "),i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-3 col-md-2 col-sm-6 col-xs-6 mt-2"},[i("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" ประจำวันที่ ")]),e._v(" "),e.bi_weekly_detail?i("div",{staticClass:"p-1",staticStyle:{"font-size":"14px"}},[e._v("\n                                        "+e._s(e.bi_weekly_detail)+"\n                                        ")]):e._e()])]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-10 col-md-10 col-sm-6 col-xs-6 mt-2"},[i("label",{staticClass:" tw-font-bold tw-uppercase mb-1"},[e._v(" ประมาณกำลังการผลิต ")]),e._v(" "),i("div",[i("input",{attrs:{type:"hidden",name:"search[product_type]"},domProps:{value:e.product_type}}),e._v(" "),i("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.changeProductType()}},model:{value:e.product_type,callback:function(t){e.product_type=t},expression:"product_type"}},[e._l(e.productTypes,(function(t,s){return[i("el-radio",{staticClass:"mr-1 mb-1",attrs:{label:t.lookup_code,border:""}},[e._v("\n                                                    "+e._s(t.meaning)+"\n                                                ")])]}))],2)],1)])])])]),e._v(" "),i("div",{staticClass:"col-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("dl",{staticClass:"row mb-1"},[e._m(1),e._v(" "),i("div",{staticClass:"col-sm-6 text-sm-left"},[i("dd",{staticClass:"mb-1"},[e.header&&e.show_flag?i("div",[e._v("\n                                                "+e._s(e.header.created_at_format)+"\n                                            ")]):e._e()])])]),e._v(" "),i("dl",{staticClass:"row mb-1"},[e._m(2),e._v(" "),i("div",{staticClass:"col-sm-6 text-sm-left"},[i("dd",{staticClass:"mb-1"},[e.header&&e.show_flag?i("div",[e._v("\n                                                "+e._s(e.header.updated_at_format?e.header.updated_at_format:e.header.created_at_format)+"\n                                            ")]):e._e()])])]),e._v(" "),i("dl",{staticClass:"row mb-1"},[e._m(3),e._v(" "),i("div",{staticClass:"col-sm-6 text-sm-left"},[i("dd",{staticClass:"mb-1"},[e.header&&e.show_flag?i("div",[e._v("\n                                                "+e._s(e.creator)+"\n                                            ")]):e._e()])])])])])])])])]),e._v(" "),e.search?[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12 mt-3"},[i("lines-machine-biweekly-component",{attrs:{"p-lines":e.lines,"p-res-plan-date":e.resPlanDate,"p-efficiency-machine-percent":e.efficiencyMachine,"p-efficiency-product-percent":e.efficiencyProduct,"p-working-hour":e.workingHour,"p-working-holiday":e.workingHoliday,search:e.search,"p-eamperformance-machines":e.eamperformanceMachines,"p-efficiency-machines":e.efficiencyMachines,"p-efficiency-products":e.efficiencyProducts,"p-machine-maintenances":e.machineMaintenances,"p-machine-downtimes":e.machineDowntimes,"p-holidays":e.holidays,"p-header":e.header,"p-machine-groups":e.machineGroups,"p-machine-desc":e.machineDesc,"p-machine-dt-lines":e.machineDtLines,"p-sale-forecasts":e.pSaleForecasts,"p-sale-forecasts-html":e.saleForecastsHtml,"p-edit-flag":e.edit_flag,"p-show-flag":e.show_flag,"p-date-format":e.dateFormat,"btn-trans":e.btnTrans,url:e.url,"p-efficiency-full-products":e.efficiencyFullProducts,"version-lists":e.versionLists,holidaysHtml:e.holidaysHtml,lastUpdate:e.lastUpdate},on:{updateEditFlag:e.updateEditFlag}})],1)])]:e._e()],2)])}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group pl-2 pr-2 mb-0 col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2"},[i("h3",[e._v(" ประมาณการกำลังผลิตประจำปักษ์ ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-6 text-sm-right"},[i("dt",[e._v("วันที่สร้าง:")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-6 text-sm-right"},[i("dt",{attrs:{title:""}},[e._v("วันที่แก้ไขล่าสุด:")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-6 text-sm-right"},[i("dt",[e._v("ผู้บันทึก:")])])}],!1,null,null,null).exports}}]);