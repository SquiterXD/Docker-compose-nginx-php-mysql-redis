(self.webpackChunk=self.webpackChunk||[]).push([[4575],{91205:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var o=a(23645),s=a.n(o)()((function(t){return t[1]}));s.push([t.id,".el-select-dropdown{z-index:9999!important}.sticky-col{position:-webkit-sticky;position:sticky;background-color:#dcdfdb;z-index:9999;top:0}.error-message{display:flex;color:#ec4958;margin-top:5px;strong{margin-right:5px}}.el-date-picker{z-index:9999!important}",""]);const i=s},22199:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var o=a(23645),s=a.n(o)()((function(t){return t[1]}));s.push([t.id,".el-form-item__content{line-height:40px;position:relative;font-size:14px;margin-left:0!important}.el-form-item__error{color:#f56c6c;font-size:12px;line-height:1;padding-top:4px;position:relative;top:100%;left:0}",""]);const i=s},84575:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});const o={props:["btnTrans","periodYears"],data:function(){return{monthList:[],isLoading:!1,form:{period_year:"",period_no:""},rules:{period_year:[{required:!0,message:"กรุณาเลือก ปีบัญชี",trigger:"change"}],period_no:[{required:!0,message:"กรุณาเลือก งวดบัญชี",trigger:"change"}]}}},methods:{openModalCreate:function(){$("#modal-create").modal("show")},closeModalCreate:function(t){$("#modal-create").modal("hide")},clickSave:function(){console.log("save");var t=this;t.loading=!0,this.$refs.save_data.validate((function(e){if(e){var a={form:t.form};axios.post("/ct/ajax/stamp-adjust/store-process",a).then((function(e){t.loading=!1,"S"==e.data.status?swal({title:"Success",text:"บันทึกข้อมูลเรียบร้อยแล้ว",timer:3e3,type:"success",showCancelButton:!1,showConfirmButton:!0},(function(e){e&&t.setUrlParams()})):swal({title:"Warning",text:e.data.msg,type:"warning",showCancelButton:!1})})).catch((function(t){swal({title:"Warning",text:"ไม่สามารถบันทึกข้อมูลได้ เนื่องจากมีข้อผิดพลาด",type:"warning",showCancelButton:!1})})).then((function(){t.loading=!1}))}}))},getMonth:function(t){var e=this;this.monthList=[],this.isLoading=!0,axios.get("/ct/ajax/stamp_adj/get-list-month",{params:{period_year:this.form.period_year}}).then((function(t){e.monthList=t.data,e.isLoading=!1}))},setUrlParams:function(){var t=this,e=this.monthList.find((function(e){return e.period_no==t.form.period_no})),a=new URLSearchParams(window.location.search);a.set("period_year",this.form.period_year),a.set("period_name",e.period_name),window.history.replaceState(null,null,"?"+a.toString()),this.closeModalCreate(),location.reload()}}};var s=a(93379),i=a.n(s),r=a(91205),n={insert:"head",singleton:!1};i()(r.Z,n);r.Z.locals;var l=a(22199),c={insert:"head",singleton:!1};i()(l.Z,c);l.Z.locals;const d=(0,a(51900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"save_data",staticClass:"demo-dynamic form_table_line",attrs:{model:t.form,"label-width":"120px"}},[a("button",{class:t.btnTrans.create.class+" btn-md tw-w-25",attrs:{type:"button"},on:{click:function(e){return t.openModalCreate()}}},[a("i",{class:t.btnTrans.create.icon}),t._v(" "+t._s(t.btnTrans.create.text)+"\n        ")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"modal fade",attrs:{id:"modal-create",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"90%","max-width":"950px"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h1",{staticClass:"modal-title m-0"},[t._v(" สร้างต้นทุนขายแยกแสตมป์และกองทุน ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),a("span",{staticClass:"sr-only"},[t._v("Close")])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"modal-body mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-5 col-form-label tw-font-bold tw-pt-0 required mt-2 text-right"},[t._v(" ปีบัญชี ")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("el-form-item",{attrs:{prop:"period_year",rules:t.rules.period_year}},[a("el-select",{attrs:{placeholder:"ปีบัญชี",clearable:"",filterable:"",remote:""},on:{change:t.getMonth},model:{value:t.form.period_year,callback:function(e){t.$set(t.form,"period_year",e)},expression:"form.period_year"}},t._l(t.periodYears,(function(t,e){return a("el-option",{key:e,attrs:{label:t.period_year_thai,value:t.period_year}})})),1)],1)],1)])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-3 col-form-label tw-font-bold tw-pt-0 required mt-2 text-right"},[t._v(" งวดบัญชี ")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("el-form-item",{attrs:{prop:"period_no",rules:t.rules.period_no}},[a("el-select",{attrs:{placeholder:"งวดบัญชี",clearable:"",filterable:"",remote:"",disabled:t.monthList<1},model:{value:t.form.period_no,callback:function(e){t.$set(t.form,"period_no",e)},expression:"form.period_no"}},t._l(t.monthList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.month_thai,value:t.period_no}})})),1)],1)],1)])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{class:t.btnTrans.create.class+" btn-md tw-w-25",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.clickSave()}}},[a("i",{class:t.btnTrans.create.icon}),t._v("\n                                "+t._s(t.btnTrans.create.text)+"\n                            ")]),t._v(" "),a("button",{class:t.btnTrans.cancel.class+" btn-md tw-w-25",attrs:{type:"button"},on:{click:function(e){return t.closeModalCreate()}}},[a("i",{class:t.btnTrans.cancel.icon}),t._v(" "+t._s(t.btnTrans.cancel.text)+"\n                            ")])])])])])])])],1)}),[],!1,null,null,null).exports}}]);